/*! For license information please see main.b6b795f7.js.LICENSE.txt */
(()=>{"use strict";var t={8029:(t,e,n)=>{n.d(e,{BR:()=>c,Us:()=>u});var r=n(4544),s=n(8878),i=n(3508),a=n(6073),o=n(5270);function l(){const t=!0,[e,n]=(0,s.useState)(t),r=(0,s.useCallback)((t=>{n(!!t)}),[t]);return{canUse:t,wants:e,toggle:r}}function u(t=new r.Q2){const[e,n]=(0,s.useState)("system");return{monaco:l(),settings:(0,i.s)(),filePicker:(0,a.g3)(),tracking:(0,o.z1)(),theme:e,setTheme:n}}const c=(0,s.createContext)({monaco:{canUse:!0,wants:!0,toggle(){}},filePicker:{close(){},open(){},select:t=>Promise.reject(""),isOpen:!1,suffix:void 0},settings:{close(){},open(){},isOpen:!1},tracking:{canTrack:!1,haveAsked:!1,accept(){},reject(){},trackEvent(){},trackPage(){}},theme:"system",setTheme(){}})},384:(t,e,n)=>{n.d(e,{NQ:()=>ws,qK:()=>_s});var r=n(5874),s=n(7076),i=n(4666),a=n(7844),o=n(8878),l=n(9646),u=n(910);class c{asm={instructions:[]};current=-1;done=!1;symbols=[];variables=new Map;lines=[];lineNumbers=[];getResult(){return this.lines.join("\n")}load(t,e){this.symbols=[{name:"R0",value:"0"},{name:"R1",value:"1"},{name:"R2",value:"2"},{name:"...",value:""},{name:"R15",value:"15"},{name:"SCREEN",value:s.L7.toString()},{name:"KBD",value:s.ky.toString()}],this.variables.clear(),this.asm=t;const n=(0,i.EU)(t,((t,e,n)=>{n?this.variables.set(e,{name:t,isHidden:!0}):this.symbols.push({name:t,value:e.toString()})}));return(0,r.ys)(n)?n:(t.instructions=t.instructions.filter((({type:t})=>"L"!==t)),this.resolveLineNumbers(e),this.reset(),(0,r.Ok)())}resolveLineNumbers(t){this.lineNumbers=Array(t);let e=0;for(const n of this.asm.instructions)"A"!==n.type&&"C"!==n.type||void 0==n.span||(this.lineNumbers[n.span.line]=e,e+=1)}step(t){if(this.current>=this.asm.instructions.length-1)return;this.current+=1;const e=this.asm.instructions[this.current];if("A"===e.type||"C"===e.type){t.sourceHighlight=e.span;const n=(0,i.ld)(this.asm.instructions[this.current]);if(void 0===n)return;if(this.lines.push(`${(0,a.e5)(n)}`),t.resultHighlight={start:17*this.current,end:17*(this.current+1),line:-1},t.sourceHighlight&&t.highlightMap.set(t.sourceHighlight,t.resultHighlight),(0,i.J$)(e)){const t=this.variables.get(e.value);void 0!=t&&t.isHidden&&(this.symbols.push({name:t.name,value:e.value.toString()}),t.isHidden=!1)}this.current===this.asm.instructions.length-1&&(this.done=!0)}}resetSymbols(){for(const e of this.variables.values())e.isHidden=!0;const t=new Set(Array.from(this.variables.values()).map((t=>t.name)));this.symbols=this.symbols.filter((e=>!t.has(e.name)))}reset(){this.current=-1,this.lines=[],this.done=!1,this.resetSymbols()}}function h(){const{setStatus:t,fs:e}=(0,o.useContext)(u.L),n=(0,o.useRef)((()=>{})),{initialState:s,reducers:a,actions:h}=(0,o.useMemo)((()=>function(t,e,n){const s=new c,a={resultHighlight:void 0,sourceHighlight:void 0,highlightMap:new Map};let o,l=!0,u=!1,h=!1,d=!1;const p={setAsm(t,{asm:e,path:n}){t.asm=e,n&&(t.path=n)},setCmp(t,{cmp:n,name:r}){t.compare=n,t.compareName=r,e("Loaded compare file")},setError(t,n){n&&e(n.message),t.error=n},update(t){t.translating=h,t.current=s.current,t.result=s.getResult(),t.symbols=Array.from(s.symbols),t.lineNumbers=Array.from(s.lineNumbers),t.sourceHighlight=a.sourceHighlight,t.resultHighlight=a.resultHighlight,t.compareError=d},compare(t){const n=t.result.split("\n"),r=t.compare.split("\n").filter((t=>""!=t.trim()));if(n.length!=r.length)return d=!0,void e("Comparison failed - different lengths");for(let s=0;s<r.length;s++)if(n[s]!==r[s])return e(`Comparison failure: Line ${s}`),d=!0,void(a.resultHighlight={start:17*s,end:17*(s+1),line:-1});e("Comparison successful")},setTitle(t,e){t.title=e},updateConfig(t,e){t.config={...t.config,...e}}},f={async loadAsm(e){o=e;const n=await t.readFile(o);f.setAsm(n,o)},setAsm(t,e){t=t.replace(/\r\n/g,"\n"),n.current({action:"setAsm",payload:{asm:t,path:e}}),h=!1,this.saveAsm(t),requestAnimationFrame((()=>{this.compileAsm(t)}))},saveAsm(e){o&&t.writeFile(o,e)},compileAsm(t){this.reset();const a=i.y0.parse(t);if((0,r.ys)(a))return n.current({action:"setError",payload:(0,r._)(a)}),void(u=!1);const o=s.load((0,r.Ok)(a),t.split("\n").length);if((0,r.ys)(o))return n.current({action:"setError",payload:(0,r._)(o)}),void(u=!1);u=s.asm.instructions.length>0,e(""),n.current({action:"setError"}),n.current({action:"update"})},setAnimate(t){l=t},step:()=>(u&&(h=!0),s.step(a),(l||s.done)&&n.current({action:"update"}),s.done&&e("Translation done."),s.done),compare(){n.current({action:"compare"}),this.updateHighlight(a.resultHighlight?.start??0,!1),n.current({action:"update"})},updateHighlight(t,e){if(!d){for(const[n,r]of a.highlightMap)(e&&n.start<=t&&t<=n.end||!e&&r.start<=t&&t<=r.end)&&(a.sourceHighlight=n,a.resultHighlight=r);n.current({action:"update"})}},resetHighlightInfo(){a.sourceHighlight=void 0,a.resultHighlight=void 0,a.highlightMap.clear()},reset(){d=!1,h=!1,e("Reset"),s.reset(),this.resetHighlightInfo(),n.current({action:"update"})},clear(){this.setAsm(""),n.current({action:"setTitle",payload:void 0}),n.current({action:"setCmp",payload:""}),this.reset()},overrideState(t){if(this.resetHighlightInfo(),this.setAsm(t.asm,t.path),n.current({action:"setCmp",payload:{cmp:t.compare,name:t.compareName}}),t.translating)for(let e=0;e<=t.current;e++)this.step();n.current({action:"update"})}};return{initialState:{asm:"",path:void 0,translating:!1,current:-1,resultHighlight:void 0,sourceHighlight:void 0,symbols:[],result:"",compare:"",compareName:void 0,lineNumbers:[],compareError:!1,config:{speed:2}},reducers:p,actions:f}}(e,t,n)),[t,n]),[d,p]=(0,l.A)(a,s);return n.current=p,{state:d,dispatch:n,actions:h}}var d=n(3180);class p{msg;span;constructor(t,e,n,r){this.msg=r,this.span={start:e,end:n,line:t}}toString=()=>this.constructor.name+`(${this.span.line}:${this.span.start}:${this.span.end} ${this.msg})`}class f extends p{}class m extends p{constructor(t,e,n,r){super(t,e,n,`Subroutine ${r} is already defined.`)}}class g extends p{constructor(t,e,n,r){super(t,e,n,`Class ${r} is already defined.`)}}class y extends p{constructor(t,e,n,r,s){super(t,e,n,`Class name ${s} doesn't match file name ${r}`)}}class v extends p{constructor(t,e,n,r){super(t,e,n,"Duplicated local variable, field, argument or static variable "+r)}}class b extends p{constructor(t,e,n,r){super(t,e,n,"Undeclared variable "+r)}}class x extends p{constructor(t,e,n,r){super(t,e,n,`Class ${r} doesn't exist`)}}class S extends p{constructor(t,e,n){super(t,e,n,"A non void subroutine must return a value")}}class w extends p{constructor(t,e,n){super(t,e,n,"Cannot return a value from a void subroutine"),Object.setPrototypeOf(this,w.prototype)}}class _ extends p{constructor(t,e,n,r){super(t,e,n,`Subroutine ${r}: not all code paths return a value`),Object.setPrototypeOf(this,_.prototype)}}class E extends p{constructor(t,e,n,r,s,i){super(t,e,n,`Subroutine ${r} (declared to accept ${s} parameter(s)) called with  ${i} parameter(s)`),Object.setPrototypeOf(this,E.prototype)}}class T extends p{constructor(t,e,n,r,s){super(t,e,n,`Can't find subroutine '${r}'${s?` in ${s}`:""}`),Object.setPrototypeOf(this,T.prototype)}}class A extends p{constructor(t,e,n,r){super(t,e,n,`Method ${r} was called as a function/constructor`),Object.setPrototypeOf(this,A.prototype)}}class I extends p{constructor(t,e,n,r){super(t,e,n,`Function or constructor ${r} was called as a method`),Object.setPrototypeOf(this,I.prototype)}}class C extends p{constructor(t,e,n){super(t,e,n,"The return type of a constructor must be of the class type"),Object.setPrototypeOf(this,C.prototype)}}class R extends p{constructor(t,e,n){super(t,e,n,"Unreachable code"),Object.setPrototypeOf(this,R.prototype)}}class k extends p{constructor(t,e,n){super(t,e,n,"A constructor must return 'this'"),Object.setPrototypeOf(this,k.prototype)}}class L extends p{constructor(t,e,n,r){super(t,e,n,`${-1!="aeiou".indexOf(r.substring(0,1))?"an":"a"} ${r} value is expected`),Object.setPrototypeOf(this,L.prototype)}}class N extends p{constructor(t,e,n,r,s,i){super(t,e,n,`Integer constant(${r}) is out of range. Min value is ${s} and max value is ${i}`),Object.setPrototypeOf(this,N.prototype)}}class O extends p{constructor(t,e,n){super(t,e,n,"Field can't be referenced in a function"),Object.setPrototypeOf(this,O.prototype)}}class P extends p{constructor(t,e,n){super(t,e,n,"this can't be referenced in a function"),Object.setPrototypeOf(this,P.prototype)}}var F,D;!function(t){t[t.Constructor=0]="Constructor",t[t.Function=1]="Function",t[t.Method=2]="Method"}(F||(F={})),function(t){t[t.Static=0]="Static",t[t.This=1]="This",t[t.Argument=2]="Argument",t[t.Local=3]="Local"}(D||(D={}));const M={[D.Static]:"static",[D.This]:"this",[D.Argument]:"argument",[D.Local]:"local"};function U(t){if(void 0===M[t])throw new Error(`Unknown scope type: ${t}`);return M[t]}class j{scopes={[D.Static]:[],[D.This]:[],[D.Argument]:[],[D.Local]:[]};static scopesLookupOrder=[D.Local,D.Argument,D.This,D.Static];lookup(t){for(const e of j.scopesLookupOrder){const n=this.scopes[e].find((e=>e.name==t));if(void 0!=n)return n}}defineArgument(t,e,n){let r=this.scopes[D.Argument].length;n&&r++,this.scopes[D.Argument].push({name:t,type:e,scope:D.Argument,index:r})}define(t,e,n){if(t==D.Argument)throw new Error("Please use defineArgument method to define function arguments");this.scopes[t].push({name:e,type:n,scope:t,index:this.scopes[t].length})}popStack(){const t={arguments:this.scopes[D.Argument],locals:this.scopes[D.Local]};return this.scopes[D.Local]=[],this.scopes[D.Argument]=[],t}setSubroutineScope(t){this.scopes[D.Argument]=t.arguments,this.scopes[D.Local]=t.locals}fieldsCount(){return this.scopes[D.This].length}}const z=["int","boolean","char"],V=-32768,B=32767,$={"Array.dispose":0,"Array.init":0,"Array.new":1,"Keyboard.init":0,"Keyboard.keyPressed":0,"Keyboard.readChar":0,"Keyboard.readInt":1,"Keyboard.readLine":1,"Math.abs":1,"Math.divide":2,"Math.init":0,"Math.max":2,"Math.min":2,"Math.multiply":2,"Math.sqrt":1,"Memory.alloc":1,"Memory.deAlloc":1,"Memory.init":0,"Memory.peek":1,"Memory.poke":2,"Output.backSpace":0,"Output.init":0,"Output.moveCursor":2,"Output.printChar":1,"Output.printInt":1,"Output.println":0,"Output.printString":1,"Screen.clearScreen":0,"Screen.drawCircle":3,"Screen.drawLine":4,"Screen.drawPixel":2,"Screen.drawRectangle":4,"Screen.init":0,"Screen.setColor":1,"String.appendChar":1,"String.backSpace":0,"String.charAt":2,"String.dispose":0,"String.doubleQuote":0,"String.eraseLastChar":0,"String.init":0,"String.intValue":0,"String.length":0,"String.new":1,"String.newLine":0,"String.setCharAt":1,"String.setInt":1,"Sys.error":1,"Sys.halt":0,"Sys.wait":1},H=["Array","Keyboard","Math","Memory","Output","Screen","String","Sys"].reduce(((t,e)=>({...t,[e]:{}})),{}),G=Object.keys($).reduce(((t,e)=>({...t,[e]:{subroutineInfo:{paramsCount:$[e],type:F.Function}}})),H);var W={763:()=>{}},q={};function K(t){var e=q[t];if(void 0!==e)return e.exports;var n=q[t]={exports:{}};return W[t](n,n.exports,K),n.exports}K.d=(t,e)=>{for(var n in e)K.o(e,n)&&!K.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},K.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Y={};K.d(Y,{MG:()=>Vt,fr:()=>xe,sR:()=>gn,Zo:()=>vn,iH:()=>_n,rt:()=>Te,jB:()=>In,M8:()=>tn,$t:()=>mn,aq:()=>dn,pG:()=>Se,eP:()=>cn,KU:()=>un,zW:()=>bn,IX:()=>dt,mY:()=>pt,a7:()=>zt,JG:()=>ke,ay:()=>Be,X2:()=>qe,WU:()=>sn,Uw:()=>an,gw:()=>on,iX:()=>Rn,re:()=>Ye,Pg:()=>Nn,tD:()=>Qe,R$:()=>We,Dj:()=>Ce,m7:()=>kt,NZ:()=>Tt,xo:()=>At,ou:()=>Q,qC:()=>On,mD:()=>st,Ay:()=>Un});class Q{constructor(){this.source=null,this.type=null,this.channel=null,this.start=null,this.stop=null,this.tokenIndex=null,this.line=null,this.column=null,this._text=null}getTokenSource(){return this.source[0]}getInputStream(){return this.source[1]}get text(){return this._text}set text(t){this._text=t}}function X(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!(t[n]===e[n]||t[n].equals&&t[n].equals(e[n])))return!1;return!0}Q.INVALID_TYPE=0,Q.EPSILON=-2,Q.MIN_USER_TOKEN_TYPE=1,Q.EOF=-1,Q.DEFAULT_CHANNEL=0,Q.HIDDEN_CHANNEL=1;const J=Math.round(Math.random()*Math.pow(2,32));function Z(t){if(!t)return 0;const e=typeof t,n="string"===e?t:!("object"!==e||!t.toString)&&t.toString();if(!n)return 0;let r,s;const i=3&n.length,a=n.length-i;let o=J;const l=3432918353,u=461845907;let c=0;for(;c<a;)s=255&n.charCodeAt(c)|(255&n.charCodeAt(++c))<<8|(255&n.charCodeAt(++c))<<16|(255&n.charCodeAt(++c))<<24,++c,s=(65535&s)*l+(((s>>>16)*l&65535)<<16)&4294967295,s=s<<15|s>>>17,s=(65535&s)*u+(((s>>>16)*u&65535)<<16)&4294967295,o^=s,o=o<<13|o>>>19,r=5*(65535&o)+((5*(o>>>16)&65535)<<16)&4294967295,o=27492+(65535&r)+((58964+(r>>>16)&65535)<<16);switch(s=0,i){case 3:s^=(255&n.charCodeAt(c+2))<<16;case 2:s^=(255&n.charCodeAt(c+1))<<8;case 1:s^=255&n.charCodeAt(c),s=(65535&s)*l+(((s>>>16)*l&65535)<<16)&4294967295,s=s<<15|s>>>17,s=(65535&s)*u+(((s>>>16)*u&65535)<<16)&4294967295,o^=s}return o^=n.length,o^=o>>>16,o=2246822507*(65535&o)+((2246822507*(o>>>16)&65535)<<16)&4294967295,o^=o>>>13,o=3266489909*(65535&o)+((3266489909*(o>>>16)&65535)<<16)&4294967295,o^=o>>>16,o>>>0}class tt{constructor(){this.count=0,this.hash=0}update(){for(let t=0;t<arguments.length;t++){const e=arguments[t];if(null!=e)if(Array.isArray(e))this.update.apply(this,e);else{let t=0;switch(typeof e){case"undefined":case"function":continue;case"number":case"boolean":t=e;break;case"string":t=Z(e);break;default:e.updateHashCode?e.updateHashCode(this):console.log("No updateHashCode for "+e.toString());continue}t*=3432918353,t=t<<15|t>>>17,t*=461845907,this.count=this.count+1;let n=this.hash^t;n=n<<13|n>>>19,n=5*n+3864292196,this.hash=n}}}finish(){let t=this.hash^4*this.count;return t^=t>>>16,t*=2246822507,t^=t>>>13,t*=3266489909,t^=t>>>16,t}static hashStuff(){const t=new tt;return t.update.apply(t,arguments),t.finish()}}function et(t){return t?"string"==typeof t?Z(t):t.hashCode():-1}function nt(t,e){return t&&t.equals?t.equals(e):t===e}function rt(t){return null===t?"null":t}function st(t){return Array.isArray(t)?"["+t.map(rt).join(", ")+"]":"null"}class it{constructor(t,e){this.buckets=new Array(16),this.threshold=Math.floor(12),this.itemCount=0,this.hashFunction=t||et,this.equalsFunction=e||nt}get(t){if(null==t)return t;const e=this._getBucket(t);if(!e)return null;for(const n of e)if(this.equalsFunction(n,t))return n;return null}add(t){return this.getOrAdd(t)===t}getOrAdd(t){this._expand();const e=this._getSlot(t);let n=this.buckets[e];if(!n)return n=[t],this.buckets[e]=n,this.itemCount++,t;for(const r of n)if(this.equalsFunction(r,t))return r;return n.push(t),this.itemCount++,t}has(t){return null!=this.get(t)}values(){return this.buckets.filter((t=>null!=t)).flat(1)}toString(){return st(this.values())}get length(){return this.itemCount}_getSlot(t){return this.hashFunction(t)&this.buckets.length-1}_getBucket(t){return this.buckets[this._getSlot(t)]}_expand(){if(this.itemCount<=this.threshold)return;const t=this.buckets,e=2*this.buckets.length;this.buckets=new Array(e),this.threshold=Math.floor(.75*e);for(const n of t)if(n)for(const t of n){const e=this._getSlot(t);let n=this.buckets[e];n||(n=[],this.buckets[e]=n),n.push(t)}}}class at{hashCode(){const t=new tt;return this.updateHashCode(t),t.finish()}evaluate(t,e){}evalPrecedence(t,e){return this}static andContext(t,e){if(null===t||t===at.NONE)return e;if(null===e||e===at.NONE)return t;const n=new ot(t,e);return 1===n.opnds.length?n.opnds[0]:n}static orContext(t,e){if(null===t)return e;if(null===e)return t;if(t===at.NONE||e===at.NONE)return at.NONE;const n=new lt(t,e);return 1===n.opnds.length?n.opnds[0]:n}}class ot extends at{constructor(t,e){super();const n=new it;t instanceof ot?t.opnds.map((function(t){n.add(t)})):n.add(t),e instanceof ot?e.opnds.map((function(t){n.add(t)})):n.add(e);const r=ut(n);if(r.length>0){let t=null;r.map((function(e){(null===t||e.precedence<t.precedence)&&(t=e)})),n.add(t)}this.opnds=Array.from(n.values())}equals(t){return this===t||t instanceof ot&&X(this.opnds,t.opnds)}updateHashCode(t){t.update(this.opnds,"AND")}evaluate(t,e){for(let n=0;n<this.opnds.length;n++)if(!this.opnds[n].evaluate(t,e))return!1;return!0}evalPrecedence(t,e){let n=!1;const r=[];for(let i=0;i<this.opnds.length;i++){const s=this.opnds[i],a=s.evalPrecedence(t,e);if(n|=a!==s,null===a)return null;a!==at.NONE&&r.push(a)}if(!n)return this;if(0===r.length)return at.NONE;let s=null;return r.map((function(t){s=null===s?t:at.andContext(s,t)})),s}toString(){const t=this.opnds.map((t=>t.toString()));return(t.length>3?t.slice(3):t).join("&&")}}class lt extends at{constructor(t,e){super();const n=new it;t instanceof lt?t.opnds.map((function(t){n.add(t)})):n.add(t),e instanceof lt?e.opnds.map((function(t){n.add(t)})):n.add(e);const r=ut(n);if(r.length>0){const t=r.sort((function(t,e){return t.compareTo(e)})),e=t[t.length-1];n.add(e)}this.opnds=Array.from(n.values())}equals(t){return this===t||t instanceof lt&&X(this.opnds,t.opnds)}updateHashCode(t){t.update(this.opnds,"OR")}evaluate(t,e){for(let n=0;n<this.opnds.length;n++)if(this.opnds[n].evaluate(t,e))return!0;return!1}evalPrecedence(t,e){let n=!1;const r=[];for(let s=0;s<this.opnds.length;s++){const i=this.opnds[s],a=i.evalPrecedence(t,e);if(n|=a!==i,a===at.NONE)return at.NONE;null!==a&&r.push(a)}return n?(0===r.length||r.map((function(t){return t})),null):this}toString(){const t=this.opnds.map((t=>t.toString()));return(t.length>3?t.slice(3):t).join("||")}}function ut(t){const e=[];return t.values().map((function(t){t instanceof at.PrecedencePredicate&&e.push(t)})),e}function ct(t,e){if(null===t){const t={state:null,alt:null,context:null,semanticContext:null};return e&&(t.reachesIntoOuterContext=0),t}{const n={};return n.state=t.state||null,n.alt=void 0===t.alt?null:t.alt,n.context=t.context||null,n.semanticContext=t.semanticContext||null,e&&(n.reachesIntoOuterContext=t.reachesIntoOuterContext||0,n.precedenceFilterSuppressed=t.precedenceFilterSuppressed||!1),n}}class ht{constructor(t,e){this.checkContext(t,e),t=ct(t),e=ct(e,!0),this.state=null!==t.state?t.state:e.state,this.alt=null!==t.alt?t.alt:e.alt,this.context=null!==t.context?t.context:e.context,this.semanticContext=null!==t.semanticContext?t.semanticContext:null!==e.semanticContext?e.semanticContext:at.NONE,this.reachesIntoOuterContext=e.reachesIntoOuterContext,this.precedenceFilterSuppressed=e.precedenceFilterSuppressed}checkContext(t,e){null!==t.context&&void 0!==t.context||null!==e&&null!==e.context&&void 0!==e.context||(this.context=null)}hashCode(){const t=new tt;return this.updateHashCode(t),t.finish()}updateHashCode(t){t.update(this.state.stateNumber,this.alt,this.context,this.semanticContext)}equals(t){return this===t||t instanceof ht&&this.state.stateNumber===t.state.stateNumber&&this.alt===t.alt&&(null===this.context?null===t.context:this.context.equals(t.context))&&this.semanticContext.equals(t.semanticContext)&&this.precedenceFilterSuppressed===t.precedenceFilterSuppressed}hashCodeForConfigSet(){const t=new tt;return t.update(this.state.stateNumber,this.alt,this.semanticContext),t.finish()}equalsForConfigSet(t){return this===t||t instanceof ht&&this.state.stateNumber===t.state.stateNumber&&this.alt===t.alt&&this.semanticContext.equals(t.semanticContext)}toString(){return"("+this.state+","+this.alt+(null!==this.context?",["+this.context.toString()+"]":"")+(this.semanticContext!==at.NONE?","+this.semanticContext.toString():"")+(this.reachesIntoOuterContext>0?",up="+this.reachesIntoOuterContext:"")+")"}}class dt{constructor(t,e){this.start=t,this.stop=e}clone(){return new dt(this.start,this.stop)}contains(t){return t>=this.start&&t<this.stop}toString(){return this.start===this.stop-1?this.start.toString():this.start.toString()+".."+(this.stop-1).toString()}get length(){return this.stop-this.start}}dt.INVALID_INTERVAL=new dt(-1,-2);class pt{constructor(){this.intervals=null,this.readOnly=!1}first(t){return null===this.intervals||0===this.intervals.length?Q.INVALID_TYPE:this.intervals[0].start}addOne(t){this.addInterval(new dt(t,t+1))}addRange(t,e){this.addInterval(new dt(t,e+1))}addInterval(t){if(null===this.intervals)this.intervals=[],this.intervals.push(t.clone());else{for(let e=0;e<this.intervals.length;e++){const n=this.intervals[e];if(t.stop<n.start)return void this.intervals.splice(e,0,t);if(t.stop===n.start)return void(this.intervals[e]=new dt(t.start,n.stop));if(t.start<=n.stop)return this.intervals[e]=new dt(Math.min(n.start,t.start),Math.max(n.stop,t.stop)),void this.reduce(e)}this.intervals.push(t.clone())}}addSet(t){return null!==t.intervals&&t.intervals.forEach((t=>this.addInterval(t)),this),this}reduce(t){if(t<this.intervals.length-1){const e=this.intervals[t],n=this.intervals[t+1];e.stop>=n.stop?(this.intervals.splice(t+1,1),this.reduce(t)):e.stop>=n.start&&(this.intervals[t]=new dt(e.start,n.stop),this.intervals.splice(t+1,1))}}complement(t,e){const n=new pt;return n.addInterval(new dt(t,e+1)),null!==this.intervals&&this.intervals.forEach((t=>n.removeRange(t))),n}contains(t){if(null===this.intervals)return!1;for(let e=0;e<this.intervals.length;e++)if(this.intervals[e].contains(t))return!0;return!1}removeRange(t){if(t.start===t.stop-1)this.removeOne(t.start);else if(null!==this.intervals){let e=0;for(let n=0;n<this.intervals.length;n++){const n=this.intervals[e];if(t.stop<=n.start)return;if(t.start>n.start&&t.stop<n.stop){this.intervals[e]=new dt(n.start,t.start);const r=new dt(t.stop,n.stop);return void this.intervals.splice(e,0,r)}t.start<=n.start&&t.stop>=n.stop?(this.intervals.splice(e,1),e-=1):t.start<n.stop?this.intervals[e]=new dt(n.start,t.start):t.stop<n.stop&&(this.intervals[e]=new dt(t.stop,n.stop)),e+=1}}}removeOne(t){if(null!==this.intervals)for(let e=0;e<this.intervals.length;e++){const n=this.intervals[e];if(t<n.start)return;if(t===n.start&&t===n.stop-1)return void this.intervals.splice(e,1);if(t===n.start)return void(this.intervals[e]=new dt(n.start+1,n.stop));if(t===n.stop-1)return void(this.intervals[e]=new dt(n.start,n.stop-1));if(t<n.stop-1){const r=new dt(n.start,t);return n.start=t+1,void this.intervals.splice(e,0,r)}}}toString(t,e,n){return t=t||null,e=e||null,n=n||!1,null===this.intervals?"{}":null!==t||null!==e?this.toTokenString(t,e):n?this.toCharString():this.toIndexString()}toCharString(){const t=[];for(let e=0;e<this.intervals.length;e++){const n=this.intervals[e];n.stop===n.start+1?n.start===Q.EOF?t.push("<EOF>"):t.push("'"+String.fromCharCode(n.start)+"'"):t.push("'"+String.fromCharCode(n.start)+"'..'"+String.fromCharCode(n.stop-1)+"'")}return t.length>1?"{"+t.join(", ")+"}":t[0]}toIndexString(){const t=[];for(let e=0;e<this.intervals.length;e++){const n=this.intervals[e];n.stop===n.start+1?n.start===Q.EOF?t.push("<EOF>"):t.push(n.start.toString()):t.push(n.start.toString()+".."+(n.stop-1).toString())}return t.length>1?"{"+t.join(", ")+"}":t[0]}toTokenString(t,e){const n=[];for(let r=0;r<this.intervals.length;r++){const s=this.intervals[r];for(let r=s.start;r<s.stop;r++)n.push(this.elementName(t,e,r))}return n.length>1?"{"+n.join(", ")+"}":n[0]}elementName(t,e,n){return n===Q.EOF?"<EOF>":n===Q.EPSILON?"<EPSILON>":t[n]||e[n]}get length(){return this.intervals.map((t=>t.length)).reduce(((t,e)=>t+e))}}class ft{constructor(){this.atn=null,this.stateNumber=ft.INVALID_STATE_NUMBER,this.stateType=null,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.nextTokenWithinRule=null}toString(){return this.stateNumber}equals(t){return t instanceof ft&&this.stateNumber===t.stateNumber}isNonGreedyExitState(){return!1}addTransition(t,e){void 0===e&&(e=-1),0===this.transitions.length?this.epsilonOnlyTransitions=t.isEpsilon:this.epsilonOnlyTransitions!==t.isEpsilon&&(this.epsilonOnlyTransitions=!1),-1===e?this.transitions.push(t):this.transitions.splice(e,1,t)}}ft.INVALID_TYPE=0,ft.BASIC=1,ft.RULE_START=2,ft.BLOCK_START=3,ft.PLUS_BLOCK_START=4,ft.STAR_BLOCK_START=5,ft.TOKEN_START=6,ft.RULE_STOP=7,ft.BLOCK_END=8,ft.STAR_LOOP_BACK=9,ft.STAR_LOOP_ENTRY=10,ft.PLUS_LOOP_BACK=11,ft.LOOP_END=12,ft.serializationNames=["INVALID","BASIC","RULE_START","BLOCK_START","PLUS_BLOCK_START","STAR_BLOCK_START","TOKEN_START","RULE_STOP","BLOCK_END","STAR_LOOP_BACK","STAR_LOOP_ENTRY","PLUS_LOOP_BACK","LOOP_END"],ft.INVALID_STATE_NUMBER=-1;class mt extends ft{constructor(){return super(),this.stateType=ft.RULE_STOP,this}}class gt{constructor(t){if(null==t)throw"target cannot be null.";this.target=t,this.isEpsilon=!1,this.label=null}}gt.EPSILON=1,gt.RANGE=2,gt.RULE=3,gt.PREDICATE=4,gt.ATOM=5,gt.ACTION=6,gt.SET=7,gt.NOT_SET=8,gt.WILDCARD=9,gt.PRECEDENCE=10,gt.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"],gt.serializationTypes={EpsilonTransition:gt.EPSILON,RangeTransition:gt.RANGE,RuleTransition:gt.RULE,PredicateTransition:gt.PREDICATE,AtomTransition:gt.ATOM,ActionTransition:gt.ACTION,SetTransition:gt.SET,NotSetTransition:gt.NOT_SET,WildcardTransition:gt.WILDCARD,PrecedencePredicateTransition:gt.PRECEDENCE};class yt extends gt{constructor(t,e,n,r){super(t),this.ruleIndex=e,this.precedence=n,this.followState=r,this.serializationType=gt.RULE,this.isEpsilon=!0}matches(t,e,n){return!1}}class vt extends gt{constructor(t,e){super(t),this.serializationType=gt.SET,null!=e?this.label=e:(this.label=new pt,this.label.addOne(Q.INVALID_TYPE))}matches(t,e,n){return this.label.contains(t)}toString(){return this.label.toString()}}class bt extends vt{constructor(t,e){super(t,e),this.serializationType=gt.NOT_SET}matches(t,e,n){return t>=e&&t<=n&&!super.matches(t,e,n)}toString(){return"~"+super.toString()}}class xt extends gt{constructor(t){super(t),this.serializationType=gt.WILDCARD}matches(t,e,n){return t>=e&&t<=n}toString(){return"."}}class St extends gt{constructor(t){super(t)}}class wt{}class _t extends wt{}class Et extends _t{}class Tt extends Et{get ruleContext(){throw new Error("missing interface implementation")}}class At extends Et{}class It extends At{}const Ct={toStringTree:function(t,e,n){e=e||null,null!==(n=n||null)&&(e=n.ruleNames);let r=Ct.getNodeText(t,e);r=function(t){return t.replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r")}(r);const s=t.getChildCount();if(0===s)return r;let i="("+r+" ";s>0&&(r=Ct.toStringTree(t.getChild(0),e),i=i.concat(r));for(let a=1;a<s;a++)r=Ct.toStringTree(t.getChild(a),e),i=i.concat(" "+r);return i=i.concat(")"),i},getNodeText:function(t,e,n){if(e=e||null,null!==(n=n||null)&&(e=n.ruleNames),null!==e){if(t instanceof Tt){const n=t.ruleContext.getAltNumber();return 0!=n?e[t.ruleIndex]+":"+n:e[t.ruleIndex]}if(t instanceof It)return t.toString();if(t instanceof At&&null!==t.symbol)return t.symbol.text}const r=t.getPayload();return r instanceof Q?r.text:t.getPayload().toString()},getChildren:function(t){const e=[];for(let n=0;n<t.getChildCount();n++)e.push(t.getChild(n));return e},getAncestors:function(t){let e=[];for(t=t.getParent();null!==t;)e=[t].concat(e),t=t.getParent();return e},findAllTokenNodes:function(t,e){return Ct.findAllNodes(t,e,!0)},findAllRuleNodes:function(t,e){return Ct.findAllNodes(t,e,!1)},findAllNodes:function(t,e,n){const r=[];return Ct._findAllNodes(t,e,n,r),r},_findAllNodes:function(t,e,n,r){n&&t instanceof At?t.symbol.type===e&&r.push(t):!n&&t instanceof Tt&&t.ruleIndex===e&&r.push(t);for(let s=0;s<t.getChildCount();s++)Ct._findAllNodes(t.getChild(s),e,n,r)},descendants:function(t){let e=[t];for(let n=0;n<t.getChildCount();n++)e=e.concat(Ct.descendants(t.getChild(n)));return e}},Rt=Ct;class kt extends Tt{constructor(t,e){super(),this.parentCtx=t||null,this.invokingState=e||-1}depth(){let t=0,e=this;for(;null!==e;)e=e.parentCtx,t+=1;return t}isEmpty(){return-1===this.invokingState}getSourceInterval(){return dt.INVALID_INTERVAL}get ruleContext(){return this}getPayload(){return this}getText(){return 0===this.getChildCount()?"":this.children.map((function(t){return t.getText()})).join("")}getAltNumber(){return 0}setAltNumber(t){}getChild(t){return null}getChildCount(){return 0}accept(t){return t.visitChildren(this)}toStringTree(t,e){return Rt.toStringTree(this,t,e)}toString(t,e){t=t||null,e=e||null;let n=this,r="[";for(;null!==n&&n!==e;){if(null===t)n.isEmpty()||(r+=n.invokingState);else{const e=n.ruleIndex;r+=e>=0&&e<t.length?t[e]:""+e}null===n.parentCtx||null===t&&n.parentCtx.isEmpty()||(r+=" "),n=n.parentCtx}return r+="]",r}}class Lt{constructor(t){this.cachedHashCode=t}isEmpty(){return this===Lt.EMPTY}hasEmptyPath(){return this.getReturnState(this.length-1)===Lt.EMPTY_RETURN_STATE}hashCode(){return this.cachedHashCode}updateHashCode(t){t.update(this.cachedHashCode)}}Lt.EMPTY=null,Lt.EMPTY_RETURN_STATE=2147483647,Lt.globalNodeCount=1,Lt.id=Lt.globalNodeCount,Lt.trace_atn_sim=!1;class Nt extends Lt{constructor(t,e){const n=new tt;return n.update(t,e),super(n.finish()),this.parents=t,this.returnStates=e,this}isEmpty(){return this.returnStates[0]===Lt.EMPTY_RETURN_STATE}getParent(t){return this.parents[t]}getReturnState(t){return this.returnStates[t]}equals(t){return this===t||t instanceof Nt&&this.hashCode()===t.hashCode()&&X(this.returnStates,t.returnStates)&&X(this.parents,t.parents)}toString(){if(this.isEmpty())return"[]";{let t="[";for(let e=0;e<this.returnStates.length;e++)e>0&&(t+=", "),this.returnStates[e]!==Lt.EMPTY_RETURN_STATE?(t+=this.returnStates[e],null!==this.parents[e]?t=t+" "+this.parents[e]:t+="null"):t+="$";return t+"]"}}get length(){return this.returnStates.length}}class Ot extends Lt{constructor(t,e){let n=0;const r=new tt;null!==t?r.update(t,e):r.update(1),n=r.finish(),super(n),this.parentCtx=t,this.returnState=e}getParent(t){return this.parentCtx}getReturnState(t){return this.returnState}equals(t){return this===t||t instanceof Ot&&this.hashCode()===t.hashCode()&&this.returnState===t.returnState&&(null==this.parentCtx?null==t.parentCtx:this.parentCtx.equals(t.parentCtx))}toString(){const t=null===this.parentCtx?"":this.parentCtx.toString();return 0===t.length?this.returnState===Lt.EMPTY_RETURN_STATE?"$":""+this.returnState:this.returnState+" "+t}get length(){return 1}static create(t,e){return e===Lt.EMPTY_RETURN_STATE&&null===t?Lt.EMPTY:new Ot(t,e)}}class Pt extends Ot{constructor(){super(null,Lt.EMPTY_RETURN_STATE)}isEmpty(){return!0}getParent(t){return null}getReturnState(t){return this.returnState}equals(t){return this===t}toString(){return"$"}}Lt.EMPTY=new Pt;class Ft{constructor(t,e){this.buckets=new Array(16),this.threshold=Math.floor(12),this.itemCount=0,this.hashFunction=t||et,this.equalsFunction=e||nt}set(t,e){this._expand();const n=this._getSlot(t);let r=this.buckets[n];if(!r)return r=[[t,e]],this.buckets[n]=r,this.itemCount++,e;const s=r.find((e=>this.equalsFunction(e[0],t)),this);if(s){const t=s[1];return s[1]=e,t}return r.push([t,e]),this.itemCount++,e}containsKey(t){const e=this._getBucket(t);return!!e&&!!e.find((e=>this.equalsFunction(e[0],t)),this)}get(t){const e=this._getBucket(t);if(!e)return null;const n=e.find((e=>this.equalsFunction(e[0],t)),this);return n?n[1]:null}entries(){return this.buckets.filter((t=>null!=t)).flat(1)}getKeys(){return this.entries().map((t=>t[0]))}getValues(){return this.entries().map((t=>t[1]))}toString(){return"["+this.entries().map((t=>"{"+t[0]+":"+t[1]+"}")).join(", ")+"]"}get length(){return this.itemCount}_getSlot(t){return this.hashFunction(t)&this.buckets.length-1}_getBucket(t){return this.buckets[this._getSlot(t)]}_expand(){if(this.itemCount<=this.threshold)return;const t=this.buckets,e=2*this.buckets.length;this.buckets=new Array(e),this.threshold=Math.floor(.75*e);for(const n of t)if(n)for(const t of n){const e=this._getSlot(t[0]);let n=this.buckets[e];n||(n=[],this.buckets[e]=n),n.push(t)}}}function Dt(t,e){if(null==e&&(e=kt.EMPTY),null===e.parentCtx||e===kt.EMPTY)return Lt.EMPTY;const n=Dt(t,e.parentCtx),r=t.states[e.invokingState].transitions[0];return Ot.create(n,r.followState.stateNumber)}function Mt(t,e,n){if(t.isEmpty())return t;let r=n.get(t)||null;if(null!==r)return r;if(r=e.get(t),null!==r)return n.set(t,r),r;let s=!1,i=[];for(let o=0;o<i.length;o++){const r=Mt(t.getParent(o),e,n);if(s||r!==t.getParent(o)){if(!s){i=[];for(let e=0;e<t.length;e++)i[e]=t.getParent(e);s=!0}i[o]=r}}if(!s)return e.add(t),n.set(t,t),t;let a=null;return a=0===i.length?Lt.EMPTY:1===i.length?Ot.create(i[0],t.getReturnState(0)):new Nt(i,t.returnStates),e.add(a),n.set(a,a),n.set(t,a),a}function Ut(t,e,n,r){if(t===e)return t;if(t instanceof Ot&&e instanceof Ot)return function(t,e,n,r){if(null!==r){let n=r.get(t,e);if(null!==n)return n;if(n=r.get(e,t),null!==n)return n}const s=function(t,e,n){if(n){if(t===Lt.EMPTY)return Lt.EMPTY;if(e===Lt.EMPTY)return Lt.EMPTY}else{if(t===Lt.EMPTY&&e===Lt.EMPTY)return Lt.EMPTY;if(t===Lt.EMPTY){const t=[e.returnState,Lt.EMPTY_RETURN_STATE],n=[e.parentCtx,null];return new Nt(n,t)}if(e===Lt.EMPTY){const e=[t.returnState,Lt.EMPTY_RETURN_STATE],n=[t.parentCtx,null];return new Nt(n,e)}}return null}(t,e,n);if(null!==s)return null!==r&&r.set(t,e,s),s;if(t.returnState===e.returnState){const s=Ut(t.parentCtx,e.parentCtx,n,r);if(s===t.parentCtx)return t;if(s===e.parentCtx)return e;const i=Ot.create(s,t.returnState);return null!==r&&r.set(t,e,i),i}{let n=null;if((t===e||null!==t.parentCtx&&t.parentCtx===e.parentCtx)&&(n=t.parentCtx),null!==n){const s=[t.returnState,e.returnState];t.returnState>e.returnState&&(s[0]=e.returnState,s[1]=t.returnState);const i=new Nt([n,n],s);return null!==r&&r.set(t,e,i),i}const s=[t.returnState,e.returnState];let i=[t.parentCtx,e.parentCtx];t.returnState>e.returnState&&(s[0]=e.returnState,s[1]=t.returnState,i=[e.parentCtx,t.parentCtx]);const a=new Nt(i,s);return null!==r&&r.set(t,e,a),a}}(t,e,n,r);if(n){if(t instanceof Pt)return t;if(e instanceof Pt)return e}return t instanceof Ot&&(t=new Nt([t.getParent()],[t.returnState])),e instanceof Ot&&(e=new Nt([e.getParent()],[e.returnState])),function(t,e,n,r){if(null!==r){let n=r.get(t,e);if(null!==n)return Lt.trace_atn_sim&&console.log("mergeArrays a="+t+",b="+e+" -> previous"),n;if(n=r.get(e,t),null!==n)return Lt.trace_atn_sim&&console.log("mergeArrays a="+t+",b="+e+" -> previous"),n}let s=0,i=0,a=0,o=new Array(t.returnStates.length+e.returnStates.length).fill(0),l=new Array(t.returnStates.length+e.returnStates.length).fill(null);for(;s<t.returnStates.length&&i<e.returnStates.length;){const u=t.parents[s],c=e.parents[i];if(t.returnStates[s]===e.returnStates[i]){const e=t.returnStates[s];e===Lt.EMPTY_RETURN_STATE&&null===u&&null===c||null!==u&&null!==c&&u===c?(l[a]=u,o[a]=e):(l[a]=Ut(u,c,n,r),o[a]=e),s+=1,i+=1}else t.returnStates[s]<e.returnStates[i]?(l[a]=u,o[a]=t.returnStates[s],s+=1):(l[a]=c,o[a]=e.returnStates[i],i+=1);a+=1}if(s<t.returnStates.length)for(let c=s;c<t.returnStates.length;c++)l[a]=t.parents[c],o[a]=t.returnStates[c],a+=1;else for(let c=i;c<e.returnStates.length;c++)l[a]=e.parents[c],o[a]=e.returnStates[c],a+=1;if(a<l.length){if(1===a){const n=Ot.create(l[0],o[0]);return null!==r&&r.set(t,e,n),n}l=l.slice(0,a),o=o.slice(0,a)}const u=new Nt(l,o);return u.equals(t)?(null!==r&&r.set(t,e,t),Lt.trace_atn_sim&&console.log("mergeArrays a="+t+",b="+e+" -> a"),t):u.equals(e)?(null!==r&&r.set(t,e,e),Lt.trace_atn_sim&&console.log("mergeArrays a="+t+",b="+e+" -> b"),e):(function(t){const e=new Ft;for(let n=0;n<t.length;n++){const r=t[n];e.containsKey(r)||e.set(r,r)}for(let n=0;n<t.length;n++)t[n]=e.get(t[n])}(l),null!==r&&r.set(t,e,u),Lt.trace_atn_sim&&console.log("mergeArrays a="+t+",b="+e+" -> "+u),u)}(t,e,n,r)}class jt{constructor(){this.data=new Uint32Array(1)}set(t){jt._checkIndex(t),this._resize(t),this.data[t>>>5]|=1<<t%32}get(t){jt._checkIndex(t);const e=t>>>5;return!(e>=this.data.length||!(this.data[e]&1<<t%32))}clear(t){jt._checkIndex(t);const e=t>>>5;e<this.data.length&&(this.data[e]&=~(1<<t))}or(t){const e=Math.min(this.data.length,t.data.length);for(let n=0;n<e;++n)this.data[n]|=t.data[n];if(this.data.length<t.data.length){this._resize((t.data.length<<5)-1);const n=t.data.length;for(let r=e;r<n;++r)this.data[r]=t.data[r]}}values(){const t=new Array(this.length);let e=0;const n=this.data.length;for(let r=0;r<n;++r){let n=this.data[r];for(;0!==n;){const s=n&-n;t[e++]=(r<<5)+jt._bitCount(s-1),n^=s}}return t}minValue(){for(let t=0;t<this.data.length;++t){let e=this.data[t];if(0!==e){let n=0;for(;!(1&e);)n++,e>>=1;return n+32*t}}return 0}hashCode(){return tt.hashStuff(this.values())}equals(t){return t instanceof jt&&X(this.data,t.data)}toString(){return"{"+this.values().join(", ")+"}"}get length(){return this.data.map((t=>jt._bitCount(t))).reduce(((t,e)=>t+e),0)}_resize(t){const e=t+32>>>5;if(e<=this.data.length)return;const n=new Uint32Array(e);n.set(this.data),n.fill(0,this.data.length),this.data=n}static _checkIndex(t){if(t<0)throw new RangeError("index cannot be negative")}static _bitCount(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,0+(t+=t>>16)&63}}class zt{constructor(t){this.atn=t}getDecisionLookahead(t){if(null===t)return null;const e=t.transitions.length,n=[];for(let r=0;r<e;r++){n[r]=new pt;const e=new it,s=!1;this._LOOK(t.transition(r).target,null,Lt.EMPTY,n[r],e,new jt,s,!1),(0===n[r].length||n[r].contains(zt.HIT_PRED))&&(n[r]=null)}return n}LOOK(t,e,n){const r=new pt,s=null!==(n=n||null)?Dt(t.atn,n):null;return this._LOOK(t,e,s,r,new it,new jt,!0,!0),r}_LOOK(t,e,n,r,s,i,a,o){const l=new ht({state:t,alt:0,context:n},null);if(!s.has(l)){if(s.add(l),t===e){if(null===n)return void r.addOne(Q.EPSILON);if(n.isEmpty()&&o)return void r.addOne(Q.EOF)}if(t instanceof mt){if(null===n)return void r.addOne(Q.EPSILON);if(n.isEmpty()&&o)return void r.addOne(Q.EOF);if(n!==Lt.EMPTY){const l=i.get(t.ruleIndex);try{i.clear(t.ruleIndex);for(let t=0;t<n.length;t++){const l=this.atn.states[n.getReturnState(t)];this._LOOK(l,e,n.getParent(t),r,s,i,a,o)}}finally{l&&i.set(t.ruleIndex)}return}}for(let l=0;l<t.transitions.length;l++){const u=t.transitions[l];if(u.constructor===yt){if(i.get(u.target.ruleIndex))continue;const t=Ot.create(n,u.followState.stateNumber);try{i.set(u.target.ruleIndex),this._LOOK(u.target,e,t,r,s,i,a,o)}finally{i.clear(u.target.ruleIndex)}}else if(u instanceof St)a?this._LOOK(u.target,e,n,r,s,i,a,o):r.addOne(zt.HIT_PRED);else if(u.isEpsilon)this._LOOK(u.target,e,n,r,s,i,a,o);else if(u.constructor===xt)r.addRange(Q.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType);else{let t=u.label;null!==t&&(u instanceof bt&&(t=t.complement(Q.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType)),r.addSet(t))}}}}}zt.HIT_PRED=Q.INVALID_TYPE;class Vt{constructor(t,e){this.grammarType=t,this.maxTokenType=e,this.states=[],this.decisionToState=[],this.ruleToStartState=[],this.ruleToStopState=null,this.modeNameToStartState={},this.ruleToTokenType=null,this.lexerActions=null,this.modeToStartState=[]}nextTokensInContext(t,e){return new zt(this).LOOK(t,null,e)}nextTokensNoContext(t){return null!==t.nextTokenWithinRule||(t.nextTokenWithinRule=this.nextTokensInContext(t,null),t.nextTokenWithinRule.readOnly=!0),t.nextTokenWithinRule}nextTokens(t,e){return void 0===e?this.nextTokensNoContext(t):this.nextTokensInContext(t,e)}addState(t){null!==t&&(t.atn=this,t.stateNumber=this.states.length),this.states.push(t)}removeState(t){this.states[t.stateNumber]=null}defineDecisionState(t){return this.decisionToState.push(t),t.decision=this.decisionToState.length-1,t.decision}getDecisionState(t){return 0===this.decisionToState.length?null:this.decisionToState[t]}getExpectedTokens(t,e){if(t<0||t>=this.states.length)throw"Invalid state number.";const n=this.states[t];let r=this.nextTokens(n);if(!r.contains(Q.EPSILON))return r;const s=new pt;for(s.addSet(r),s.removeOne(Q.EPSILON);null!==e&&e.invokingState>=0&&r.contains(Q.EPSILON);){const t=this.states[e.invokingState].transitions[0];r=this.nextTokens(t.followState),s.addSet(r),s.removeOne(Q.EPSILON),e=e.parentCtx}return r.contains(Q.EPSILON)&&s.addOne(Q.EOF),s}}Vt.INVALID_ALT_NUMBER=0;class Bt extends ft{constructor(){super(),this.stateType=ft.BASIC}}class $t extends ft{constructor(){return super(),this.decision=-1,this.nonGreedy=!1,this}}class Ht extends $t{constructor(){return super(),this.endState=null,this}}class Gt extends ft{constructor(){return super(),this.stateType=ft.BLOCK_END,this.startState=null,this}}class Wt extends ft{constructor(){return super(),this.stateType=ft.LOOP_END,this.loopBackState=null,this}}class qt extends ft{constructor(){return super(),this.stateType=ft.RULE_START,this.stopState=null,this.isPrecedenceRule=!1,this}}class Kt extends $t{constructor(){return super(),this.stateType=ft.TOKEN_START,this}}class Yt extends $t{constructor(){return super(),this.stateType=ft.PLUS_LOOP_BACK,this}}class Qt extends ft{constructor(){return super(),this.stateType=ft.STAR_LOOP_BACK,this}}class Xt extends $t{constructor(){return super(),this.stateType=ft.STAR_LOOP_ENTRY,this.loopBackState=null,this.isPrecedenceDecision=null,this}}class Jt extends Ht{constructor(){return super(),this.stateType=ft.PLUS_BLOCK_START,this.loopBackState=null,this}}class Zt extends Ht{constructor(){return super(),this.stateType=ft.STAR_BLOCK_START,this}}class te extends Ht{constructor(){return super(),this.stateType=ft.BLOCK_START,this}}class ee extends gt{constructor(t,e){super(t),this.label_=e,this.label=this.makeLabel(),this.serializationType=gt.ATOM}makeLabel(){const t=new pt;return t.addOne(this.label_),t}matches(t,e,n){return this.label_===t}toString(){return this.label_}}class ne extends gt{constructor(t,e,n){super(t),this.serializationType=gt.RANGE,this.start=e,this.stop=n,this.label=this.makeLabel()}makeLabel(){const t=new pt;return t.addRange(this.start,this.stop),t}matches(t,e,n){return t>=this.start&&t<=this.stop}toString(){return"'"+String.fromCharCode(this.start)+"'..'"+String.fromCharCode(this.stop)+"'"}}class re extends gt{constructor(t,e,n,r){super(t),this.serializationType=gt.ACTION,this.ruleIndex=e,this.actionIndex=void 0===n?-1:n,this.isCtxDependent=void 0!==r&&r,this.isEpsilon=!0}matches(t,e,n){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}}class se extends gt{constructor(t,e){super(t),this.serializationType=gt.EPSILON,this.isEpsilon=!0,this.outermostPrecedenceReturn=e}matches(t,e,n){return!1}toString(){return"epsilon"}}class ie extends at{constructor(t,e,n){super(),this.ruleIndex=void 0===t?-1:t,this.predIndex=void 0===e?-1:e,this.isCtxDependent=void 0!==n&&n}evaluate(t,e){const n=this.isCtxDependent?e:null;return t.sempred(n,this.ruleIndex,this.predIndex)}updateHashCode(t){t.update(this.ruleIndex,this.predIndex,this.isCtxDependent)}equals(t){return this===t||t instanceof ie&&this.ruleIndex===t.ruleIndex&&this.predIndex===t.predIndex&&this.isCtxDependent===t.isCtxDependent}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}}at.NONE=new ie;class ae extends St{constructor(t,e,n,r){super(t),this.serializationType=gt.PREDICATE,this.ruleIndex=e,this.predIndex=n,this.isCtxDependent=r,this.isEpsilon=!0}matches(t,e,n){return!1}getPredicate(){return new ie(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}}class oe extends at{constructor(t){super(),this.precedence=void 0===t?0:t}evaluate(t,e){return t.precpred(e,this.precedence)}evalPrecedence(t,e){return t.precpred(e,this.precedence)?at.NONE:null}compareTo(t){return this.precedence-t.precedence}updateHashCode(t){t.update(this.precedence)}equals(t){return this===t||t instanceof oe&&this.precedence===t.precedence}toString(){return"{"+this.precedence+">=prec}?"}}at.PrecedencePredicate=oe;class le extends St{constructor(t,e){super(t),this.serializationType=gt.PRECEDENCE,this.precedence=e,this.isEpsilon=!0}matches(t,e,n){return!1}getPredicate(){return new oe(this.precedence)}toString(){return this.precedence+" >= _p"}}class ue{constructor(t){void 0===t&&(t=null),this.readOnly=!1,this.verifyATN=null===t||t.verifyATN,this.generateRuleBypassTransitions=null!==t&&t.generateRuleBypassTransitions}}ue.defaultOptions=new ue,ue.defaultOptions.readOnly=!0;class ce{constructor(t){this.actionType=t,this.isPositionDependent=!1}hashCode(){const t=new tt;return this.updateHashCode(t),t.finish()}updateHashCode(t){t.update(this.actionType)}equals(t){return this===t}}class he extends ce{constructor(){super(6)}execute(t){t.skip()}toString(){return"skip"}}he.INSTANCE=new he;class de extends ce{constructor(t){super(0),this.channel=t}execute(t){t._channel=this.channel}updateHashCode(t){t.update(this.actionType,this.channel)}equals(t){return this===t||t instanceof de&&this.channel===t.channel}toString(){return"channel("+this.channel+")"}}class pe extends ce{constructor(t,e){super(1),this.ruleIndex=t,this.actionIndex=e,this.isPositionDependent=!0}execute(t){t.action(null,this.ruleIndex,this.actionIndex)}updateHashCode(t){t.update(this.actionType,this.ruleIndex,this.actionIndex)}equals(t){return this===t||t instanceof pe&&this.ruleIndex===t.ruleIndex&&this.actionIndex===t.actionIndex}}class fe extends ce{constructor(){super(3)}execute(t){t.more()}toString(){return"more"}}fe.INSTANCE=new fe;class me extends ce{constructor(t){super(7),this.type=t}execute(t){t.type=this.type}updateHashCode(t){t.update(this.actionType,this.type)}equals(t){return this===t||t instanceof me&&this.type===t.type}toString(){return"type("+this.type+")"}}class ge extends ce{constructor(t){super(5),this.mode=t}execute(t){t.pushMode(this.mode)}updateHashCode(t){t.update(this.actionType,this.mode)}equals(t){return this===t||t instanceof ge&&this.mode===t.mode}toString(){return"pushMode("+this.mode+")"}}class ye extends ce{constructor(){super(4)}execute(t){t.popMode()}toString(){return"popMode"}}ye.INSTANCE=new ye;class ve extends ce{constructor(t){super(2),this.mode=t}execute(t){t.setMode(this.mode)}updateHashCode(t){t.update(this.actionType,this.mode)}equals(t){return this===t||t instanceof ve&&this.mode===t.mode}toString(){return"mode("+this.mode+")"}}function be(t,e){const n=[];return n[t-1]=e,n.map((function(t){return e}))}class xe{constructor(t){null==t&&(t=ue.defaultOptions),this.deserializationOptions=t,this.stateFactories=null,this.actionFactories=null}deserialize(t){const e=this.reset(t);this.checkVersion(e),e&&this.skipUUID();const n=this.readATN();this.readStates(n,e),this.readRules(n,e),this.readModes(n);const r=[];return this.readSets(n,r,this.readInt.bind(this)),e&&this.readSets(n,r,this.readInt32.bind(this)),this.readEdges(n,r),this.readDecisions(n),this.readLexerActions(n,e),this.markPrecedenceDecisions(n),this.verifyATN(n),this.deserializationOptions.generateRuleBypassTransitions&&1===n.grammarType&&(this.generateRuleBypassTransitions(n),this.verifyATN(n)),n}reset(t){if(3===(t.charCodeAt?t.charCodeAt(0):t[0])){const e=function(t){const e=t.charCodeAt(0);return e>1?e-2:e+65534},n=t.split("").map(e);return n[0]=t.charCodeAt(0),this.data=n,this.pos=0,!0}return this.data=t,this.pos=0,!1}skipUUID(){let t=0;for(;t++<8;)this.readInt()}checkVersion(t){const e=this.readInt();if(!t&&4!==e)throw"Could not deserialize ATN with version "+e+" (expected 4)."}readATN(){const t=this.readInt(),e=this.readInt();return new Vt(t,e)}readStates(t,e){let n,r,s;const i=[],a=[],o=this.readInt();for(let c=0;c<o;c++){const n=this.readInt();if(n===ft.INVALID_TYPE){t.addState(null);continue}let r=this.readInt();e&&65535===r&&(r=-1);const s=this.stateFactory(n,r);if(n===ft.LOOP_END){const t=this.readInt();i.push([s,t])}else if(s instanceof Ht){const t=this.readInt();a.push([s,t])}t.addState(s)}for(n=0;n<i.length;n++)r=i[n],r[0].loopBackState=t.states[r[1]];for(n=0;n<a.length;n++)r=a[n],r[0].endState=t.states[r[1]];let l=this.readInt();for(n=0;n<l;n++)s=this.readInt(),t.states[s].nonGreedy=!0;let u=this.readInt();for(n=0;n<u;n++)s=this.readInt(),t.states[s].isPrecedenceRule=!0}readRules(t,e){let n;const r=this.readInt();for(0===t.grammarType&&(t.ruleToTokenType=be(r,0)),t.ruleToStartState=be(r,0),n=0;n<r;n++){const r=this.readInt();if(t.ruleToStartState[n]=t.states[r],0===t.grammarType){let r=this.readInt();e&&65535===r&&(r=Q.EOF),t.ruleToTokenType[n]=r}}for(t.ruleToStopState=be(r,0),n=0;n<t.states.length;n++){const e=t.states[n];e instanceof mt&&(t.ruleToStopState[e.ruleIndex]=e,t.ruleToStartState[e.ruleIndex].stopState=e)}}readModes(t){const e=this.readInt();for(let n=0;n<e;n++){let e=this.readInt();t.modeToStartState.push(t.states[e])}}readSets(t,e,n){const r=this.readInt();for(let s=0;s<r;s++){const t=new pt;e.push(t);const r=this.readInt();0!==this.readInt()&&t.addOne(-1);for(let e=0;e<r;e++){const e=n(),r=n();t.addRange(e,r)}}}readEdges(t,e){let n,r,s,i,a;const o=this.readInt();for(n=0;n<o;n++){const n=this.readInt(),r=this.readInt(),s=this.readInt(),a=this.readInt(),o=this.readInt(),l=this.readInt();i=this.edgeFactory(t,s,n,r,a,o,l,e),t.states[n].addTransition(i)}for(n=0;n<t.states.length;n++)for(s=t.states[n],r=0;r<s.transitions.length;r++){const e=s.transitions[r];if(!(e instanceof yt))continue;let n=-1;t.ruleToStartState[e.target.ruleIndex].isPrecedenceRule&&0===e.precedence&&(n=e.target.ruleIndex),i=new se(e.followState,n),t.ruleToStopState[e.target.ruleIndex].addTransition(i)}for(n=0;n<t.states.length;n++){if(s=t.states[n],s instanceof Ht){if(null===s.endState)throw"IllegalState";if(null!==s.endState.startState)throw"IllegalState";s.endState.startState=s}if(s instanceof Yt)for(r=0;r<s.transitions.length;r++)a=s.transitions[r].target,a instanceof Jt&&(a.loopBackState=s);else if(s instanceof Qt)for(r=0;r<s.transitions.length;r++)a=s.transitions[r].target,a instanceof Xt&&(a.loopBackState=s)}}readDecisions(t){const e=this.readInt();for(let n=0;n<e;n++){const e=this.readInt(),r=t.states[e];t.decisionToState.push(r),r.decision=n}}readLexerActions(t,e){if(0===t.grammarType){const n=this.readInt();t.lexerActions=be(n,null);for(let r=0;r<n;r++){const n=this.readInt();let s=this.readInt();e&&65535===s&&(s=-1);let i=this.readInt();e&&65535===i&&(i=-1),t.lexerActions[r]=this.lexerActionFactory(n,s,i)}}}generateRuleBypassTransitions(t){let e;const n=t.ruleToStartState.length;for(e=0;e<n;e++)t.ruleToTokenType[e]=t.maxTokenType+e+1;for(e=0;e<n;e++)this.generateRuleBypassTransition(t,e)}generateRuleBypassTransition(t,e){let n,r;const s=new te;s.ruleIndex=e,t.addState(s);const i=new Gt;i.ruleIndex=e,t.addState(i),s.endState=i,t.defineDecisionState(s),i.startState=s;let a=null,o=null;if(t.ruleToStartState[e].isPrecedenceRule){for(o=null,n=0;n<t.states.length;n++)if(r=t.states[n],this.stateIsEndStateFor(r,e)){o=r,a=r.loopBackState.transitions[0];break}if(null===a)throw"Couldn't identify final state of the precedence rule prefix section."}else o=t.ruleToStopState[e];for(n=0;n<t.states.length;n++){r=t.states[n];for(let t=0;t<r.transitions.length;t++){const e=r.transitions[t];e!==a&&e.target===o&&(e.target=i)}}const l=t.ruleToStartState[e],u=l.transitions.length;for(;u>0;)s.addTransition(l.transitions[u-1]),l.transitions=l.transitions.slice(-1);t.ruleToStartState[e].addTransition(new se(s)),i.addTransition(new se(o));const c=new Bt;t.addState(c),c.addTransition(new ee(i,t.ruleToTokenType[e])),s.addTransition(new se(c))}stateIsEndStateFor(t,e){if(t.ruleIndex!==e)return null;if(!(t instanceof Xt))return null;const n=t.transitions[t.transitions.length-1].target;return n instanceof Wt&&n.epsilonOnlyTransitions&&n.transitions[0].target instanceof mt?t:null}markPrecedenceDecisions(t){for(let e=0;e<t.states.length;e++){const n=t.states[e];if(n instanceof Xt&&t.ruleToStartState[n.ruleIndex].isPrecedenceRule){const t=n.transitions[n.transitions.length-1].target;t instanceof Wt&&t.epsilonOnlyTransitions&&t.transitions[0].target instanceof mt&&(n.isPrecedenceDecision=!0)}}}verifyATN(t){if(this.deserializationOptions.verifyATN)for(let e=0;e<t.states.length;e++){const n=t.states[e];if(null!==n)if(this.checkCondition(n.epsilonOnlyTransitions||n.transitions.length<=1),n instanceof Jt)this.checkCondition(null!==n.loopBackState);else if(n instanceof Xt)if(this.checkCondition(null!==n.loopBackState),this.checkCondition(2===n.transitions.length),n.transitions[0].target instanceof Zt)this.checkCondition(n.transitions[1].target instanceof Wt),this.checkCondition(!n.nonGreedy);else{if(!(n.transitions[0].target instanceof Wt))throw"IllegalState";this.checkCondition(n.transitions[1].target instanceof Zt),this.checkCondition(n.nonGreedy)}else n instanceof Qt?(this.checkCondition(1===n.transitions.length),this.checkCondition(n.transitions[0].target instanceof Xt)):n instanceof Wt?this.checkCondition(null!==n.loopBackState):n instanceof qt?this.checkCondition(null!==n.stopState):n instanceof Ht?this.checkCondition(null!==n.endState):n instanceof Gt?this.checkCondition(null!==n.startState):n instanceof $t?this.checkCondition(n.transitions.length<=1||n.decision>=0):this.checkCondition(n.transitions.length<=1||n instanceof mt)}}checkCondition(t,e){if(!t)throw null==e&&(e="IllegalState"),e}readInt(){return this.data[this.pos++]}readInt32(){return this.readInt()|this.readInt()<<16}edgeFactory(t,e,n,r,s,i,a,o){const l=t.states[r];switch(e){case gt.EPSILON:return new se(l);case gt.RANGE:return new ne(l,0!==a?Q.EOF:s,i);case gt.RULE:return new yt(t.states[s],i,a,l);case gt.PREDICATE:return new ae(l,s,i,0!==a);case gt.PRECEDENCE:return new le(l,s);case gt.ATOM:return new ee(l,0!==a?Q.EOF:s);case gt.ACTION:return new re(l,s,i,0!==a);case gt.SET:return new vt(l,o[s]);case gt.NOT_SET:return new bt(l,o[s]);case gt.WILDCARD:return new xt(l);default:throw"The specified transition type: "+e+" is not valid."}}stateFactory(t,e){if(null===this.stateFactories){const t=[];t[ft.INVALID_TYPE]=null,t[ft.BASIC]=()=>new Bt,t[ft.RULE_START]=()=>new qt,t[ft.BLOCK_START]=()=>new te,t[ft.PLUS_BLOCK_START]=()=>new Jt,t[ft.STAR_BLOCK_START]=()=>new Zt,t[ft.TOKEN_START]=()=>new Kt,t[ft.RULE_STOP]=()=>new mt,t[ft.BLOCK_END]=()=>new Gt,t[ft.STAR_LOOP_BACK]=()=>new Qt,t[ft.STAR_LOOP_ENTRY]=()=>new Xt,t[ft.PLUS_LOOP_BACK]=()=>new Yt,t[ft.LOOP_END]=()=>new Wt,this.stateFactories=t}if(t>this.stateFactories.length||null===this.stateFactories[t])throw"The specified state type "+t+" is not valid.";{const n=this.stateFactories[t]();if(null!==n)return n.ruleIndex=e,n}}lexerActionFactory(t,e,n){if(null===this.actionFactories){const t=[];t[0]=(t,e)=>new de(t),t[1]=(t,e)=>new pe(t,e),t[2]=(t,e)=>new ve(t),t[3]=(t,e)=>fe.INSTANCE,t[4]=(t,e)=>ye.INSTANCE,t[5]=(t,e)=>new ge(t),t[6]=(t,e)=>he.INSTANCE,t[7]=(t,e)=>new me(t),this.actionFactories=t}if(t>this.actionFactories.length||null===this.actionFactories[t])throw"The specified lexer action type "+t+" is not valid.";return this.actionFactories[t](e,n)}}class Se{syntaxError(t,e,n,r,s,i){}reportAmbiguity(t,e,n,r,s,i,a){}reportAttemptingFullContext(t,e,n,r,s,i){}reportContextSensitivity(t,e,n,r,s,i){}}class we extends Se{constructor(){super()}syntaxError(t,e,n,r,s,i){console.error("line "+n+":"+r+" "+s)}}we.INSTANCE=new we;class _e extends Se{constructor(t){if(super(),null===t)throw"delegates";return this.delegates=t,this}syntaxError(t,e,n,r,s,i){this.delegates.map((a=>a.syntaxError(t,e,n,r,s,i)))}reportAmbiguity(t,e,n,r,s,i,a){this.delegates.map((o=>o.reportAmbiguity(t,e,n,r,s,i,a)))}reportAttemptingFullContext(t,e,n,r,s,i){this.delegates.map((a=>a.reportAttemptingFullContext(t,e,n,r,s,i)))}reportContextSensitivity(t,e,n,r,s,i){this.delegates.map((a=>a.reportContextSensitivity(t,e,n,r,s,i)))}}class Ee{constructor(){this._listeners=[we.INSTANCE],this._interp=null,this._stateNumber=-1}checkVersion(t){const e="4.13.2";e!==t&&console.log("ANTLR runtime and generated code versions disagree: "+e+"!="+t)}addErrorListener(t){this._listeners.push(t)}removeErrorListeners(){this._listeners=[]}getLiteralNames(){return Object.getPrototypeOf(this).constructor.literalNames||[]}getSymbolicNames(){return Object.getPrototypeOf(this).constructor.symbolicNames||[]}getTokenNames(){if(!this.tokenNames){const t=this.getLiteralNames(),e=this.getSymbolicNames(),n=t.length>e.length?t.length:e.length;this.tokenNames=[];for(let r=0;r<n;r++)this.tokenNames[r]=t[r]||e[r]||"<INVALID"}return this.tokenNames}getTokenTypeMap(){const t=this.getTokenNames();if(null===t)throw"The current recognizer does not provide a list of token names.";let e=this.tokenTypeMapCache[t];return void 0===e&&(e=t.reduce((function(t,e,n){t[e]=n})),e.EOF=Q.EOF,this.tokenTypeMapCache[t]=e),e}getRuleIndexMap(){const t=this.ruleNames;if(null===t)throw"The current recognizer does not provide a list of rule names.";let e=this.ruleIndexMapCache[t];return void 0===e&&(e=t.reduce((function(t,e,n){t[e]=n})),this.ruleIndexMapCache[t]=e),e}getTokenType(t){const e=this.getTokenTypeMap()[t];return void 0!==e?e:Q.INVALID_TYPE}getErrorHeader(t){return"line "+t.getOffendingToken().line+":"+t.getOffendingToken().column}getTokenErrorDisplay(t){if(null===t)return"<no token>";let e=t.text;return null===e&&(e=t.type===Q.EOF?"<EOF>":"<"+t.type+">"),e=e.replace("\n","\\n").replace("\r","\\r").replace("\t","\\t"),"'"+e+"'"}getErrorListenerDispatch(){return console.warn("Calling deprecated method in Recognizer class: getErrorListenerDispatch()"),this.getErrorListener()}getErrorListener(){return new _e(this._listeners)}sempred(t,e,n){return!0}precpred(t,e){return!0}get atn(){return this._interp.atn}get state(){return this._stateNumber}set state(t){this._stateNumber=t}}Ee.tokenTypeMapCache={},Ee.ruleIndexMapCache={};class Te extends Q{constructor(t,e,n,r,s){super(),this.source=void 0!==t?t:Te.EMPTY_SOURCE,this.type=void 0!==e?e:null,this.channel=void 0!==n?n:Q.DEFAULT_CHANNEL,this.start=void 0!==r?r:-1,this.stop=void 0!==s?s:-1,this.tokenIndex=-1,null!==this.source[0]?(this.line=t[0].line,this.column=t[0].column):this.column=-1}clone(){const t=new Te(this.source,this.type,this.channel,this.start,this.stop);return t.tokenIndex=this.tokenIndex,t.line=this.line,t.column=this.column,t.text=this.text,t}cloneWithType(t){const e=new Te(this.source,t,this.channel,this.start,this.stop);return e.tokenIndex=this.tokenIndex,e.line=this.line,e.column=this.column,t===Q.EOF&&(e.text=""),e}toString(){let t=this.text;return t=null!==t?t.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t"):"<no text>","[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+t+"',<"+this.type+">"+(this.channel>0?",channel="+this.channel:"")+","+this.line+":"+this.column+"]"}get text(){if(null!==this._text)return this._text;const t=this.getInputStream();if(null===t)return null;const e=t.size;return this.start<e&&this.stop<e?t.getText(this.start,this.stop):"<EOF>"}set text(t){this._text=t}}Te.EMPTY_SOURCE=[null,null];class Ae{}class Ie extends Ae{constructor(t){super(),this.copyText=void 0!==t&&t}create(t,e,n,r,s,i,a,o){const l=new Te(t,e,r,s,i);return l.line=a,l.column=o,null!==n?l.text=n:this.copyText&&null!==t[1]&&(l.text=t[1].getText(s,i)),l}createThin(t,e){const n=new Te(null,t);return n.text=e,n}}Ie.DEFAULT=new Ie;class Ce extends Error{constructor(t){super(t.message),Error.captureStackTrace&&Error.captureStackTrace(this,Ce),this.message=t.message,this.recognizer=t.recognizer,this.input=t.input,this.ctx=t.ctx,this.offendingToken=null,this.offendingState=-1,null!==this.recognizer&&(this.offendingState=this.recognizer.state)}getExpectedTokens(){return null!==this.recognizer?this.recognizer.atn.getExpectedTokens(this.offendingState,this.ctx):null}toString(){return this.message}}class Re extends Ce{constructor(t,e,n,r){super({message:"",recognizer:t,input:e,ctx:null}),this.startIndex=n,this.deadEndConfigs=r}toString(){let t="";return this.startIndex>=0&&this.startIndex<this.input.size&&(t=this.input.getText(new dt(this.startIndex,this.startIndex))),"LexerNoViableAltException"+t}}class ke extends Ee{constructor(t){super(),this._input=t,this._factory=Ie.DEFAULT,this._tokenFactorySourcePair=[this,t],this._interp=null,this._token=null,this._tokenStartCharIndex=-1,this._tokenStartLine=-1,this._tokenStartColumn=-1,this._hitEOF=!1,this._channel=Q.DEFAULT_CHANNEL,this._type=Q.INVALID_TYPE,this._modeStack=[],this._mode=ke.DEFAULT_MODE,this._text=null}reset(){null!==this._input&&this._input.seek(0),this._token=null,this._type=Q.INVALID_TYPE,this._channel=Q.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartColumn=-1,this._tokenStartLine=-1,this._text=null,this._hitEOF=!1,this._mode=ke.DEFAULT_MODE,this._modeStack=[],this._interp.reset()}nextToken(){if(null===this._input)throw"nextToken requires a non-null input stream.";const t=this._input.mark();try{for(;;){if(this._hitEOF)return this.emitEOF(),this._token;this._token=null,this._channel=Q.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartColumn=this._interp.column,this._tokenStartLine=this._interp.line,this._text=null;let e=!1;for(;;){this._type=Q.INVALID_TYPE;let n=ke.SKIP;try{n=this._interp.match(this._input,this._mode)}catch(t){if(!(t instanceof Ce))throw console.log(t.stack),t;this.notifyListeners(t),this.recover(t)}if(this._input.LA(1)===Q.EOF&&(this._hitEOF=!0),this._type===Q.INVALID_TYPE&&(this._type=n),this._type===ke.SKIP){e=!0;break}if(this._type!==ke.MORE)break}if(!e)return null===this._token&&this.emit(),this._token}}finally{this._input.release(t)}}skip(){this._type=ke.SKIP}more(){this._type=ke.MORE}mode(t){console.warn("Calling deprecated method in Lexer class: mode(...)"),this.setMode(t)}setMode(t){this._mode=t}getMode(){return this._mode}getModeStack(){return this._modeStack}pushMode(t){this._interp.debug&&console.log("pushMode "+t),this._modeStack.push(this._mode),this.setMode(t)}popMode(){if(0===this._modeStack.length)throw"Empty Stack";return this._interp.debug&&console.log("popMode back to "+this._modeStack.slice(0,-1)),this.setMode(this._modeStack.pop()),this._mode}emitToken(t){this._token=t}emit(){const t=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.getCharIndex()-1,this._tokenStartLine,this._tokenStartColumn);return this.emitToken(t),t}emitEOF(){const t=this.column,e=this.line,n=this._factory.create(this._tokenFactorySourcePair,Q.EOF,null,Q.DEFAULT_CHANNEL,this._input.index,this._input.index-1,e,t);return this.emitToken(n),n}getCharIndex(){return this._input.index}getAllTokens(){const t=[];let e=this.nextToken();for(;e.type!==Q.EOF;)t.push(e),e=this.nextToken();return t}notifyListeners(t){const e=this._tokenStartCharIndex,n=this._input.index,r=this._input.getText(e,n),s="token recognition error at: '"+this.getErrorDisplay(r)+"'";this.getErrorListener().syntaxError(this,null,this._tokenStartLine,this._tokenStartColumn,s,t)}getErrorDisplay(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n]);return e.join("")}getErrorDisplayForChar(t){return t.charCodeAt(0)===Q.EOF?"<EOF>":"\n"===t?"\\n":"\t"===t?"\\t":"\r"===t?"\\r":t}getCharErrorDisplay(t){return"'"+this.getErrorDisplayForChar(t)+"'"}recover(t){this._input.LA(1)!==Q.EOF&&(t instanceof Re?this._interp.consume(this._input):this._input.consume())}get inputStream(){return this._input}set inputStream(t){this._input=null,this._tokenFactorySourcePair=[this,this._input],this.reset(),this._input=t,this._tokenFactorySourcePair=[this,this._input]}get sourceName(){return this._input.sourceName}get type(){return this._type}set type(t){this._type=t}get line(){return this._interp.line}set line(t){this._interp.line=t}get column(){return this._interp.column}set column(t){this._interp.column=t}get text(){return null!==this._text?this._text:this._interp.getText(this._input)}set text(t){this._text=t}}function Le(t){return t.hashCodeForConfigSet()}function Ne(t,e){return t===e||null!==t&&null!==e&&t.equalsForConfigSet(e)}ke.DEFAULT_MODE=0,ke.MORE=-2,ke.SKIP=-3,ke.DEFAULT_TOKEN_CHANNEL=Q.DEFAULT_CHANNEL,ke.HIDDEN=Q.HIDDEN_CHANNEL,ke.MIN_CHAR_VALUE=0,ke.MAX_CHAR_VALUE=1114111;class Oe{constructor(t){this.configLookup=new it(Le,Ne),this.fullCtx=void 0===t||t,this.readOnly=!1,this.configs=[],this.uniqueAlt=0,this.conflictingAlts=null,this.hasSemanticContext=!1,this.dipsIntoOuterContext=!1,this.cachedHashCode=-1}add(t,e){if(void 0===e&&(e=null),this.readOnly)throw"This set is readonly";t.semanticContext!==at.NONE&&(this.hasSemanticContext=!0),t.reachesIntoOuterContext>0&&(this.dipsIntoOuterContext=!0);const n=this.configLookup.getOrAdd(t);if(n===t)return this.cachedHashCode=-1,this.configs.push(t),!0;const r=!this.fullCtx,s=Ut(n.context,t.context,r,e);return n.reachesIntoOuterContext=Math.max(n.reachesIntoOuterContext,t.reachesIntoOuterContext),t.precedenceFilterSuppressed&&(n.precedenceFilterSuppressed=!0),n.context=s,!0}getStates(){const t=new it;for(let e=0;e<this.configs.length;e++)t.add(this.configs[e].state);return t}getPredicates(){const t=[];for(let e=0;e<this.configs.length;e++){const n=this.configs[e].semanticContext;n!==at.NONE&&t.push(n.semanticContext)}return t}optimizeConfigs(t){if(this.readOnly)throw"This set is readonly";if(0!==this.configLookup.length)for(let e=0;e<this.configs.length;e++){const n=this.configs[e];n.context=t.getCachedContext(n.context)}}addAll(t){for(let e=0;e<t.length;e++)this.add(t[e]);return!1}equals(t){return this===t||t instanceof Oe&&X(this.configs,t.configs)&&this.fullCtx===t.fullCtx&&this.uniqueAlt===t.uniqueAlt&&this.conflictingAlts===t.conflictingAlts&&this.hasSemanticContext===t.hasSemanticContext&&this.dipsIntoOuterContext===t.dipsIntoOuterContext}hashCode(){const t=new tt;return t.update(this.configs),t.finish()}updateHashCode(t){this.readOnly?(-1===this.cachedHashCode&&(this.cachedHashCode=this.hashCode()),t.update(this.cachedHashCode)):t.update(this.hashCode())}isEmpty(){return 0===this.configs.length}contains(t){if(null===this.configLookup)throw"This method is not implemented for readonly sets.";return this.configLookup.contains(t)}containsFast(t){if(null===this.configLookup)throw"This method is not implemented for readonly sets.";return this.configLookup.containsFast(t)}clear(){if(this.readOnly)throw"This set is readonly";this.configs=[],this.cachedHashCode=-1,this.configLookup=new it}setReadonly(t){this.readOnly=t,t&&(this.configLookup=null)}toString(){return st(this.configs)+(this.hasSemanticContext?",hasSemanticContext="+this.hasSemanticContext:"")+(this.uniqueAlt!==Vt.INVALID_ALT_NUMBER?",uniqueAlt="+this.uniqueAlt:"")+(null!==this.conflictingAlts?",conflictingAlts="+this.conflictingAlts:"")+(this.dipsIntoOuterContext?",dipsIntoOuterContext":"")}get items(){return this.configs}get length(){return this.configs.length}}class Pe{constructor(t,e){return null===t&&(t=-1),null===e&&(e=new Oe),this.stateNumber=t,this.configs=e,this.edges=null,this.isAcceptState=!1,this.prediction=0,this.lexerActionExecutor=null,this.requiresFullContext=!1,this.predicates=null,this}getAltSet(){const t=new it;if(null!==this.configs)for(let e=0;e<this.configs.length;e++){const n=this.configs[e];t.add(n.alt)}return 0===t.length?null:t}equals(t){return this===t||t instanceof Pe&&this.configs.equals(t.configs)}toString(){let t=this.stateNumber+":"+this.configs;return this.isAcceptState&&(t+="=>",null!==this.predicates?t+=this.predicates:t+=this.prediction),t}hashCode(){const t=new tt;return t.update(this.configs),t.finish()}}class Fe{constructor(t,e){return this.atn=t,this.sharedContextCache=e,this}getCachedContext(t){if(null===this.sharedContextCache)return t;const e=new Ft;return Mt(t,this.sharedContextCache,e)}}Fe.ERROR=new Pe(2147483647,new Oe);class De extends Oe{constructor(){super(),this.configLookup=new it}}class Me extends ht{constructor(t,e){super(t,e);const n=t.lexerActionExecutor||null;return this.lexerActionExecutor=n||(null!==e?e.lexerActionExecutor:null),this.passedThroughNonGreedyDecision=null!==e&&this.checkNonGreedyDecision(e,this.state),this.hashCodeForConfigSet=Me.prototype.hashCode,this.equalsForConfigSet=Me.prototype.equals,this}updateHashCode(t){t.update(this.state.stateNumber,this.alt,this.context,this.semanticContext,this.passedThroughNonGreedyDecision,this.lexerActionExecutor)}equals(t){return this===t||t instanceof Me&&this.passedThroughNonGreedyDecision===t.passedThroughNonGreedyDecision&&(this.lexerActionExecutor?this.lexerActionExecutor.equals(t.lexerActionExecutor):!t.lexerActionExecutor)&&super.equals(t)}checkNonGreedyDecision(t,e){return t.passedThroughNonGreedyDecision||e instanceof $t&&e.nonGreedy}}class Ue extends ce{constructor(t,e){super(e.actionType),this.offset=t,this.action=e,this.isPositionDependent=!0}execute(t){this.action.execute(t)}updateHashCode(t){t.update(this.actionType,this.offset,this.action)}equals(t){return this===t||t instanceof Ue&&this.offset===t.offset&&this.action===t.action}}class je{constructor(t){return this.lexerActions=null===t?[]:t,this.cachedHashCode=tt.hashStuff(t),this}fixOffsetBeforeMatch(t){let e=null;for(let n=0;n<this.lexerActions.length;n++)!this.lexerActions[n].isPositionDependent||this.lexerActions[n]instanceof Ue||(null===e&&(e=this.lexerActions.concat([])),e[n]=new Ue(t,this.lexerActions[n]));return null===e?this:new je(e)}execute(t,e,n){let r=!1;const s=e.index;try{for(let i=0;i<this.lexerActions.length;i++){let a=this.lexerActions[i];if(a instanceof Ue){const t=a.offset;e.seek(n+t),a=a.action,r=n+t!==s}else a.isPositionDependent&&(e.seek(s),r=!1);a.execute(t)}}finally{r&&e.seek(s)}}hashCode(){return this.cachedHashCode}updateHashCode(t){t.update(this.cachedHashCode)}equals(t){if(this===t)return!0;if(t instanceof je){if(this.cachedHashCode!=t.cachedHashCode)return!1;if(this.lexerActions.length!=t.lexerActions.length)return!1;{const e=this.lexerActions.length;for(let n=0;n<e;++n)if(!this.lexerActions[n].equals(t.lexerActions[n]))return!1;return!0}}return!1}static append(t,e){if(null===t)return new je([e]);const n=t.lexerActions.concat([e]);return new je(n)}}function ze(t){t.index=-1,t.line=0,t.column=-1,t.dfaState=null}class Ve{constructor(){ze(this)}reset(){ze(this)}}class Be extends Fe{constructor(t,e,n,r){super(e,r),this.decisionToDFA=n,this.recog=t,this.startIndex=-1,this.line=1,this.column=0,this.mode=ke.DEFAULT_MODE,this.prevAccept=new Ve}copyState(t){this.column=t.column,this.line=t.line,this.mode=t.mode,this.startIndex=t.startIndex}match(t,e){this.mode=e;const n=t.mark();try{this.startIndex=t.index,this.prevAccept.reset();const n=this.decisionToDFA[e];return null===n.s0?this.matchATN(t):this.execATN(t,n.s0)}finally{t.release(n)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this.line=1,this.column=0,this.mode=ke.DEFAULT_MODE}matchATN(t){const e=this.atn.modeToStartState[this.mode];Be.debug&&console.log("matchATN mode "+this.mode+" start: "+e);const n=this.mode,r=this.computeStartState(t,e),s=r.hasSemanticContext;r.hasSemanticContext=!1;const i=this.addDFAState(r);s||(this.decisionToDFA[this.mode].s0=i);const a=this.execATN(t,i);return Be.debug&&console.log("DFA after matchATN: "+this.decisionToDFA[n].toLexerString()),a}execATN(t,e){Be.debug&&console.log("start state closure="+e.configs),e.isAcceptState&&this.captureSimState(this.prevAccept,t,e);let n=t.LA(1),r=e;for(;;){Be.debug&&console.log("execATN loop starting closure: "+r.configs);let e=this.getExistingTargetState(r,n);if(null===e&&(e=this.computeTargetState(t,r,n)),e===Fe.ERROR)break;if(n!==Q.EOF&&this.consume(t),e.isAcceptState&&(this.captureSimState(this.prevAccept,t,e),n===Q.EOF))break;n=t.LA(1),r=e}return this.failOrAccept(this.prevAccept,t,r.configs,n)}getExistingTargetState(t,e){if(null===t.edges||e<Be.MIN_DFA_EDGE||e>Be.MAX_DFA_EDGE)return null;let n=t.edges[e-Be.MIN_DFA_EDGE];return void 0===n&&(n=null),Be.debug&&null!==n&&console.log("reuse state "+t.stateNumber+" edge to "+n.stateNumber),n}computeTargetState(t,e,n){const r=new De;return this.getReachableConfigSet(t,e.configs,r,n),0===r.items.length?(r.hasSemanticContext||this.addDFAEdge(e,n,Fe.ERROR),Fe.ERROR):this.addDFAEdge(e,n,null,r)}failOrAccept(t,e,n,r){if(null!==this.prevAccept.dfaState){const n=t.dfaState.lexerActionExecutor;return this.accept(e,n,this.startIndex,t.index,t.line,t.column),t.dfaState.prediction}if(r===Q.EOF&&e.index===this.startIndex)return Q.EOF;throw new Re(this.recog,e,this.startIndex,n)}getReachableConfigSet(t,e,n,r){let s=Vt.INVALID_ALT_NUMBER;for(let i=0;i<e.items.length;i++){const a=e.items[i],o=a.alt===s;if(!o||!a.passedThroughNonGreedyDecision){Be.debug&&console.log("testing %s at %s\n",this.getTokenName(r),a.toString(this.recog,!0));for(let e=0;e<a.state.transitions.length;e++){const i=a.state.transitions[e],l=this.getReachableTarget(i,r);if(null!==l){let e=a.lexerActionExecutor;null!==e&&(e=e.fixOffsetBeforeMatch(t.index-this.startIndex));const i=r===Q.EOF,u=new Me({state:l,lexerActionExecutor:e},a);this.closure(t,u,n,o,!0,i)&&(s=a.alt)}}}}}accept(t,e,n,r,s,i){Be.debug&&console.log("ACTION %s\n",e),t.seek(r),this.line=s,this.column=i,null!==e&&null!==this.recog&&e.execute(this.recog,t,n)}getReachableTarget(t,e){return t.matches(e,0,ke.MAX_CHAR_VALUE)?t.target:null}computeStartState(t,e){const n=Lt.EMPTY,r=new De;for(let s=0;s<e.transitions.length;s++){const i=e.transitions[s].target,a=new Me({state:i,alt:s+1,context:n},null);this.closure(t,a,r,!1,!1,!1)}return r}closure(t,e,n,r,s,i){let a=null;if(Be.debug&&console.log("closure("+e.toString(this.recog,!0)+")"),e.state instanceof mt){if(Be.debug&&(null!==this.recog?console.log("closure at %s rule stop %s\n",this.recog.ruleNames[e.state.ruleIndex],e):console.log("closure at rule stop %s\n",e)),null===e.context||e.context.hasEmptyPath()){if(null===e.context||e.context.isEmpty())return n.add(e),!0;n.add(new Me({state:e.state,context:Lt.EMPTY},e)),r=!0}if(null!==e.context&&!e.context.isEmpty())for(let o=0;o<e.context.length;o++)if(e.context.getReturnState(o)!==Lt.EMPTY_RETURN_STATE){const l=e.context.getParent(o),u=this.atn.states[e.context.getReturnState(o)];a=new Me({state:u,context:l},e),r=this.closure(t,a,n,r,s,i)}return r}e.state.epsilonOnlyTransitions||r&&e.passedThroughNonGreedyDecision||n.add(e);for(let o=0;o<e.state.transitions.length;o++){const l=e.state.transitions[o];a=this.getEpsilonTarget(t,e,l,n,s,i),null!==a&&(r=this.closure(t,a,n,r,s,i))}return r}getEpsilonTarget(t,e,n,r,s,i){let a=null;if(n.serializationType===gt.RULE){const t=Ot.create(e.context,n.followState.stateNumber);a=new Me({state:n.target,context:t},e)}else{if(n.serializationType===gt.PRECEDENCE)throw"Precedence predicates are not supported in lexers.";if(n.serializationType===gt.PREDICATE)Be.debug&&console.log("EVAL rule "+n.ruleIndex+":"+n.predIndex),r.hasSemanticContext=!0,this.evaluatePredicate(t,n.ruleIndex,n.predIndex,s)&&(a=new Me({state:n.target},e));else if(n.serializationType===gt.ACTION)if(null===e.context||e.context.hasEmptyPath()){const t=je.append(e.lexerActionExecutor,this.atn.lexerActions[n.actionIndex]);a=new Me({state:n.target,lexerActionExecutor:t},e)}else a=new Me({state:n.target},e);else n.serializationType===gt.EPSILON?a=new Me({state:n.target},e):n.serializationType!==gt.ATOM&&n.serializationType!==gt.RANGE&&n.serializationType!==gt.SET||i&&n.matches(Q.EOF,0,ke.MAX_CHAR_VALUE)&&(a=new Me({state:n.target},e))}return a}evaluatePredicate(t,e,n,r){if(null===this.recog)return!0;if(!r)return this.recog.sempred(null,e,n);const s=this.column,i=this.line,a=t.index,o=t.mark();try{return this.consume(t),this.recog.sempred(null,e,n)}finally{this.column=s,this.line=i,t.seek(a),t.release(o)}}captureSimState(t,e,n){t.index=e.index,t.line=this.line,t.column=this.column,t.dfaState=n}addDFAEdge(t,e,n,r){if(void 0===n&&(n=null),void 0===r&&(r=null),null===n&&null!==r){const t=r.hasSemanticContext;if(r.hasSemanticContext=!1,n=this.addDFAState(r),t)return n}return e<Be.MIN_DFA_EDGE||e>Be.MAX_DFA_EDGE||(Be.debug&&console.log("EDGE "+t+" -> "+n+" upon "+e),null===t.edges&&(t.edges=[]),t.edges[e-Be.MIN_DFA_EDGE]=n),n}addDFAState(t){const e=new Pe(null,t);let n=null;for(let a=0;a<t.items.length;a++){const e=t.items[a];if(e.state instanceof mt){n=e;break}}null!==n&&(e.isAcceptState=!0,e.lexerActionExecutor=n.lexerActionExecutor,e.prediction=this.atn.ruleToTokenType[n.state.ruleIndex]);const r=this.decisionToDFA[this.mode],s=r.states.get(e);if(null!==s)return s;const i=e;return i.stateNumber=r.states.length,t.setReadonly(!0),i.configs=t,r.states.add(i),i}getDFA(t){return this.decisionToDFA[t]}getText(t){return t.getText(this.startIndex,t.index-1)}consume(t){t.LA(1)==="\n".charCodeAt(0)?(this.line+=1,this.column=0):this.column+=1,t.consume()}getTokenName(t){return-1===t?"EOF":"'"+String.fromCharCode(t)+"'"}}Be.debug=!1,Be.dfa_debug=!1,Be.MIN_DFA_EDGE=0,Be.MAX_DFA_EDGE=127;class $e{constructor(t,e){this.alt=e,this.pred=t}toString(){return"("+this.pred+", "+this.alt+")"}}class He{constructor(){this.data={}}get(t){return this.data["k-"+t]||null}set(t,e){this.data["k-"+t]=e}values(){return Object.keys(this.data).filter((t=>t.startsWith("k-"))).map((t=>this.data[t]),this)}}const Ge={SLL:0,LL:1,LL_EXACT_AMBIG_DETECTION:2,hasSLLConflictTerminatingPrediction:function(t,e){if(Ge.allConfigsInRuleStopStates(e))return!0;if(t===Ge.SLL&&e.hasSemanticContext){const t=new Oe;for(let n=0;n<e.items.length;n++){let r=e.items[n];r=new ht({semanticContext:at.NONE},r),t.add(r)}e=t}const n=Ge.getConflictingAltSubsets(e);return Ge.hasConflictingAltSet(n)&&!Ge.hasStateAssociatedWithOneAlt(e)},hasConfigInRuleStopState:function(t){for(let e=0;e<t.items.length;e++)if(t.items[e].state instanceof mt)return!0;return!1},allConfigsInRuleStopStates:function(t){for(let e=0;e<t.items.length;e++)if(!(t.items[e].state instanceof mt))return!1;return!0},resolvesToJustOneViableAlt:function(t){return Ge.getSingleViableAlt(t)},allSubsetsConflict:function(t){return!Ge.hasNonConflictingAltSet(t)},hasNonConflictingAltSet:function(t){for(let e=0;e<t.length;e++)if(1===t[e].length)return!0;return!1},hasConflictingAltSet:function(t){for(let e=0;e<t.length;e++)if(t[e].length>1)return!0;return!1},allSubsetsEqual:function(t){let e=null;for(let n=0;n<t.length;n++){const r=t[n];if(null===e)e=r;else if(r!==e)return!1}return!0},getUniqueAlt:function(t){const e=Ge.getAlts(t);return 1===e.length?e.minValue():Vt.INVALID_ALT_NUMBER},getAlts:function(t){const e=new jt;return t.map((function(t){e.or(t)})),e},getConflictingAltSubsets:function(t){const e=new Ft;return e.hashFunction=function(t){tt.hashStuff(t.state.stateNumber,t.context)},e.equalsFunction=function(t,e){return t.state.stateNumber===e.state.stateNumber&&t.context.equals(e.context)},t.items.map((function(t){let n=e.get(t);null===n&&(n=new jt,e.set(t,n)),n.set(t.alt)})),e.getValues()},getStateToAltMap:function(t){const e=new He;return t.items.map((function(t){let n=e.get(t.state);null===n&&(n=new jt,e.set(t.state,n)),n.set(t.alt)})),e},hasStateAssociatedWithOneAlt:function(t){const e=Ge.getStateToAltMap(t).values();for(let n=0;n<e.length;n++)if(1===e[n].length)return!0;return!1},getSingleViableAlt:function(t){let e=null;for(let n=0;n<t.length;n++){const r=t[n].minValue();if(null===e)e=r;else if(e!==r)return Vt.INVALID_ALT_NUMBER}return e}},We=Ge;class qe extends Ce{constructor(t,e,n,r,s,i){i=i||t._ctx,r=r||t.getCurrentToken(),n=n||t.getCurrentToken(),e=e||t.getInputStream(),super({message:"",recognizer:t,input:e,ctx:i}),this.deadEndConfigs=s,this.startToken=n,this.offendingToken=r}}class Ke{constructor(t){this.defaultMapCtor=t||Ft,this.cacheMap=new this.defaultMapCtor}get(t,e){const n=this.cacheMap.get(t)||null;return null===n?null:n.get(e)||null}set(t,e,n){let r=this.cacheMap.get(t)||null;null===r&&(r=new this.defaultMapCtor,this.cacheMap.set(t,r)),r.set(e,n)}}class Ye extends Fe{constructor(t,e,n,r){super(e,r),this.parser=t,this.decisionToDFA=n,this.predictionMode=We.LL,this._input=null,this._startIndex=0,this._outerContext=null,this._dfa=null,this.mergeCache=null,this.debug=!1,this.debug_closure=!1,this.debug_add=!1,this.trace_atn_sim=!1,this.dfa_debug=!1,this.retry_debug=!1}reset(){}adaptivePredict(t,e,n){(this.debug||this.trace_atn_sim)&&console.log("adaptivePredict decision "+e+" exec LA(1)=="+this.getLookaheadName(t)+" line "+t.LT(1).line+":"+t.LT(1).column),this._input=t,this._startIndex=t.index,this._outerContext=n;const r=this.decisionToDFA[e];this._dfa=r;const s=t.mark(),i=t.index;try{let e;if(e=r.precedenceDfa?r.getPrecedenceStartState(this.parser.getPrecedence()):r.s0,null===e){null===n&&(n=kt.EMPTY),this.debug&&console.log("predictATN decision "+r.decision+" exec LA(1)=="+this.getLookaheadName(t)+", outerContext="+n.toString(this.parser.ruleNames));const s=!1;let i=this.computeStartState(r.atnStartState,kt.EMPTY,s);r.precedenceDfa?(r.s0.configs=i,i=this.applyPrecedenceFilter(i),e=this.addDFAState(r,new Pe(null,i)),r.setPrecedenceStartState(this.parser.getPrecedence(),e)):(e=this.addDFAState(r,new Pe(null,i)),r.s0=e)}const s=this.execATN(r,e,t,i,n);return this.debug&&console.log("DFA after predictATN: "+r.toString(this.parser.literalNames,this.parser.symbolicNames)),s}finally{this._dfa=null,this.mergeCache=null,t.seek(i),t.release(s)}}execATN(t,e,n,r,s){let i;(this.debug||this.trace_atn_sim)&&console.log("execATN decision "+t.decision+", DFA state "+e+", LA(1)=="+this.getLookaheadName(n)+" line "+n.LT(1).line+":"+n.LT(1).column);let a=e;this.debug&&console.log("s0 = "+e);let o=n.LA(1);for(;;){let e=this.getExistingTargetState(a,o);if(null===e&&(e=this.computeTargetState(t,a,o)),e===Fe.ERROR){const t=this.noViableAlt(n,s,a.configs,r);if(n.seek(r),i=this.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(a.configs,s),i!==Vt.INVALID_ALT_NUMBER)return i;throw t}if(e.requiresFullContext&&this.predictionMode!==We.SLL){let a=null;if(null!==e.predicates){this.debug&&console.log("DFA state has preds in DFA sim LL failover");const t=n.index;if(t!==r&&n.seek(r),a=this.evalSemanticContext(e.predicates,s,!0),1===a.length)return this.debug&&console.log("Full LL avoided"),a.minValue();t!==r&&n.seek(t)}this.dfa_debug&&console.log("ctx sensitive state "+s+" in "+e);const o=!0,l=this.computeStartState(t.atnStartState,s,o);return this.reportAttemptingFullContext(t,a,e.configs,r,n.index),i=this.execATNWithFullContext(t,e,l,n,r,s),i}if(e.isAcceptState){if(null===e.predicates)return e.prediction;const i=n.index;n.seek(r);const a=this.evalSemanticContext(e.predicates,s,!0);if(0===a.length)throw this.noViableAlt(n,s,e.configs,r);return 1===a.length||this.reportAmbiguity(t,e,r,i,!1,a,e.configs),a.minValue()}a=e,o!==Q.EOF&&(n.consume(),o=n.LA(1))}}getExistingTargetState(t,e){const n=t.edges;return null===n?null:n[e+1]||null}computeTargetState(t,e,n){const r=this.computeReachSet(e.configs,n,!1);if(null===r)return this.addDFAEdge(t,e,n,Fe.ERROR),Fe.ERROR;let s=new Pe(null,r);const i=this.getUniqueAlt(r);if(this.debug){const t=We.getConflictingAltSubsets(r);console.log("SLL altSubSets="+st(t)+", configs="+r+", predict="+i+", allSubsetsConflict="+We.allSubsetsConflict(t)+", conflictingAlts="+this.getConflictingAlts(r))}return i!==Vt.INVALID_ALT_NUMBER?(s.isAcceptState=!0,s.configs.uniqueAlt=i,s.prediction=i):We.hasSLLConflictTerminatingPrediction(this.predictionMode,r)&&(s.configs.conflictingAlts=this.getConflictingAlts(r),s.requiresFullContext=!0,s.isAcceptState=!0,s.prediction=s.configs.conflictingAlts.minValue()),s.isAcceptState&&s.configs.hasSemanticContext&&(this.predicateDFAState(s,this.atn.getDecisionState(t.decision)),null!==s.predicates&&(s.prediction=Vt.INVALID_ALT_NUMBER)),s=this.addDFAEdge(t,e,n,s),s}predicateDFAState(t,e){const n=e.transitions.length,r=this.getConflictingAltsOrUniqueAlt(t.configs),s=this.getPredsForAmbigAlts(r,t.configs,n);null!==s?(t.predicates=this.getPredicatePredictions(r,s),t.prediction=Vt.INVALID_ALT_NUMBER):t.prediction=r.minValue()}execATNWithFullContext(t,e,n,r,s,i){(this.debug||this.trace_atn_sim)&&console.log("execATNWithFullContext "+n);let a,o=!1,l=n;r.seek(s);let u=r.LA(1),c=-1;for(;;){if(a=this.computeReachSet(l,u,!0),null===a){const t=this.noViableAlt(r,i,l,s);r.seek(s);const e=this.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(l,i);if(e!==Vt.INVALID_ALT_NUMBER)return e;throw t}const t=We.getConflictingAltSubsets(a);if(this.debug&&console.log("LL altSubSets="+t+", predict="+We.getUniqueAlt(t)+", resolvesToJustOneViableAlt="+We.resolvesToJustOneViableAlt(t)),a.uniqueAlt=this.getUniqueAlt(a),a.uniqueAlt!==Vt.INVALID_ALT_NUMBER){c=a.uniqueAlt;break}if(this.predictionMode!==We.LL_EXACT_AMBIG_DETECTION){if(c=We.resolvesToJustOneViableAlt(t),c!==Vt.INVALID_ALT_NUMBER)break}else if(We.allSubsetsConflict(t)&&We.allSubsetsEqual(t)){o=!0,c=We.getSingleViableAlt(t);break}l=a,u!==Q.EOF&&(r.consume(),u=r.LA(1))}return a.uniqueAlt!==Vt.INVALID_ALT_NUMBER?(this.reportContextSensitivity(t,c,a,s,r.index),c):(this.reportAmbiguity(t,e,s,r.index,o,null,a),c)}computeReachSet(t,e,n){this.debug&&console.log("in computeReachSet, starting closure: "+t),null===this.mergeCache&&(this.mergeCache=new Ke);const r=new Oe(n);let s=null;for(let a=0;a<t.items.length;a++){const i=t.items[a];if(this.debug&&console.log("testing "+this.getTokenName(e)+" at "+i),i.state instanceof mt)(n||e===Q.EOF)&&(null===s&&(s=[]),s.push(i),this.debug_add&&console.log("added "+i+" to skippedStopStates"));else for(let t=0;t<i.state.transitions.length;t++){const n=i.state.transitions[t],s=this.getReachableTarget(n,e);if(null!==s){const t=new ht({state:s},i);r.add(t,this.mergeCache),this.debug_add&&console.log("added "+t+" to intermediate")}}}let i=null;if(null===s&&e!==Q.EOF&&(1===r.items.length||this.getUniqueAlt(r)!==Vt.INVALID_ALT_NUMBER)&&(i=r),null===i){i=new Oe(n);const t=new it,s=e===Q.EOF;for(let e=0;e<r.items.length;e++)this.closure(r.items[e],i,t,!1,n,s)}if(e===Q.EOF&&(i=this.removeAllConfigsNotInRuleStopState(i,i===r)),!(null===s||n&&We.hasConfigInRuleStopState(i)))for(let a=0;a<s.length;a++)i.add(s[a],this.mergeCache);return this.trace_atn_sim&&console.log("computeReachSet "+t+" -> "+i),0===i.items.length?null:i}removeAllConfigsNotInRuleStopState(t,e){if(We.allConfigsInRuleStopStates(t))return t;const n=new Oe(t.fullCtx);for(let r=0;r<t.items.length;r++){const s=t.items[r];if(s.state instanceof mt)n.add(s,this.mergeCache);else if(e&&s.state.epsilonOnlyTransitions&&this.atn.nextTokens(s.state).contains(Q.EPSILON)){const t=this.atn.ruleToStopState[s.state.ruleIndex];n.add(new ht({state:t},s),this.mergeCache)}}return n}computeStartState(t,e,n){const r=Dt(this.atn,e),s=new Oe(n);this.trace_atn_sim&&console.log("computeStartState from ATN state "+t+" initialContext="+r.toString(this.parser));for(let i=0;i<t.transitions.length;i++){const e=t.transitions[i].target,a=new ht({state:e,alt:i+1,context:r},null),o=new it;this.closure(a,s,o,!0,n,!1)}return s}applyPrecedenceFilter(t){let e;const n=[],r=new Oe(t.fullCtx);for(let s=0;s<t.items.length;s++){if(e=t.items[s],1!==e.alt)continue;const i=e.semanticContext.evalPrecedence(this.parser,this._outerContext);null!==i&&(n[e.state.stateNumber]=e.context,i!==e.semanticContext?r.add(new ht({semanticContext:i},e),this.mergeCache):r.add(e,this.mergeCache))}for(let s=0;s<t.items.length;s++)if(e=t.items[s],1!==e.alt){if(!e.precedenceFilterSuppressed){const t=n[e.state.stateNumber]||null;if(null!==t&&t.equals(e.context))continue}r.add(e,this.mergeCache)}return r}getReachableTarget(t,e){return t.matches(e,0,this.atn.maxTokenType)?t.target:null}getPredsForAmbigAlts(t,e,n){let r=[];for(let i=0;i<e.items.length;i++){const n=e.items[i];t.get(n.alt)&&(r[n.alt]=at.orContext(r[n.alt]||null,n.semanticContext))}let s=0;for(let i=1;i<n+1;i++){const t=r[i]||null;null===t?r[i]=at.NONE:t!==at.NONE&&(s+=1)}return 0===s&&(r=null),this.debug&&console.log("getPredsForAmbigAlts result "+st(r)),r}getPredicatePredictions(t,e){const n=[];let r=!1;for(let s=1;s<e.length;s++){const i=e[s];null!==t&&t.get(s)&&n.push(new $e(i,s)),i!==at.NONE&&(r=!0)}return r?n:null}getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(t,e){const n=this.splitAccordingToSemanticValidity(t,e),r=n[0],s=n[1];let i=this.getAltThatFinishedDecisionEntryRule(r);return i!==Vt.INVALID_ALT_NUMBER||s.items.length>0&&(i=this.getAltThatFinishedDecisionEntryRule(s),i!==Vt.INVALID_ALT_NUMBER)?i:Vt.INVALID_ALT_NUMBER}getAltThatFinishedDecisionEntryRule(t){const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.reachesIntoOuterContext>0||r.state instanceof mt&&r.context.hasEmptyPath())&&e.indexOf(r.alt)<0&&e.push(r.alt)}return 0===e.length?Vt.INVALID_ALT_NUMBER:Math.min.apply(null,e)}splitAccordingToSemanticValidity(t,e){const n=new Oe(t.fullCtx),r=new Oe(t.fullCtx);for(let s=0;s<t.items.length;s++){const i=t.items[s];i.semanticContext!==at.NONE?i.semanticContext.evaluate(this.parser,e)?n.add(i):r.add(i):n.add(i)}return[n,r]}evalSemanticContext(t,e,n){const r=new jt;for(let s=0;s<t.length;s++){const i=t[s];if(i.pred===at.NONE){if(r.set(i.alt),!n)break;continue}const a=i.pred.evaluate(this.parser,e);if((this.debug||this.dfa_debug)&&console.log("eval pred "+i+"="+a),a&&((this.debug||this.dfa_debug)&&console.log("PREDICT "+i.alt),r.set(i.alt),!n))break}return r}closure(t,e,n,r,s,i){this.closureCheckingStopState(t,e,n,r,s,0,i)}closureCheckingStopState(t,e,n,r,s,i,a){if((this.trace_atn_sim||this.debug_closure)&&console.log("closure("+t.toString(this.parser,!0)+")"),t.state instanceof mt){if(!t.context.isEmpty()){for(let o=0;o<t.context.length;o++){if(t.context.getReturnState(o)===Lt.EMPTY_RETURN_STATE){if(s){e.add(new ht({state:t.state,context:Lt.EMPTY},t),this.mergeCache);continue}this.debug&&console.log("FALLING off rule "+this.getRuleName(t.state.ruleIndex)),this.closure_(t,e,n,r,s,i,a);continue}const l=this.atn.states[t.context.getReturnState(o)],u=t.context.getParent(o),c={state:l,alt:t.alt,context:u,semanticContext:t.semanticContext},h=new ht(c,null);h.reachesIntoOuterContext=t.reachesIntoOuterContext,this.closureCheckingStopState(h,e,n,r,s,i-1,a)}return}if(s)return void e.add(t,this.mergeCache);this.debug&&console.log("FALLING off rule "+this.getRuleName(t.state.ruleIndex))}this.closure_(t,e,n,r,s,i,a)}closure_(t,e,n,r,s,i,a){const o=t.state;o.epsilonOnlyTransitions||e.add(t,this.mergeCache);for(let l=0;l<o.transitions.length;l++){if(0===l&&this.canDropLoopEntryEdgeInLeftRecursiveRule(t))continue;const u=o.transitions[l],c=r&&!(u instanceof re),h=this.getEpsilonTarget(t,u,c,0===i,s,a);if(null!==h){let r=i;if(t.state instanceof mt){if(null!==this._dfa&&this._dfa.precedenceDfa&&u.outermostPrecedenceReturn===this._dfa.atnStartState.ruleIndex&&(h.precedenceFilterSuppressed=!0),h.reachesIntoOuterContext+=1,n.getOrAdd(h)!==h)continue;e.dipsIntoOuterContext=!0,r-=1,this.debug&&console.log("dips into outer ctx: "+h)}else{if(!u.isEpsilon&&n.getOrAdd(h)!==h)continue;u instanceof yt&&r>=0&&(r+=1)}this.closureCheckingStopState(h,e,n,c,s,r,a)}}}canDropLoopEntryEdgeInLeftRecursiveRule(t){const e=t.state;if(e.stateType!==ft.STAR_LOOP_ENTRY)return!1;if(e.stateType!==ft.STAR_LOOP_ENTRY||!e.isPrecedenceDecision||t.context.isEmpty()||t.context.hasEmptyPath())return!1;const n=t.context.length;for(let i=0;i<n;i++)if(this.atn.states[t.context.getReturnState(i)].ruleIndex!==e.ruleIndex)return!1;const r=e.transitions[0].target.endState.stateNumber,s=this.atn.states[r];for(let i=0;i<n;i++){const n=t.context.getReturnState(i),r=this.atn.states[n];if(1!==r.transitions.length||!r.transitions[0].isEpsilon)return!1;const a=r.transitions[0].target;if(!(r.stateType===ft.BLOCK_END&&a===e||r===s||a===s||a.stateType===ft.BLOCK_END&&1===a.transitions.length&&a.transitions[0].isEpsilon&&a.transitions[0].target===e))return!1}return!0}getRuleName(t){return null!==this.parser&&t>=0?this.parser.ruleNames[t]:"<rule "+t+">"}getEpsilonTarget(t,e,n,r,s,i){switch(e.serializationType){case gt.RULE:return this.ruleTransition(t,e);case gt.PRECEDENCE:return this.precedenceTransition(t,e,n,r,s);case gt.PREDICATE:return this.predTransition(t,e,n,r,s);case gt.ACTION:return this.actionTransition(t,e);case gt.EPSILON:return new ht({state:e.target},t);case gt.ATOM:case gt.RANGE:case gt.SET:return i&&e.matches(Q.EOF,0,1)?new ht({state:e.target},t):null;default:return null}}actionTransition(t,e){if(this.debug){const t=-1===e.actionIndex?65535:e.actionIndex;console.log("ACTION edge "+e.ruleIndex+":"+t)}return new ht({state:e.target},t)}precedenceTransition(t,e,n,r,s){this.debug&&(console.log("PRED (collectPredicates="+n+") "+e.precedence+">=_p, ctx dependent=true"),null!==this.parser&&console.log("context surrounding pred is "+st(this.parser.getRuleInvocationStack())));let i=null;if(n&&r)if(s){const n=this._input.index;this._input.seek(this._startIndex);const r=e.getPredicate().evaluate(this.parser,this._outerContext);this._input.seek(n),r&&(i=new ht({state:e.target},t))}else{const n=at.andContext(t.semanticContext,e.getPredicate());i=new ht({state:e.target,semanticContext:n},t)}else i=new ht({state:e.target},t);return this.debug&&console.log("config from pred transition="+i),i}predTransition(t,e,n,r,s){this.debug&&(console.log("PRED (collectPredicates="+n+") "+e.ruleIndex+":"+e.predIndex+", ctx dependent="+e.isCtxDependent),null!==this.parser&&console.log("context surrounding pred is "+st(this.parser.getRuleInvocationStack())));let i=null;if(n&&(e.isCtxDependent&&r||!e.isCtxDependent))if(s){const n=this._input.index;this._input.seek(this._startIndex);const r=e.getPredicate().evaluate(this.parser,this._outerContext);this._input.seek(n),r&&(i=new ht({state:e.target},t))}else{const n=at.andContext(t.semanticContext,e.getPredicate());i=new ht({state:e.target,semanticContext:n},t)}else i=new ht({state:e.target},t);return this.debug&&console.log("config from pred transition="+i),i}ruleTransition(t,e){this.debug&&console.log("CALL rule "+this.getRuleName(e.target.ruleIndex)+", ctx="+t.context);const n=e.followState,r=Ot.create(t.context,n.stateNumber);return new ht({state:e.target,context:r},t)}getConflictingAlts(t){const e=We.getConflictingAltSubsets(t);return We.getAlts(e)}getConflictingAltsOrUniqueAlt(t){let e=null;return t.uniqueAlt!==Vt.INVALID_ALT_NUMBER?(e=new jt,e.set(t.uniqueAlt)):e=t.conflictingAlts,e}getTokenName(t){if(t===Q.EOF)return"EOF";if(null!==this.parser&&null!==this.parser.literalNames){if(!(t>=this.parser.literalNames.length&&t>=this.parser.symbolicNames.length))return(this.parser.literalNames[t]||this.parser.symbolicNames[t])+"<"+t+">";console.log(t+" ttype out of range: "+this.parser.literalNames),console.log(""+this.parser.getInputStream().getTokens())}return""+t}getLookaheadName(t){return this.getTokenName(t.LA(1))}dumpDeadEndConfigs(t){console.log("dead end configs: ");const e=t.getDeadEndConfigs();for(let n=0;n<e.length;n++){const t=e[n];let r="no edges";if(t.state.transitions.length>0){const e=t.state.transitions[0];e instanceof ee?r="Atom "+this.getTokenName(e.label):e instanceof vt&&(r=(e instanceof bt?"~":"")+"Set "+e.set)}console.error(t.toString(this.parser,!0)+":"+r)}}noViableAlt(t,e,n,r){return new qe(this.parser,t,t.get(r),t.LT(1),n,e)}getUniqueAlt(t){let e=Vt.INVALID_ALT_NUMBER;for(let n=0;n<t.items.length;n++){const r=t.items[n];if(e===Vt.INVALID_ALT_NUMBER)e=r.alt;else if(r.alt!==e)return Vt.INVALID_ALT_NUMBER}return e}addDFAEdge(t,e,n,r){if(this.debug&&console.log("EDGE "+e+" -> "+r+" upon "+this.getTokenName(n)),null===r)return null;if(r=this.addDFAState(t,r),null===e||n<-1||n>this.atn.maxTokenType)return r;if(null===e.edges&&(e.edges=[]),e.edges[n+1]=r,this.debug){const e=null===this.parser?null:this.parser.literalNames,n=null===this.parser?null:this.parser.symbolicNames;console.log("DFA=\n"+t.toString(e,n))}return r}addDFAState(t,e){if(e===Fe.ERROR)return e;const n=t.states.get(e);return null!==n?(this.trace_atn_sim&&console.log("addDFAState "+e+" exists"),n):(e.stateNumber=t.states.length,e.configs.readOnly||(e.configs.optimizeConfigs(this),e.configs.setReadonly(!0)),this.trace_atn_sim&&console.log("addDFAState new "+e),t.states.add(e),this.debug&&console.log("adding new DFA state: "+e),e)}reportAttemptingFullContext(t,e,n,r,s){if(this.debug||this.retry_debug){const e=new dt(r,s+1);console.log("reportAttemptingFullContext decision="+t.decision+":"+n+", input="+this.parser.getTokenStream().getText(e))}null!==this.parser&&this.parser.getErrorListener().reportAttemptingFullContext(this.parser,t,r,s,e,n)}reportContextSensitivity(t,e,n,r,s){if(this.debug||this.retry_debug){const e=new dt(r,s+1);console.log("reportContextSensitivity decision="+t.decision+":"+n+", input="+this.parser.getTokenStream().getText(e))}null!==this.parser&&this.parser.getErrorListener().reportContextSensitivity(this.parser,t,r,s,e,n)}reportAmbiguity(t,e,n,r,s,i,a){if(this.debug||this.retry_debug){const t=new dt(n,r+1);console.log("reportAmbiguity "+i+":"+a+", input="+this.parser.getTokenStream().getText(t))}null!==this.parser&&this.parser.getErrorListener().reportAmbiguity(this.parser,t,n,r,s,i,a)}}class Qe{constructor(){this.cache=new Ft}add(t){if(t===Lt.EMPTY)return Lt.EMPTY;const e=this.cache.get(t)||null;return null!==e?e:(this.cache.set(t,t),t)}get(t){return this.cache.get(t)||null}get length(){return this.cache.length}}const Xe={ATN:Vt,ATNDeserializer:xe,LexerATNSimulator:Be,ParserATNSimulator:Ye,PredictionMode:We,PredictionContextCache:Qe};class Je{constructor(t,e,n){this.dfa=t,this.literalNames=e||[],this.symbolicNames=n||[]}toString(){if(null===this.dfa.s0)return null;let t="";const e=this.dfa.sortedStates();for(let n=0;n<e.length;n++){const r=e[n];if(null!==r.edges){const e=r.edges.length;for(let n=0;n<e;n++){const e=r.edges[n]||null;null!==e&&2147483647!==e.stateNumber&&(t=t.concat(this.getStateString(r)),t=t.concat("-"),t=t.concat(this.getEdgeLabel(n)),t=t.concat("->"),t=t.concat(this.getStateString(e)),t=t.concat("\n"))}}}return 0===t.length?null:t}getEdgeLabel(t){return 0===t?"EOF":null!==this.literalNames||null!==this.symbolicNames?this.literalNames[t-1]||this.symbolicNames[t-1]:String.fromCharCode(t-1)}getStateString(t){const e=(t.isAcceptState?":":"")+"s"+t.stateNumber+(t.requiresFullContext?"^":"");return t.isAcceptState?null!==t.predicates?e+"=>"+st(t.predicates):e+"=>"+t.prediction.toString():e}}class Ze extends Je{constructor(t){super(t,null)}getEdgeLabel(t){return"'"+String.fromCharCode(t)+"'"}}class tn{constructor(t,e){if(void 0===e&&(e=0),this.atnStartState=t,this.decision=e,this._states=new it,this.s0=null,this.precedenceDfa=!1,t instanceof Xt&&t.isPrecedenceDecision){this.precedenceDfa=!0;const t=new Pe(null,new Oe);t.edges=[],t.isAcceptState=!1,t.requiresFullContext=!1,this.s0=t}}getPrecedenceStartState(t){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";return t<0||t>=this.s0.edges.length?null:this.s0.edges[t]||null}setPrecedenceStartState(t,e){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";t<0||(this.s0.edges[t]=e)}setPrecedenceDfa(t){if(this.precedenceDfa!==t){if(this._states=new it,t){const t=new Pe(null,new Oe);t.edges=[],t.isAcceptState=!1,t.requiresFullContext=!1,this.s0=t}else this.s0=null;this.precedenceDfa=t}}sortedStates(){return this._states.values().sort((function(t,e){return t.stateNumber-e.stateNumber}))}toString(t,e){return t=t||null,e=e||null,null===this.s0?"":new Je(this,t,e).toString()}toLexerString(){return null===this.s0?"":new Ze(this).toString()}get states(){return this._states}}const en={DFA:tn,DFASerializer:Je,LexerDFASerializer:Ze,PredPrediction:$e},nn={PredictionContext:Lt},rn={Interval:dt,IntervalSet:pt};class sn{visitTerminal(t){}visitErrorNode(t){}enterEveryRule(t){}exitEveryRule(t){}}class an{visit(t){return Array.isArray(t)?t.map((function(t){return t.accept(this)}),this):t.accept(this)}visitChildren(t){return t.children?this.visit(t.children):null}visitTerminal(t){}visitErrorNode(t){}}class on{walk(t,e){if(e instanceof It||void 0!==e.isErrorNode&&e.isErrorNode())t.visitErrorNode(e);else if(e instanceof At)t.visitTerminal(e);else{this.enterRule(t,e);for(let n=0;n<e.getChildCount();n++){const r=e.getChild(n);this.walk(t,r)}this.exitRule(t,e)}}enterRule(t,e){const n=e.ruleContext;t.enterEveryRule(n),n.enterRule(t)}exitRule(t,e){const n=e.ruleContext;n.exitRule(t),t.exitEveryRule(n)}}on.DEFAULT=new on;const ln={Trees:Rt,RuleNode:Tt,ErrorNode:It,TerminalNode:At,ParseTreeListener:sn,ParseTreeVisitor:an,ParseTreeWalker:on};class un extends Ce{constructor(t){super({message:"",recognizer:t,input:t.getInputStream(),ctx:t._ctx}),this.offendingToken=t.getCurrentToken()}}class cn extends Ce{constructor(t,e,n){super({message:hn(e,n||null),recognizer:t,input:t.getInputStream(),ctx:t._ctx});const r=t._interp.atn.states[t.state].transitions[0];r instanceof ae?(this.ruleIndex=r.ruleIndex,this.predicateIndex=r.predIndex):(this.ruleIndex=0,this.predicateIndex=0),this.predicate=e,this.offendingToken=t.getCurrentToken()}}function hn(t,e){return null!==e?e:"failed predicate: {"+t+"}?"}class dn extends Se{constructor(t){super(),t=t||!0,this.exactOnly=t}reportAmbiguity(t,e,n,r,s,i,a){if(this.exactOnly&&!s)return;const o="reportAmbiguity d="+this.getDecisionDescription(t,e)+": ambigAlts="+this.getConflictingAlts(i,a)+", input='"+t.getTokenStream().getText(new dt(n,r))+"'";t.notifyErrorListeners(o)}reportAttemptingFullContext(t,e,n,r,s,i){const a="reportAttemptingFullContext d="+this.getDecisionDescription(t,e)+", input='"+t.getTokenStream().getText(new dt(n,r))+"'";t.notifyErrorListeners(a)}reportContextSensitivity(t,e,n,r,s,i){const a="reportContextSensitivity d="+this.getDecisionDescription(t,e)+", input='"+t.getTokenStream().getText(new dt(n,r))+"'";t.notifyErrorListeners(a)}getDecisionDescription(t,e){const n=e.decision,r=e.atnStartState.ruleIndex,s=t.ruleNames;if(r<0||r>=s.length)return""+n;const i=s[r]||null;return null===i||0===i.length?""+n:`${n} (${i})`}getConflictingAlts(t,e){if(null!==t)return t;const n=new jt;for(let r=0;r<e.items.length;r++)n.set(e.items[r].alt);return`{${n.values().join(", ")}}`}}class pn extends Error{constructor(){super(),Error.captureStackTrace(this,pn)}}class fn{reset(t){}recoverInline(t){}recover(t,e){}sync(t){}inErrorRecoveryMode(t){}reportError(t){}}class mn extends fn{constructor(){super(),this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.lastErrorStates=null,this.nextTokensContext=null,this.nextTokenState=0}reset(t){this.endErrorCondition(t)}beginErrorCondition(t){this.errorRecoveryMode=!0}inErrorRecoveryMode(t){return this.errorRecoveryMode}endErrorCondition(t){this.errorRecoveryMode=!1,this.lastErrorStates=null,this.lastErrorIndex=-1}reportMatch(t){this.endErrorCondition(t)}reportError(t,e){this.inErrorRecoveryMode(t)||(this.beginErrorCondition(t),e instanceof qe?this.reportNoViableAlternative(t,e):e instanceof un?this.reportInputMismatch(t,e):e instanceof cn?this.reportFailedPredicate(t,e):(console.log("unknown recognition error type: "+e.constructor.name),console.log(e.stack),t.notifyErrorListeners(e.getOffendingToken(),e.getMessage(),e)))}recover(t,e){this.lastErrorIndex===t.getInputStream().index&&null!==this.lastErrorStates&&this.lastErrorStates.indexOf(t.state)>=0&&t.consume(),this.lastErrorIndex=t._input.index,null===this.lastErrorStates&&(this.lastErrorStates=[]),this.lastErrorStates.push(t.state);const n=this.getErrorRecoverySet(t);this.consumeUntil(t,n)}sync(t){if(this.inErrorRecoveryMode(t))return;const e=t._interp.atn.states[t.state],n=t.getTokenStream().LA(1),r=t.atn.nextTokens(e);if(r.contains(n))return this.nextTokensContext=null,void(this.nextTokenState=ft.INVALID_STATE_NUMBER);if(r.contains(Q.EPSILON))null===this.nextTokensContext&&(this.nextTokensContext=t._ctx,this.nextTokensState=t._stateNumber);else switch(e.stateType){case ft.BLOCK_START:case ft.STAR_BLOCK_START:case ft.PLUS_BLOCK_START:case ft.STAR_LOOP_ENTRY:if(null!==this.singleTokenDeletion(t))return;throw new un(t);case ft.PLUS_LOOP_BACK:case ft.STAR_LOOP_BACK:{this.reportUnwantedToken(t);const e=new pt;e.addSet(t.getExpectedTokens());const n=e.addSet(this.getErrorRecoverySet(t));this.consumeUntil(t,n)}}}reportNoViableAlternative(t,e){const n=t.getTokenStream();let r;r=null!==n?e.startToken.type===Q.EOF?"<EOF>":n.getText(new dt(e.startToken.tokenIndex,e.offendingToken.tokenIndex)):"<unknown input>";const s="no viable alternative at input "+this.escapeWSAndQuote(r);t.notifyErrorListeners(s,e.offendingToken,e)}reportInputMismatch(t,e){const n="mismatched input "+this.getTokenErrorDisplay(e.offendingToken)+" expecting "+e.getExpectedTokens().toString(t.literalNames,t.symbolicNames);t.notifyErrorListeners(n,e.offendingToken,e)}reportFailedPredicate(t,e){const n="rule "+t.ruleNames[t._ctx.ruleIndex]+" "+e.message;t.notifyErrorListeners(n,e.offendingToken,e)}reportUnwantedToken(t){if(this.inErrorRecoveryMode(t))return;this.beginErrorCondition(t);const e=t.getCurrentToken(),n="extraneous input "+this.getTokenErrorDisplay(e)+" expecting "+this.getExpectedTokens(t).toString(t.literalNames,t.symbolicNames);t.notifyErrorListeners(n,e,null)}reportMissingToken(t){if(this.inErrorRecoveryMode(t))return;this.beginErrorCondition(t);const e=t.getCurrentToken(),n="missing "+this.getExpectedTokens(t).toString(t.literalNames,t.symbolicNames)+" at "+this.getTokenErrorDisplay(e);t.notifyErrorListeners(n,e,null)}recoverInline(t){const e=this.singleTokenDeletion(t);if(null!==e)return t.consume(),e;if(this.singleTokenInsertion(t))return this.getMissingSymbol(t);throw new un(t)}singleTokenInsertion(t){const e=t.getTokenStream().LA(1),n=t._interp.atn,r=n.states[t.state].transitions[0].target;return!!n.nextTokens(r,t._ctx).contains(e)&&(this.reportMissingToken(t),!0)}singleTokenDeletion(t){const e=t.getTokenStream().LA(2);if(this.getExpectedTokens(t).contains(e)){this.reportUnwantedToken(t),t.consume();const e=t.getCurrentToken();return this.reportMatch(t),e}return null}getMissingSymbol(t){const e=t.getCurrentToken(),n=this.getExpectedTokens(t).first();let r;r=n===Q.EOF?"<missing EOF>":"<missing "+t.literalNames[n]+">";let s=e;const i=t.getTokenStream().LT(-1);return s.type===Q.EOF&&null!==i&&(s=i),t.getTokenFactory().create(s.source,n,r,Q.DEFAULT_CHANNEL,-1,-1,s.line,s.column)}getExpectedTokens(t){return t.getExpectedTokens()}getTokenErrorDisplay(t){if(null===t)return"<no token>";let e=t.text;return null===e&&(e=t.type===Q.EOF?"<EOF>":"<"+t.type+">"),this.escapeWSAndQuote(e)}escapeWSAndQuote(t){return"'"+(t=(t=(t=t.replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/\t/g,"\\t"))+"'"}getErrorRecoverySet(t){const e=t._interp.atn;let n=t._ctx;const r=new pt;for(;null!==n&&n.invokingState>=0;){const t=e.states[n.invokingState].transitions[0],s=e.nextTokens(t.followState);r.addSet(s),n=n.parentCtx}return r.removeOne(Q.EPSILON),r}consumeUntil(t,e){let n=t.getTokenStream().LA(1);for(;n!==Q.EOF&&!e.contains(n);)t.consume(),n=t.getTokenStream().LA(1)}}class gn extends mn{constructor(){super()}recover(t,e){let n=t._ctx;for(;null!==n;)n.exception=e,n=n.parentCtx;throw new pn(e)}recoverInline(t){this.recover(t,new un(t))}sync(t){}}const yn={RecognitionException:Ce,NoViableAltException:qe,LexerNoViableAltException:Re,InputMismatchException:un,FailedPredicateException:cn,DiagnosticErrorListener:dn,BailErrorStrategy:gn,DefaultErrorStrategy:mn,ErrorListener:Se};class vn{constructor(t,e){if(this.name="<empty>",this.strdata=t,this.decodeToUnicodeCodePoints=e||!1,this._index=0,this.data=[],this.decodeToUnicodeCodePoints)for(let n=0;n<this.strdata.length;){const t=this.strdata.codePointAt(n);this.data.push(t),n+=t<=65535?1:2}else{this.data=new Array(this.strdata.length);for(let t=0;t<this.strdata.length;t++)this.data[t]=this.strdata.charCodeAt(t)}this._size=this.data.length}reset(){this._index=0}consume(){if(this._index>=this._size)throw"cannot consume EOF";this._index+=1}LA(t){if(0===t)return 0;t<0&&(t+=1);const e=this._index+t-1;return e<0||e>=this._size?Q.EOF:this.data[e]}LT(t){return this.LA(t)}mark(){return-1}release(t){}seek(t){t<=this._index?this._index=t:this._index=Math.min(t,this._size)}getText(t,e){if(e>=this._size&&(e=this._size-1),t>=this._size)return"";if(this.decodeToUnicodeCodePoints){let n="";for(let r=t;r<=e;r++)n+=String.fromCodePoint(this.data[r]);return n}return this.strdata.slice(t,e+1)}toString(){return this.strdata}get index(){return this._index}get size(){return this._size}}class bn extends vn{constructor(t,e){super(t,e)}}var xn=K(763);const Sn="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;class wn extends bn{static fromPath(t,e,n){if(!Sn)throw new Error("FileStream is only available when running in Node!");xn.readFile(t,e,(function(t,e){let r=null;null!==e&&(r=new vn(e,!0)),n(t,r)}))}constructor(t,e,n){if(!Sn)throw new Error("FileStream is only available when running in Node!");super(xn.readFileSync(t,e||"utf-8"),n),this.fileName=t}}const _n={fromString:function(t){return new vn(t,!0)},fromBlob:function(t,e,n,r){const s=new window.FileReader;s.onload=function(t){const e=new vn(t.target.result,!0);n(e)},s.onerror=r,s.readAsText(t,e)},fromBuffer:function(t,e){return new vn(t.toString(e),!0)},fromPath:function(t,e,n){wn.fromPath(t,e,n)},fromPathSync:function(t,e){return new wn(t,e)}},En={arrayToString:st,stringToCharArray:function(t){let e=new Uint16Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}};class Tn{}class An extends Tn{constructor(t){super(),this.tokenSource=t,this.tokens=[],this.index=-1,this.fetchedEOF=!1}mark(){return 0}release(t){}reset(){this.seek(0)}seek(t){this.lazyInit(),this.index=this.adjustSeekIndex(t)}get size(){return this.tokens.length}get(t){return this.lazyInit(),this.tokens[t]}consume(){let t=!1;if(t=this.index>=0&&(this.fetchedEOF?this.index<this.tokens.length-1:this.index<this.tokens.length),!t&&this.LA(1)===Q.EOF)throw"cannot consume EOF";this.sync(this.index+1)&&(this.index=this.adjustSeekIndex(this.index+1))}sync(t){const e=t-this.tokens.length+1;return!(e>0)||this.fetch(e)>=e}fetch(t){if(this.fetchedEOF)return 0;for(let e=0;e<t;e++){const t=this.tokenSource.nextToken();if(t.tokenIndex=this.tokens.length,this.tokens.push(t),t.type===Q.EOF)return this.fetchedEOF=!0,e+1}return t}getTokens(t,e,n){if(void 0===n&&(n=null),t<0||e<0)return null;this.lazyInit();const r=[];e>=this.tokens.length&&(e=this.tokens.length-1);for(let s=t;s<e;s++){const t=this.tokens[s];if(t.type===Q.EOF)break;(null===n||n.contains(t.type))&&r.push(t)}return r}LA(t){return this.LT(t).type}LB(t){return this.index-t<0?null:this.tokens[this.index-t]}LT(t){if(this.lazyInit(),0===t)return null;if(t<0)return this.LB(-t);const e=this.index+t-1;return this.sync(e),e>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[e]}adjustSeekIndex(t){return t}lazyInit(){-1===this.index&&this.setup()}setup(){this.sync(0),this.index=this.adjustSeekIndex(0)}setTokenSource(t){this.tokenSource=t,this.tokens=[],this.index=-1,this.fetchedEOF=!1}nextTokenOnChannel(t,e){if(this.sync(t),t>=this.tokens.length)return-1;let n=this.tokens[t];for(;n.channel!==e;){if(n.type===Q.EOF)return-1;t+=1,this.sync(t),n=this.tokens[t]}return t}previousTokenOnChannel(t,e){for(;t>=0&&this.tokens[t].channel!==e;)t-=1;return t}getHiddenTokensToRight(t,e){if(void 0===e&&(e=-1),this.lazyInit(),t<0||t>=this.tokens.length)throw t+" not in 0.."+this.tokens.length-1;const n=this.nextTokenOnChannel(t+1,ke.DEFAULT_TOKEN_CHANNEL),r=t+1,s=-1===n?this.tokens.length-1:n;return this.filterForChannel(r,s,e)}getHiddenTokensToLeft(t,e){if(void 0===e&&(e=-1),this.lazyInit(),t<0||t>=this.tokens.length)throw t+" not in 0.."+this.tokens.length-1;const n=this.previousTokenOnChannel(t-1,ke.DEFAULT_TOKEN_CHANNEL);if(n===t-1)return null;const r=n+1,s=t-1;return this.filterForChannel(r,s,e)}filterForChannel(t,e,n){const r=[];for(let s=t;s<e+1;s++){const t=this.tokens[s];-1===n?t.channel!==ke.DEFAULT_TOKEN_CHANNEL&&r.push(t):t.channel===n&&r.push(t)}return 0===r.length?null:r}getSourceName(){return this.tokenSource.getSourceName()}getText(t){this.lazyInit(),this.fill(),t||(t=new dt(0,this.tokens.length-1));let e=t.start;e instanceof Q&&(e=e.tokenIndex);let n=t.stop;if(n instanceof Q&&(n=n.tokenIndex),null===e||null===n||e<0||n<0)return"";n>=this.tokens.length&&(n=this.tokens.length-1);let r="";for(let s=e;s<n+1;s++){const t=this.tokens[s];if(t.type===Q.EOF)break;r+=t.text}return r}fill(){for(this.lazyInit();1e3===this.fetch(1e3););}}Object.defineProperty(An,"size",{get:function(){return this.tokens.length}});class In extends An{constructor(t,e){super(t),this.channel=void 0===e?Q.DEFAULT_CHANNEL:e}adjustSeekIndex(t){return this.nextTokenOnChannel(t,this.channel)}LB(t){if(0===t||this.index-t<0)return null;let e=this.index,n=1;for(;n<=t;)e=this.previousTokenOnChannel(e-1,this.channel),n+=1;return e<0?null:this.tokens[e]}LT(t){if(this.lazyInit(),0===t)return null;if(t<0)return this.LB(-t);let e=this.index,n=1;for(;n<t;)this.sync(e+1)&&(e=this.nextTokenOnChannel(e+1,this.channel)),n+=1;return this.tokens[e]}getNumberOfOnChannelTokens(){let t=0;this.fill();for(let e=0;e<this.tokens.length;e++){const n=this.tokens[e];if(n.channel===this.channel&&(t+=1),n.type===Q.EOF)break}return t}}class Cn extends sn{constructor(t){super(),this.parser=t}enterEveryRule(t){console.log("enter   "+this.parser.ruleNames[t.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)}visitTerminal(t){console.log("consume "+t.symbol+" rule "+this.parser.ruleNames[this.parser._ctx.ruleIndex])}exitEveryRule(t){console.log("exit    "+this.parser.ruleNames[t.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)}}class Rn extends Ee{constructor(t){super(),this._input=null,this._errHandler=new mn,this._precedenceStack=[],this._precedenceStack.push(0),this._ctx=null,this.buildParseTrees=!0,this._tracer=null,this._parseListeners=null,this._syntaxErrors=0,this.setInputStream(t)}reset(){null!==this._input&&this._input.seek(0),this._errHandler.reset(this),this._ctx=null,this._syntaxErrors=0,this.setTrace(!1),this._precedenceStack=[],this._precedenceStack.push(0),null!==this._interp&&this._interp.reset()}match(t){let e=this.getCurrentToken();return e.type===t?(this._errHandler.reportMatch(this),this.consume()):(e=this._errHandler.recoverInline(this),this.buildParseTrees&&-1===e.tokenIndex&&this._ctx.addErrorNode(e)),e}matchWildcard(){let t=this.getCurrentToken();return t.type>0?(this._errHandler.reportMatch(this),this.consume()):(t=this._errHandler.recoverInline(this),this.buildParseTrees&&-1===t.tokenIndex&&this._ctx.addErrorNode(t)),t}getParseListeners(){return this._parseListeners||[]}addParseListener(t){if(null===t)throw"listener";null===this._parseListeners&&(this._parseListeners=[]),this._parseListeners.push(t)}removeParseListener(t){if(null!==this._parseListeners){const e=this._parseListeners.indexOf(t);e>=0&&this._parseListeners.splice(e,1),0===this._parseListeners.length&&(this._parseListeners=null)}}removeParseListeners(){this._parseListeners=null}triggerEnterRuleEvent(){if(null!==this._parseListeners){const t=this._ctx;this._parseListeners.forEach((function(e){e.enterEveryRule(t),t.enterRule(e)}))}}triggerExitRuleEvent(){if(null!==this._parseListeners){const t=this._ctx;this._parseListeners.slice(0).reverse().forEach((function(e){t.exitRule(e),e.exitEveryRule(t)}))}}getTokenFactory(){return this._input.tokenSource._factory}setTokenFactory(t){this._input.tokenSource._factory=t}getATNWithBypassAlts(){const t=this.getSerializedATN();if(null===t)throw"The current parser does not support an ATN with bypass alternatives.";let e=this.bypassAltsAtnCache[t];if(null===e){const n=new ue;n.generateRuleBypassTransitions=!0,e=new xe(n).deserialize(t),this.bypassAltsAtnCache[t]=e}return e}getInputStream(){return this.getTokenStream()}setInputStream(t){this.setTokenStream(t)}getTokenStream(){return this._input}setTokenStream(t){this._input=null,this.reset(),this._input=t}get syntaxErrorsCount(){return this._syntaxErrors}getCurrentToken(){return this._input.LT(1)}notifyErrorListeners(t,e,n){n=n||null,null===(e=e||null)&&(e=this.getCurrentToken()),this._syntaxErrors+=1;const r=e.line,s=e.column;this.getErrorListener().syntaxError(this,e,r,s,t,n)}consume(){const t=this.getCurrentToken();t.type!==Q.EOF&&this.getInputStream().consume();const e=null!==this._parseListeners&&this._parseListeners.length>0;if(this.buildParseTrees||e){let n;n=this._errHandler.inErrorRecoveryMode(this)?this._ctx.addErrorNode(t):this._ctx.addTokenNode(t),n.invokingState=this.state,e&&this._parseListeners.forEach((function(t){n instanceof It||void 0!==n.isErrorNode&&n.isErrorNode()?t.visitErrorNode(n):n instanceof At&&t.visitTerminal(n)}))}return t}addContextToParseTree(){null!==this._ctx.parentCtx&&this._ctx.parentCtx.addChild(this._ctx)}enterRule(t,e,n){this.state=e,this._ctx=t,this._ctx.start=this._input.LT(1),this.buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this._ctx.stop=this._input.LT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx.parentCtx}enterOuterAlt(t,e){t.setAltNumber(e),this.buildParseTrees&&this._ctx!==t&&null!==this._ctx.parentCtx&&(this._ctx.parentCtx.removeLastChild(),this._ctx.parentCtx.addChild(t)),this._ctx=t}getPrecedence(){return 0===this._precedenceStack.length?-1:this._precedenceStack[this._precedenceStack.length-1]}enterRecursionRule(t,e,n,r){this.state=e,this._precedenceStack.push(r),this._ctx=t,this._ctx.start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(t,e,n){const r=this._ctx;r.parentCtx=t,r.invokingState=e,r.stop=this._input.LT(-1),this._ctx=t,this._ctx.start=r.start,this.buildParseTrees&&this._ctx.addChild(r),this.triggerEnterRuleEvent()}unrollRecursionContexts(t){this._precedenceStack.pop(),this._ctx.stop=this._input.LT(-1);const e=this._ctx,n=this.getParseListeners();if(null!==n&&n.length>0)for(;this._ctx!==t;)this.triggerExitRuleEvent(),this._ctx=this._ctx.parentCtx;else this._ctx=t;e.parentCtx=t,this.buildParseTrees&&null!==t&&t.addChild(e)}getInvokingContext(t){let e=this._ctx;for(;null!==e;){if(e.ruleIndex===t)return e;e=e.parentCtx}return null}precpred(t,e){return e>=this._precedenceStack[this._precedenceStack.length-1]}inContext(t){return!1}isExpectedToken(t){const e=this._interp.atn;let n=this._ctx;const r=e.states[this.state];let s=e.nextTokens(r);if(s.contains(t))return!0;if(!s.contains(Q.EPSILON))return!1;for(;null!==n&&n.invokingState>=0&&s.contains(Q.EPSILON);){const r=e.states[n.invokingState].transitions[0];if(s=e.nextTokens(r.followState),s.contains(t))return!0;n=n.parentCtx}return!(!s.contains(Q.EPSILON)||t!==Q.EOF)}getExpectedTokens(){return this._interp.atn.getExpectedTokens(this.state,this._ctx)}getExpectedTokensWithinCurrentRule(){const t=this._interp.atn,e=t.states[this.state];return t.nextTokens(e)}getRuleIndex(t){const e=this.getRuleIndexMap()[t];return null!==e?e:-1}getRuleInvocationStack(t){null===(t=t||null)&&(t=this._ctx);const e=[];for(;null!==t;){const n=t.ruleIndex;n<0?e.push("n/a"):e.push(this.ruleNames[n]),t=t.parentCtx}return e}getDFAStrings(){return this._interp.decisionToDFA.toString()}dumpDFA(){let t=!1;for(let e=0;e<this._interp.decisionToDFA.length;e++){const n=this._interp.decisionToDFA[e];n.states.length>0&&(t&&console.log(),this.printer.println("Decision "+n.decision+":"),this.printer.print(n.toString(this.literalNames,this.symbolicNames)),t=!0)}}getSourceName(){return this._input.getSourceName()}setTrace(t){t?(null!==this._tracer&&this.removeParseListener(this._tracer),this._tracer=new Cn(this),this.addParseListener(this._tracer)):(this.removeParseListener(this._tracer),this._tracer=null)}}Rn.bypassAltsAtnCache={};class kn extends At{constructor(t){super(),this.parentCtx=null,this.symbol=t}getChild(t){return null}getSymbol(){return this.symbol}getParent(){return this.parentCtx}getPayload(){return this.symbol}getSourceInterval(){if(null===this.symbol)return dt.INVALID_INTERVAL;const t=this.symbol.tokenIndex;return new dt(t,t)}getChildCount(){return 0}accept(t){return t.visitTerminal(this)}getText(){return this.symbol.text}toString(){return this.symbol.type===Q.EOF?"<EOF>":this.symbol.text}}class Ln extends kn{constructor(t){super(t)}isErrorNode(){return!0}accept(t){return t.visitErrorNode(this)}}class Nn extends kt{constructor(t,e){super(t,e),this.children=null,this.start=null,this.stop=null,this.exception=null}copyFrom(t){this.parentCtx=t.parentCtx,this.invokingState=t.invokingState,this.children=null,this.start=t.start,this.stop=t.stop,t.children&&(this.children=[],t.children.map((function(t){t instanceof Ln&&(this.children.push(t),t.parentCtx=this)}),this))}enterRule(t){}exitRule(t){}addChild(t){return null===this.children&&(this.children=[]),this.children.push(t),t}removeLastChild(){null!==this.children&&this.children.pop()}addTokenNode(t){const e=new kn(t);return this.addChild(e),e.parentCtx=this,e}addErrorNode(t){const e=new Ln(t);return this.addChild(e),e.parentCtx=this,e}getChild(t,e){if(e=e||null,null===this.children||t<0||t>=this.children.length)return null;if(null===e)return this.children[t];for(let n=0;n<this.children.length;n++){const r=this.children[n];if(r instanceof e){if(0===t)return r;t-=1}}return null}getToken(t,e){if(null===this.children||e<0||e>=this.children.length)return null;for(let n=0;n<this.children.length;n++){const r=this.children[n];if(r instanceof At&&r.symbol.type===t){if(0===e)return r;e-=1}}return null}getTokens(t){if(null===this.children)return[];{const e=[];for(let n=0;n<this.children.length;n++){const r=this.children[n];r instanceof At&&r.symbol.type===t&&e.push(r)}return e}}getTypedRuleContext(t,e){return this.getChild(e,t)}getTypedRuleContexts(t){if(null===this.children)return[];{const e=[];for(let n=0;n<this.children.length;n++){const r=this.children[n];r instanceof t&&e.push(r)}return e}}getChildCount(){return null===this.children?0:this.children.length}getSourceInterval(){return null===this.start||null===this.stop?dt.INVALID_INTERVAL:new dt(this.start.tokenIndex,this.stop.tokenIndex)}}kt.EMPTY=new Nn;class On{static DEFAULT_PROGRAM_NAME="default";constructor(t){this.tokens=t,this.programs=new Map}getTokenStream(){return this.tokens}insertAfter(t,e){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:On.DEFAULT_PROGRAM_NAME;n="number"==typeof t?t:t.tokenIndex;let s=this.getProgram(r),i=new Dn(this.tokens,n,s.length,e);s.push(i)}insertBefore(t,e){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:On.DEFAULT_PROGRAM_NAME;n="number"==typeof t?t:t.tokenIndex;const s=this.getProgram(r),i=new Fn(this.tokens,n,s.length,e);s.push(i)}replaceSingle(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:On.DEFAULT_PROGRAM_NAME;this.replace(t,t,e,n)}replace(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:On.DEFAULT_PROGRAM_NAME;if("number"!=typeof t&&(t=t.tokenIndex),"number"!=typeof e&&(e=e.tokenIndex),t>e||t<0||e<0||e>=this.tokens.size)throw new RangeError(`replace: range invalid: ${t}..${e}(size=${this.tokens.size})`);let s=this.getProgram(r),i=new Mn(this.tokens,t,e,s.length,n);s.push(i)}delete(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:On.DEFAULT_PROGRAM_NAME;void 0===e&&(e=t),this.replace(t,e,null,n)}getProgram(t){let e=this.programs.get(t);return null==e&&(e=this.initializeProgram(t)),e}initializeProgram(t){const e=[];return this.programs.set(t,e),e}getText(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:On.DEFAULT_PROGRAM_NAME;e=t instanceof dt?t:new dt(0,this.tokens.size-1),"string"==typeof t&&(n=t);const r=this.programs.get(n);let s=e.start,i=e.stop;if(i>this.tokens.size-1&&(i=this.tokens.size-1),s<0&&(s=0),null==r||0===r.length)return this.tokens.getText(new dt(s,i));let a=[],o=this.reduceToSingleOperationPerIndex(r),l=s;for(;l<=i&&l<this.tokens.size;){let t=o.get(l);o.delete(l);let e=this.tokens.get(l);null==t?(e.type!==Q.EOF&&a.push(String(e.text)),l++):l=t.execute(a)}if(i===this.tokens.size-1)for(const u of o.values())u.index>=this.tokens.size-1&&a.push(u.text.toString());return a.join("")}reduceToSingleOperationPerIndex(t){for(let n=0;n<t.length;n++){let e=t[n];if(null==e)continue;if(!(e instanceof Mn))continue;let r=e,s=this.getKindOfOps(t,Fn,n);for(let n of s)n.index===r.index?(t[n.instructionIndex]=void 0,r.text=n.text.toString()+(null!=r.text?r.text.toString():"")):n.index>r.index&&n.index<=r.lastIndex&&(t[n.instructionIndex]=void 0);let i=this.getKindOfOps(t,Mn,n);for(let n of i){if(n.index>=r.index&&n.lastIndex<=r.lastIndex){t[n.instructionIndex]=void 0;continue}let e=n.lastIndex<r.index||n.index>r.lastIndex;if(null!=n.text||null!=r.text||e){if(!e)throw new Error(`replace op boundaries of ${r} overlap with previous ${n}`)}else t[n.instructionIndex]=void 0,r.index=Math.min(n.index,r.index),r.lastIndex=Math.max(n.lastIndex,r.lastIndex)}}for(let n=0;n<t.length;n++){let e=t[n];if(null==e)continue;if(!(e instanceof Fn))continue;let r=e,s=this.getKindOfOps(t,Fn,n);for(let n of s)n.index===r.index&&(n instanceof Dn?(r.text=this.catOpText(n.text,r.text),t[n.instructionIndex]=void 0):n instanceof Fn&&(r.text=this.catOpText(r.text,n.text),t[n.instructionIndex]=void 0));let i=this.getKindOfOps(t,Mn,n);for(let a of i)if(r.index!==a.index){if(r.index>=a.index&&r.index<=a.lastIndex)throw new Error(`insert op ${r} within boundaries of previous ${a}`)}else a.text=this.catOpText(r.text,a.text),t[n]=void 0}let e=new Map;for(let n of t)if(null!=n){if(null!=e.get(n.index))throw new Error("should only be one op per index");e.set(n.index,n)}return e}catOpText(t,e){let n="",r="";return null!=t&&(n=t.toString()),null!=e&&(r=e.toString()),n+r}getKindOfOps(t,e,n){return t.slice(0,n).filter((t=>t&&t instanceof e))}}class Pn{constructor(t,e,n,r){this.tokens=t,this.instructionIndex=n,this.index=e,this.text=void 0===r?"":r}toString(){let t=this.constructor.name;const e=t.indexOf("$");return t=t.substring(e+1,t.length),"<"+t+"@"+this.tokens.get(this.index)+':"'+this.text+'">'}}class Fn extends Pn{constructor(t,e,n,r){super(t,e,n,r)}execute(t){return this.text&&t.push(this.text.toString()),this.tokens.get(this.index).type!==Q.EOF&&t.push(String(this.tokens.get(this.index).text)),this.index+1}}class Dn extends Fn{constructor(t,e,n,r){super(t,e+1,n,r)}}class Mn extends Pn{constructor(t,e,n,r,s){super(t,e,r,s),this.lastIndex=n}execute(t){return this.text&&t.push(this.text.toString()),this.lastIndex+1}toString(){return null==this.text?"<DeleteOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+">":"<ReplaceOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+':"'+this.text+'">'}}const Un={atn:Xe,dfa:en,context:nn,misc:rn,tree:ln,error:yn,Token:Q,CommonToken:Te,CharStreams:_n,CharStream:vn,InputStream:bn,CommonTokenStream:In,Lexer:ke,Parser:Rn,ParserRuleContext:Nn,Interval:dt,IntervalSet:pt,LL1Analyzer:zt,Utils:En,TokenStreamRewriter:On};var jn=Y.MG,zn=Y.fr,Vn=Y.iH,Bn=Y.jB,$n=Y.M8,Hn=Y.pG,Gn=Y.eP,Wn=Y.JG,qn=Y.ay,Kn=Y.X2,Yn=Y.WU,Qn=Y.gw,Xn=Y.iX,Jn=Y.re,Zn=Y.Pg,tr=Y.tD,er=Y.Dj,nr=Y.ou;class rr extends Yn{enterProgram;exitProgram;enterClassDeclaration;exitClassDeclaration;enterClassName;exitClassName;enterClassVarDec;exitClassVarDec;enterFieldList;exitFieldList;enterFieldName;exitFieldName;enterSubroutineDeclaration;exitSubroutineDeclaration;enterSubroutineType;exitSubroutineType;enterSubroutineDecWithoutType;exitSubroutineDecWithoutType;enterSubroutineName;exitSubroutineName;enterSubroutineReturnType;exitSubroutineReturnType;enterVarType;exitVarType;enterParameterList;exitParameterList;enterParameter;exitParameter;enterParameterName;exitParameterName;enterSubroutineBody;exitSubroutineBody;enterRBrace;exitRBrace;enterVarDeclaration;exitVarDeclaration;enterVarNameInDeclaration;exitVarNameInDeclaration;enterVarName;exitVarName;enterStatements;exitStatements;enterStatement;exitStatement;enterLetStatement;exitLetStatement;enterEquals;exitEquals;enterIfElseStatement;exitIfElseStatement;enterIfStatement;exitIfStatement;enterIfExpression;exitIfExpression;enterElseStatement;exitElseStatement;enterWhileStatement;exitWhileStatement;enterWhileExpression;exitWhileExpression;enterDoStatement;exitDoStatement;enterSubroutineCall;exitSubroutineCall;enterSubroutineId;exitSubroutineId;enterReturnStatement;exitReturnStatement;enterExpressionList;exitExpressionList;enterExpression;exitExpression;enterGroupedExpression;exitGroupedExpression;enterUnaryOperation;exitUnaryOperation;enterArrayAccess;exitArrayAccess;enterConstant;exitConstant;enterBooleanLiteral;exitBooleanLiteral;enterUnaryOperator;exitUnaryOperator;enterBinaryOperator;exitBinaryOperator}new Set(z);class sr extends rr{globalSymbolTable=structuredClone(G);className="";errors=[];subRoutineInfo={};subroutineVarsCount=0;stopProcessingSubroutines=!1;subroutineId="";enterClassDeclaration=t=>{const e=t.className().IDENTIFIER().getText();if(void 0==this.globalSymbolTable[e])this.globalSymbolTable[e]={},this.className=e;else{const n=new g(t.className().start.line,t.className().start.start,t.className().stop.stop+1,e);this.errors.push(n)}};enterSubroutineDeclaration=t=>{let e;if(null!=t.subroutineType().CONSTRUCTOR())e=F.Constructor;else if(null!=t.subroutineType().METHOD())e=F.Method;else{if(null==t.subroutineType().FUNCTION())throw new Error("Invalid subroutine type");e=F.Function}const n=t.subroutineDecWithoutType(),r=n.subroutineName(),s=r.IDENTIFIER().getText(),i=this.className+"."+s;if(void 0!=this.globalSymbolTable[i])this.errors.push(new m(r.IDENTIFIER().symbol.line,r.start.start,r.start.stop,s)),this.stopProcessingSubroutines=!0;else{this.subroutineId=i;const t=n.parameterList().parameter_list().length;this.subRoutineInfo={type:e,paramsCount:t},this.subroutineVarsCount=0,this.stopProcessingSubroutines=!1}};enterVarNameInDeclaration=t=>{this.stopProcessingSubroutines||this.subroutineVarsCount++};exitSubroutineBody=t=>{this.stopProcessingSubroutines||(this.subRoutineInfo.localVarsCount=this.subroutineVarsCount,this.globalSymbolTable[this.subroutineId]={subroutineInfo:this.subRoutineInfo})}}class ir extends Hn{errors=[];syntaxError=(t,e,n,r,s,i)=>{if(null!=e||null!=i&&null!=i.offendingToken){const t=e??i.offendingToken;this.errors.push(new f(n,t.start,t.stop+1,s))}else if(i instanceof Kn)this.errors.push(new f(n,i.startToken.start,i.startToken.stop+1,s));else{if(null==i||!("startIndex"in i))throw console.error("Don't know how to handle this error"),new Error("Don't know how to handle this error");{const t=i;this.errors.push(new f(n,t.startIndex,t.startIndex+1,s))}}}}var ar,or;function lr(t,e,n){if(void 0==t.DOT())return{callType:ar.LocalMethod,subroutineIdText:e+"."+t.subroutineName().getText()};{const[e,r]=t.getText().split("."),s=n.lookup(e);return void 0!=s?{callType:ar.VarMethod,subroutineIdText:s.type+"."+r,symbol:s}:{callType:ar.ClassFunctionOrConstructor,subroutineIdText:t.getText()}}}!function(t){t[t.VarMethod=1]="VarMethod",t[t.LocalMethod=2]="LocalMethod",t[t.ClassFunctionOrConstructor=3]="ClassFunctionOrConstructor"}(ar||(ar={}));class ur extends rr{globalSymbolTable;filename;errors;localSymbolTable=new j;subroutineShouldReturnVoidType=!1;controlFlowGraphNode=new cr;subroutineName="";className="";stopProcessingErrorsInThisScope=!1;subroutineType;constructor(t,e,n=[]){super(),this.globalSymbolTable=t,this.filename=e,this.errors=n}enterClassDeclaration=t=>{const e=t.className()?.getText();if(""!=this.className)throw new Error("Cannot change class name");this.className=e,console.log("Filename",null!=this.filename,this.filename!=this.className),null!=this.filename&&this.filename!=this.className&&(console.error("FilenameDoesntMatchClassName"),this.errors.push(new y(t.start.line,t.start.start,t.start.stop,this.filename,this.className))),t.localSymbolTable=this.localSymbolTable};enterClassVarDec=t=>{let e;if(null!=t.STATIC())e=D.Static;else{if(null==t.FIELD())throw new Error("Unknown field modifier ");e=D.This}const n=t.fieldList().varType().getText();t.fieldList().fieldName_list().forEach((r=>{this.#t(t,e,r.getText(),n)}))};enterSubroutineDeclaration=t=>{if(null!=t.subroutineType().CONSTRUCTOR())this.subroutineType=F.Constructor,t.subroutineDecWithoutType().subroutineReturnType().getText()!==this.className&&this.#e(new C(t.start.line,t.start.start,t.start.stop));else if(null!=t.subroutineType().FUNCTION())this.subroutineType=F.Function;else{if(null==t.subroutineType().METHOD)throw new Error("Unknown subroutine type ");this.subroutineType=F.Method}};enterSubroutineDecWithoutType=t=>{const e=t.subroutineReturnType();this.subroutineShouldReturnVoidType=null!=e.VOID(),this.controlFlowGraphNode=new cr,this.subroutineName=t.subroutineName().getText()};enterParameter=t=>{this.#n(t,t.parameterName().getText(),t.varType().getText(),this.subroutineType==F.Method)};enterVarType=t=>{if(null!=t.IDENTIFIER()){const e=t.IDENTIFIER().getText();null==this.globalSymbolTable[e]&&this.#e(new x(t.start.line,t.start.start,t.start.stop,e))}};enterVarDeclaration=t=>{const e=t.varType().getText();t.varNameInDeclaration_list().forEach((n=>{this.#t(t,D.Local,n.getText(),e)}))};enterVarName=t=>{const e=this.localSymbolTable.lookup(t.getText());void 0==e?this.#e(new b(t.start.line,t.start.start,t.start.stop,t.getText())):this.subroutineType==F.Function&&e.scope==D.This&&this.#e(new O(t.start.line,t.start.start,t.start.stop))};enterConstant=t=>{null!=t.THIS_LITERAL()&&this.subroutineType==F.Function&&this.#e(new P(t.start.line,t.start.start,t.start.stop))};enterStatement=t=>{1==this.controlFlowGraphNode.returns&&(this.#e(new R(t.start.line,t.start.start,t.stop?.stop??t.start.stop)),this.stopProcessingErrorsInThisScope=!0)};enterRBrace=t=>{this.stopProcessingErrorsInThisScope=!1};enterWhileStatement=t=>{this.controlFlowGraphNode=this.controlFlowGraphNode.left=new cr(this.controlFlowGraphNode)};exitWhileStatement=t=>{null!=this.controlFlowGraphNode?.parent&&(this.controlFlowGraphNode=this.controlFlowGraphNode.parent)};enterIfStatement=t=>{this.controlFlowGraphNode=this.controlFlowGraphNode.left=new cr(this.controlFlowGraphNode)};exitIfStatement=t=>{null!=this.controlFlowGraphNode?.parent&&(this.controlFlowGraphNode=this.controlFlowGraphNode.parent)};enterElseStatement=t=>{this.controlFlowGraphNode=this.controlFlowGraphNode.right=new cr(this.controlFlowGraphNode)};exitElseStatement=t=>{null!=this.controlFlowGraphNode?.parent&&(this.controlFlowGraphNode=this.controlFlowGraphNode.parent)};enterLetStatement=t=>{const e=t.varName(),n=t.expression().constant();if(null!=e&&null!=n&&this.localSymbolTable.lookup(t.varName().getText())&&null==t.expression().constant().NULL_LITERAL()){const e=this.localSymbolTable.lookup(t.varName().getText()).type;if(-1!=hr.indexOf(e)){const n=t.expression().constant();switch(e){case"char":case"int":if(null===n.INTEGER_LITERAL())this.#e(new L(t.start.line,t.start.start,t.start.stop,e));else{const e=parseInt(n.INTEGER_LITERAL().getText());e>B&&this.#e(new N(t.start.line,t.start.start,t.start.stop,e,V,B))}break;case"boolean":null===n.booleanLiteral()&&this.#e(new L(t.start.line,t.start.start,t.start.stop,e));break;case"String":null===n.STRING_LITERAL()&&this.#e(new L(t.start.line,t.start.start,t.start.stop,e.toLowerCase()));break;default:throw new Error(`Unknown literal type ${e}`)}}}const r=t.expression().unaryOperation();if(e&&null!=r&&null!==r.unaryOperator().MINUS()&&null!=r.expression().constant()&&null!==r.expression().constant()?.INTEGER_LITERAL()){const e=parseInt(r.expression().constant().INTEGER_LITERAL().getText());-e<V&&this.#e(new N(t.start.line,t.start.start,t.start.stop,e,V,B))}};enterSubroutineCall=t=>{const e=t.subroutineId(),{callType:n,subroutineIdText:r}=lr(e,this.className,this.localSymbolTable),s=this.globalSymbolTable[r];if(void 0==s)this.#e(new T(t.start.line,t.start.start,t.start.stop,e.subroutineName().getText(),e.className()?.getText()));else if(s.subroutineInfo?.type==F.Method&&n==ar.ClassFunctionOrConstructor)this.#e(new A(t.start.line,t.start.start,t.start.stop,e.subroutineName().getText()));else if(s.subroutineInfo?.type==F.Function&&n==ar.LocalMethod)this.#e(new I(t.start.line,t.start.start,t.start.stop,e.subroutineName().getText()));else{const n=t.expressionList().expression_list().length;s.subroutineInfo.paramsCount!=n&&this.#e(new E(t.start.line,t.start.start,t.start.stop,e.getText(),s.subroutineInfo.paramsCount,n))}};enterReturnStatement=t=>{const e=null==t.expression();e&&!this.subroutineShouldReturnVoidType&&this.#e(new S(t.stop.line,t.stop.start,t.stop.stop)),!e&&this.subroutineShouldReturnVoidType&&this.#e(new w(t.stop.line,t.stop.start,t.stop.stop)),this.controlFlowGraphNode.returns=!0,this.subroutineType==F.Constructor&&(e||t.expression().expression_list().length>1||null==t.expression().constant()||null==t.expression().constant().THIS_LITERAL())&&this.#e(new k(t.stop.line,t.stop.start,t.stop.stop))};exitSubroutineBody=t=>{this.controlFlowGraphNode.returns||this.#e(new _(t.stop.line,t.stop.start,t.stop.stop,this.subroutineName)),this.subroutineType=void 0};exitSubroutineDeclaration=t=>{t.symbols=this.localSymbolTable.popStack()};exitClassDeclaration=t=>{for(;void 0!=this.controlFlowGraphNode?.parent;)this.controlFlowGraphNode=this.controlFlowGraphNode.parent};#n(t,e,n,r){this.localSymbolTable.lookup(e)?this.#e(new v(t.start.line,t.start.start,t.start.stop,e)):this.localSymbolTable.defineArgument(e,n,r)}#t(t,e,n,r){this.localSymbolTable.lookup(n)?this.#e(new v(t.start.line,t.start.start,t.start.stop,n)):this.localSymbolTable.define(e,n,r)}#e(t){this.stopProcessingErrorsInThisScope||this.errors.push(t)}}class cr{parent;left;right;_returns;constructor(t,e,n){this.parent=t,this.left=e,this.right=n}get returns(){if(this._returns)return this._returns;if(void 0==this.right&&void 0==this.left)return!1;if(void 0!=this.right&&void 0!=this.left)return this.left.returns&&this.right.returns;if(void 0!=this.left)return!1;throw new Error("Something went wrong - CFG has only right  subtree")}set returns(t){this._returns=t}print(){console.log("Branch returns value"),console.log("."),console.log(this.printBT())}printBT(t="",e=or.LEFT){let n="";return this._returns?(n+=this.#r(t,e),n+=" "+this._returns+"\n",n):(void 0==this.right&&void 0==this.left?(n+=this.#r(t,e),n+=" false\n"):(n+=this.left?.printBT(e==or.LEFT?"|   ":"    ",or.LEFT),this.right?(n+=t,n+=this.right?.printBT(e==or.LEFT?"|\t":"\t",or.RIGHT)):n+="\n"),n)}#r(t,e){return e==or.LEFT?"\u251c\u2500\u2500":"\u2514\u2500\u2500"}}!function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT"}(or||(or={}));const hr=[...z,"String"];class dr extends Xn{static CLASS=1;static CONSTRUCTOR=2;static FUNCTION=3;static METHOD=4;static FIELD=5;static STATIC=6;static VAR=7;static INT=8;static CHAR=9;static BOOLEAN=10;static VOID=11;static LET=12;static DO=13;static IF=14;static ELSE=15;static WHILE=16;static RETURN=17;static LBRACE=18;static RBRACE=19;static LPAREN=20;static RPAREN=21;static LBRACKET=22;static RBRACKET=23;static DOT=24;static COMMA=25;static SEMICOLON=26;static EQUALS=27;static PLUS=28;static MINUS=29;static MUL=30;static DIV=31;static AND=32;static OR=33;static TILDE=34;static LESS_THAN=35;static GREATER_THAN=36;static WS=37;static COMMENT=38;static LINE_COMMENT=39;static INTEGER_LITERAL=40;static TRUE=41;static FALSE=42;static NULL_LITERAL=43;static THIS_LITERAL=44;static IDENTIFIER=45;static STRING_LITERAL=46;static UnterminatedStringLiteral=47;static EOF=nr.EOF;static RULE_program=0;static RULE_classDeclaration=1;static RULE_className=2;static RULE_classVarDec=3;static RULE_fieldList=4;static RULE_fieldName=5;static RULE_subroutineDeclaration=6;static RULE_subroutineType=7;static RULE_subroutineDecWithoutType=8;static RULE_subroutineName=9;static RULE_subroutineReturnType=10;static RULE_varType=11;static RULE_parameterList=12;static RULE_parameter=13;static RULE_parameterName=14;static RULE_subroutineBody=15;static RULE_rBrace=16;static RULE_varDeclaration=17;static RULE_varNameInDeclaration=18;static RULE_varName=19;static RULE_statements=20;static RULE_statement=21;static RULE_letStatement=22;static RULE_equals=23;static RULE_ifElseStatement=24;static RULE_ifStatement=25;static RULE_ifExpression=26;static RULE_elseStatement=27;static RULE_whileStatement=28;static RULE_whileExpression=29;static RULE_doStatement=30;static RULE_subroutineCall=31;static RULE_subroutineId=32;static RULE_returnStatement=33;static RULE_expressionList=34;static RULE_expression=35;static RULE_groupedExpression=36;static RULE_unaryOperation=37;static RULE_arrayAccess=38;static RULE_constant=39;static RULE_booleanLiteral=40;static RULE_unaryOperator=41;static RULE_binaryOperator=42;static literalNames=[null,"'class'","'constructor'","'function'","'method'","'field'","'static'","'var'","'int'","'char'","'boolean'","'void'","'let'","'do'","'if'","'else'","'while'","'return'","'{'","'}'","'('","')'","'['","']'","'.'","','","';'","'='","'+'","'-'","'*'","'/'","'&'","'|'","'~'","'<'","'>'",null,null,null,null,"'true'","'false'","'null'","'this'"];static symbolicNames=[null,"CLASS","CONSTRUCTOR","FUNCTION","METHOD","FIELD","STATIC","VAR","INT","CHAR","BOOLEAN","VOID","LET","DO","IF","ELSE","WHILE","RETURN","LBRACE","RBRACE","LPAREN","RPAREN","LBRACKET","RBRACKET","DOT","COMMA","SEMICOLON","EQUALS","PLUS","MINUS","MUL","DIV","AND","OR","TILDE","LESS_THAN","GREATER_THAN","WS","COMMENT","LINE_COMMENT","INTEGER_LITERAL","TRUE","FALSE","NULL_LITERAL","THIS_LITERAL","IDENTIFIER","STRING_LITERAL","UnterminatedStringLiteral"];static ruleNames=["program","classDeclaration","className","classVarDec","fieldList","fieldName","subroutineDeclaration","subroutineType","subroutineDecWithoutType","subroutineName","subroutineReturnType","varType","parameterList","parameter","parameterName","subroutineBody","rBrace","varDeclaration","varNameInDeclaration","varName","statements","statement","letStatement","equals","ifElseStatement","ifStatement","ifExpression","elseStatement","whileStatement","whileExpression","doStatement","subroutineCall","subroutineId","returnStatement","expressionList","expression","groupedExpression","unaryOperation","arrayAccess","constant","booleanLiteral","unaryOperator","binaryOperator"];get grammarFileName(){return"JackParser.g4"}get literalNames(){return dr.literalNames}get symbolicNames(){return dr.symbolicNames}get ruleNames(){return dr.ruleNames}get serializedATN(){return dr._serializedATN}createFailedPredicateException(t,e){return new Gn(this,t,e)}constructor(t){super(t),this._interp=new Jn(this,dr._ATN,dr.DecisionsToDFA,new tr)}program(){const t=new pr(this,this._ctx,this.state);this.enterRule(t,0,dr.RULE_program);try{this.enterOuterAlt(t,1),this.state=86,this.classDeclaration(),this.state=87,this.match(dr.EOF)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}classDeclaration(){const t=new fr(this,this._ctx,this.state);let e;this.enterRule(t,2,dr.RULE_classDeclaration);try{for(this.enterOuterAlt(t,1),this.state=89,this.match(dr.CLASS),this.state=90,this.className(),this.state=91,this.match(dr.LBRACE),this.state=95,this._errHandler.sync(this),e=this._input.LA(1);5===e||6===e;)this.state=92,this.classVarDec(),this.state=97,this._errHandler.sync(this),e=this._input.LA(1);for(this.state=101,this._errHandler.sync(this),e=this._input.LA(1);0===(-32&e)&&0!==(1<<e&28);)this.state=98,this.subroutineDeclaration(),this.state=103,this._errHandler.sync(this),e=this._input.LA(1);this.state=104,this.rBrace()}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}className(){const t=new mr(this,this._ctx,this.state);this.enterRule(t,4,dr.RULE_className);try{this.enterOuterAlt(t,1),this.state=106,this.match(dr.IDENTIFIER)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}classVarDec(){const t=new gr(this,this._ctx,this.state);let e;this.enterRule(t,6,dr.RULE_classVarDec);try{this.enterOuterAlt(t,1),this.state=108,e=this._input.LA(1),5!==e&&6!==e?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=109,this.fieldList(),this.state=110,this.match(dr.SEMICOLON)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}fieldList(){const t=new yr(this,this._ctx,this.state);let e;this.enterRule(t,8,dr.RULE_fieldList);try{for(this.enterOuterAlt(t,1),this.state=112,this.varType(),this.state=113,this.fieldName(),this.state=118,this._errHandler.sync(this),e=this._input.LA(1);25===e;)this.state=114,this.match(dr.COMMA),this.state=115,this.fieldName(),this.state=120,this._errHandler.sync(this),e=this._input.LA(1)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}fieldName(){const t=new vr(this,this._ctx,this.state);this.enterRule(t,10,dr.RULE_fieldName);try{this.enterOuterAlt(t,1),this.state=121,this.match(dr.IDENTIFIER)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}subroutineDeclaration(){const t=new br(this,this._ctx,this.state);this.enterRule(t,12,dr.RULE_subroutineDeclaration);try{this.enterOuterAlt(t,1),this.state=123,this.subroutineType(),this.state=124,this.subroutineDecWithoutType()}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}subroutineType(){const t=new xr(this,this._ctx,this.state);let e;this.enterRule(t,14,dr.RULE_subroutineType);try{this.enterOuterAlt(t,1),this.state=126,e=this._input.LA(1),0!==(-32&e)||0===(1<<e&28)?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}subroutineDecWithoutType(){const t=new Sr(this,this._ctx,this.state);this.enterRule(t,16,dr.RULE_subroutineDecWithoutType);try{this.enterOuterAlt(t,1),this.state=128,this.subroutineReturnType(),this.state=129,this.subroutineName(),this.state=130,this.match(dr.LPAREN),this.state=131,this.parameterList(),this.state=132,this.match(dr.RPAREN),this.state=133,this.subroutineBody()}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}subroutineName(){const t=new wr(this,this._ctx,this.state);this.enterRule(t,18,dr.RULE_subroutineName);try{this.enterOuterAlt(t,1),this.state=135,this.match(dr.IDENTIFIER)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}subroutineReturnType(){const t=new _r(this,this._ctx,this.state);this.enterRule(t,20,dr.RULE_subroutineReturnType);try{switch(this.state=139,this._errHandler.sync(this),this._input.LA(1)){case 8:case 9:case 10:case 45:this.enterOuterAlt(t,1),this.state=137,this.varType();break;case 11:this.enterOuterAlt(t,2),this.state=138,this.match(dr.VOID);break;default:throw new Kn(this)}}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}varType(){const t=new Er(this,this._ctx,this.state);let e;this.enterRule(t,22,dr.RULE_varType);try{this.enterOuterAlt(t,1),this.state=141,e=this._input.LA(1),0===(-32&e)&&0!==(1<<e&1792)||45===e?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}parameterList(){const t=new Tr(this,this._ctx,this.state);let e;this.enterRule(t,24,dr.RULE_parameterList);try{if(this.enterOuterAlt(t,1),this.state=151,this._errHandler.sync(this),e=this._input.LA(1),0===(-32&e)&&0!==(1<<e&1792)||45===e)for(this.state=143,this.parameter(),this.state=148,this._errHandler.sync(this),e=this._input.LA(1);25===e;)this.state=144,this.match(dr.COMMA),this.state=145,this.parameter(),this.state=150,this._errHandler.sync(this),e=this._input.LA(1)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}parameter(){const t=new Ar(this,this._ctx,this.state);this.enterRule(t,26,dr.RULE_parameter);try{this.enterOuterAlt(t,1),this.state=153,this.varType(),this.state=154,this.parameterName()}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}parameterName(){const t=new Ir(this,this._ctx,this.state);this.enterRule(t,28,dr.RULE_parameterName);try{this.enterOuterAlt(t,1),this.state=156,this.match(dr.IDENTIFIER)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}subroutineBody(){const t=new Cr(this,this._ctx,this.state);let e;this.enterRule(t,30,dr.RULE_subroutineBody);try{for(this.enterOuterAlt(t,1),this.state=158,this.match(dr.LBRACE),this.state=162,this._errHandler.sync(this),e=this._input.LA(1);7===e;)this.state=159,this.varDeclaration(),this.state=164,this._errHandler.sync(this),e=this._input.LA(1);this.state=165,this.statements(),this.state=166,this.rBrace()}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}rBrace(){const t=new Rr(this,this._ctx,this.state);this.enterRule(t,32,dr.RULE_rBrace);try{this.enterOuterAlt(t,1),this.state=168,this.match(dr.RBRACE)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}varDeclaration(){const t=new kr(this,this._ctx,this.state);let e;this.enterRule(t,34,dr.RULE_varDeclaration);try{for(this.enterOuterAlt(t,1),this.state=170,this.match(dr.VAR),this.state=171,this.varType(),this.state=172,this.varNameInDeclaration(),this.state=177,this._errHandler.sync(this),e=this._input.LA(1);25===e;)this.state=173,this.match(dr.COMMA),this.state=174,this.varNameInDeclaration(),this.state=179,this._errHandler.sync(this),e=this._input.LA(1);this.state=180,this.match(dr.SEMICOLON)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}varNameInDeclaration(){const t=new Lr(this,this._ctx,this.state);this.enterRule(t,36,dr.RULE_varNameInDeclaration);try{this.enterOuterAlt(t,1),this.state=182,this.match(dr.IDENTIFIER)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}varName(){const t=new Nr(this,this._ctx,this.state);this.enterRule(t,38,dr.RULE_varName);try{this.enterOuterAlt(t,1),this.state=184,this.match(dr.IDENTIFIER)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}statements(){const t=new Or(this,this._ctx,this.state);let e;this.enterRule(t,40,dr.RULE_statements);try{for(this.enterOuterAlt(t,1),this.state=189,this._errHandler.sync(this),e=this._input.LA(1);0===(-32&e)&&0!==(1<<e&225280);)this.state=186,this.statement(),this.state=191,this._errHandler.sync(this),e=this._input.LA(1)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}statement(){const t=new Pr(this,this._ctx,this.state);this.enterRule(t,42,dr.RULE_statement);try{switch(this.state=197,this._errHandler.sync(this),this._input.LA(1)){case 12:this.enterOuterAlt(t,1),this.state=192,this.letStatement();break;case 14:this.enterOuterAlt(t,2),this.state=193,this.ifElseStatement();break;case 16:this.enterOuterAlt(t,3),this.state=194,this.whileStatement();break;case 13:this.enterOuterAlt(t,4),this.state=195,this.doStatement();break;case 17:this.enterOuterAlt(t,5),this.state=196,this.returnStatement();break;default:throw new Kn(this)}}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}letStatement(){const t=new Fr(this,this._ctx,this.state);this.enterRule(t,44,dr.RULE_letStatement);try{switch(this.enterOuterAlt(t,1),this.state=199,this.match(dr.LET),this.state=202,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,10,this._ctx)){case 1:this.state=200,this.varName();break;case 2:this.state=201,this.arrayAccess()}this.state=204,this.equals(),this.state=205,this.expression(0),this.state=206,this.match(dr.SEMICOLON)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}equals(){const t=new Dr(this,this._ctx,this.state);this.enterRule(t,46,dr.RULE_equals);try{this.enterOuterAlt(t,1),this.state=208,this.match(dr.EQUALS)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}ifElseStatement(){const t=new Mr(this,this._ctx,this.state);let e;this.enterRule(t,48,dr.RULE_ifElseStatement);try{this.enterOuterAlt(t,1),this.state=210,this.ifStatement(),this.state=212,this._errHandler.sync(this),e=this._input.LA(1),15===e&&(this.state=211,this.elseStatement())}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}ifStatement(){const t=new Ur(this,this._ctx,this.state);this.enterRule(t,50,dr.RULE_ifStatement);try{this.enterOuterAlt(t,1),this.state=214,this.match(dr.IF),this.state=215,this.match(dr.LPAREN),this.state=216,this.ifExpression(),this.state=217,this.match(dr.RPAREN),this.state=218,this.match(dr.LBRACE),this.state=219,this.statements(),this.state=220,this.rBrace()}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}ifExpression(){const t=new jr(this,this._ctx,this.state);this.enterRule(t,52,dr.RULE_ifExpression);try{this.enterOuterAlt(t,1),this.state=222,this.expression(0)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}elseStatement(){const t=new zr(this,this._ctx,this.state);this.enterRule(t,54,dr.RULE_elseStatement);try{this.enterOuterAlt(t,1),this.state=224,this.match(dr.ELSE),this.state=225,this.match(dr.LBRACE),this.state=226,this.statements(),this.state=227,this.rBrace()}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}whileStatement(){const t=new Vr(this,this._ctx,this.state);this.enterRule(t,56,dr.RULE_whileStatement);try{this.enterOuterAlt(t,1),this.state=229,this.match(dr.WHILE),this.state=230,this.match(dr.LPAREN),this.state=231,this.whileExpression(),this.state=232,this.match(dr.RPAREN),this.state=233,this.match(dr.LBRACE),this.state=234,this.statements(),this.state=235,this.rBrace()}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}whileExpression(){const t=new Br(this,this._ctx,this.state);this.enterRule(t,58,dr.RULE_whileExpression);try{this.enterOuterAlt(t,1),this.state=237,this.expression(0)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}doStatement(){const t=new $r(this,this._ctx,this.state);this.enterRule(t,60,dr.RULE_doStatement);try{this.enterOuterAlt(t,1),this.state=239,this.match(dr.DO),this.state=240,this.subroutineCall(),this.state=241,this.match(dr.SEMICOLON)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}subroutineCall(){const t=new Hr(this,this._ctx,this.state);this.enterRule(t,62,dr.RULE_subroutineCall);try{this.enterOuterAlt(t,1),this.state=243,this.subroutineId(),this.state=244,this.match(dr.LPAREN),this.state=245,this.expressionList(),this.state=246,this.match(dr.RPAREN)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}subroutineId(){const t=new Gr(this,this._ctx,this.state);this.enterRule(t,64,dr.RULE_subroutineId);try{if(this.enterOuterAlt(t,1),this.state=253,this._errHandler.sync(this),1===this._interp.adaptivePredict(this._input,13,this._ctx)){switch(this.state=250,this._errHandler.sync(this),this._input.LA(1)){case 45:this.state=248,this.className();break;case 44:this.state=249,this.match(dr.THIS_LITERAL);break;default:throw new Kn(this)}this.state=252,this.match(dr.DOT)}this.state=255,this.subroutineName()}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}returnStatement(){const t=new Wr(this,this._ctx,this.state);let e;this.enterRule(t,66,dr.RULE_returnStatement);try{this.enterOuterAlt(t,1),this.state=257,this.match(dr.RETURN),this.state=259,this._errHandler.sync(this),e=this._input.LA(1),0===(e-20&-32)&&0!==(1<<e-20&133186049)&&(this.state=258,this.expression(0)),this.state=261,this.match(dr.SEMICOLON)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}expressionList(){const t=new qr(this,this._ctx,this.state);let e;this.enterRule(t,68,dr.RULE_expressionList);try{if(this.enterOuterAlt(t,1),this.state=271,this._errHandler.sync(this),e=this._input.LA(1),0===(e-20&-32)&&0!==(1<<e-20&133186049))for(this.state=263,this.expression(0),this.state=268,this._errHandler.sync(this),e=this._input.LA(1);25===e;)this.state=264,this.match(dr.COMMA),this.state=265,this.expression(0),this.state=270,this._errHandler.sync(this),e=this._input.LA(1)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}expression(t){void 0===t&&(t=0);const e=this._ctx,n=this.state;let r=new Kr(this,this._ctx,n);this.enterRecursionRule(r,70,dr.RULE_expression,t);try{let t;switch(this.enterOuterAlt(r,1),this.state=280,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,17,this._ctx)){case 1:this.state=274,this.constant();break;case 2:this.state=275,this.varName();break;case 3:this.state=276,this.subroutineCall();break;case 4:this.state=277,this.arrayAccess();break;case 5:this.state=278,this.unaryOperation();break;case 6:this.state=279,this.groupedExpression()}for(this._ctx.stop=this._input.LT(-1),this.state=288,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,18,this._ctx);2!==t&&t!==jn.INVALID_ALT_NUMBER;){if(1===t){if(null!=this._parseListeners&&this.triggerExitRuleEvent(),r=new Kr(this,e,n),this.pushNewRecursionContext(r,70,dr.RULE_expression),this.state=282,!this.precpred(this._ctx,2))throw this.createFailedPredicateException("this.precpred(this._ctx, 2)");this.state=283,this.binaryOperator(),this.state=284,this.expression(3)}this.state=290,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,18,this._ctx)}}catch(Xe){if(!(Xe instanceof er))throw Xe;r.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.unrollRecursionContexts(e)}return r}groupedExpression(){const t=new Yr(this,this._ctx,this.state);this.enterRule(t,72,dr.RULE_groupedExpression);try{this.enterOuterAlt(t,1),this.state=291,this.match(dr.LPAREN),this.state=292,this.expression(0),this.state=293,this.match(dr.RPAREN)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}unaryOperation(){const t=new Qr(this,this._ctx,this.state);this.enterRule(t,74,dr.RULE_unaryOperation);try{this.enterOuterAlt(t,1),this.state=295,this.unaryOperator(),this.state=296,this.expression(0)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}arrayAccess(){const t=new Xr(this,this._ctx,this.state);this.enterRule(t,76,dr.RULE_arrayAccess);try{this.enterOuterAlt(t,1),this.state=298,this.varName(),this.state=299,this.match(dr.LBRACKET),this.state=300,this.expression(0),this.state=301,this.match(dr.RBRACKET)}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}constant(){const t=new Jr(this,this._ctx,this.state);this.enterRule(t,78,dr.RULE_constant);try{switch(this.state=308,this._errHandler.sync(this),this._input.LA(1)){case 40:this.enterOuterAlt(t,1),this.state=303,this.match(dr.INTEGER_LITERAL);break;case 46:this.enterOuterAlt(t,2),this.state=304,this.match(dr.STRING_LITERAL);break;case 41:case 42:this.enterOuterAlt(t,3),this.state=305,this.booleanLiteral();break;case 43:this.enterOuterAlt(t,4),this.state=306,this.match(dr.NULL_LITERAL);break;case 44:this.enterOuterAlt(t,5),this.state=307,this.match(dr.THIS_LITERAL);break;default:throw new Kn(this)}}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}booleanLiteral(){const t=new Zr(this,this._ctx,this.state);let e;this.enterRule(t,80,dr.RULE_booleanLiteral);try{this.enterOuterAlt(t,1),this.state=310,e=this._input.LA(1),41!==e&&42!==e?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}unaryOperator(){const t=new ts(this,this._ctx,this.state);let e;this.enterRule(t,82,dr.RULE_unaryOperator);try{this.enterOuterAlt(t,1),this.state=312,e=this._input.LA(1),29!==e&&34!==e?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}binaryOperator(){const t=new es(this,this._ctx,this.state);let e;this.enterRule(t,84,dr.RULE_binaryOperator);try{this.enterOuterAlt(t,1),this.state=314,e=this._input.LA(1),0!==(e-27&-32)||0===(1<<e-27&895)?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(Xe){if(!(Xe instanceof er))throw Xe;t.exception=Xe,this._errHandler.reportError(this,Xe),this._errHandler.recover(this,Xe)}finally{this.exitRule()}return t}sempred(t,e,n){return 35!==e||this.expression_sempred(t,n)}expression_sempred(t,e){return 0!==e||this.precpred(this._ctx,2)}static _serializedATN=[4,1,47,317,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,2,17,7,17,2,18,7,18,2,19,7,19,2,20,7,20,2,21,7,21,2,22,7,22,2,23,7,23,2,24,7,24,2,25,7,25,2,26,7,26,2,27,7,27,2,28,7,28,2,29,7,29,2,30,7,30,2,31,7,31,2,32,7,32,2,33,7,33,2,34,7,34,2,35,7,35,2,36,7,36,2,37,7,37,2,38,7,38,2,39,7,39,2,40,7,40,2,41,7,41,2,42,7,42,1,0,1,0,1,0,1,1,1,1,1,1,1,1,5,1,94,8,1,10,1,12,1,97,9,1,1,1,5,1,100,8,1,10,1,12,1,103,9,1,1,1,1,1,1,2,1,2,1,3,1,3,1,3,1,3,1,4,1,4,1,4,1,4,5,4,117,8,4,10,4,12,4,120,9,4,1,5,1,5,1,6,1,6,1,6,1,7,1,7,1,8,1,8,1,8,1,8,1,8,1,8,1,8,1,9,1,9,1,10,1,10,3,10,140,8,10,1,11,1,11,1,12,1,12,1,12,5,12,147,8,12,10,12,12,12,150,9,12,3,12,152,8,12,1,13,1,13,1,13,1,14,1,14,1,15,1,15,5,15,161,8,15,10,15,12,15,164,9,15,1,15,1,15,1,15,1,16,1,16,1,17,1,17,1,17,1,17,1,17,5,17,176,8,17,10,17,12,17,179,9,17,1,17,1,17,1,18,1,18,1,19,1,19,1,20,5,20,188,8,20,10,20,12,20,191,9,20,1,21,1,21,1,21,1,21,1,21,3,21,198,8,21,1,22,1,22,1,22,3,22,203,8,22,1,22,1,22,1,22,1,22,1,23,1,23,1,24,1,24,3,24,213,8,24,1,25,1,25,1,25,1,25,1,25,1,25,1,25,1,25,1,26,1,26,1,27,1,27,1,27,1,27,1,27,1,28,1,28,1,28,1,28,1,28,1,28,1,28,1,28,1,29,1,29,1,30,1,30,1,30,1,30,1,31,1,31,1,31,1,31,1,31,1,32,1,32,3,32,251,8,32,1,32,3,32,254,8,32,1,32,1,32,1,33,1,33,3,33,260,8,33,1,33,1,33,1,34,1,34,1,34,5,34,267,8,34,10,34,12,34,270,9,34,3,34,272,8,34,1,35,1,35,1,35,1,35,1,35,1,35,1,35,3,35,281,8,35,1,35,1,35,1,35,1,35,5,35,287,8,35,10,35,12,35,290,9,35,1,36,1,36,1,36,1,36,1,37,1,37,1,37,1,38,1,38,1,38,1,38,1,38,1,39,1,39,1,39,1,39,1,39,3,39,309,8,39,1,40,1,40,1,41,1,41,1,42,1,42,1,42,0,1,70,43,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,0,6,1,0,5,6,1,0,2,4,2,0,8,10,45,45,1,0,41,42,2,0,29,29,34,34,2,0,27,33,35,36,303,0,86,1,0,0,0,2,89,1,0,0,0,4,106,1,0,0,0,6,108,1,0,0,0,8,112,1,0,0,0,10,121,1,0,0,0,12,123,1,0,0,0,14,126,1,0,0,0,16,128,1,0,0,0,18,135,1,0,0,0,20,139,1,0,0,0,22,141,1,0,0,0,24,151,1,0,0,0,26,153,1,0,0,0,28,156,1,0,0,0,30,158,1,0,0,0,32,168,1,0,0,0,34,170,1,0,0,0,36,182,1,0,0,0,38,184,1,0,0,0,40,189,1,0,0,0,42,197,1,0,0,0,44,199,1,0,0,0,46,208,1,0,0,0,48,210,1,0,0,0,50,214,1,0,0,0,52,222,1,0,0,0,54,224,1,0,0,0,56,229,1,0,0,0,58,237,1,0,0,0,60,239,1,0,0,0,62,243,1,0,0,0,64,253,1,0,0,0,66,257,1,0,0,0,68,271,1,0,0,0,70,280,1,0,0,0,72,291,1,0,0,0,74,295,1,0,0,0,76,298,1,0,0,0,78,308,1,0,0,0,80,310,1,0,0,0,82,312,1,0,0,0,84,314,1,0,0,0,86,87,3,2,1,0,87,88,5,0,0,1,88,1,1,0,0,0,89,90,5,1,0,0,90,91,3,4,2,0,91,95,5,18,0,0,92,94,3,6,3,0,93,92,1,0,0,0,94,97,1,0,0,0,95,93,1,0,0,0,95,96,1,0,0,0,96,101,1,0,0,0,97,95,1,0,0,0,98,100,3,12,6,0,99,98,1,0,0,0,100,103,1,0,0,0,101,99,1,0,0,0,101,102,1,0,0,0,102,104,1,0,0,0,103,101,1,0,0,0,104,105,3,32,16,0,105,3,1,0,0,0,106,107,5,45,0,0,107,5,1,0,0,0,108,109,7,0,0,0,109,110,3,8,4,0,110,111,5,26,0,0,111,7,1,0,0,0,112,113,3,22,11,0,113,118,3,10,5,0,114,115,5,25,0,0,115,117,3,10,5,0,116,114,1,0,0,0,117,120,1,0,0,0,118,116,1,0,0,0,118,119,1,0,0,0,119,9,1,0,0,0,120,118,1,0,0,0,121,122,5,45,0,0,122,11,1,0,0,0,123,124,3,14,7,0,124,125,3,16,8,0,125,13,1,0,0,0,126,127,7,1,0,0,127,15,1,0,0,0,128,129,3,20,10,0,129,130,3,18,9,0,130,131,5,20,0,0,131,132,3,24,12,0,132,133,5,21,0,0,133,134,3,30,15,0,134,17,1,0,0,0,135,136,5,45,0,0,136,19,1,0,0,0,137,140,3,22,11,0,138,140,5,11,0,0,139,137,1,0,0,0,139,138,1,0,0,0,140,21,1,0,0,0,141,142,7,2,0,0,142,23,1,0,0,0,143,148,3,26,13,0,144,145,5,25,0,0,145,147,3,26,13,0,146,144,1,0,0,0,147,150,1,0,0,0,148,146,1,0,0,0,148,149,1,0,0,0,149,152,1,0,0,0,150,148,1,0,0,0,151,143,1,0,0,0,151,152,1,0,0,0,152,25,1,0,0,0,153,154,3,22,11,0,154,155,3,28,14,0,155,27,1,0,0,0,156,157,5,45,0,0,157,29,1,0,0,0,158,162,5,18,0,0,159,161,3,34,17,0,160,159,1,0,0,0,161,164,1,0,0,0,162,160,1,0,0,0,162,163,1,0,0,0,163,165,1,0,0,0,164,162,1,0,0,0,165,166,3,40,20,0,166,167,3,32,16,0,167,31,1,0,0,0,168,169,5,19,0,0,169,33,1,0,0,0,170,171,5,7,0,0,171,172,3,22,11,0,172,177,3,36,18,0,173,174,5,25,0,0,174,176,3,36,18,0,175,173,1,0,0,0,176,179,1,0,0,0,177,175,1,0,0,0,177,178,1,0,0,0,178,180,1,0,0,0,179,177,1,0,0,0,180,181,5,26,0,0,181,35,1,0,0,0,182,183,5,45,0,0,183,37,1,0,0,0,184,185,5,45,0,0,185,39,1,0,0,0,186,188,3,42,21,0,187,186,1,0,0,0,188,191,1,0,0,0,189,187,1,0,0,0,189,190,1,0,0,0,190,41,1,0,0,0,191,189,1,0,0,0,192,198,3,44,22,0,193,198,3,48,24,0,194,198,3,56,28,0,195,198,3,60,30,0,196,198,3,66,33,0,197,192,1,0,0,0,197,193,1,0,0,0,197,194,1,0,0,0,197,195,1,0,0,0,197,196,1,0,0,0,198,43,1,0,0,0,199,202,5,12,0,0,200,203,3,38,19,0,201,203,3,76,38,0,202,200,1,0,0,0,202,201,1,0,0,0,203,204,1,0,0,0,204,205,3,46,23,0,205,206,3,70,35,0,206,207,5,26,0,0,207,45,1,0,0,0,208,209,5,27,0,0,209,47,1,0,0,0,210,212,3,50,25,0,211,213,3,54,27,0,212,211,1,0,0,0,212,213,1,0,0,0,213,49,1,0,0,0,214,215,5,14,0,0,215,216,5,20,0,0,216,217,3,52,26,0,217,218,5,21,0,0,218,219,5,18,0,0,219,220,3,40,20,0,220,221,3,32,16,0,221,51,1,0,0,0,222,223,3,70,35,0,223,53,1,0,0,0,224,225,5,15,0,0,225,226,5,18,0,0,226,227,3,40,20,0,227,228,3,32,16,0,228,55,1,0,0,0,229,230,5,16,0,0,230,231,5,20,0,0,231,232,3,58,29,0,232,233,5,21,0,0,233,234,5,18,0,0,234,235,3,40,20,0,235,236,3,32,16,0,236,57,1,0,0,0,237,238,3,70,35,0,238,59,1,0,0,0,239,240,5,13,0,0,240,241,3,62,31,0,241,242,5,26,0,0,242,61,1,0,0,0,243,244,3,64,32,0,244,245,5,20,0,0,245,246,3,68,34,0,246,247,5,21,0,0,247,63,1,0,0,0,248,251,3,4,2,0,249,251,5,44,0,0,250,248,1,0,0,0,250,249,1,0,0,0,251,252,1,0,0,0,252,254,5,24,0,0,253,250,1,0,0,0,253,254,1,0,0,0,254,255,1,0,0,0,255,256,3,18,9,0,256,65,1,0,0,0,257,259,5,17,0,0,258,260,3,70,35,0,259,258,1,0,0,0,259,260,1,0,0,0,260,261,1,0,0,0,261,262,5,26,0,0,262,67,1,0,0,0,263,268,3,70,35,0,264,265,5,25,0,0,265,267,3,70,35,0,266,264,1,0,0,0,267,270,1,0,0,0,268,266,1,0,0,0,268,269,1,0,0,0,269,272,1,0,0,0,270,268,1,0,0,0,271,263,1,0,0,0,271,272,1,0,0,0,272,69,1,0,0,0,273,274,6,35,-1,0,274,281,3,78,39,0,275,281,3,38,19,0,276,281,3,62,31,0,277,281,3,76,38,0,278,281,3,74,37,0,279,281,3,72,36,0,280,273,1,0,0,0,280,275,1,0,0,0,280,276,1,0,0,0,280,277,1,0,0,0,280,278,1,0,0,0,280,279,1,0,0,0,281,288,1,0,0,0,282,283,10,2,0,0,283,284,3,84,42,0,284,285,3,70,35,3,285,287,1,0,0,0,286,282,1,0,0,0,287,290,1,0,0,0,288,286,1,0,0,0,288,289,1,0,0,0,289,71,1,0,0,0,290,288,1,0,0,0,291,292,5,20,0,0,292,293,3,70,35,0,293,294,5,21,0,0,294,73,1,0,0,0,295,296,3,82,41,0,296,297,3,70,35,0,297,75,1,0,0,0,298,299,3,38,19,0,299,300,5,22,0,0,300,301,3,70,35,0,301,302,5,23,0,0,302,77,1,0,0,0,303,309,5,40,0,0,304,309,5,46,0,0,305,309,3,80,40,0,306,309,5,43,0,0,307,309,5,44,0,0,308,303,1,0,0,0,308,304,1,0,0,0,308,305,1,0,0,0,308,306,1,0,0,0,308,307,1,0,0,0,309,79,1,0,0,0,310,311,7,3,0,0,311,81,1,0,0,0,312,313,7,4,0,0,313,83,1,0,0,0,314,315,7,5,0,0,315,85,1,0,0,0,20,95,101,118,139,148,151,162,177,189,197,202,212,250,253,259,268,271,280,288,308];static __ATN;static get _ATN(){return dr.__ATN||(dr.__ATN=(new zn).deserialize(dr._serializedATN)),dr.__ATN}static DecisionsToDFA=dr._ATN.decisionToState.map(((t,e)=>new $n(t,e)))}class pr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}classDeclaration(){return this.getTypedRuleContext(fr,0)}EOF(){return this.getToken(dr.EOF,0)}get ruleIndex(){return dr.RULE_program}enterRule(t){t.enterProgram&&t.enterProgram(this)}exitRule(t){t.exitProgram&&t.exitProgram(this)}}class fr extends Zn{localSymbolTable;constructor(t,e,n){super(e,n),this.parser=t}CLASS(){return this.getToken(dr.CLASS,0)}className(){return this.getTypedRuleContext(mr,0)}LBRACE(){return this.getToken(dr.LBRACE,0)}rBrace(){return this.getTypedRuleContext(Rr,0)}classVarDec_list(){return this.getTypedRuleContexts(gr)}classVarDec(t){return this.getTypedRuleContext(gr,t)}subroutineDeclaration_list(){return this.getTypedRuleContexts(br)}subroutineDeclaration(t){return this.getTypedRuleContext(br,t)}get ruleIndex(){return dr.RULE_classDeclaration}enterRule(t){t.enterClassDeclaration&&t.enterClassDeclaration(this)}exitRule(t){t.exitClassDeclaration&&t.exitClassDeclaration(this)}}class mr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}IDENTIFIER(){return this.getToken(dr.IDENTIFIER,0)}get ruleIndex(){return dr.RULE_className}enterRule(t){t.enterClassName&&t.enterClassName(this)}exitRule(t){t.exitClassName&&t.exitClassName(this)}}class gr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}fieldList(){return this.getTypedRuleContext(yr,0)}SEMICOLON(){return this.getToken(dr.SEMICOLON,0)}STATIC(){return this.getToken(dr.STATIC,0)}FIELD(){return this.getToken(dr.FIELD,0)}get ruleIndex(){return dr.RULE_classVarDec}enterRule(t){t.enterClassVarDec&&t.enterClassVarDec(this)}exitRule(t){t.exitClassVarDec&&t.exitClassVarDec(this)}}class yr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}varType(){return this.getTypedRuleContext(Er,0)}fieldName_list(){return this.getTypedRuleContexts(vr)}fieldName(t){return this.getTypedRuleContext(vr,t)}COMMA_list(){return this.getTokens(dr.COMMA)}COMMA(t){return this.getToken(dr.COMMA,t)}get ruleIndex(){return dr.RULE_fieldList}enterRule(t){t.enterFieldList&&t.enterFieldList(this)}exitRule(t){t.exitFieldList&&t.exitFieldList(this)}}class vr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}IDENTIFIER(){return this.getToken(dr.IDENTIFIER,0)}get ruleIndex(){return dr.RULE_fieldName}enterRule(t){t.enterFieldName&&t.enterFieldName(this)}exitRule(t){t.exitFieldName&&t.exitFieldName(this)}}class br extends Zn{symbols;constructor(t,e,n){super(e,n),this.parser=t}subroutineType(){return this.getTypedRuleContext(xr,0)}subroutineDecWithoutType(){return this.getTypedRuleContext(Sr,0)}get ruleIndex(){return dr.RULE_subroutineDeclaration}enterRule(t){t.enterSubroutineDeclaration&&t.enterSubroutineDeclaration(this)}exitRule(t){t.exitSubroutineDeclaration&&t.exitSubroutineDeclaration(this)}}class xr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}CONSTRUCTOR(){return this.getToken(dr.CONSTRUCTOR,0)}METHOD(){return this.getToken(dr.METHOD,0)}FUNCTION(){return this.getToken(dr.FUNCTION,0)}get ruleIndex(){return dr.RULE_subroutineType}enterRule(t){t.enterSubroutineType&&t.enterSubroutineType(this)}exitRule(t){t.exitSubroutineType&&t.exitSubroutineType(this)}}class Sr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}subroutineReturnType(){return this.getTypedRuleContext(_r,0)}subroutineName(){return this.getTypedRuleContext(wr,0)}LPAREN(){return this.getToken(dr.LPAREN,0)}parameterList(){return this.getTypedRuleContext(Tr,0)}RPAREN(){return this.getToken(dr.RPAREN,0)}subroutineBody(){return this.getTypedRuleContext(Cr,0)}get ruleIndex(){return dr.RULE_subroutineDecWithoutType}enterRule(t){t.enterSubroutineDecWithoutType&&t.enterSubroutineDecWithoutType(this)}exitRule(t){t.exitSubroutineDecWithoutType&&t.exitSubroutineDecWithoutType(this)}}class wr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}IDENTIFIER(){return this.getToken(dr.IDENTIFIER,0)}get ruleIndex(){return dr.RULE_subroutineName}enterRule(t){t.enterSubroutineName&&t.enterSubroutineName(this)}exitRule(t){t.exitSubroutineName&&t.exitSubroutineName(this)}}class _r extends Zn{constructor(t,e,n){super(e,n),this.parser=t}varType(){return this.getTypedRuleContext(Er,0)}VOID(){return this.getToken(dr.VOID,0)}get ruleIndex(){return dr.RULE_subroutineReturnType}enterRule(t){t.enterSubroutineReturnType&&t.enterSubroutineReturnType(this)}exitRule(t){t.exitSubroutineReturnType&&t.exitSubroutineReturnType(this)}}class Er extends Zn{constructor(t,e,n){super(e,n),this.parser=t}INT(){return this.getToken(dr.INT,0)}CHAR(){return this.getToken(dr.CHAR,0)}BOOLEAN(){return this.getToken(dr.BOOLEAN,0)}IDENTIFIER(){return this.getToken(dr.IDENTIFIER,0)}get ruleIndex(){return dr.RULE_varType}enterRule(t){t.enterVarType&&t.enterVarType(this)}exitRule(t){t.exitVarType&&t.exitVarType(this)}}class Tr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}parameter_list(){return this.getTypedRuleContexts(Ar)}parameter(t){return this.getTypedRuleContext(Ar,t)}COMMA_list(){return this.getTokens(dr.COMMA)}COMMA(t){return this.getToken(dr.COMMA,t)}get ruleIndex(){return dr.RULE_parameterList}enterRule(t){t.enterParameterList&&t.enterParameterList(this)}exitRule(t){t.exitParameterList&&t.exitParameterList(this)}}class Ar extends Zn{constructor(t,e,n){super(e,n),this.parser=t}varType(){return this.getTypedRuleContext(Er,0)}parameterName(){return this.getTypedRuleContext(Ir,0)}get ruleIndex(){return dr.RULE_parameter}enterRule(t){t.enterParameter&&t.enterParameter(this)}exitRule(t){t.exitParameter&&t.exitParameter(this)}}class Ir extends Zn{constructor(t,e,n){super(e,n),this.parser=t}IDENTIFIER(){return this.getToken(dr.IDENTIFIER,0)}get ruleIndex(){return dr.RULE_parameterName}enterRule(t){t.enterParameterName&&t.enterParameterName(this)}exitRule(t){t.exitParameterName&&t.exitParameterName(this)}}class Cr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}LBRACE(){return this.getToken(dr.LBRACE,0)}statements(){return this.getTypedRuleContext(Or,0)}rBrace(){return this.getTypedRuleContext(Rr,0)}varDeclaration_list(){return this.getTypedRuleContexts(kr)}varDeclaration(t){return this.getTypedRuleContext(kr,t)}get ruleIndex(){return dr.RULE_subroutineBody}enterRule(t){t.enterSubroutineBody&&t.enterSubroutineBody(this)}exitRule(t){t.exitSubroutineBody&&t.exitSubroutineBody(this)}}class Rr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}RBRACE(){return this.getToken(dr.RBRACE,0)}get ruleIndex(){return dr.RULE_rBrace}enterRule(t){t.enterRBrace&&t.enterRBrace(this)}exitRule(t){t.exitRBrace&&t.exitRBrace(this)}}class kr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}VAR(){return this.getToken(dr.VAR,0)}varType(){return this.getTypedRuleContext(Er,0)}varNameInDeclaration_list(){return this.getTypedRuleContexts(Lr)}varNameInDeclaration(t){return this.getTypedRuleContext(Lr,t)}SEMICOLON(){return this.getToken(dr.SEMICOLON,0)}COMMA_list(){return this.getTokens(dr.COMMA)}COMMA(t){return this.getToken(dr.COMMA,t)}get ruleIndex(){return dr.RULE_varDeclaration}enterRule(t){t.enterVarDeclaration&&t.enterVarDeclaration(this)}exitRule(t){t.exitVarDeclaration&&t.exitVarDeclaration(this)}}class Lr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}IDENTIFIER(){return this.getToken(dr.IDENTIFIER,0)}get ruleIndex(){return dr.RULE_varNameInDeclaration}enterRule(t){t.enterVarNameInDeclaration&&t.enterVarNameInDeclaration(this)}exitRule(t){t.exitVarNameInDeclaration&&t.exitVarNameInDeclaration(this)}}class Nr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}IDENTIFIER(){return this.getToken(dr.IDENTIFIER,0)}get ruleIndex(){return dr.RULE_varName}enterRule(t){t.enterVarName&&t.enterVarName(this)}exitRule(t){t.exitVarName&&t.exitVarName(this)}}class Or extends Zn{constructor(t,e,n){super(e,n),this.parser=t}statement_list(){return this.getTypedRuleContexts(Pr)}statement(t){return this.getTypedRuleContext(Pr,t)}get ruleIndex(){return dr.RULE_statements}enterRule(t){t.enterStatements&&t.enterStatements(this)}exitRule(t){t.exitStatements&&t.exitStatements(this)}}class Pr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}letStatement(){return this.getTypedRuleContext(Fr,0)}ifElseStatement(){return this.getTypedRuleContext(Mr,0)}whileStatement(){return this.getTypedRuleContext(Vr,0)}doStatement(){return this.getTypedRuleContext($r,0)}returnStatement(){return this.getTypedRuleContext(Wr,0)}get ruleIndex(){return dr.RULE_statement}enterRule(t){t.enterStatement&&t.enterStatement(this)}exitRule(t){t.exitStatement&&t.exitStatement(this)}}class Fr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}LET(){return this.getToken(dr.LET,0)}equals(){return this.getTypedRuleContext(Dr,0)}expression(){return this.getTypedRuleContext(Kr,0)}SEMICOLON(){return this.getToken(dr.SEMICOLON,0)}varName(){return this.getTypedRuleContext(Nr,0)}arrayAccess(){return this.getTypedRuleContext(Xr,0)}get ruleIndex(){return dr.RULE_letStatement}enterRule(t){t.enterLetStatement&&t.enterLetStatement(this)}exitRule(t){t.exitLetStatement&&t.exitLetStatement(this)}}class Dr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}EQUALS(){return this.getToken(dr.EQUALS,0)}get ruleIndex(){return dr.RULE_equals}enterRule(t){t.enterEquals&&t.enterEquals(this)}exitRule(t){t.exitEquals&&t.exitEquals(this)}}class Mr extends Zn{endLabel="";constructor(t,e,n){super(e,n),this.parser=t}ifStatement(){return this.getTypedRuleContext(Ur,0)}elseStatement(){return this.getTypedRuleContext(zr,0)}get ruleIndex(){return dr.RULE_ifElseStatement}enterRule(t){t.enterIfElseStatement&&t.enterIfElseStatement(this)}exitRule(t){t.exitIfElseStatement&&t.exitIfElseStatement(this)}}class Ur extends Zn{endLabel="";constructor(t,e,n){super(e,n),this.parser=t}IF(){return this.getToken(dr.IF,0)}LPAREN(){return this.getToken(dr.LPAREN,0)}ifExpression(){return this.getTypedRuleContext(jr,0)}RPAREN(){return this.getToken(dr.RPAREN,0)}LBRACE(){return this.getToken(dr.LBRACE,0)}statements(){return this.getTypedRuleContext(Or,0)}rBrace(){return this.getTypedRuleContext(Rr,0)}get ruleIndex(){return dr.RULE_ifStatement}enterRule(t){t.enterIfStatement&&t.enterIfStatement(this)}exitRule(t){t.exitIfStatement&&t.exitIfStatement(this)}}class jr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}expression(){return this.getTypedRuleContext(Kr,0)}get ruleIndex(){return dr.RULE_ifExpression}enterRule(t){t.enterIfExpression&&t.enterIfExpression(this)}exitRule(t){t.exitIfExpression&&t.exitIfExpression(this)}}class zr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}ELSE(){return this.getToken(dr.ELSE,0)}LBRACE(){return this.getToken(dr.LBRACE,0)}statements(){return this.getTypedRuleContext(Or,0)}rBrace(){return this.getTypedRuleContext(Rr,0)}get ruleIndex(){return dr.RULE_elseStatement}enterRule(t){t.enterElseStatement&&t.enterElseStatement(this)}exitRule(t){t.exitElseStatement&&t.exitElseStatement(this)}}class Vr extends Zn{startLabel="";endLabel="";constructor(t,e,n){super(e,n),this.parser=t}WHILE(){return this.getToken(dr.WHILE,0)}LPAREN(){return this.getToken(dr.LPAREN,0)}whileExpression(){return this.getTypedRuleContext(Br,0)}RPAREN(){return this.getToken(dr.RPAREN,0)}LBRACE(){return this.getToken(dr.LBRACE,0)}statements(){return this.getTypedRuleContext(Or,0)}rBrace(){return this.getTypedRuleContext(Rr,0)}get ruleIndex(){return dr.RULE_whileStatement}enterRule(t){t.enterWhileStatement&&t.enterWhileStatement(this)}exitRule(t){t.exitWhileStatement&&t.exitWhileStatement(this)}}class Br extends Zn{constructor(t,e,n){super(e,n),this.parser=t}expression(){return this.getTypedRuleContext(Kr,0)}get ruleIndex(){return dr.RULE_whileExpression}enterRule(t){t.enterWhileExpression&&t.enterWhileExpression(this)}exitRule(t){t.exitWhileExpression&&t.exitWhileExpression(this)}}class $r extends Zn{constructor(t,e,n){super(e,n),this.parser=t}DO(){return this.getToken(dr.DO,0)}subroutineCall(){return this.getTypedRuleContext(Hr,0)}SEMICOLON(){return this.getToken(dr.SEMICOLON,0)}get ruleIndex(){return dr.RULE_doStatement}enterRule(t){t.enterDoStatement&&t.enterDoStatement(this)}exitRule(t){t.exitDoStatement&&t.exitDoStatement(this)}}class Hr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}subroutineId(){return this.getTypedRuleContext(Gr,0)}LPAREN(){return this.getToken(dr.LPAREN,0)}expressionList(){return this.getTypedRuleContext(qr,0)}RPAREN(){return this.getToken(dr.RPAREN,0)}get ruleIndex(){return dr.RULE_subroutineCall}enterRule(t){t.enterSubroutineCall&&t.enterSubroutineCall(this)}exitRule(t){t.exitSubroutineCall&&t.exitSubroutineCall(this)}}class Gr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}subroutineName(){return this.getTypedRuleContext(wr,0)}DOT(){return this.getToken(dr.DOT,0)}className(){return this.getTypedRuleContext(mr,0)}THIS_LITERAL(){return this.getToken(dr.THIS_LITERAL,0)}get ruleIndex(){return dr.RULE_subroutineId}enterRule(t){t.enterSubroutineId&&t.enterSubroutineId(this)}exitRule(t){t.exitSubroutineId&&t.exitSubroutineId(this)}}class Wr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}RETURN(){return this.getToken(dr.RETURN,0)}SEMICOLON(){return this.getToken(dr.SEMICOLON,0)}expression(){return this.getTypedRuleContext(Kr,0)}get ruleIndex(){return dr.RULE_returnStatement}enterRule(t){t.enterReturnStatement&&t.enterReturnStatement(this)}exitRule(t){t.exitReturnStatement&&t.exitReturnStatement(this)}}class qr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}expression_list(){return this.getTypedRuleContexts(Kr)}expression(t){return this.getTypedRuleContext(Kr,t)}COMMA_list(){return this.getTokens(dr.COMMA)}COMMA(t){return this.getToken(dr.COMMA,t)}get ruleIndex(){return dr.RULE_expressionList}enterRule(t){t.enterExpressionList&&t.enterExpressionList(this)}exitRule(t){t.exitExpressionList&&t.exitExpressionList(this)}}class Kr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}constant(){return this.getTypedRuleContext(Jr,0)}varName(){return this.getTypedRuleContext(Nr,0)}subroutineCall(){return this.getTypedRuleContext(Hr,0)}arrayAccess(){return this.getTypedRuleContext(Xr,0)}unaryOperation(){return this.getTypedRuleContext(Qr,0)}groupedExpression(){return this.getTypedRuleContext(Yr,0)}expression_list(){return this.getTypedRuleContexts(Kr)}expression(t){return this.getTypedRuleContext(Kr,t)}binaryOperator(){return this.getTypedRuleContext(es,0)}get ruleIndex(){return dr.RULE_expression}enterRule(t){t.enterExpression&&t.enterExpression(this)}exitRule(t){t.exitExpression&&t.exitExpression(this)}}class Yr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}LPAREN(){return this.getToken(dr.LPAREN,0)}expression(){return this.getTypedRuleContext(Kr,0)}RPAREN(){return this.getToken(dr.RPAREN,0)}get ruleIndex(){return dr.RULE_groupedExpression}enterRule(t){t.enterGroupedExpression&&t.enterGroupedExpression(this)}exitRule(t){t.exitGroupedExpression&&t.exitGroupedExpression(this)}}class Qr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}unaryOperator(){return this.getTypedRuleContext(ts,0)}expression(){return this.getTypedRuleContext(Kr,0)}get ruleIndex(){return dr.RULE_unaryOperation}enterRule(t){t.enterUnaryOperation&&t.enterUnaryOperation(this)}exitRule(t){t.exitUnaryOperation&&t.exitUnaryOperation(this)}}class Xr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}varName(){return this.getTypedRuleContext(Nr,0)}LBRACKET(){return this.getToken(dr.LBRACKET,0)}expression(){return this.getTypedRuleContext(Kr,0)}RBRACKET(){return this.getToken(dr.RBRACKET,0)}get ruleIndex(){return dr.RULE_arrayAccess}enterRule(t){t.enterArrayAccess&&t.enterArrayAccess(this)}exitRule(t){t.exitArrayAccess&&t.exitArrayAccess(this)}}class Jr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}INTEGER_LITERAL(){return this.getToken(dr.INTEGER_LITERAL,0)}STRING_LITERAL(){return this.getToken(dr.STRING_LITERAL,0)}booleanLiteral(){return this.getTypedRuleContext(Zr,0)}NULL_LITERAL(){return this.getToken(dr.NULL_LITERAL,0)}THIS_LITERAL(){return this.getToken(dr.THIS_LITERAL,0)}get ruleIndex(){return dr.RULE_constant}enterRule(t){t.enterConstant&&t.enterConstant(this)}exitRule(t){t.exitConstant&&t.exitConstant(this)}}class Zr extends Zn{constructor(t,e,n){super(e,n),this.parser=t}TRUE(){return this.getToken(dr.TRUE,0)}FALSE(){return this.getToken(dr.FALSE,0)}get ruleIndex(){return dr.RULE_booleanLiteral}enterRule(t){t.enterBooleanLiteral&&t.enterBooleanLiteral(this)}exitRule(t){t.exitBooleanLiteral&&t.exitBooleanLiteral(this)}}class ts extends Zn{constructor(t,e,n){super(e,n),this.parser=t}TILDE(){return this.getToken(dr.TILDE,0)}MINUS(){return this.getToken(dr.MINUS,0)}get ruleIndex(){return dr.RULE_unaryOperator}enterRule(t){t.enterUnaryOperator&&t.enterUnaryOperator(this)}exitRule(t){t.exitUnaryOperator&&t.exitUnaryOperator(this)}}class es extends Zn{constructor(t,e,n){super(e,n),this.parser=t}PLUS(){return this.getToken(dr.PLUS,0)}MINUS(){return this.getToken(dr.MINUS,0)}MUL(){return this.getToken(dr.MUL,0)}DIV(){return this.getToken(dr.DIV,0)}AND(){return this.getToken(dr.AND,0)}OR(){return this.getToken(dr.OR,0)}LESS_THAN(){return this.getToken(dr.LESS_THAN,0)}GREATER_THAN(){return this.getToken(dr.GREATER_THAN,0)}EQUALS(){return this.getToken(dr.EQUALS,0)}get ruleIndex(){return dr.RULE_binaryOperator}enterRule(t){t.enterBinaryOperator&&t.enterBinaryOperator(this)}exitRule(t){t.exitBinaryOperator&&t.exitBinaryOperator(this)}}const ns={"+":"add","-":"sub","*":"call Math.multiply 2","/":"call Math.divide 2","&":"and","|":"or","<":"lt",">":"gt","=":"eq"},rs={"-":"neg","~":"not"};class ss extends rr{globalSymbolTable;result="";className="";currentLabelInd=0;localSymbolTable;afterEquals=!1;constructor(t){super(),this.globalSymbolTable=t}enterClassDeclaration=t=>{if(""!=this.className)throw new Error("Cannot change class name");if(void 0==t.localSymbolTable)throw new Error("Local symbol table not found in parse tree");this.className=t.className().getText(),this.localSymbolTable=t.localSymbolTable};enterSubroutineDeclaration=t=>{const e=t.subroutineDecWithoutType().subroutineName().IDENTIFIER().getText(),n=this.globalSymbolTable[this.className+"."+e];if(void 0==n)throw new Error(`Can't find subroutine ${e} in class ${this.className} in symbol table`);if(this.result+=`function ${this.className}.${e} ${n.subroutineInfo.localVarsCount}\n`,null!=t.subroutineType().CONSTRUCTOR()?(this.result+=`    push constant ${this.localSymbolTable.fieldsCount()}\n`,this.result+="    call Memory.alloc 1\n",this.result+="    pop pointer 0\n"):null!=t.subroutineType().METHOD()&&(this.result+="    push argument 0\n",this.result+="    pop pointer 0\n"),null==t.symbols)throw new Error("Subroutine symbols not found in parse tree");this.localSymbolTable.setSubroutineScope(t.symbols)};exitArrayAccess=t=>{const e=t.varName().IDENTIFIER().getText(),n=this.localSymbolTable.lookup(e);if(void 0==n)throw new Error(`Can't find variable ${e} in local symbol table`);this.pushSymbolOntoStack(n),this.result+="    add\n",(this.afterEquals||t.parentCtx instanceof Kr)&&(this.result+="    pop pointer 1\n",this.result+="    push that 0\n")};enterEquals=t=>{this.afterEquals=!0};exitStatement=t=>{this.afterEquals=!1};enterConstant=t=>{if(null!=t.INTEGER_LITERAL())this.result+=`    push constant ${t.INTEGER_LITERAL().getText()}\n`;else if(null!=t.booleanLiteral())if(null!=t.booleanLiteral().FALSE())this.result+="    push constant 0\n";else{if(!t.booleanLiteral().TRUE())throw new Error("Unknown boolean literal");this.result+="    push constant 1\n",this.result+="    neg\n"}else if(null!=t.THIS_LITERAL())this.result+="    push pointer 0\n";else if(null!=t.STRING_LITERAL()){const e=t.STRING_LITERAL().getText().slice(1,-1);this.result+=`    push constant ${e.length}\n`,this.result+="    call String.new 1\n";for(const t of e)this.result+=`    push constant ${t.charCodeAt(0)}\n`,this.result+="    call String.appendChar 2\n"}else{if(null==t.NULL_LITERAL())throw new Error("Unknown constant type");this.result+="    push constant 0\n"}};exitExpression=t=>{if(null!=t.varName()){const e=t.varName().IDENTIFIER().getText(),n=this.localSymbolTable.lookup(e);if(void 0==n)throw new Error(`Cannot find variable ${e} in arguments or local variables`);this.pushSymbolOntoStack(n)}else if(null!=t.binaryOperator()){const e=t.binaryOperator().getText();if(void 0==ns[e])throw new Error(`Unknown binary operator ${e}`);this.result+="\t"+ns[e]+"\n"}else if(null!=t.unaryOperation()){const e=t.unaryOperation().unaryOperator().getText();if(null==rs[e])throw new Error(`Unknown unary operator ${e}`);this.result+="\t"+rs[e]+"\n"}};pushSymbolOntoStack(t){this.result+=`    push ${U(t.scope)} ${t.index}\n`}exitLetStatement=t=>{if(null!=t.varName()){const e=this.localSymbolTable.lookup(t.varName().IDENTIFIER().getText());if(void 0==e)throw new Error(`Can't find variable ${t.varName().IDENTIFIER().getText()} in local symbol table`);this.result+=`    pop ${U(e.scope)} ${e.index}\n`}else{if(null==t.arrayAccess())throw new Error("Unknown let statement type");this.result+="pop temp 0\n",this.result+="pop pointer 1\n",this.result+="push temp 0\n",this.result+="pop that 0\n"}};enterIfStatement=t=>{t.endLabel=this.createLabel()};exitIfStatement=t=>{const e=t.parentCtx;null!=e.elseStatement()&&(e.endLabel=this.createLabel(),this.result+=`    goto ${e.endLabel}\n`),this.result+=`    label ${t.endLabel}\n`};exitIfExpression=t=>{const e=t.parentCtx;this.ifNotGoto(e.endLabel)};exitIfElseStatement=t=>{t.endLabel&&(this.result+=`    label ${t.endLabel} \n`)};enterWhileStatement=t=>{t.startLabel=this.createLabel(),t.endLabel=this.createLabel(),this.result+=`    label ${t.startLabel} \n`};exitWhileExpression=t=>{const e=t.parentCtx;this.ifNotGoto(e.endLabel)};exitWhileStatement=t=>{this.result+=`    goto ${t.startLabel}\n`,this.result+=`    label ${t.endLabel}\n`};enterSubroutineCall=t=>{const{callType:e,symbol:n}=lr(t.subroutineId(),this.className,this.localSymbolTable);e===ar.VarMethod?this.pushSymbolOntoStack(n):e===ar.LocalMethod&&(this.result+="    push pointer 0\n")};exitSubroutineCall=t=>{const{callType:e,subroutineIdText:n}=lr(t.subroutineId(),this.className,this.localSymbolTable);switch(e){case ar.ClassFunctionOrConstructor:{const e=t.expressionList().expression_list().length;this.result+=`    call ${t.subroutineId().getText()} ${e}\n`;break}case ar.LocalMethod:case ar.VarMethod:{const e=t.expressionList().expression_list().length;this.result+=`    call ${n} ${e+1}\n`;break}default:throw new Error(`Unknown call type ${e}`)}};exitReturnStatement=t=>{null==t.expression()&&(this.result+="    push constant 0\n"),this.result+="    return\n"};ifNotGoto(t){this.result+="    not\n",this.result+=`    if-goto ${t} \n`}getLabel(t){return`${this.className}_${t} `}createLabel(){return this.getLabel(this.currentLabelInd++)}}class is extends Wn{static CLASS=1;static CONSTRUCTOR=2;static FUNCTION=3;static METHOD=4;static FIELD=5;static STATIC=6;static VAR=7;static INT=8;static CHAR=9;static BOOLEAN=10;static VOID=11;static LET=12;static DO=13;static IF=14;static ELSE=15;static WHILE=16;static RETURN=17;static LBRACE=18;static RBRACE=19;static LPAREN=20;static RPAREN=21;static LBRACKET=22;static RBRACKET=23;static DOT=24;static COMMA=25;static SEMICOLON=26;static EQUALS=27;static PLUS=28;static MINUS=29;static MUL=30;static DIV=31;static AND=32;static OR=33;static TILDE=34;static LESS_THAN=35;static GREATER_THAN=36;static WS=37;static COMMENT=38;static LINE_COMMENT=39;static INTEGER_LITERAL=40;static TRUE=41;static FALSE=42;static NULL_LITERAL=43;static THIS_LITERAL=44;static IDENTIFIER=45;static STRING_LITERAL=46;static UnterminatedStringLiteral=47;static EOF=nr.EOF;static channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];static literalNames=[null,"'class'","'constructor'","'function'","'method'","'field'","'static'","'var'","'int'","'char'","'boolean'","'void'","'let'","'do'","'if'","'else'","'while'","'return'","'{'","'}'","'('","')'","'['","']'","'.'","','","';'","'='","'+'","'-'","'*'","'/'","'&'","'|'","'~'","'<'","'>'",null,null,null,null,"'true'","'false'","'null'","'this'"];static symbolicNames=[null,"CLASS","CONSTRUCTOR","FUNCTION","METHOD","FIELD","STATIC","VAR","INT","CHAR","BOOLEAN","VOID","LET","DO","IF","ELSE","WHILE","RETURN","LBRACE","RBRACE","LPAREN","RPAREN","LBRACKET","RBRACKET","DOT","COMMA","SEMICOLON","EQUALS","PLUS","MINUS","MUL","DIV","AND","OR","TILDE","LESS_THAN","GREATER_THAN","WS","COMMENT","LINE_COMMENT","INTEGER_LITERAL","TRUE","FALSE","NULL_LITERAL","THIS_LITERAL","IDENTIFIER","STRING_LITERAL","UnterminatedStringLiteral"];static modeNames=["DEFAULT_MODE"];static ruleNames=["CLASS","CONSTRUCTOR","FUNCTION","METHOD","FIELD","STATIC","VAR","INT","CHAR","BOOLEAN","VOID","LET","DO","IF","ELSE","WHILE","RETURN","LBRACE","RBRACE","LPAREN","RPAREN","LBRACKET","RBRACKET","DOT","COMMA","SEMICOLON","EQUALS","PLUS","MINUS","MUL","DIV","AND","OR","TILDE","LESS_THAN","GREATER_THAN","WS","COMMENT","LINE_COMMENT","INTEGER_LITERAL","TRUE","FALSE","NULL_LITERAL","THIS_LITERAL","IDENTIFIER","STRING_LITERAL","UnterminatedStringLiteral"];constructor(t){super(t),this._interp=new qn(this,is._ATN,is.DecisionsToDFA,new tr)}get grammarFileName(){return"JackLexer.g4"}get literalNames(){return is.literalNames}get symbolicNames(){return is.symbolicNames}get ruleNames(){return is.ruleNames}get serializedATN(){return is._serializedATN}get channelNames(){return is.channelNames}get modeNames(){return is.modeNames}static _serializedATN=[4,0,47,309,6,-1,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,2,17,7,17,2,18,7,18,2,19,7,19,2,20,7,20,2,21,7,21,2,22,7,22,2,23,7,23,2,24,7,24,2,25,7,25,2,26,7,26,2,27,7,27,2,28,7,28,2,29,7,29,2,30,7,30,2,31,7,31,2,32,7,32,2,33,7,33,2,34,7,34,2,35,7,35,2,36,7,36,2,37,7,37,2,38,7,38,2,39,7,39,2,40,7,40,2,41,7,41,2,42,7,42,2,43,7,43,2,44,7,44,2,45,7,45,2,46,7,46,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,4,1,4,1,4,1,4,1,4,1,4,1,5,1,5,1,5,1,5,1,5,1,5,1,5,1,6,1,6,1,6,1,6,1,7,1,7,1,7,1,7,1,8,1,8,1,8,1,8,1,8,1,9,1,9,1,9,1,9,1,9,1,9,1,9,1,9,1,10,1,10,1,10,1,10,1,10,1,11,1,11,1,11,1,11,1,12,1,12,1,12,1,13,1,13,1,13,1,14,1,14,1,14,1,14,1,14,1,15,1,15,1,15,1,15,1,15,1,15,1,16,1,16,1,16,1,16,1,16,1,16,1,16,1,17,1,17,1,18,1,18,1,19,1,19,1,20,1,20,1,21,1,21,1,22,1,22,1,23,1,23,1,24,1,24,1,25,1,25,1,26,1,26,1,27,1,27,1,28,1,28,1,29,1,29,1,30,1,30,1,31,1,31,1,32,1,32,1,33,1,33,1,34,1,34,1,35,1,35,1,36,4,36,236,8,36,11,36,12,36,237,1,36,1,36,1,37,1,37,1,37,1,37,5,37,246,8,37,10,37,12,37,249,9,37,1,37,1,37,1,37,1,37,1,37,1,38,1,38,1,38,1,38,5,38,260,8,38,10,38,12,38,263,9,38,1,38,1,38,1,39,4,39,268,8,39,11,39,12,39,269,1,40,1,40,1,40,1,40,1,40,1,41,1,41,1,41,1,41,1,41,1,41,1,42,1,42,1,42,1,42,1,42,1,43,1,43,1,43,1,43,1,43,1,44,1,44,5,44,295,8,44,10,44,12,44,298,9,44,1,45,1,45,1,45,1,46,1,46,5,46,305,8,46,10,46,12,46,308,9,46,1,247,0,47,1,1,3,2,5,3,7,4,9,5,11,6,13,7,15,8,17,9,19,10,21,11,23,12,25,13,27,14,29,15,31,16,33,17,35,18,37,19,39,20,41,21,43,22,45,23,47,24,49,25,51,26,53,27,55,28,57,29,59,30,61,31,63,32,65,33,67,34,69,35,71,36,73,37,75,38,77,39,79,40,81,41,83,42,85,43,87,44,89,45,91,46,93,47,1,0,6,3,0,9,10,13,13,32,32,2,0,10,10,13,13,1,0,48,57,3,0,65,90,95,95,97,122,4,0,48,57,65,90,95,95,97,122,4,0,10,10,13,13,34,34,92,92,314,0,1,1,0,0,0,0,3,1,0,0,0,0,5,1,0,0,0,0,7,1,0,0,0,0,9,1,0,0,0,0,11,1,0,0,0,0,13,1,0,0,0,0,15,1,0,0,0,0,17,1,0,0,0,0,19,1,0,0,0,0,21,1,0,0,0,0,23,1,0,0,0,0,25,1,0,0,0,0,27,1,0,0,0,0,29,1,0,0,0,0,31,1,0,0,0,0,33,1,0,0,0,0,35,1,0,0,0,0,37,1,0,0,0,0,39,1,0,0,0,0,41,1,0,0,0,0,43,1,0,0,0,0,45,1,0,0,0,0,47,1,0,0,0,0,49,1,0,0,0,0,51,1,0,0,0,0,53,1,0,0,0,0,55,1,0,0,0,0,57,1,0,0,0,0,59,1,0,0,0,0,61,1,0,0,0,0,63,1,0,0,0,0,65,1,0,0,0,0,67,1,0,0,0,0,69,1,0,0,0,0,71,1,0,0,0,0,73,1,0,0,0,0,75,1,0,0,0,0,77,1,0,0,0,0,79,1,0,0,0,0,81,1,0,0,0,0,83,1,0,0,0,0,85,1,0,0,0,0,87,1,0,0,0,0,89,1,0,0,0,0,91,1,0,0,0,0,93,1,0,0,0,1,95,1,0,0,0,3,101,1,0,0,0,5,113,1,0,0,0,7,122,1,0,0,0,9,129,1,0,0,0,11,135,1,0,0,0,13,142,1,0,0,0,15,146,1,0,0,0,17,150,1,0,0,0,19,155,1,0,0,0,21,163,1,0,0,0,23,168,1,0,0,0,25,172,1,0,0,0,27,175,1,0,0,0,29,178,1,0,0,0,31,183,1,0,0,0,33,189,1,0,0,0,35,196,1,0,0,0,37,198,1,0,0,0,39,200,1,0,0,0,41,202,1,0,0,0,43,204,1,0,0,0,45,206,1,0,0,0,47,208,1,0,0,0,49,210,1,0,0,0,51,212,1,0,0,0,53,214,1,0,0,0,55,216,1,0,0,0,57,218,1,0,0,0,59,220,1,0,0,0,61,222,1,0,0,0,63,224,1,0,0,0,65,226,1,0,0,0,67,228,1,0,0,0,69,230,1,0,0,0,71,232,1,0,0,0,73,235,1,0,0,0,75,241,1,0,0,0,77,255,1,0,0,0,79,267,1,0,0,0,81,271,1,0,0,0,83,276,1,0,0,0,85,282,1,0,0,0,87,287,1,0,0,0,89,292,1,0,0,0,91,299,1,0,0,0,93,302,1,0,0,0,95,96,5,99,0,0,96,97,5,108,0,0,97,98,5,97,0,0,98,99,5,115,0,0,99,100,5,115,0,0,100,2,1,0,0,0,101,102,5,99,0,0,102,103,5,111,0,0,103,104,5,110,0,0,104,105,5,115,0,0,105,106,5,116,0,0,106,107,5,114,0,0,107,108,5,117,0,0,108,109,5,99,0,0,109,110,5,116,0,0,110,111,5,111,0,0,111,112,5,114,0,0,112,4,1,0,0,0,113,114,5,102,0,0,114,115,5,117,0,0,115,116,5,110,0,0,116,117,5,99,0,0,117,118,5,116,0,0,118,119,5,105,0,0,119,120,5,111,0,0,120,121,5,110,0,0,121,6,1,0,0,0,122,123,5,109,0,0,123,124,5,101,0,0,124,125,5,116,0,0,125,126,5,104,0,0,126,127,5,111,0,0,127,128,5,100,0,0,128,8,1,0,0,0,129,130,5,102,0,0,130,131,5,105,0,0,131,132,5,101,0,0,132,133,5,108,0,0,133,134,5,100,0,0,134,10,1,0,0,0,135,136,5,115,0,0,136,137,5,116,0,0,137,138,5,97,0,0,138,139,5,116,0,0,139,140,5,105,0,0,140,141,5,99,0,0,141,12,1,0,0,0,142,143,5,118,0,0,143,144,5,97,0,0,144,145,5,114,0,0,145,14,1,0,0,0,146,147,5,105,0,0,147,148,5,110,0,0,148,149,5,116,0,0,149,16,1,0,0,0,150,151,5,99,0,0,151,152,5,104,0,0,152,153,5,97,0,0,153,154,5,114,0,0,154,18,1,0,0,0,155,156,5,98,0,0,156,157,5,111,0,0,157,158,5,111,0,0,158,159,5,108,0,0,159,160,5,101,0,0,160,161,5,97,0,0,161,162,5,110,0,0,162,20,1,0,0,0,163,164,5,118,0,0,164,165,5,111,0,0,165,166,5,105,0,0,166,167,5,100,0,0,167,22,1,0,0,0,168,169,5,108,0,0,169,170,5,101,0,0,170,171,5,116,0,0,171,24,1,0,0,0,172,173,5,100,0,0,173,174,5,111,0,0,174,26,1,0,0,0,175,176,5,105,0,0,176,177,5,102,0,0,177,28,1,0,0,0,178,179,5,101,0,0,179,180,5,108,0,0,180,181,5,115,0,0,181,182,5,101,0,0,182,30,1,0,0,0,183,184,5,119,0,0,184,185,5,104,0,0,185,186,5,105,0,0,186,187,5,108,0,0,187,188,5,101,0,0,188,32,1,0,0,0,189,190,5,114,0,0,190,191,5,101,0,0,191,192,5,116,0,0,192,193,5,117,0,0,193,194,5,114,0,0,194,195,5,110,0,0,195,34,1,0,0,0,196,197,5,123,0,0,197,36,1,0,0,0,198,199,5,125,0,0,199,38,1,0,0,0,200,201,5,40,0,0,201,40,1,0,0,0,202,203,5,41,0,0,203,42,1,0,0,0,204,205,5,91,0,0,205,44,1,0,0,0,206,207,5,93,0,0,207,46,1,0,0,0,208,209,5,46,0,0,209,48,1,0,0,0,210,211,5,44,0,0,211,50,1,0,0,0,212,213,5,59,0,0,213,52,1,0,0,0,214,215,5,61,0,0,215,54,1,0,0,0,216,217,5,43,0,0,217,56,1,0,0,0,218,219,5,45,0,0,219,58,1,0,0,0,220,221,5,42,0,0,221,60,1,0,0,0,222,223,5,47,0,0,223,62,1,0,0,0,224,225,5,38,0,0,225,64,1,0,0,0,226,227,5,124,0,0,227,66,1,0,0,0,228,229,5,126,0,0,229,68,1,0,0,0,230,231,5,60,0,0,231,70,1,0,0,0,232,233,5,62,0,0,233,72,1,0,0,0,234,236,7,0,0,0,235,234,1,0,0,0,236,237,1,0,0,0,237,235,1,0,0,0,237,238,1,0,0,0,238,239,1,0,0,0,239,240,6,36,0,0,240,74,1,0,0,0,241,242,5,47,0,0,242,243,5,42,0,0,243,247,1,0,0,0,244,246,9,0,0,0,245,244,1,0,0,0,246,249,1,0,0,0,247,248,1,0,0,0,247,245,1,0,0,0,248,250,1,0,0,0,249,247,1,0,0,0,250,251,5,42,0,0,251,252,5,47,0,0,252,253,1,0,0,0,253,254,6,37,0,0,254,76,1,0,0,0,255,256,5,47,0,0,256,257,5,47,0,0,257,261,1,0,0,0,258,260,8,1,0,0,259,258,1,0,0,0,260,263,1,0,0,0,261,259,1,0,0,0,261,262,1,0,0,0,262,264,1,0,0,0,263,261,1,0,0,0,264,265,6,38,0,0,265,78,1,0,0,0,266,268,7,2,0,0,267,266,1,0,0,0,268,269,1,0,0,0,269,267,1,0,0,0,269,270,1,0,0,0,270,80,1,0,0,0,271,272,5,116,0,0,272,273,5,114,0,0,273,274,5,117,0,0,274,275,5,101,0,0,275,82,1,0,0,0,276,277,5,102,0,0,277,278,5,97,0,0,278,279,5,108,0,0,279,280,5,115,0,0,280,281,5,101,0,0,281,84,1,0,0,0,282,283,5,110,0,0,283,284,5,117,0,0,284,285,5,108,0,0,285,286,5,108,0,0,286,86,1,0,0,0,287,288,5,116,0,0,288,289,5,104,0,0,289,290,5,105,0,0,290,291,5,115,0,0,291,88,1,0,0,0,292,296,7,3,0,0,293,295,7,4,0,0,294,293,1,0,0,0,295,298,1,0,0,0,296,294,1,0,0,0,296,297,1,0,0,0,297,90,1,0,0,0,298,296,1,0,0,0,299,300,3,93,46,0,300,301,5,34,0,0,301,92,1,0,0,0,302,306,5,34,0,0,303,305,8,5,0,0,304,303,1,0,0,0,305,308,1,0,0,0,306,304,1,0,0,0,306,307,1,0,0,0,307,94,1,0,0,0,308,306,1,0,0,0,7,0,237,247,261,269,296,306,1,6,0,0];static __ATN;static get _ATN(){return is.__ATN||(is.__ATN=(new zn).deserialize(is._serializedATN)),is.__ATN}static DecisionsToDFA=is._ATN.decisionToState.map(((t,e)=>new $n(t,e)))}function as(t,e){try{return function(t,e){if(t instanceof f)throw new Error("Expected tree but got a lexer or parser error");const n={};for(const a of Object.keys(t))n[a]="";const r={},s={},i=new us;for(const[a,o]of Object.entries(t)){const t=i.parserAndBind(o);Array.isArray(t)&&(s[a]=ls(t)),r[a]=t}if(Object.keys(s).length>0){for(const[t,e]of Object.entries(s))n[t]=e;return n}for(const[a,o]of Object.entries(r)){let t;switch(e){case os.Compile:t=i.compile(o,a),Array.isArray(t)?n[a]=ls(t):n[a]=t;break;case os.Validate:t=i.validate(o,a),Array.isArray(t)?n[a]=ls(t):n[a]="";break;default:throw new Error("Invalid command")}}return n}(t,e)}catch(n){const e={};console.error(n);const r=Object.keys(t);for(const t of r)e[t]={message:"Something went wrong while compiling files. Please create a bug report"};return e}}var os;function ls(t){const e=t[0];return{message:`Line ${e.span.line}: ${e.msg}`,span:e.span}}!function(t){t[t.Compile=0]="Compile",t[t.Validate=1]="Validate"}(os||(os={}));class us{binder=new sr;errorListener=new ir;validate(t,e){if(0==Object.keys(this.binder.globalSymbolTable).length)throw new Error("Please populate global symbol table using parserAndBind method");const n=new ur(this.binder.globalSymbolTable,e);return Qn.DEFAULT.walk(n,t),n.errors.length>0?n.errors:t}compile(t,e){const n=this.validate(t,e);if(Array.isArray(n)){const t=n;return console.log("Errors in validator "+JSON.stringify(t)),t}const r=n,s=new ss(this.binder.globalSymbolTable);return Qn.DEFAULT.walk(s,r),s.result}parserAndBind(t){const e=new is(Vn.fromString(t));e.removeErrorListeners(),e.addErrorListener(this.errorListener);const n=new Bn(e),r=new dr(n);r.removeErrorListeners(),r.addErrorListener(this.errorListener);const s=r.program();return this.errorListener.errors.length>0?(console.log("Errors when parsing or lexing"),this.errorListener.errors):(Qn.DEFAULT.walk(this.binder,s),this.binder.errors.length>0?(console.log("Errors in binder"),this.binder.errors):s)}}function cs(t){return`class ${t} {\n\n}\n`}function hs(t,e){let n;return{initialState:{files:{},compiled:{},selected:"",isCompiled:!1,isValid:!0},reducers:{setFs(t,e){t.fs=e},reset(t){t.files={},t.title=void 0},setFile(t,{name:e,content:n}){t.files[e]=n,t.isCompiled=!1},setFileAndValidate(t,e){this.setFile(t,e),this.validate(t)},setFiles(t,e){t.files=e,t.isCompiled=!1,this.compile(t)},_processCompilationResults(t,e){t.compiled={};for(const[n,r]of Object.entries(e))t.compiled[n]="string"===typeof r?{valid:!0,vm:r}:{valid:!1,error:r};t.isValid=Object.keys(t.files).every((e=>t.compiled[e].valid))},validate(t){t.isCompiled=!1,this._processCompilationResults(t,as(t.files,os.Validate))},compile(t){t.isCompiled=!1,this._processCompilationResults(t,as(t.files,os.Compile))},writeCompiled(t){if(Object.values(t.compiled).every((t=>t.valid)))for(const[e,r]of Object.entries(t.compiled))r.vm&&n?.writeFile(`${e}.vm`,r.vm);t.isCompiled=!0},setSelected(t,e){t.selected=e},setTitle(t,e){t.title=e}},actions:{async loadProject(t,r){this.reset(),n=t,e.current({action:"setFs",payload:n}),e.current({action:"setTitle",payload:r});const s={};for(const e of(await n.scandir("/")).filter((t=>t.isFile()&&t.name.endsWith(".jack"))))s[e.name.replace(".jack","")]=await n.readFile(e.name);this.loadFiles(s)},async loadFiles(t){e.current({action:"setFiles",payload:t}),Object.entries(t).length>0&&e.current({action:"setSelected",payload:Object.keys(t)[0]})},async writeFile(t,r){r??=cs(t),e.current({action:"setFile",payload:{name:t,content:r}}),n&&await n.writeFile(`${t}.jack`,r)},async writeNewFile(t,r){r??=cs(t),e.current({action:"setFileAndValidate",payload:{name:t,content:r}}),n&&await n.writeFile(`${t}.jack`,r)},async reset(){n=void 0,e.current({action:"reset"})},async compile(){e.current({action:"compile"}),e.current({action:"writeCompiled"})},async validate(){e.current({action:"validate"})}}}}var ds=n(6554),ps=n(6418),fs=n(7365),ms=n(1296),gs=n(4256);function ys(t,e){const n=new gs.X(t.cpu.RAM,e),r=new gs.X(t.cpu.ROM,e),i=new gs.X(t.cpu.Screen,e),a=new s.PC(new gs.X(t.cpu.RAM,e));return{A:t.cpu.A,D:t.cpu.D,PC:t.cpu.PC,RAM:n,ROM:r,Screen:i,Keyboard:a}}function vs(){const{fs:t,setStatus:e,storage:n}=(0,o.useContext)(u.L),i=(0,o.useRef)((()=>{})),{initialState:a,reducers:c,actions:h}=(0,o.useMemo)((()=>function(t,e,n,i){let a=new ps.bJ,o=!0,l=!0,u="",c=[],h="";const d={update(t){t.sim=ys(a,i),t.test.highlight=a.currentStep?.span,t.test.valid=l,t.path=u,t.tests=Array.from(c),t.test.name=h},setTest(t,{tst:e,cmp:n}){t.test.tst=e??t.test.tst,t.test.cmp=n??t.test.cmp,t.test.out=""},testStep(t){t.test.out=a.log(),this.update(t)},testFinished(t){if(""===t.test.cmp.trim())return;const n=(0,fs.U)(t.test.cmp.trim(),a.log().trim());e(n?"Simulation successful: The output file is identical to the compare file":"Simulation error: The output file differs from the compare file")},setTitle(t,e){t.title=e},updateConfig(t,e){t.config={...t.config,...e}}},p={tick(){a.cpu.tick()},setAnimate(t){o=t},async setPath(e){u=e;const n=u.split("/").slice(0,-1).join("/"),r=await t.scandir(n);c=r.filter((t=>t.name.endsWith(".tst"))).map((t=>t.name)),c.length>0?this.loadTest(c[0]):(h="Default",this.compileTest("repeat {\n  ticktock;\n}","")),i.current({action:"update"})},async testStep(){const t=await a.step();return(o||t)&&i.current({action:"testStep"}),t&&i.current({action:"testFinished"}),t},resetRAM(){a.cpu.RAM.loadBytes([]),i.current({action:"update"}),e("Reset RAM")},toggleUseTest(){i.current({action:"update"})},reset(){a.reset(),i.current({action:"update"})},clear(){this.replaceROM(new s.n9),this.resetRAM(),this.clearTest(),this.reset(),i.current({action:"setTitle",payload:void 0})},clearTest(){this.compileTest("repeat {\n  ticktock;\n}",""),i.current({action:"update"})},replaceROM(t){a=new ps.bJ(t),this.clearTest()},compileTest(t,n){i.current({action:"setTest",payload:{tst:t,cmp:n}});const s=ds.uG.parse(t);return(0,r.ys)(s)?(e(`Failed to parse test - ${(0,r._)(s).message}`),l=!1,i.current({action:"update"}),!1):(l=!0,a=ps.bJ.from((0,r.Ok)(s),a.cpu.ROM,e),i.current({action:"update"}),!0)},async loadTest(n){const s=u.split("/").slice(0,-1).join("/"),i=await(0,ms.g)(t,`${s}/${n}`);if((0,r.ys)(i))return void e("Failed to load test");h=n;const{tst:a,cmp:o}=(0,r.oA)(i);this.compileTest(a,o??"")}};return{initialState:{sim:ys(a,i),test:{highlight:a.currentStep?.span,name:"",tst:"repeat {\n  ticktock;\n}",cmp:"",out:"",valid:!0},path:"",tests:[],config:{romFormat:"asm",ramFormat:"dec",screenScale:1,speed:2,testSpeed:2}},reducers:d,actions:p}}(t,e,0,i)),[t,e,n,i]),[d,p]=(0,l.A)(c,a);return i.current=p,{state:d,dispatch:i,actions:h}}var bs=n(8849),xs=n(782);function Ss(){const[t,e]=(0,o.useState)(),[n,r]=(0,o.useState)(),s=(0,d.C1)(),i=vs(),a=h(),c=(0,bs.vw)(),p=function(){const{setStatus:t}=(0,o.useContext)(u.L),e=(0,o.useRef)((()=>{})),{initialState:n,reducers:r,actions:s}=(0,o.useMemo)((()=>hs(0,e)),[t,e]),[i,a]=(0,l.A)(r,n);return e.current=a,{state:i,dispatch:e,actions:s}}();return(0,o.useEffect)((()=>{s.actions.initialize()}),[s.actions]),(0,o.useEffect)((()=>{c.actions.initialize()}),[c.actions]),(0,o.useEffect)((()=>{switch(n){case"cpu":e(i.state.title);break;case"asm":e(a.state.title);break;case"vm":e(c.state.title);break;case"compiler":e(p.state.title);break;default:e(void 0)}}),[n,i.state.title,a.state.title,c.state.title,p.state.title]),{setTool:r,title:t,stores:{chip:s,cpu:i,asm:a,vm:c,compiler:p}}}const ws=(0,o.createContext)({});function _s(t){const e=Ss();return(0,xs.jsx)(ws.Provider,{value:e,children:t.children})}},3015:(t,e,n)=>{n.d(e,{I:()=>s});var r=n(782);const s=({name:t})=>(0,r.jsx)("span",{className:"material-symbols-outlined",children:t})},3508:(t,e,n)=>{n.d(e,{s:()=>s});var r=n(8878);function s(){const[t,e]=(0,r.useState)(!1);return{isOpen:t,open(){e(!0)},close(){e(!1)}}}},6073:(t,e,n)=>{n.d(e,{Nk:()=>g,g3:()=>d});var r=n(1391),s=n(910),i=n(8878),a=n(8029),o=n(3015),l=n(3508),u=n(3569),c=n(782);const h="file selected";function d(){const t=(0,l.s)(),[e,n]=(0,i.useState)(),[r,s]=(0,i.useState)(!1),a=(0,i.useRef)(!1),o=(0,i.useRef)(),u=(0,i.useCallback)((async e=>{var r;return"string"===typeof e.suffix&&(e.suffix=[e.suffix]),n(e.suffix),s(null!==(r=e.allowFolders)&&void 0!==r&&r),t.open(),new Promise((t=>{o.current=t}))}),[t,o]);return{...t,select:async t=>(a.current=!1,await u(t)),selectAllowLocal:async t=>(a.current=!0,u(t)),[h]:o,suffix:e,allowFolders:r,allowLocal:a.current}}const p=({onClick:t,onDoubleClick:e,stats:n,highlighted:r=!1,disabled:s=!1})=>(0,c.jsx)("div",{children:(0,c.jsxs)("button",{className:"flex row justify-start outline "+(r?"":"secondary"),style:{textAlign:"left",color:s?"var(--disabled)":void 0},onClick:n=>{1==n.detail?null===t||void 0===t||t():2==n.detail&&(null===e||void 0===e||e())},children:[(0,c.jsx)(o.I,{name:n.isDirectory()?"folder":"draft"}),n.name]})});async function f(t,e,n){for(const r of await e.scandir(n))if(r.isDirectory()){const s=t.folder(r.name);s&&await f(s,e,`${n}/${r.name}`)}else t.file(r.name,await e.readFile(`${n}/${r.name}`))}function m(t,e){return e.map((e=>t.endsWith(e))).reduce(((t,e)=>t||e),!1)}const g=()=>{const{fs:t,setStatus:e}=(0,i.useContext)(s.L),{filePicker:n}=(0,i.useContext)(a.BR),[o,l]=(0,i.useState)([]),[d,g]=(0,i.useState)(""),y=t.cwd();(0,i.useEffect)((()=>{"/"==t.cwd()&&v("projects")}),[t]),(0,i.useEffect)((()=>{t.scandir(t.cwd()).then((t=>{l(t)}))}),[t,y,l]);const v=(0,i.useCallback)((e=>{t.cd(e),t.scandir(t.cwd()).then((t=>{l(t)}))}),[t,g,l]),b=(0,i.useCallback)((e=>{g(`${"/"==t.cwd()?"":t.cwd()}/${e}`)}),[g]),x=(0,i.useCallback)((()=>{var t,e;n.close(),null===(t=(e=n[h]).current)||void 0===t||t.call(e,d)}),[d,n,e]),S=(0,i.useRef)(null),w=(0,i.useRef)(null);return(0,c.jsxs)("dialog",{open:n.isOpen,children:[(0,c.jsx)("input",{type:"file",ref:S,onChange:async()=>{if(S.current&&S.current.files){var t,e;const r=S.current.files[0];null===(t=(e=n[h]).current)||void 0===t||t.call(e,{name:r.name,content:await r.text()}),n.close()}},style:{display:"none"}}),(0,c.jsxs)("article",{className:"file-select flex",children:[(0,c.jsxs)("header",{children:[(0,c.jsx)("p",{children:(0,c.jsx)(r.x6,{id:"+yPBXI"})}),(0,c.jsx)("a",{style:{color:"rgba(0, 0, 0, 0)"},className:"close",href:"#root",onClick:t=>{t.preventDefault(),n.close()},children:"close"})]}),(0,c.jsxs)("main",{children:[(0,c.jsx)("a",{ref:w,style:{display:"none"}}),(0,c.jsx)("div",{children:(0,c.jsx)("b",{children:t.cwd()})}),"/"!==t.cwd()&&(0,c.jsx)(p,{stats:{isDirectory:()=>!0,isFile:()=>!1,name:".."},onDoubleClick:()=>v("..")}),o.map((t=>(0,c.jsx)(p,{stats:t,highlighted:t.name===d.split("/").pop(),onClick:()=>b(t.name),onDoubleClick:()=>{t.isDirectory()&&v(t.name)},disabled:t.name.includes(".")&&void 0!=n.suffix&&!m(t.name,n.suffix)},t.name)))]}),(0,c.jsxs)("footer",{children:[(0,c.jsx)("button",{disabled:!d||".."==d||void 0!=n.suffix&&d.includes(".")&&!m(d,n.suffix)||!n.allowFolders&&!d.includes("."),onClick:x,children:"Select"}),n.allowLocal&&(0,c.jsx)("button",{onClick:()=>{var t;null===(t=S.current)||void 0===t||t.click()},children:"Select local file"}),(0,c.jsx)("button",{onClick:async()=>{var e;if(!w.current)return;const n=await(0,u.e)();await f(n,t,d);const r=await n.generateAsync({type:"blob"}),s=URL.createObjectURL(r);w.current.href=s,w.current.download=null!==(e=d.split("/").pop())&&void 0!==e?e:d,w.current.click(),URL.revokeObjectURL(s)},"data-tooltip":"Download all files in this folder into a zip",disabled:""==d||d.includes("."),children:"Download"})]})]})]})}},3569:(t,e,n)=>{async function r(t){const e=await s();for(const r of t)e.file(r.name,await r.content);const n=await e.generateAsync({type:"blob"});return URL.createObjectURL(n)}async function s(){const{default:t}=await n.e(608).then(n.t.bind(n,5608,23));return new t}n.d(e,{e:()=>s,y:()=>r})},5270:(t,e,n)=>{n.d(e,{w:()=>v,dQ:()=>b,z1:()=>y});var r,s=n(1092),i=n(2469),a=n(8878),o=n(782);const l="/tracking/canTrack",u="yes",c="no",h="",d=[u,c];let p=!1;const f=null!==(r={NODE_ENV:"production",PUBLIC_URL:"/web-ide",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.GA4_ID)&&void 0!==r?r:"G-0VTR5BJFQP";function m(t){s.Ay.send({hitType:"pageview",page:t})}function g(t,e,n,r){var a,o;if(p)return;const l="string"===typeof t?{category:t,action:(0,i.Z1)(e),label:n&&r?{label:n,value:r}:void 0}:t;s.Ay.event({category:l.category,action:l.action,nonInteraction:!l.interaction,label:null===(a=l.label)||void 0===a?void 0:a.label,value:null===(o=l.label)||void 0===o?void 0:o.value})}function y(){var t;const e=null!==(t=localStorage[l])&&void 0!==t?t:h,[n,r]=(0,a.useState)(e===u),[i,o]=(0,a.useState)(d.includes(e)||"1"===navigator.doNotTrack);return{canTrack:n,haveAsked:i,accept:(0,a.useCallback)((()=>{localStorage[l]=u,r(!0),o(!0),s.Ay.initialize(f),s.Ay.send("pageview")}),[r,o]),reject:(0,a.useCallback)((()=>{localStorage[l]=c,r(!1),o(!0),p=!0}),[r,o]),trackEvent:g,trackPage:m}}function v(){const{accept:t,reject:e,haveAsked:n}=y(),[r,s]=(0,a.useState)(!n),i=(0,a.useCallback)((()=>{s(!1)}),[s]),l=(0,a.useCallback)((()=>{t(),i()}),[t,i]),u=(0,a.useCallback)((()=>{e(),i()}),[e,i]);return(0,o.jsx)(o.Fragment,{children:r&&(0,o.jsxs)("div",{id:"trackingBanner",className:"flex row",children:[(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)(b,{})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("a",{href:"#reject",role:"button",className:"reject",onClick:u,children:"Reject"}),(0,o.jsx)("a",{href:"#accept",role:"button",className:"accept",onClick:l,children:"Accept"}),(0,o.jsx)("a",{href:"#close",role:"button",className:"close secondary",onClick:i,children:"\ud835\uddb7"})]})]})})}function b(){return(0,o.jsxs)("p",{style:{margin:0},children:["This site uses Google Analytics to gather information that will improve the user experience. This only includes anonymous interaction data, and never shares your code."," ",(0,o.jsx)("a",{href:"www.google.com/policies/privacy/partners/",children:"How Google uses data."})]})}},3499:(t,e,n)=>{n.d(e,{Ay:()=>m,It:()=>f,p3:()=>p});var r=n(8878),s=n(782);const i=(0,r.lazy)((()=>Promise.all([n.e(537),n.e(787)]).then(n.bind(n,7737)))),a=(0,r.lazy)((()=>Promise.all([n.e(537),n.e(744)]).then(n.bind(n,5178)))),o=(0,r.lazy)((()=>n.e(519).then(n.bind(n,5519)))),l=(0,r.lazy)((()=>n.e(323).then(n.bind(n,1323)))),u=(0,r.lazy)((()=>Promise.all([n.e(537),n.e(34)]).then(n.bind(n,1496)))),c=(0,r.lazy)((()=>n.e(598).then(n.bind(n,6598)))),h=(0,r.lazy)((()=>n.e(408).then(n.bind(n,2408)))),d=(0,r.lazy)((()=>Promise.all([n.e(656),n.e(614)]).then(n.bind(n,3614)))),p="lastRoute",f={chip:"Hardware Simulator",cpu:"CPU Emulator",asm:"Assembler",vm:"VM Emulator",bitmap:"Bitmap Editor",compiler:"Jack Compiler"},m={chip:{href:"/chip",tool:"chip",target:(0,s.jsx)(i,{})},cpu:{href:"/cpu",tool:"cpu",target:(0,s.jsx)(a,{})},asm:{href:"/asm",tool:"asm",target:(0,s.jsx)(o,{})},vm:{href:"/vm",tool:"vm",target:(0,s.jsx)(u,{})},compiler:{href:"/compiler",tool:"compiler",target:(0,s.jsx)(c,{})},bitmap:{href:"/bitmap",tool:"bitmap",target:(0,s.jsx)(l,{})},util:{href:"/util",target:(0,s.jsx)(h,{})},about:{href:"/about",target:(0,s.jsx)(d,{})}}},1642:(t,e,n)=>{function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}var s;n.d(e,{AO:()=>h,Gh:()=>P,HS:()=>F,Oi:()=>o,Rr:()=>d,pX:()=>z,pb:()=>k,rc:()=>s,tH:()=>j,ue:()=>m,yD:()=>O,zR:()=>a}),function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(s||(s={}));const i="popstate";function a(t){return void 0===t&&(t={}),p((function(t,e){let{pathname:n,search:r,hash:s}=t.location;return c("",{pathname:n,search:r,hash:s},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:h(e)}),null,t)}function o(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function l(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function u(t,e){return{usr:t.state,key:t.key,idx:e}}function c(t,e,n,s){return void 0===n&&(n=null),r({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?d(e):e,{state:n,key:e&&e.key||s||Math.random().toString(36).substr(2,8)})}function h(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function d(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function p(t,e,n,a){void 0===a&&(a={});let{window:l=document.defaultView,v5Compat:d=!1}=a,p=l.history,f=s.Pop,m=null,g=y();function y(){return(p.state||{idx:null}).idx}function v(){f=s.Pop;let t=y(),e=null==t?null:t-g;g=t,m&&m({action:f,location:x.location,delta:e})}function b(t){let e="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof t?t:h(t);return n=n.replace(/ $/,"%20"),o(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==g&&(g=0,p.replaceState(r({},p.state,{idx:g}),""));let x={get action(){return f},get location(){return t(l,p)},listen(t){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(i,v),m=t,()=>{l.removeEventListener(i,v),m=null}},createHref:t=>e(l,t),createURL:b,encodeLocation(t){let e=b(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){f=s.Push;let r=c(x.location,t,e);n&&n(r,t),g=y()+1;let i=u(r,g),a=x.createHref(r);try{p.pushState(i,"",a)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(a)}d&&m&&m({action:f,location:x.location,delta:1})},replace:function(t,e){f=s.Replace;let r=c(x.location,t,e);n&&n(r,t),g=y();let i=u(r,g),a=x.createHref(r);p.replaceState(i,"",a),d&&m&&m({action:f,location:x.location,delta:0})},go:t=>p.go(t)};return x}var f;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(t,e,n){return void 0===n&&(n="/"),g(t,e,n,!1)}function g(t,e,n,r){let s=k(("string"===typeof e?d(e):e).pathname||"/",n);if(null==s)return null;let i=y(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let t=R(s);a=I(i[o],t,r)}return a}function y(t,e,n,r){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(t,s,i)=>{let a={relativePath:void 0===i?t.path||"":i,caseSensitive:!0===t.caseSensitive,childrenIndex:s,route:t};a.relativePath.startsWith("/")&&(o(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let l=F([r,a.relativePath]),u=n.concat(a);t.children&&t.children.length>0&&(o(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),y(t.children,e,u,l)),(null!=t.path||t.index)&&e.push({path:l,score:A(l,t.index),routesMeta:u})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let r of v(t.path))s(t,e,r);else s(t,e)})),e}function v(t){let e=t.split("/");if(0===e.length)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=v(r.join("/")),o=[];return o.push(...a.map((t=>""===t?i:[i,t].join("/")))),s&&o.push(...a),o.map((e=>t.startsWith("/")&&""===e?"/":e))}const b=/^:[\w-]+$/,x=3,S=2,w=1,_=10,E=-2,T=t=>"*"===t;function A(t,e){let n=t.split("/"),r=n.length;return n.some(T)&&(r+=E),e&&(r+=S),n.filter((t=>!T(t))).reduce(((t,e)=>t+(b.test(e)?x:""===e?w:_)),r)}function I(t,e,n){void 0===n&&(n=!1);let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let t=r[o],l=o===r.length-1,u="/"===i?e:e.slice(i.length)||"/",c=C({path:t.relativePath,caseSensitive:t.caseSensitive,end:l},u),h=t.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=C({path:t.relativePath,caseSensitive:t.caseSensitive,end:!1},u)),!c)return null;Object.assign(s,c.params),a.push({params:s,pathname:F([i,c.pathname]),pathnameBase:D(F([i,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(i=F([i,c.pathnameBase]))}return a}function C(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);l("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((t,e,n)=>(r.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));t.endsWith("*")?(r.push({paramName:"*"}),s+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==t&&"/"!==t&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,e?void 0:"i");return[i,r]}(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce(((t,e,n)=>{let{paramName:r,isOptional:s}=e;if("*"===r){let t=o[n]||"";a=i.slice(0,i.length-t.length).replace(/(.)\/+$/,"$1")}const l=o[n];return t[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),t}),{}),pathname:i,pathnameBase:a,pattern:t}}function R(t){try{return t.split("/").map((t=>decodeURIComponent(t).replace(/\//g,"%2F"))).join("/")}catch(e){return l(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function k(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&"/"!==r?null:t.slice(n)||"/"}function L(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function N(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function O(t,e){let n=N(t);return e?n.map(((t,e)=>e===n.length-1?t.pathname:t.pathnameBase)):n.map((t=>t.pathnameBase))}function P(t,e,n,s){let i;void 0===s&&(s=!1),"string"===typeof t?i=d(t):(i=r({},t),o(!i.pathname||!i.pathname.includes("?"),L("?","pathname","search",i)),o(!i.pathname||!i.pathname.includes("#"),L("#","pathname","hash",i)),o(!i.search||!i.search.includes("#"),L("#","search","hash",i)));let a,l=""===t||""===i.pathname,u=l?"/":i.pathname;if(null==u)a=n;else{let t=e.length-1;if(!s&&u.startsWith("..")){let e=u.split("/");for(;".."===e[0];)e.shift(),t-=1;i.pathname=e.join("/")}a=t>=0?e[t]:"/"}let c=function(t,e){void 0===e&&(e="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof t?d(t):t,i=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:i,search:M(r),hash:U(s)}}(i,a),h=u&&"/"!==u&&u.endsWith("/"),p=(l||"."===u)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!p||(c.pathname+="/"),c}const F=t=>t.join("/").replace(/\/\/+/g,"/"),D=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),M=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",U=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";class j extends Error{}function z(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const V=["post","put","patch","delete"],B=(new Set(V),["get",...V]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred")},2777:(t,e,n)=>{var r=n(8878),s=n(7116);function i(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(o[t]=e,t=0;t<e.length;t++)a.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(t,e,n,r,s,i,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function b(t,e,n,r){var s=g.hasOwnProperty(e)?g[e]:null;(null!==s?0!==s.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,s,r)&&(n=null),r||null===s?function(t){return!!h.call(f,t)||!h.call(p,t)&&(d.test(t)?f[t]=!0:(p[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=null===n?3!==s.type&&"":n:(e=s.attributeName,r=s.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function F(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=P&&t[P]||t["@@iterator"])?t:null}var D,M=Object.assign;function U(t){if(void 0===D)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);D=e&&e[1]||""}return"\n"+D+t}var j=!1;function z(t,e){if(!t||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var s=u.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=o);break}}}finally{j=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?U(t):""}function V(t){switch(t.tag){case 5:return U(t.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return t=z(t.type,!1);case 11:return t=z(t.type.render,!1);case 1:return t=z(t.type,!0);default:return""}}function B(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case _:return"Fragment";case w:return"Portal";case T:return"Profiler";case E:return"StrictMode";case R:return"Suspense";case k:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case I:return(t.displayName||"Context")+".Consumer";case A:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case L:return null!==(e=t.displayName||null)?e:B(t.type)||"Memo";case N:e=t._payload,t=t._init;try{return B(t(e))}catch(n){}}return null}function $(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function H(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function W(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(t){r=""+t,i.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function q(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=G(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function K(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Y(t,e){var n=e.checked;return M({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Q(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=H(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function X(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function J(t,e){X(t,e);var n=H(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,H(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&K(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+H(n),e=null,s=0;s<t.length;s++){if(t[s].value===n)return t[s].selected=!0,void(r&&(t[s].defaultSelected=!0));null!==e||t[s].disabled||(e=t[s])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(i(91));return M({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function st(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(i(92));if(et(n)){if(1<n.length)throw Error(i(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:H(n)}}function it(t,e){var n=H(e.value),r=H(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function ot(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ot(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ct=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function ht(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function ft(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||dt.hasOwnProperty(t)&&dt[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=ft(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}Object.keys(dt).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dt[e]=dt[t]}))}));var gt=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,e){if(e){if(gt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(i(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(i(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(i(62))}}function vt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function xt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var St=null,wt=null,_t=null;function Et(t){if(t=vs(t)){if("function"!==typeof St)throw Error(i(280));var e=t.stateNode;e&&(e=xs(e),St(t.stateNode,t.type,e))}}function Tt(t){wt?_t?_t.push(t):_t=[t]:wt=t}function At(){if(wt){var t=wt,e=_t;if(_t=wt=null,Et(t),e)for(t=0;t<e.length;t++)Et(e[t])}}function It(t,e){return t(e)}function Ct(){}var Rt=!1;function kt(t,e,n){if(Rt)return t(e,n);Rt=!0;try{return It(t,e,n)}finally{Rt=!1,(null!==wt||null!==_t)&&(Ct(),At())}}function Lt(t,e){var n=t.stateNode;if(null===n)return null;var r=xs(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(i(231,e,typeof n));return n}var Nt=!1;if(c)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Nt=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch(rc){Nt=!1}function Pt(t,e,n,r,s,i,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Ft=!1,Dt=null,Mt=!1,Ut=null,jt={onError:function(t){Ft=!0,Dt=t}};function zt(t,e,n,r,s,i,a,o,l){Ft=!1,Dt=null,Pt.apply(jt,arguments)}function Vt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Bt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function $t(t){if(Vt(t)!==t)throw Error(i(188))}function Ht(t){return t=function(t){var e=t.alternate;if(!e){if(null===(e=Vt(t)))throw Error(i(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return $t(s),t;if(a===r)return $t(s),e;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?t:e}(t),null!==t?Gt(t):null}function Gt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Gt(t);if(null!==e)return e;t=t.sibling}return null}var Wt=s.unstable_scheduleCallback,qt=s.unstable_cancelCallback,Kt=s.unstable_shouldYield,Yt=s.unstable_requestPaint,Qt=s.unstable_now,Xt=s.unstable_getCurrentPriorityLevel,Jt=s.unstable_ImmediatePriority,Zt=s.unstable_UserBlockingPriority,te=s.unstable_NormalPriority,ee=s.unstable_LowPriority,ne=s.unstable_IdlePriority,re=null,se=null;var ie=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/oe|0)|0},ae=Math.log,oe=Math.LN2;var le=64,ue=4194304;function ce(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function he(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=ce(o):0!==(i&=a)&&(r=ce(i))}else 0!==(a=n&~s)?r=ce(a):0!==i&&(r=ce(i));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&s)&&((s=r&-r)>=(i=e&-e)||16===s&&0!==(4194240&i)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)s=1<<(n=31-ie(e)),r|=t[n],e&=~s;return r}function de(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function fe(){var t=le;return 0===(4194240&(le<<=1))&&(le=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ge(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ie(e)]=n}function ye(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ie(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function be(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var xe,Se,we,_e,Ee,Te=!1,Ae=[],Ie=null,Ce=null,Re=null,ke=new Map,Le=new Map,Ne=[],Oe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pe(t,e){switch(t){case"focusin":case"focusout":Ie=null;break;case"dragenter":case"dragleave":Ce=null;break;case"mouseover":case"mouseout":Re=null;break;case"pointerover":case"pointerout":ke.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Le.delete(e.pointerId)}}function Fe(t,e,n,r,s,i){return null===t||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==e&&(null!==(e=vs(e))&&Se(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==s&&-1===e.indexOf(s)&&e.push(s),t)}function De(t){var e=ys(t.target);if(null!==e){var n=Vt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Bt(n)))return t.blockedOn=e,void Ee(t.priority,(function(){we(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Me(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=vs(n))&&Se(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);bt=r,n.target.dispatchEvent(r),bt=null,e.shift()}return!0}function Ue(t,e,n){Me(t)&&n.delete(e)}function je(){Te=!1,null!==Ie&&Me(Ie)&&(Ie=null),null!==Ce&&Me(Ce)&&(Ce=null),null!==Re&&Me(Re)&&(Re=null),ke.forEach(Ue),Le.forEach(Ue)}function ze(t,e){t.blockedOn===e&&(t.blockedOn=null,Te||(Te=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,je)))}function Ve(t){function e(e){return ze(e,t)}if(0<Ae.length){ze(Ae[0],t);for(var n=1;n<Ae.length;n++){var r=Ae[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Ie&&ze(Ie,t),null!==Ce&&ze(Ce,t),null!==Re&&ze(Re,t),ke.forEach(e),Le.forEach(e),n=0;n<Ne.length;n++)(r=Ne[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Ne.length&&null===(n=Ne[0]).blockedOn;)De(n),null===n.blockedOn&&Ne.shift()}var Be=x.ReactCurrentBatchConfig,$e=!0;function He(t,e,n,r){var s=ve,i=Be.transition;Be.transition=null;try{ve=1,We(t,e,n,r)}finally{ve=s,Be.transition=i}}function Ge(t,e,n,r){var s=ve,i=Be.transition;Be.transition=null;try{ve=4,We(t,e,n,r)}finally{ve=s,Be.transition=i}}function We(t,e,n,r){if($e){var s=Ke(t,e,n,r);if(null===s)$r(t,e,r,qe,n),Pe(t,r);else if(function(t,e,n,r,s){switch(e){case"focusin":return Ie=Fe(Ie,t,e,n,r,s),!0;case"dragenter":return Ce=Fe(Ce,t,e,n,r,s),!0;case"mouseover":return Re=Fe(Re,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ke.set(i,Fe(ke.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Le.set(i,Fe(Le.get(i)||null,t,e,n,r,s)),!0}return!1}(s,t,e,n,r))r.stopPropagation();else if(Pe(t,r),4&e&&-1<Oe.indexOf(t)){for(;null!==s;){var i=vs(s);if(null!==i&&xe(i),null===(i=Ke(t,e,n,r))&&$r(t,e,r,qe,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else $r(t,e,r,null,n)}}var qe=null;function Ke(t,e,n,r){if(qe=null,null!==(t=ys(t=xt(r))))if(null===(e=Vt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Bt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qe=t,null}function Ye(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xt()){case Jt:return 1;case Zt:return 4;case te:case ee:return 16;case ne:return 536870912;default:return 16}default:return 16}}var Qe=null,Xe=null,Je=null;function Ze(){if(Je)return Je;var t,e,n=Xe,r=n.length,s="value"in Qe?Qe.value:Qe.textContent,i=s.length;for(t=0;t<r&&n[t]===s[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===s[i-e];e++);return Je=s.slice(t,1<e?1-e:void 0)}function tn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function en(){return!0}function nn(){return!1}function rn(t){function e(e,n,r,s,i){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?en:nn,this.isPropagationStopped=nn,this}return M(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),e}var sn,an,on,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(ln),cn=M({},ln,{view:0,detail:0}),hn=rn(cn),dn=M({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==on&&(on&&"mousemove"===t.type?(sn=t.screenX-on.screenX,an=t.screenY-on.screenY):an=sn=0,on=t),sn)},movementY:function(t){return"movementY"in t?t.movementY:an}}),pn=rn(dn),fn=rn(M({},dn,{dataTransfer:0})),mn=rn(M({},cn,{relatedTarget:0})),gn=rn(M({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},ln,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vn=rn(yn),bn=rn(M({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=wn[t])&&!!e[t]}function En(){return _n}var Tn=M({},cn,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=tn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Sn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(t){return"keypress"===t.type?tn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?tn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),An=rn(Tn),In=rn(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=rn(M({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Rn=rn(M({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=M({},dn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=rn(kn),Nn=[9,13,27,32],On=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var Fn=c&&"TextEvent"in window&&!Pn,Dn=c&&(!On||Pn&&8<Pn&&11>=Pn),Mn=String.fromCharCode(32),Un=!1;function jn(t,e){switch(t){case"keyup":return-1!==Nn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Bn[t.type]:"textarea"===e}function Hn(t,e,n,r){Tt(r),0<(e=Gr(e,"onChange")).length&&(n=new un("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gn=null,Wn=null;function qn(t){Mr(t,0)}function Kn(t){if(q(bs(t)))return t}function Yn(t,e){if("change"===t)return e}var Qn=!1;if(c){var Xn;if(c){var Jn="oninput"in document;if(!Jn){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),Jn="function"===typeof Zn.oninput}Xn=Jn}else Xn=!1;Qn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",er),Wn=Gn=null)}function er(t){if("value"===t.propertyName&&Kn(Wn)){var e=[];Hn(e,Wn,t,xt(t)),kt(qn,e)}}function nr(t,e,n){"focusin"===t?(tr(),Wn=n,(Gn=e).attachEvent("onpropertychange",er)):"focusout"===t&&tr()}function rr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Kn(Wn)}function sr(t,e){if("click"===t)return Kn(e)}function ir(t,e){if("input"===t||"change"===t)return Kn(e)}var ar="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function or(t,e){if(ar(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!h.call(e,s)||!ar(t[s],e[s]))return!1}return!0}function lr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ur(t,e){var n,r=lr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=lr(r)}}function cr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?cr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function hr(){for(var t=window,e=K();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=K((t=e.contentWindow).document)}return e}function dr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pr(t){var e=hr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var a=ur(n,r);s&&a&&(1!==t.rangeCount||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,vr=!1;function br(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=Gr(gr,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mr)))}function xr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},wr={},_r={};function Er(t){if(wr[t])return wr[t];if(!Sr[t])return t;var e,n=Sr[t];for(e in n)if(n.hasOwnProperty(e)&&e in _r)return wr[t]=n[e];return t}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=Er("animationend"),Ar=Er("animationiteration"),Ir=Er("animationstart"),Cr=Er("transitionend"),Rr=new Map,kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){Rr.set(t,e),l(e,[t])}for(var Nr=0;Nr<kr.length;Nr++){var Or=kr[Nr];Lr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Lr(Tr,"onAnimationEnd"),Lr(Ar,"onAnimationIteration"),Lr(Ir,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Cr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Dr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,s,a,o,l,u){if(zt.apply(this,arguments),Ft){if(!Ft)throw Error(i(198));var c=Dt;Ft=!1,Dt=null,Mt||(Mt=!0,Ut=c)}}(r,e,void 0,t),t.currentTarget=null}function Mr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;t:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break t;Dr(s,o,u),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break t;Dr(s,o,u),i=l}}}if(Mt)throw t=Ut,Mt=!1,Ut=null,t}function Ur(t,e){var n=e[fs];void 0===n&&(n=e[fs]=new Set);var r=t+"__bubble";n.has(r)||(Br(e,t,2,!1),n.add(r))}function jr(t,e,n){var r=0;e&&(r|=4),Br(n,t,r,e)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Vr(t){if(!t[zr]){t[zr]=!0,a.forEach((function(e){"selectionchange"!==e&&(Fr.has(e)||jr(e,!1,t),jr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[zr]||(e[zr]=!0,jr("selectionchange",!1,e))}}function Br(t,e,n,r){switch(Ye(e)){case 1:var s=He;break;case 4:s=Ge;break;default:s=We}n=s.bind(null,e,n,t),s=void 0,!Nt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(s=!0),r?void 0!==s?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):void 0!==s?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function $r(t,e,n,r,s){var i=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=ys(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue t}o=o.parentNode}}r=r.return}kt((function(){var r=i,s=xt(n),a=[];t:{var o=Rr.get(t);if(void 0!==o){var l=un,u=t;switch(t){case"keypress":if(0===tn(n))break t;case"keydown":case"keyup":l=An;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Tr:case Ar:case Ir:l=gn;break;case Cr:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var c=0!==(4&e),h=!c&&"scroll"===t,d=c?null!==o?o+"Capture":null:o;c=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Lt(f,d))&&c.push(Hr(f,m,p)))),h)break;f=f.return}0<c.length&&(o=new l(o,u,null,n,s),a.push({event:o,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(o="mouseover"===t||"pointerover"===t)||n===bt||!(u=n.relatedTarget||n.fromElement)||!ys(u)&&!u[ps])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ys(u):null)&&(u!==(h=Vt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(c=In,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?o:bs(l),p=null==u?o:bs(u),(o=new c(m,f+"leave",l,n,s)).target=h,o.relatedTarget=p,m=null,ys(s)===r&&((c=new c(d,f+"enter",u,n,s)).target=p,c.relatedTarget=h,m=c),h=m,l&&u)t:{for(d=u,f=0,p=c=l;p;p=Wr(p))f++;for(p=0,m=d;m;m=Wr(m))p++;for(;0<f-p;)c=Wr(c),f--;for(;0<p-f;)d=Wr(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break t;c=Wr(c),d=Wr(d)}c=null}else c=null;null!==l&&qr(a,o,l,c,!1),null!==u&&null!==h&&qr(a,h,u,c,!0)}if("select"===(l=(o=r?bs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if($n(o))if(Qn)g=ir;else{g=rr;var y=nr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(t,r))?Hn(a,g,n,s):(y&&y(t,o,r),"focusout"===t&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&tt(o,"number",o.value)),y=r?bs(r):window,t){case"focusin":($n(y)||"true"===y.contentEditable)&&(mr=y,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(a,n,s);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(a,n,s)}var v;if(On)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Vn?jn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(v=Ze()):(Xe="value"in(Qe=s)?Qe.value:Qe.textContent,Vn=!0)),0<(y=Gr(r,b)).length&&(b=new bn(b,t,null,n,s),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Fn?function(t,e){switch(t){case"compositionend":return zn(e);case"keypress":return 32!==e.which?null:(Un=!0,Mn);case"textInput":return(t=e.data)===Mn&&Un?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!On&&jn(t,e)?(t=Ze(),Je=Xe=Qe=null,Vn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Mr(a,e)}))}function Hr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gr(t,e){for(var n=e+"Capture",r=[];null!==t;){var s=t,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Lt(t,n))&&r.unshift(Hr(t,i,s)),null!=(i=Lt(t,e))&&r.push(Hr(t,i,s))),t=t.return}return r}function Wr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function qr(t,e,n,r,s){for(var i=e._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,s?null!=(l=Lt(n,i))&&a.unshift(Hr(n,l,o)):s||null!=(l=Lt(n,i))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Kr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(t){return("string"===typeof t?t:""+t).replace(Kr,"\n").replace(Yr,"")}function Xr(t,e,n){if(e=Qr(e),Qr(t)!==e&&n)throw Error(i(425))}function Jr(){}var Zr=null,ts=null;function es(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ns="function"===typeof setTimeout?setTimeout:void 0,rs="function"===typeof clearTimeout?clearTimeout:void 0,ss="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ss?function(t){return ss.resolve(null).then(t).catch(as)}:ns;function as(t){setTimeout((function(){throw t}))}function os(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return t.removeChild(s),void Ve(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Ve(e)}function ls(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function us(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var cs=Math.random().toString(36).slice(2),hs="__reactFiber$"+cs,ds="__reactProps$"+cs,ps="__reactContainer$"+cs,fs="__reactEvents$"+cs,ms="__reactListeners$"+cs,gs="__reactHandles$"+cs;function ys(t){var e=t[hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ps]||n[hs]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=us(t);null!==t;){if(n=t[hs])return n;t=us(t)}return e}n=(t=n).parentNode}return null}function vs(t){return!(t=t[hs]||t[ps])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function bs(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(i(33))}function xs(t){return t[ds]||null}var Ss=[],ws=-1;function _s(t){return{current:t}}function Es(t){0>ws||(t.current=Ss[ws],Ss[ws]=null,ws--)}function Ts(t,e){ws++,Ss[ws]=t.current,t.current=e}var As={},Is=_s(As),Cs=_s(!1),Rs=As;function ks(t,e){var n=t.type.contextTypes;if(!n)return As;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=e[s];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ls(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Ns(){Es(Cs),Es(Is)}function Os(t,e,n){if(Is.current!==As)throw Error(i(168));Ts(Is,e),Ts(Cs,n)}function Ps(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(i(108,$(t)||"Unknown",s));return M({},n,r)}function Fs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||As,Rs=Is.current,Ts(Is,t),Ts(Cs,Cs.current),!0}function Ds(t,e,n){var r=t.stateNode;if(!r)throw Error(i(169));n?(t=Ps(t,e,Rs),r.__reactInternalMemoizedMergedChildContext=t,Es(Cs),Es(Is),Ts(Is,t)):Es(Cs),Ts(Cs,n)}var Ms=null,Us=!1,js=!1;function zs(t){null===Ms?Ms=[t]:Ms.push(t)}function Vs(){if(!js&&null!==Ms){js=!0;var t=0,e=ve;try{var n=Ms;for(ve=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}Ms=null,Us=!1}catch(s){throw null!==Ms&&(Ms=Ms.slice(t+1)),Wt(Jt,Vs),s}finally{ve=e,js=!1}}return null}var Bs=[],$s=0,Hs=null,Gs=0,Ws=[],qs=0,Ks=null,Ys=1,Qs="";function Xs(t,e){Bs[$s++]=Gs,Bs[$s++]=Hs,Hs=t,Gs=e}function Js(t,e,n){Ws[qs++]=Ys,Ws[qs++]=Qs,Ws[qs++]=Ks,Ks=t;var r=Ys;t=Qs;var s=32-ie(r)-1;r&=~(1<<s),n+=1;var i=32-ie(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ys=1<<32-ie(e)+s|n<<s|r,Qs=i+t}else Ys=1<<i|n<<s|r,Qs=t}function Zs(t){null!==t.return&&(Xs(t,1),Js(t,1,0))}function ti(t){for(;t===Hs;)Hs=Bs[--$s],Bs[$s]=null,Gs=Bs[--$s],Bs[$s]=null;for(;t===Ks;)Ks=Ws[--qs],Ws[qs]=null,Qs=Ws[--qs],Ws[qs]=null,Ys=Ws[--qs],Ws[qs]=null}var ei=null,ni=null,ri=!1,si=null;function ii(t,e){var n=ku(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function ai(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,ei=t,ni=ls(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,ei=t,ni=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Ks?{id:Ys,overflow:Qs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=ku(18,null,null,0)).stateNode=e,n.return=t,t.child=n,ei=t,ni=null,!0);default:return!1}}function oi(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function li(t){if(ri){var e=ni;if(e){var n=e;if(!ai(t,e)){if(oi(t))throw Error(i(418));e=ls(n.nextSibling);var r=ei;e&&ai(t,e)?ii(r,n):(t.flags=-4097&t.flags|2,ri=!1,ei=t)}}else{if(oi(t))throw Error(i(418));t.flags=-4097&t.flags|2,ri=!1,ei=t}}}function ui(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ei=t}function ci(t){if(t!==ei)return!1;if(!ri)return ui(t),ri=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!es(t.type,t.memoizedProps)),e&&(e=ni)){if(oi(t))throw hi(),Error(i(418));for(;e;)ii(t,e),e=ls(e.nextSibling)}if(ui(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(i(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ni=ls(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ni=null}}else ni=ei?ls(t.stateNode.nextSibling):null;return!0}function hi(){for(var t=ni;t;)t=ls(t.nextSibling)}function di(){ni=ei=null,ri=!1}function pi(t){null===si?si=[t]:si.push(t)}var fi=x.ReactCurrentBatchConfig;function mi(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,t));var s=r,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=s.refs;null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(i(284));if(!n._owner)throw Error(i(290,t))}return t}function gi(t,e){throw t=Object.prototype.toString.call(e),Error(i(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yi(t){return(0,t._init)(t._payload)}function vi(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(t,e){return(t=Nu(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=Du(n,t.mode,r)).return=t,e):((e=s(e,n)).return=t,e)}function u(t,e,n,r){var i=n.type;return i===_?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&yi(i)===e.type)?((r=s(e,n.props)).ref=mi(t,e,n),r.return=t,r):((r=Ou(n.type,n.key,n.props,null,t.mode,r)).ref=mi(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Mu(n,t.mode,r)).return=t,e):((e=s(e,n.children||[])).return=t,e)}function h(t,e,n,r,i){return null===e||7!==e.tag?((e=Pu(n,t.mode,r,i)).return=t,e):((e=s(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Du(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case S:return(n=Ou(e.type,e.key,e.props,null,t.mode,n)).ref=mi(t,null,e),n.return=t,n;case w:return(e=Mu(e,t.mode,n)).return=t,e;case N:return d(t,(0,e._init)(e._payload),n)}if(et(e)||F(e))return(e=Pu(e,t.mode,n,null)).return=t,e;gi(t,e)}return null}function p(t,e,n,r){var s=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===s?u(t,e,n,r):null;case w:return n.key===s?c(t,e,n,r):null;case N:return p(t,e,(s=n._init)(n._payload),r)}if(et(n)||F(n))return null!==s?null:h(t,e,n,r,null);gi(t,n)}return null}function f(t,e,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return u(e,t=t.get(null===r.key?n:r.key)||null,r,s);case w:return c(e,t=t.get(null===r.key?n:r.key)||null,r,s);case N:return f(t,e,n,(0,r._init)(r._payload),s)}if(et(r)||F(r))return h(e,t=t.get(n)||null,r,s,null);gi(e,r)}return null}function m(s,i,o,l){for(var u=null,c=null,h=i,m=i=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(s,h,o[m],l);if(null===y){null===h&&(h=g);break}t&&h&&null===y.alternate&&e(s,h),i=a(y,i,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===o.length)return n(s,h),ri&&Xs(s,m),u;if(null===h){for(;m<o.length;m++)null!==(h=d(s,o[m],l))&&(i=a(h,i,m),null===c?u=h:c.sibling=h,c=h);return ri&&Xs(s,m),u}for(h=r(s,h);m<o.length;m++)null!==(g=f(h,s,m,o[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),i=a(g,i,m),null===c?u=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(s,t)})),ri&&Xs(s,m),u}function g(s,o,l,u){var c=F(l);if("function"!==typeof c)throw Error(i(150));if(null==(l=c.call(l)))throw Error(i(151));for(var h=c=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(s,m,v.value,u);if(null===b){null===m&&(m=y);break}t&&m&&null===b.alternate&&e(s,m),o=a(b,o,g),null===h?c=b:h.sibling=b,h=b,m=y}if(v.done)return n(s,m),ri&&Xs(s,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(s,v.value,u))&&(o=a(v,o,g),null===h?c=v:h.sibling=v,h=v);return ri&&Xs(s,g),c}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=f(m,s,g,v.value,u))&&(t&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===h?c=v:h.sibling=v,h=v);return t&&m.forEach((function(t){return e(s,t)})),ri&&Xs(s,g),c}return function t(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case S:t:{for(var u=a.key,c=i;null!==c;){if(c.key===u){if((u=a.type)===_){if(7===c.tag){n(r,c.sibling),(i=s(c,a.props.children)).return=r,r=i;break t}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===N&&yi(u)===c.type){n(r,c.sibling),(i=s(c,a.props)).ref=mi(r,c,a),i.return=r,r=i;break t}n(r,c);break}e(r,c),c=c.sibling}a.type===_?((i=Pu(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Ou(a.type,a.key,a.props,null,r.mode,l)).ref=mi(r,i,a),l.return=r,r=l)}return o(r);case w:t:{for(c=a.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break t}n(r,i);break}e(r,i),i=i.sibling}(i=Mu(a,r.mode,l)).return=r,r=i}return o(r);case N:return t(r,i,(c=a._init)(a._payload),l)}if(et(a))return m(r,i,a,l);if(F(a))return g(r,i,a,l);gi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Du(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var bi=vi(!0),xi=vi(!1),Si=_s(null),wi=null,_i=null,Ei=null;function Ti(){Ei=_i=wi=null}function Ai(t){var e=Si.current;Es(Si),t._currentValue=e}function Ii(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ci(t,e){wi=t,Ei=_i=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(vo=!0),t.firstContext=null)}function Ri(t){var e=t._currentValue;if(Ei!==t)if(t={context:t,memoizedValue:e,next:null},null===_i){if(null===wi)throw Error(i(308));_i=t,wi.dependencies={lanes:0,firstContext:t}}else _i=_i.next=t;return e}var ki=null;function Li(t){null===ki?ki=[t]:ki.push(t)}function Ni(t,e,n,r){var s=e.interleaved;return null===s?(n.next=n,Li(e)):(n.next=s.next,s.next=n),e.interleaved=n,Oi(t,r)}function Oi(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Pi=!1;function Fi(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ui(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var s=r.pending;return null===s?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Oi(t,n)}return null===(s=r.interleaved)?(e.next=e,Li(r)):(e.next=s.next,s.next=e),r.interleaved=e,Oi(t,n)}function ji(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ye(t,n)}}function zi(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=e:i=i.next=e}else s=i=e;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vi(t,e,n,r){var s=t.updateQueue;Pi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?i=u:a.next=u,a=l;var c=t.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==i){var h=s.baseState;for(a=0,c=u=l=null,o=i;;){var d=o.lane,p=o.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var f=t,m=o;switch(d=e,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break t}h=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break t;h=M({},h,d);break t;case 2:Pi=!0}}null!==o.callback&&0!==o.lane&&(t.flags|=64,null===(d=s.effects)?s.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=p,l=h):c=c.next=p,a|=d;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(d=o).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===c&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,null!==(e=s.shared.interleaved)){s=e;do{a|=s.lane,s=s.next}while(s!==e)}else null===i&&(s.shared.lanes=0);Fl|=a,t.lanes=a,t.memoizedState=h}}function Bi(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var $i={},Hi=_s($i),Gi=_s($i),Wi=_s($i);function qi(t){if(t===$i)throw Error(i(174));return t}function Ki(t,e){switch(Ts(Wi,e),Ts(Gi,t),Ts(Hi,$i),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Es(Hi),Ts(Hi,e)}function Yi(){Es(Hi),Es(Gi),Es(Wi)}function Qi(t){qi(Wi.current);var e=qi(Hi.current),n=lt(e,t.type);e!==n&&(Ts(Gi,t),Ts(Hi,n))}function Xi(t){Gi.current===t&&(Es(Hi),Es(Gi))}var Ji=_s(0);function Zi(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ta=[];function ea(){for(var t=0;t<ta.length;t++)ta[t]._workInProgressVersionPrimary=null;ta.length=0}var na=x.ReactCurrentDispatcher,ra=x.ReactCurrentBatchConfig,sa=0,ia=null,aa=null,oa=null,la=!1,ua=!1,ca=0,ha=0;function da(){throw Error(i(321))}function pa(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function fa(t,e,n,r,s,a){if(sa=a,ia=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,na.current=null===t||null===t.memoizedState?Xa:Ja,t=n(r,s),ua){a=0;do{if(ua=!1,ca=0,25<=a)throw Error(i(301));a+=1,oa=aa=null,e.updateQueue=null,na.current=Za,t=n(r,s)}while(ua)}if(na.current=Qa,e=null!==aa&&null!==aa.next,sa=0,oa=aa=ia=null,la=!1,e)throw Error(i(300));return t}function ma(){var t=0!==ca;return ca=0,t}function ga(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oa?ia.memoizedState=oa=t:oa=oa.next=t,oa}function ya(){if(null===aa){var t=ia.alternate;t=null!==t?t.memoizedState:null}else t=aa.next;var e=null===oa?ia.memoizedState:oa.next;if(null!==e)oa=e,aa=t;else{if(null===t)throw Error(i(310));t={memoizedState:(aa=t).memoizedState,baseState:aa.baseState,baseQueue:aa.baseQueue,queue:aa.queue,next:null},null===oa?ia.memoizedState=oa=t:oa=oa.next=t}return oa}function va(t,e){return"function"===typeof e?e(t):e}function ba(t){var e=ya(),n=e.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=t;var r=aa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,u=null,c=a;do{var h=c.lane;if((sa&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,o=r):u=u.next=d,ia.lanes|=h,Fl|=h}c=c.next}while(null!==c&&c!==a);null===u?o=r:u.next=l,ar(r,e.memoizedState)||(vo=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(null!==(t=n.interleaved)){s=t;do{a=s.lane,ia.lanes|=a,Fl|=a,s=s.next}while(s!==t)}else null===s&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xa(t){var e=ya(),n=e.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=t(a,o.action),o=o.next}while(o!==s);ar(a,e.memoizedState)||(vo=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function wa(t,e){var n=ia,r=ya(),s=e(),a=!ar(r.memoizedState,s);if(a&&(r.memoizedState=s,vo=!0),r=r.queue,Pa(Ta.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||null!==oa&&1&oa.memoizedState.tag){if(n.flags|=2048,Ra(9,Ea.bind(null,n,r,s,e),void 0,null),null===Cl)throw Error(i(349));0!==(30&sa)||_a(n,e,s)}return s}function _a(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ia.updateQueue)?(e={lastEffect:null,stores:null},ia.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ea(t,e,n,r){e.value=n,e.getSnapshot=r,Aa(e)&&Ia(t)}function Ta(t,e,n){return n((function(){Aa(e)&&Ia(t)}))}function Aa(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch(r){return!0}}function Ia(t){var e=Oi(t,1);null!==e&&eu(e,t,1,-1)}function Ca(t){var e=ga();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:t},e.queue=t,t=t.dispatch=Wa.bind(null,ia,t),[e.memoizedState,t]}function Ra(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=ia.updateQueue)?(e={lastEffect:null,stores:null},ia.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function ka(){return ya().memoizedState}function La(t,e,n,r){var s=ga();ia.flags|=t,s.memoizedState=Ra(1|e,n,void 0,void 0===r?null:r)}function Na(t,e,n,r){var s=ya();r=void 0===r?null:r;var i=void 0;if(null!==aa){var a=aa.memoizedState;if(i=a.destroy,null!==r&&pa(r,a.deps))return void(s.memoizedState=Ra(e,n,i,r))}ia.flags|=t,s.memoizedState=Ra(1|e,n,i,r)}function Oa(t,e){return La(8390656,8,t,e)}function Pa(t,e){return Na(2048,8,t,e)}function Fa(t,e){return Na(4,2,t,e)}function Da(t,e){return Na(4,4,t,e)}function Ma(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ua(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Na(4,4,Ma.bind(null,e,t),n)}function ja(){}function za(t,e){var n=ya();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&pa(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Va(t,e){var n=ya();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&pa(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ba(t,e,n){return 0===(21&sa)?(t.baseState&&(t.baseState=!1,vo=!0),t.memoizedState=n):(ar(n,e)||(n=fe(),ia.lanes|=n,Fl|=n,t.baseState=!0),e)}function $a(t,e){var n=ve;ve=0!==n&&4>n?n:4,t(!0);var r=ra.transition;ra.transition={};try{t(!1),e()}finally{ve=n,ra.transition=r}}function Ha(){return ya().memoizedState}function Ga(t,e,n){var r=tu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qa(t))Ka(e,n);else if(null!==(n=Ni(t,e,n,r))){eu(n,t,r,Zl()),Ya(n,e,r)}}function Wa(t,e,n){var r=tu(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qa(t))Ka(e,s);else{var i=t.alternate;if(0===t.lanes&&(null===i||0===i.lanes)&&null!==(i=e.lastRenderedReducer))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,ar(o,a)){var l=e.interleaved;return null===l?(s.next=s,Li(e)):(s.next=l.next,l.next=s),void(e.interleaved=s)}}catch(u){}null!==(n=Ni(t,e,s,r))&&(eu(n,t,r,s=Zl()),Ya(n,e,r))}}function qa(t){var e=t.alternate;return t===ia||null!==e&&e===ia}function Ka(t,e){ua=la=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ya(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ye(t,n)}}var Qa={readContext:Ri,useCallback:da,useContext:da,useEffect:da,useImperativeHandle:da,useInsertionEffect:da,useLayoutEffect:da,useMemo:da,useReducer:da,useRef:da,useState:da,useDebugValue:da,useDeferredValue:da,useTransition:da,useMutableSource:da,useSyncExternalStore:da,useId:da,unstable_isNewReconciler:!1},Xa={readContext:Ri,useCallback:function(t,e){return ga().memoizedState=[t,void 0===e?null:e],t},useContext:Ri,useEffect:Oa,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,La(4194308,4,Ma.bind(null,e,t),n)},useLayoutEffect:function(t,e){return La(4194308,4,t,e)},useInsertionEffect:function(t,e){return La(4,2,t,e)},useMemo:function(t,e){var n=ga();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ga();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ga.bind(null,ia,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},ga().memoizedState=t},useState:Ca,useDebugValue:ja,useDeferredValue:function(t){return ga().memoizedState=t},useTransition:function(){var t=Ca(!1),e=t[0];return t=$a.bind(null,t[1]),ga().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ia,s=ga();if(ri){if(void 0===n)throw Error(i(407));n=n()}else{if(n=e(),null===Cl)throw Error(i(349));0!==(30&sa)||_a(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,Oa(Ta.bind(null,r,a,t),[t]),r.flags|=2048,Ra(9,Ea.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=ga(),e=Cl.identifierPrefix;if(ri){var n=Qs;e=":"+e+"R"+(n=(Ys&~(1<<32-ie(Ys)-1)).toString(32)+n),0<(n=ca++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=ha++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ja={readContext:Ri,useCallback:za,useContext:Ri,useEffect:Pa,useImperativeHandle:Ua,useInsertionEffect:Fa,useLayoutEffect:Da,useMemo:Va,useReducer:ba,useRef:ka,useState:function(){return ba(va)},useDebugValue:ja,useDeferredValue:function(t){return Ba(ya(),aa.memoizedState,t)},useTransition:function(){return[ba(va)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:wa,useId:Ha,unstable_isNewReconciler:!1},Za={readContext:Ri,useCallback:za,useContext:Ri,useEffect:Pa,useImperativeHandle:Ua,useInsertionEffect:Fa,useLayoutEffect:Da,useMemo:Va,useReducer:xa,useRef:ka,useState:function(){return xa(va)},useDebugValue:ja,useDeferredValue:function(t){var e=ya();return null===aa?e.memoizedState=t:Ba(e,aa.memoizedState,t)},useTransition:function(){return[xa(va)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:wa,useId:Ha,unstable_isNewReconciler:!1};function to(t,e){if(t&&t.defaultProps){for(var n in e=M({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function eo(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:M({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var no={isMounted:function(t){return!!(t=t._reactInternals)&&Vt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zl(),s=tu(t),i=Mi(r,s);i.payload=e,void 0!==n&&null!==n&&(i.callback=n),null!==(e=Ui(t,i,s))&&(eu(e,t,s,r),ji(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zl(),s=tu(t),i=Mi(r,s);i.tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),null!==(e=Ui(t,i,s))&&(eu(e,t,s,r),ji(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zl(),r=tu(t),s=Mi(n,r);s.tag=2,void 0!==e&&null!==e&&(s.callback=e),null!==(e=Ui(t,s,r))&&(eu(e,t,r,n),ji(e,t,r))}};function ro(t,e,n,r,s,i,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,i,a):!e.prototype||!e.prototype.isPureReactComponent||(!or(n,r)||!or(s,i))}function so(t,e,n){var r=!1,s=As,i=e.contextType;return"object"===typeof i&&null!==i?i=Ri(i):(s=Ls(e)?Rs:Is.current,i=(r=null!==(r=e.contextTypes)&&void 0!==r)?ks(t,s):As),e=new e(n,i),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=no,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function io(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&no.enqueueReplaceState(e,e.state,null)}function ao(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Fi(t);var i=e.contextType;"object"===typeof i&&null!==i?s.context=Ri(i):(i=Ls(e)?Rs:Is.current,s.context=ks(t,i)),s.state=t.memoizedState,"function"===typeof(i=e.getDerivedStateFromProps)&&(eo(t,e,i,n),s.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(e=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),e!==s.state&&no.enqueueReplaceState(s,s.state,null),Vi(t,n,s,r),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308)}function oo(t,e){try{var n="",r=e;do{n+=V(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:t,source:e,stack:s,digest:null}}function lo(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function uo(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var co="function"===typeof WeakMap?WeakMap:Map;function ho(t,e,n){(n=Mi(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$l||($l=!0,Hl=r),uo(0,e)},n}function po(t,e,n){(n=Mi(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,e)}}var i=t.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,e),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function fo(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new co;var s=new Set;r.set(e,s)}else void 0===(s=r.get(e))&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Eu.bind(null,t,e,n),e.then(t,t))}function mo(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function go(t,e,n,r,s){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Mi(-1,1)).tag=2,Ui(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=s,t)}var yo=x.ReactCurrentOwner,vo=!1;function bo(t,e,n,r){e.child=null===t?xi(e,null,n,r):bi(e,t.child,n,r)}function xo(t,e,n,r,s){n=n.render;var i=e.ref;return Ci(e,s),r=fa(t,e,n,r,i,s),n=ma(),null===t||vo?(ri&&n&&Zs(e),e.flags|=1,bo(t,e,r,s),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$o(t,e,s))}function So(t,e,n,r,s){if(null===t){var i=n.type;return"function"!==typeof i||Lu(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ou(n.type,null,r,e,e.mode,s)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=i,wo(t,e,i,r,s))}if(i=t.child,0===(t.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:or)(a,r)&&t.ref===e.ref)return $o(t,e,s)}return e.flags|=1,(t=Nu(i,r)).ref=e.ref,t.return=e,e.child=t}function wo(t,e,n,r,s){if(null!==t){var i=t.memoizedProps;if(or(i,r)&&t.ref===e.ref){if(vo=!1,e.pendingProps=r=i,0===(t.lanes&s))return e.lanes=t.lanes,$o(t,e,s);0!==(131072&t.flags)&&(vo=!0)}}return To(t,e,n,r,s)}function _o(t,e,n){var r=e.pendingProps,s=r.children,i=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ts(Nl,Ll),Ll|=n;else{if(0===(1073741824&n))return t=null!==i?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ts(Nl,Ll),Ll|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ts(Nl,Ll),Ll|=r}else null!==i?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ts(Nl,Ll),Ll|=r;return bo(t,e,s,n),e.child}function Eo(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function To(t,e,n,r,s){var i=Ls(n)?Rs:Is.current;return i=ks(e,i),Ci(e,s),n=fa(t,e,n,r,i,s),r=ma(),null===t||vo?(ri&&r&&Zs(e),e.flags|=1,bo(t,e,n,s),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$o(t,e,s))}function Ao(t,e,n,r,s){if(Ls(n)){var i=!0;Fs(e)}else i=!1;if(Ci(e,s),null===e.stateNode)Bo(t,e),so(e,n,r),ao(e,n,r,s),r=!0;else if(null===t){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ri(u):u=ks(e,u=Ls(n)?Rs:Is.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==u)&&io(e,a,r,u),Pi=!1;var d=e.memoizedState;a.state=d,Vi(e,r,a,s),l=e.memoizedState,o!==r||d!==l||Cs.current||Pi?("function"===typeof c&&(eo(e,n,c,r),l=e.memoizedState),(o=Pi||ro(e,n,o,r,d,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):("function"===typeof a.componentDidMount&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Di(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:to(e.type,o),a.props=u,h=e.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ri(l):l=ks(e,l=Ls(n)?Rs:Is.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&io(e,a,r,l),Pi=!1,d=e.memoizedState,a.state=d,Vi(e,r,a,s);var f=e.memoizedState;o!==h||d!==f||Cs.current||Pi?("function"===typeof p&&(eo(e,n,p,r),f=e.memoizedState),(u=Pi||ro(e,n,u,r,d,f,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Io(t,e,n,r,i,s)}function Io(t,e,n,r,s,i){Eo(t,e);var a=0!==(128&e.flags);if(!r&&!a)return s&&Ds(e,n,!1),$o(t,e,i);r=e.stateNode,yo.current=e;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=bi(e,t.child,null,i),e.child=bi(e,null,o,i)):bo(t,e,o,i),e.memoizedState=r.state,s&&Ds(e,n,!0),e.child}function Co(t){var e=t.stateNode;e.pendingContext?Os(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Os(0,e.context,!1),Ki(t,e.containerInfo)}function Ro(t,e,n,r,s){return di(),pi(s),e.flags|=256,bo(t,e,n,r),e.child}var ko,Lo,No,Oo,Po={dehydrated:null,treeContext:null,retryLane:0};function Fo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Do(t,e,n){var r,s=e.pendingProps,a=Ji.current,o=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&a)),r?(o=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Ts(Ji,1&a),null===t)return li(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=s.children,t=s.fallback,o?(s=e.mode,o=e.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fu(l,s,0,null),t=Pu(t,s,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Fo(n),e.memoizedState=Po,t):Mo(e,l));if(null!==(a=t.memoizedState)&&null!==(r=a.dehydrated))return function(t,e,n,r,s,a,o){if(n)return 256&e.flags?(e.flags&=-257,Uo(t,e,o,r=lo(Error(i(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=Fu({mode:"visible",children:r.children},s,0,null),(a=Pu(a,s,o,null)).flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,0!==(1&e.mode)&&bi(e,t.child,null,o),e.child.memoizedState=Fo(o),e.memoizedState=Po,a);if(0===(1&e.mode))return Uo(t,e,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Uo(t,e,o,r=lo(a=Error(i(419)),r,void 0))}if(l=0!==(o&t.childLanes),vo||l){if(null!==(r=Cl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Oi(t,s),eu(r,t,s,-1))}return fu(),Uo(t,e,o,r=lo(Error(i(421))))}return"$?"===s.data?(e.flags|=128,e.child=t.child,e=Au.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,ni=ls(s.nextSibling),ei=e,ri=!0,si=null,null!==t&&(Ws[qs++]=Ys,Ws[qs++]=Qs,Ws[qs++]=Ks,Ys=t.id,Qs=t.overflow,Ks=e),e=Mo(e,r.children),e.flags|=4096,e)}(t,e,l,s,r,a,n);if(o){o=s.fallback,l=e.mode,r=(a=t.child).sibling;var u={mode:"hidden",children:s.children};return 0===(1&l)&&e.child!==a?((s=e.child).childLanes=0,s.pendingProps=u,e.deletions=null):(s=Nu(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Nu(r,o):(o=Pu(o,l,n,null)).flags|=2,o.return=e,s.return=e,s.sibling=o,e.child=s,s=o,o=e.child,l=null===(l=t.child.memoizedState)?Fo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Po,s}return t=(o=t.child).sibling,s=Nu(o,{mode:"visible",children:s.children}),0===(1&e.mode)&&(s.lanes=n),s.return=e,s.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Mo(t,e){return(e=Fu({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Uo(t,e,n,r){return null!==r&&pi(r),bi(e,t.child,null,n),(t=Mo(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function jo(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Ii(t.return,e,n)}function zo(t,e,n,r,s){var i=t.memoizedState;null===i?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Vo(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(bo(t,e,r.children,n),0!==(2&(r=Ji.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&jo(t,n,e);else if(19===t.tag)jo(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ts(Ji,r),0===(1&e.mode))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;null!==n;)null!==(t=n.alternate)&&null===Zi(t)&&(s=n),n=n.sibling;null===(n=s)?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),zo(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;null!==s;){if(null!==(t=s.alternate)&&null===Zi(t)){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}zo(e,!0,n,null,i);break;case"together":zo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bo(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $o(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Fl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(i(153));if(null!==e.child){for(n=Nu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Nu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ho(t,e){if(!ri)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Go(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=t,s=s.sibling;else for(s=t.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Wo(t,e,n){var r=e.pendingProps;switch(ti(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(e),null;case 1:case 17:return Ls(e.type)&&Ns(),Go(e),null;case 3:return r=e.stateNode,Yi(),Es(Cs),Es(Is),ea(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ci(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==si&&(iu(si),si=null))),Lo(t,e),Go(e),null;case 5:Xi(e);var s=qi(Wi.current);if(n=e.type,null!==t&&null!=e.stateNode)No(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(i(166));return Go(e),null}if(t=qi(Hi.current),ci(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[hs]=e,r[ds]=a,t=0!==(1&e.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(s=0;s<Pr.length;s++)Ur(Pr[s],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Q(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":st(r,a),Ur("invalid",r)}for(var l in yt(n,a),s=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,u,t),s=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,u,t),s=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),at(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=s,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=ot(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[hs]=e,t[ds]=r,ko(t,e,!1,!1),e.stateNode=t;t:{switch(l=vt(n,r),n){case"dialog":Ur("cancel",t),Ur("close",t),s=r;break;case"iframe":case"object":case"embed":Ur("load",t),s=r;break;case"video":case"audio":for(s=0;s<Pr.length;s++)Ur(Pr[s],t);s=r;break;case"source":Ur("error",t),s=r;break;case"img":case"image":case"link":Ur("error",t),Ur("load",t),s=r;break;case"details":Ur("toggle",t),s=r;break;case"input":Q(t,r),s=Y(t,r),Ur("invalid",t);break;case"option":default:s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Ur("invalid",t);break;case"textarea":st(t,r),s=rt(t,r),Ur("invalid",t)}for(a in yt(n,s),u=s)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?mt(t,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&ct(t,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&ht(t,c):"number"===typeof c&&ht(t,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Ur("scroll",t):null!=c&&b(t,a,c,l))}switch(n){case"input":W(t),Z(t,r,!1);break;case"textarea":W(t),at(t);break;case"option":null!=r.value&&t.setAttribute("value",""+H(r.value));break;case"select":t.multiple=!!r.multiple,null!=(a=r.value)?nt(t,!!r.multiple,a,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(t.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Go(e),null;case 6:if(t&&null!=e.stateNode)Oo(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(i(166));if(n=qi(Wi.current),qi(Hi.current),ci(e)){if(r=e.stateNode,n=e.memoizedProps,r[hs]=e,(a=r.nodeValue!==n)&&null!==(t=ei))switch(t.tag){case 3:Xr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=e,e.stateNode=r}return Go(e),null;case 13:if(Es(Ji),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(ri&&null!==ni&&0!==(1&e.mode)&&0===(128&e.flags))hi(),di(),e.flags|=98560,a=!1;else if(a=ci(e),null!==r&&null!==r.dehydrated){if(null===t){if(!a)throw Error(i(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hs]=e}else di(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Go(e),a=!1}else null!==si&&(iu(si),si=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&Ji.current)?0===Ol&&(Ol=3):fu())),null!==e.updateQueue&&(e.flags|=4),Go(e),null);case 4:return Yi(),Lo(t,e),null===t&&Vr(e.stateNode.containerInfo),Go(e),null;case 10:return Ai(e.type._context),Go(e),null;case 19:if(Es(Ji),null===(a=e.memoizedState))return Go(e),null;if(r=0!==(128&e.flags),null===(l=a.rendering))if(r)Ho(a,!1);else{if(0!==Ol||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=Zi(t))){for(e.flags|=128,Ho(a,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ts(Ji,1&Ji.current|2),e.child}t=t.sibling}null!==a.tail&&Qt()>Vl&&(e.flags|=128,r=!0,Ho(a,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=Zi(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ri)return Go(e),null}else 2*Qt()-a.renderingStartTime>Vl&&1073741824!==n&&(e.flags|=128,r=!0,Ho(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Qt(),e.sibling=null,n=Ji.current,Ts(Ji,r?1&n|2:1&n),e):(Go(e),null);case 22:case 23:return cu(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Ll)&&(Go(e),6&e.subtreeFlags&&(e.flags|=8192)):Go(e),null;case 24:case 25:return null}throw Error(i(156,e.tag))}function qo(t,e){switch(ti(e),e.tag){case 1:return Ls(e.type)&&Ns(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Yi(),Es(Cs),Es(Is),ea(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Xi(e),null;case 13:if(Es(Ji),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(i(340));di()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Es(Ji),null;case 4:return Yi(),null;case 10:return Ai(e.type._context),null;case 22:case 23:return cu(),null;default:return null}}ko=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Lo=function(){},No=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,qi(Hi.current);var i,a=null;switch(n){case"input":s=Y(t,s),r=Y(t,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=rt(t,s),r=rt(t,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(t.onclick=Jr)}for(c in yt(n,r),n=null,s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var l=s[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=s?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Ur("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(e.updateQueue=c)&&(e.flags|=4)}},Oo=function(t,e,n,r){n!==r&&(e.flags|=4)};var Ko=!1,Yo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Jo(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_u(t,e,r)}else n.current=null}function Zo(t,e,n){try{n()}catch(r){_u(t,e,r)}}var tl=!1;function el(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,void 0!==i&&Zo(e,n,i)}s=s.next}while(s!==r)}}function nl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[hs],delete e[ds],delete e[fs],delete e[ms],delete e[gs])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function il(t){return 5===t.tag||3===t.tag||4===t.tag}function al(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||il(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ol(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Jr));else if(4!==r&&null!==(t=t.child))for(ol(t,e,n),t=t.sibling;null!==t;)ol(t,e,n),t=t.sibling}function ll(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(ll(t,e,n),t=t.sibling;null!==t;)ll(t,e,n),t=t.sibling}var ul=null,cl=!1;function hl(t,e,n){for(n=n.child;null!==n;)dl(t,e,n),n=n.sibling}function dl(t,e,n){if(se&&"function"===typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(re,n)}catch(o){}switch(n.tag){case 5:Yo||Jo(n,e);case 6:var r=ul,s=cl;ul=null,hl(t,e,n),cl=s,null!==(ul=r)&&(cl?(t=ul,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(cl?(t=ul,n=n.stateNode,8===t.nodeType?os(t.parentNode,n):1===t.nodeType&&os(t,n),Ve(t)):os(ul,n.stateNode));break;case 4:r=ul,s=cl,ul=n.stateNode.containerInfo,cl=!0,hl(t,e,n),ul=r,cl=s;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&Zo(n,e,a),s=s.next}while(s!==r)}hl(t,e,n);break;case 1:if(!Yo&&(Jo(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){_u(n,e,o)}hl(t,e,n);break;case 21:hl(t,e,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,hl(t,e,n),Yo=r):hl(t,e,n);break;default:hl(t,e,n)}}function pl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Qo),e.forEach((function(e){var r=Iu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function fl(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;t:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,cl=!1;break t;case 3:case 4:ul=l.stateNode.containerInfo,cl=!0;break t}l=l.return}if(null===ul)throw Error(i(160));dl(a,o,s),ul=null,cl=!1;var u=s.alternate;null!==u&&(u.return=null),s.return=null}catch(c){_u(s,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)ml(e,t),e=e.sibling}function ml(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fl(e,t),gl(t),4&r){try{el(3,t,t.return),nl(3,t)}catch(g){_u(t,t.return,g)}try{el(5,t,t.return)}catch(g){_u(t,t.return,g)}}break;case 1:fl(e,t),gl(t),512&r&&null!==n&&Jo(n,n.return);break;case 5:if(fl(e,t),gl(t),512&r&&null!==n&&Jo(n,n.return),32&t.flags){var s=t.stateNode;try{ht(s,"")}catch(g){_u(t,t.return,g)}}if(4&r&&null!=(s=t.stateNode)){var a=t.memoizedProps,o=null!==n?n.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(s,a),vt(l,o);var c=vt(l,a);for(o=0;o<u.length;o+=2){var h=u[o],d=u[o+1];"style"===h?mt(s,d):"dangerouslySetInnerHTML"===h?ct(s,d):"children"===h?ht(s,d):b(s,h,d,c)}switch(l){case"input":J(s,a);break;case"textarea":it(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?nt(s,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?nt(s,!!a.multiple,a.defaultValue,!0):nt(s,!!a.multiple,a.multiple?[]:"",!1))}s[ds]=a}catch(g){_u(t,t.return,g)}}break;case 6:if(fl(e,t),gl(t),4&r){if(null===t.stateNode)throw Error(i(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(g){_u(t,t.return,g)}}break;case 3:if(fl(e,t),gl(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ve(e.containerInfo)}catch(g){_u(t,t.return,g)}break;case 4:default:fl(e,t),gl(t);break;case 13:fl(e,t),gl(t),8192&(s=t.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(zl=Qt())),4&r&&pl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Yo=(c=Yo)||h,fl(e,t),Yo=c):fl(e,t),gl(t),8192&r){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!h&&0!==(1&t.mode))for(Xo=t,h=t.child;null!==h;){for(d=Xo=h;null!==Xo;){switch(f=(p=Xo).child,p.tag){case 0:case 11:case 14:case 15:el(4,p,p.return);break;case 1:Jo(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){_u(r,n,g)}}break;case 5:Jo(p,p.return);break;case 22:if(null!==p.memoizedState){xl(d);continue}}null!==f?(f.return=p,Xo=f):xl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{s=d.stateNode,c?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ft("display",o))}catch(g){_u(t,t.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){_u(t,t.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fl(e,t),gl(t),4&r&&pl(t);case 21:}}function gl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(il(n)){var r=n;break t}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(ht(s,""),r.flags&=-33),ll(t,al(t),s);break;case 3:case 4:var a=r.stateNode.containerInfo;ol(t,al(t),a);break;default:throw Error(i(161))}}catch(o){_u(t,t.return,o)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function yl(t,e,n){Xo=t,vl(t,e,n)}function vl(t,e,n){for(var r=0!==(1&t.mode);null!==Xo;){var s=Xo,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Ko;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Ko;var u=Yo;if(Ko=a,(Yo=l)&&!u)for(Xo=s;null!==Xo;)l=(a=Xo).child,22===a.tag&&null!==a.memoizedState?Sl(s):null!==l?(l.return=a,Xo=l):Sl(s);for(;null!==i;)Xo=i,vl(i,e,n),i=i.sibling;Xo=s,Ko=o,Yo=u}bl(t)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Xo=i):bl(t)}}function bl(t){for(;null!==Xo;){var e=Xo;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Yo||nl(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Yo)if(null===n)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:to(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Bi(e,a,r);break;case 3:var o=e.updateQueue;if(null!==o){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Bi(e,o,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ve(d)}}}break;default:throw Error(i(163))}Yo||512&e.flags&&rl(e)}catch(p){_u(e,e.return,p)}}if(e===t){Xo=null;break}if(null!==(n=e.sibling)){n.return=e.return,Xo=n;break}Xo=e.return}}function xl(t){for(;null!==Xo;){var e=Xo;if(e===t){Xo=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Xo=n;break}Xo=e.return}}function Sl(t){for(;null!==Xo;){var e=Xo;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nl(4,e)}catch(l){_u(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var s=e.return;try{r.componentDidMount()}catch(l){_u(e,s,l)}}var i=e.return;try{rl(e)}catch(l){_u(e,i,l)}break;case 5:var a=e.return;try{rl(e)}catch(l){_u(e,a,l)}}}catch(l){_u(e,e.return,l)}if(e===t){Xo=null;break}var o=e.sibling;if(null!==o){o.return=e.return,Xo=o;break}Xo=e.return}}var wl,_l=Math.ceil,El=x.ReactCurrentDispatcher,Tl=x.ReactCurrentOwner,Al=x.ReactCurrentBatchConfig,Il=0,Cl=null,Rl=null,kl=0,Ll=0,Nl=_s(0),Ol=0,Pl=null,Fl=0,Dl=0,Ml=0,Ul=null,jl=null,zl=0,Vl=1/0,Bl=null,$l=!1,Hl=null,Gl=null,Wl=!1,ql=null,Kl=0,Yl=0,Ql=null,Xl=-1,Jl=0;function Zl(){return 0!==(6&Il)?Qt():-1!==Xl?Xl:Xl=Qt()}function tu(t){return 0===(1&t.mode)?1:0!==(2&Il)&&0!==kl?kl&-kl:null!==fi.transition?(0===Jl&&(Jl=fe()),Jl):0!==(t=ve)?t:t=void 0===(t=window.event)?16:Ye(t.type)}function eu(t,e,n,r){if(50<Yl)throw Yl=0,Ql=null,Error(i(185));ge(t,n,r),0!==(2&Il)&&t===Cl||(t===Cl&&(0===(2&Il)&&(Dl|=n),4===Ol&&au(t,kl)),nu(t,r),1===n&&0===Il&&0===(1&e.mode)&&(Vl=Qt()+500,Us&&Vs()))}function nu(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-ie(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=de(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}(t,e);var r=he(t,t===Cl?kl:0);if(0===r)null!==n&&qt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&qt(n),1===e)0===t.tag?function(t){Us=!0,zs(t)}(ou.bind(null,t)):zs(ou.bind(null,t)),is((function(){0===(6&Il)&&Vs()})),n=null;else{switch(be(r)){case 1:n=Jt;break;case 4:n=Zt;break;case 16:default:n=te;break;case 536870912:n=ne}n=Cu(n,ru.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ru(t,e){if(Xl=-1,Jl=0,0!==(6&Il))throw Error(i(327));var n=t.callbackNode;if(Su()&&t.callbackNode!==n)return null;var r=he(t,t===Cl?kl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=mu(t,r);else{e=r;var s=Il;Il|=2;var a=pu();for(Cl===t&&kl===e||(Bl=null,Vl=Qt()+500,hu(t,e));;)try{yu();break}catch(l){du(t,l)}Ti(),El.current=a,Il=s,null!==Rl?e=0:(Cl=null,kl=0,e=Ol)}if(0!==e){if(2===e&&(0!==(s=pe(t))&&(r=s,e=su(t,s))),1===e)throw n=Pl,hu(t,0),au(t,r),nu(t,Qt()),n;if(6===e)au(t,r);else{if(s=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ar(i(),s))return!1}catch(o){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(s)&&(2===(e=mu(t,r))&&(0!==(a=pe(t))&&(r=a,e=su(t,a))),1===e))throw n=Pl,hu(t,0),au(t,r),nu(t,Qt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(i(345));case 2:case 5:xu(t,jl,Bl);break;case 3:if(au(t,r),(130023424&r)===r&&10<(e=zl+500-Qt())){if(0!==he(t,0))break;if(((s=t.suspendedLanes)&r)!==r){Zl(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ns(xu.bind(null,t,jl,Bl),e);break}xu(t,jl,Bl);break;case 4:if(au(t,r),(4194240&r)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ie(r);a=1<<o,(o=e[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Qt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){t.timeoutHandle=ns(xu.bind(null,t,jl,Bl),r);break}xu(t,jl,Bl);break;default:throw Error(i(329))}}}return nu(t,Qt()),t.callbackNode===n?ru.bind(null,t):null}function su(t,e){var n=Ul;return t.current.memoizedState.isDehydrated&&(hu(t,e).flags|=256),2!==(t=mu(t,e))&&(e=jl,jl=n,null!==e&&iu(e)),t}function iu(t){null===jl?jl=t:jl.push.apply(jl,t)}function au(t,e){for(e&=~Ml,e&=~Dl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ie(e),r=1<<n;t[n]=-1,e&=~r}}function ou(t){if(0!==(6&Il))throw Error(i(327));Su();var e=he(t,0);if(0===(1&e))return nu(t,Qt()),null;var n=mu(t,e);if(0!==t.tag&&2===n){var r=pe(t);0!==r&&(e=r,n=su(t,r))}if(1===n)throw n=Pl,hu(t,0),au(t,e),nu(t,Qt()),n;if(6===n)throw Error(i(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xu(t,jl,Bl),nu(t,Qt()),null}function lu(t,e){var n=Il;Il|=1;try{return t(e)}finally{0===(Il=n)&&(Vl=Qt()+500,Us&&Vs())}}function uu(t){null!==ql&&0===ql.tag&&0===(6&Il)&&Su();var e=Il;Il|=1;var n=Al.transition,r=ve;try{if(Al.transition=null,ve=1,t)return t()}finally{ve=r,Al.transition=n,0===(6&(Il=e))&&Vs()}}function cu(){Ll=Nl.current,Es(Nl)}function hu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,rs(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ns();break;case 3:Yi(),Es(Cs),Es(Is),ea();break;case 5:Xi(r);break;case 4:Yi();break;case 13:case 19:Es(Ji);break;case 10:Ai(r.type._context);break;case 22:case 23:cu()}n=n.return}if(Cl=t,Rl=t=Nu(t.current,null),kl=Ll=e,Ol=0,Pl=null,Ml=Dl=Fl=0,jl=Ul=null,null!==ki){for(e=0;e<ki.length;e++)if(null!==(r=(n=ki[e]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}ki=null}return t}function du(t,e){for(;;){var n=Rl;try{if(Ti(),na.current=Qa,la){for(var r=ia.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}la=!1}if(sa=0,oa=aa=ia=null,ua=!1,ca=0,Tl.current=null,null===n||null===n.return){Ol=1,Pl=e,Rl=null;break}t:{var a=t,o=n.return,l=n,u=e;if(e=kl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=mo(o);if(null!==f){f.flags&=-257,go(f,o,l,0,e),1&f.mode&&fo(a,c,e),u=c;var m=(e=f).updateQueue;if(null===m){var g=new Set;g.add(u),e.updateQueue=g}else m.add(u);break t}if(0===(1&e)){fo(a,c,e),fu();break t}u=Error(i(426))}else if(ri&&1&l.mode){var y=mo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),go(y,o,l,0,e),pi(oo(u,l));break t}}a=u=oo(u,l),4!==Ol&&(Ol=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,zi(a,ho(0,u,e));break t;case 1:l=u;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e,zi(a,po(a,l,e));break t}}a=a.return}while(null!==a)}bu(n)}catch(x){e=x,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function pu(){var t=El.current;return El.current=Qa,null===t?Qa:t}function fu(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Cl||0===(268435455&Fl)&&0===(268435455&Dl)||au(Cl,kl)}function mu(t,e){var n=Il;Il|=2;var r=pu();for(Cl===t&&kl===e||(Bl=null,hu(t,e));;)try{gu();break}catch(s){du(t,s)}if(Ti(),Il=n,El.current=r,null!==Rl)throw Error(i(261));return Cl=null,kl=0,Ol}function gu(){for(;null!==Rl;)vu(Rl)}function yu(){for(;null!==Rl&&!Kt();)vu(Rl)}function vu(t){var e=wl(t.alternate,t,Ll);t.memoizedProps=t.pendingProps,null===e?bu(t):Rl=e,Tl.current=null}function bu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Wo(n,e,Ll)))return void(Rl=n)}else{if(null!==(n=qo(n,e)))return n.flags&=32767,void(Rl=n);if(null===t)return Ol=6,void(Rl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Rl=e);Rl=e=t}while(null!==e);0===Ol&&(Ol=5)}function xu(t,e,n){var r=ve,s=Al.transition;try{Al.transition=null,ve=1,function(t,e,n,r){do{Su()}while(null!==ql);if(0!==(6&Il))throw Error(i(327));n=t.finishedWork;var s=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(i(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ie(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}(t,a),t===Cl&&(Rl=Cl=null,kl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Cu(te,(function(){return Su(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Al.transition,Al.transition=null;var o=ve;ve=1;var l=Il;Il|=4,Tl.current=null,function(t,e){if(Zr=$e,dr(t=hr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(S){n=null;break t}var o=0,l=-1,u=-1,c=0,h=0,d=t,p=null;e:for(;;){for(var f;d!==n||0!==s&&3!==d.nodeType||(l=o+s),d!==a||0!==r&&3!==d.nodeType||(u=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===t)break e;if(p===n&&++c===s&&(l=o),p===a&&++h===r&&(u=o),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:t,selectionRange:n},$e=!1,Xo=e;null!==Xo;)if(t=(e=Xo).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Xo=t;else for(;null!==Xo;){e=Xo;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:to(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(S){_u(e,e.return,S)}if(null!==(t=e.sibling)){t.return=e.return,Xo=t;break}Xo=e.return}m=tl,tl=!1}(t,n),ml(n,t),pr(ts),$e=!!Zr,ts=Zr=null,t.current=n,yl(n,t,s),Yt(),Il=l,ve=o,Al.transition=a}else t.current=n;if(Wl&&(Wl=!1,ql=t,Kl=s),a=t.pendingLanes,0===a&&(Gl=null),function(t){if(se&&"function"===typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),nu(t,Qt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($l)throw $l=!1,t=Hl,Hl=null,t;0!==(1&Kl)&&0!==t.tag&&Su(),a=t.pendingLanes,0!==(1&a)?t===Ql?Yl++:(Yl=0,Ql=t):Yl=0,Vs()}(t,e,n,r)}finally{Al.transition=s,ve=r}return null}function Su(){if(null!==ql){var t=be(Kl),e=Al.transition,n=ve;try{if(Al.transition=null,ve=16>t?16:t,null===ql)var r=!1;else{if(t=ql,ql=null,Kl=0,0!==(6&Il))throw Error(i(331));var s=Il;for(Il|=4,Xo=t.current;null!==Xo;){var a=Xo,o=a.child;if(0!==(16&Xo.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Xo=c;null!==Xo;){var h=Xo;switch(h.tag){case 0:case 11:case 15:el(8,h,a)}var d=h.child;if(null!==d)d.return=h,Xo=d;else for(;null!==Xo;){var p=(h=Xo).sibling,f=h.return;if(sl(h),h===c){Xo=null;break}if(null!==p){p.return=f,Xo=p;break}Xo=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Xo=o;else t:for(;null!==Xo;){if(0!==(2048&(a=Xo).flags))switch(a.tag){case 0:case 11:case 15:el(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Xo=v;break t}Xo=a.return}}var b=t.current;for(Xo=b;null!==Xo;){var x=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Xo=x;else t:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(w){_u(l,l.return,w)}if(l===o){Xo=null;break t}var S=l.sibling;if(null!==S){S.return=l.return,Xo=S;break t}Xo=l.return}}if(Il=s,Vs(),se&&"function"===typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(re,t)}catch(w){}r=!0}return r}finally{ve=n,Al.transition=e}}return!1}function wu(t,e,n){t=Ui(t,e=ho(0,e=oo(n,e),1),1),e=Zl(),null!==t&&(ge(t,1,e),nu(t,e))}function _u(t,e,n){if(3===t.tag)wu(t,t,n);else for(;null!==e;){if(3===e.tag){wu(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){e=Ui(e,t=po(e,t=oo(n,t),1),1),t=Zl(),null!==e&&(ge(e,1,t),nu(e,t));break}}e=e.return}}function Eu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=Zl(),t.pingedLanes|=t.suspendedLanes&n,Cl===t&&(kl&n)===n&&(4===Ol||3===Ol&&(130023424&kl)===kl&&500>Qt()-zl?hu(t,0):Ml|=n),nu(t,e)}function Tu(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=Zl();null!==(t=Oi(t,e))&&(ge(t,e,n),nu(t,n))}function Au(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Tu(t,n)}function Iu(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(e),Tu(t,n)}function Cu(t,e){return Wt(t,e)}function Ru(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ku(t,e,n,r){return new Ru(t,e,n,r)}function Lu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Nu(t,e){var n=t.alternate;return null===n?((n=ku(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ou(t,e,n,r,s,a){var o=2;if(r=t,"function"===typeof t)Lu(t)&&(o=1);else if("string"===typeof t)o=5;else t:switch(t){case _:return Pu(n.children,s,a,e);case E:o=8,s|=8;break;case T:return(t=ku(12,n,e,2|s)).elementType=T,t.lanes=a,t;case R:return(t=ku(13,n,e,s)).elementType=R,t.lanes=a,t;case k:return(t=ku(19,n,e,s)).elementType=k,t.lanes=a,t;case O:return Fu(n,s,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case A:o=10;break t;case I:o=9;break t;case C:o=11;break t;case L:o=14;break t;case N:o=16,r=null;break t}throw Error(i(130,null==t?t:typeof t,""))}return(e=ku(o,n,e,s)).elementType=t,e.type=r,e.lanes=a,e}function Pu(t,e,n,r){return(t=ku(7,t,r,e)).lanes=n,t}function Fu(t,e,n,r){return(t=ku(22,t,r,e)).elementType=O,t.lanes=n,t.stateNode={isHidden:!1},t}function Du(t,e,n){return(t=ku(6,t,null,e)).lanes=n,t}function Mu(t,e,n){return(e=ku(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Uu(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ju(t,e,n,r,s,i,a,o,l){return t=new Uu(t,e,n,o,l),1===e?(e=1,!0===i&&(e|=8)):e=0,i=ku(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fi(i),t}function zu(t){if(!t)return As;t:{if(Vt(t=t._reactInternals)!==t||1!==t.tag)throw Error(i(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ls(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(i(171))}if(1===t.tag){var n=t.type;if(Ls(n))return Ps(t,n,e)}return e}function Vu(t,e,n,r,s,i,a,o,l){return(t=ju(n,r,!0,t,0,i,0,o,l)).context=zu(null),n=t.current,(i=Mi(r=Zl(),s=tu(n))).callback=void 0!==e&&null!==e?e:null,Ui(n,i,s),t.current.lanes=s,ge(t,s,r),nu(t,r),t}function Bu(t,e,n,r){var s=e.current,i=Zl(),a=tu(s);return n=zu(n),null===e.context?e.context=n:e.pendingContext=n,(e=Mi(i,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Ui(s,e,a))&&(eu(t,s,a,i),ji(t,s,a)),a}function $u(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Hu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Gu(t,e){Hu(t,e),(t=t.alternate)&&Hu(t,e)}wl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Cs.current)vo=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return vo=!1,function(t,e,n){switch(e.tag){case 3:Co(e),di();break;case 5:Qi(e);break;case 1:Ls(e.type)&&Fs(e);break;case 4:Ki(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ts(Si,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Ts(Ji,1&Ji.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Do(t,e,n):(Ts(Ji,1&Ji.current),null!==(t=$o(t,e,n))?t.sibling:null);Ts(Ji,1&Ji.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return Vo(t,e,n);e.flags|=128}if(null!==(s=e.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ts(Ji,Ji.current),r)break;return null;case 22:case 23:return e.lanes=0,_o(t,e,n)}return $o(t,e,n)}(t,e,n);vo=0!==(131072&t.flags)}else vo=!1,ri&&0!==(1048576&e.flags)&&Js(e,Gs,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bo(t,e),t=e.pendingProps;var s=ks(e,Is.current);Ci(e,n),s=fa(null,e,r,t,s,n);var a=ma();return e.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ls(r)?(a=!0,Fs(e)):a=!1,e.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Fi(e),s.updater=no,e.stateNode=s,s._reactInternals=e,ao(e,r,t,n),e=Io(null,e,r,!0,a,n)):(e.tag=0,ri&&a&&Zs(e),bo(null,e,s,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Bo(t,e),t=e.pendingProps,r=(s=r._init)(r._payload),e.type=r,s=e.tag=function(t){if("function"===typeof t)return Lu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===L)return 14}return 2}(r),t=to(r,t),s){case 0:e=To(null,e,r,t,n);break t;case 1:e=Ao(null,e,r,t,n);break t;case 11:e=xo(null,e,r,t,n);break t;case 14:e=So(null,e,r,to(r.type,t),n);break t}throw Error(i(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,To(t,e,r,s=e.elementType===r?s:to(r,s),n);case 1:return r=e.type,s=e.pendingProps,Ao(t,e,r,s=e.elementType===r?s:to(r,s),n);case 3:t:{if(Co(e),null===t)throw Error(i(387));r=e.pendingProps,s=(a=e.memoizedState).element,Di(t,e),Vi(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Ro(t,e,r,n,s=oo(Error(i(423)),e));break t}if(r!==s){e=Ro(t,e,r,n,s=oo(Error(i(424)),e));break t}for(ni=ls(e.stateNode.containerInfo.firstChild),ei=e,ri=!0,si=null,n=xi(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(di(),r===s){e=$o(t,e,n);break t}bo(t,e,r,n)}e=e.child}return e;case 5:return Qi(e),null===t&&li(e),r=e.type,s=e.pendingProps,a=null!==t?t.memoizedProps:null,o=s.children,es(r,s)?o=null:null!==a&&es(r,a)&&(e.flags|=32),Eo(t,e),bo(t,e,o,n),e.child;case 6:return null===t&&li(e),null;case 13:return Do(t,e,n);case 4:return Ki(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=bi(e,null,r,n):bo(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,xo(t,e,r,s=e.elementType===r?s:to(r,s),n);case 7:return bo(t,e,e.pendingProps,n),e.child;case 8:case 12:return bo(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Ts(Si,r._currentValue),r._currentValue=o,null!==a)if(ar(a.value,o)){if(a.children===s.children&&!Cs.current){e=$o(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Mi(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Ii(a.return,n,e),l.lanes|=n;break}u=u.next}}else if(10===a.tag)o=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ii(o,n,e),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ci(e,n),r=r(s=Ri(s)),e.flags|=1,bo(t,e,r,n),e.child;case 14:return s=to(r=e.type,e.pendingProps),So(t,e,r,s=to(r.type,s),n);case 15:return wo(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:to(r,s),Bo(t,e),e.tag=1,Ls(r)?(t=!0,Fs(e)):t=!1,Ci(e,n),so(e,r,s),ao(e,r,s,n),Io(null,e,r,!0,t,n);case 19:return Vo(t,e,n);case 22:return _o(t,e,n)}throw Error(i(156,e.tag))};var Wu="function"===typeof reportError?reportError:function(t){console.error(t)};function qu(t){this._internalRoot=t}function Ku(t){this._internalRoot=t}function Yu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Xu(){}function Ju(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var t=$u(a);o.call(t)}}Bu(e,a,t,s)}else a=function(t,e,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var t=$u(a);i.call(t)}}var a=Vu(e,r,t,0,null,!1,0,"",Xu);return t._reactRootContainer=a,t[ps]=a.current,Vr(8===t.nodeType?t.parentNode:t),uu(),a}for(;s=t.lastChild;)t.removeChild(s);if("function"===typeof r){var o=r;r=function(){var t=$u(l);o.call(t)}}var l=ju(t,0,!1,null,0,!1,0,"",Xu);return t._reactRootContainer=l,t[ps]=l.current,Vr(8===t.nodeType?t.parentNode:t),uu((function(){Bu(e,l,n,r)})),l}(n,e,t,s,r);return $u(a)}Ku.prototype.render=qu.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(i(409));Bu(t,e,null,null)},Ku.prototype.unmount=qu.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uu((function(){Bu(null,t,null,null)})),e[ps]=null}},Ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=_e();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ne.length&&0!==e&&e<Ne[n].priority;n++);Ne.splice(n,0,t),0===n&&De(t)}},xe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ce(e.pendingLanes);0!==n&&(ye(e,1|n),nu(e,Qt()),0===(6&Il)&&(Vl=Qt()+500,Vs()))}break;case 13:uu((function(){var e=Oi(t,1);if(null!==e){var n=Zl();eu(e,t,1,n)}})),Gu(t,1)}},Se=function(t){if(13===t.tag){var e=Oi(t,134217728);if(null!==e)eu(e,t,134217728,Zl());Gu(t,134217728)}},we=function(t){if(13===t.tag){var e=tu(t),n=Oi(t,e);if(null!==n)eu(n,t,e,Zl());Gu(t,e)}},_e=function(){return ve},Ee=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}},St=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xs(r);if(!s)throw Error(i(90));q(r),J(r,s)}}}break;case"textarea":it(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},It=lu,Ct=uu;var Zu={usingClientEntryPoint:!1,Events:[vs,bs,xs,Tt,At,lu]},tc={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ec={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Ht(t))?null:t.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{re=nc.inject(ec),se=nc}catch(rc){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yu(e))throw Error(i(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Yu(t))throw Error(i(299));var n=!1,r="",s=Wu;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(s=e.onRecoverableError)),e=ju(t,1,!1,null,0,n,0,r,s),t[ps]=e.current,Vr(8===t.nodeType?t.parentNode:t),new qu(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(i(188));throw t=Object.keys(t).join(","),Error(i(268,t))}return t=null===(t=Ht(e))?null:t.stateNode},e.flushSync=function(t){return uu(t)},e.hydrate=function(t,e,n){if(!Qu(e))throw Error(i(200));return Ju(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Yu(t))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Wu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),e=Vu(e,null,t,1,null!=n?n:null,s,0,a,o),t[ps]=e.current,Vr(t),r)for(t=0;t<r.length;t++)s=(s=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ku(e)},e.render=function(t,e,n){if(!Qu(e))throw Error(i(200));return Ju(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Qu(t))throw Error(i(40));return!!t._reactRootContainer&&(uu((function(){Ju(null,null,t,!1,(function(){t._reactRootContainer=null,t[ps]=null}))})),!0)},e.unstable_batchedUpdates=lu,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qu(n))throw Error(i(200));if(null==t||void 0===t._reactInternals)throw Error(i(38));return Ju(t,e,n,!1,r)},e.version="18.3.1-next-f1338f8080-20240426"},4664:(t,e,n)=>{var r=n(8815);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},8815:(t,e,n)=>{!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(2777)},5817:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t||"";e&&(i=t.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,(function(t,e,r){return e>0&&e+t.length!==r.length&&t.search(n)>-1&&":"!==r.charAt(e-2)&&("-"!==r.charAt(e+t.length)||"-"===r.charAt(e-1))&&r.charAt(e-1).search(/[^\s-]/)<0?t.toLowerCase():t.substr(1).search(/[A-Z]|\../)>-1?t:t.charAt(0).toUpperCase()+t.substr(1)})));s&&(i=function(t){if(function(t){return"string"===typeof t&&-1!==t.indexOf("@")}(t))return console.warn("This arg looks like an email address, redacting."),r;return t}(i));return i};var n=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;var r="REDACTED (Potential Email Address)"},5068:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.GA4=void 0;var r=l(n(5189)),s=l(n(5817)),i=["eventCategory","eventAction","eventLabel","eventValue","hitType"],a=["title","location"],o=["page","hitType"];function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(null==t)return{};var n,r,s=function(t,e){if(null==t)return{};var n,r,s={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(s[n]=t[n]);return s}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function h(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||m(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw s}}return o}}(t,e)||m(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){if(t){if("string"===typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function v(t,e,n){return(e=b(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}var x=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,"reset",(function(){e.isInitialized=!1,e._testMode=!1,e._currentMeasurementId,e._hasLoadedGA=!1,e._isQueuing=!1,e._queueGtag=[]})),v(this,"_gtag",(function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];e._testMode||e._isQueuing?e._queueGtag.push(n):r.default.apply(void 0,n)})),v(this,"_loadGA",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://www.googletagmanager.com/gtag/js";if("undefined"!==typeof window&&"undefined"!==typeof document&&!e._hasLoadedGA){var s=document.createElement("script");s.async=!0,s.src="".concat(r,"?id=").concat(t),n&&s.setAttribute("nonce",n),document.body.appendChild(s),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},e._hasLoadedGA=!0}})),v(this,"_toGtagOptions",(function(t){if(t){var e={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"};return Object.entries(t).reduce((function(t,n){var r=f(n,2),s=r[0],i=r[1];return e[s]?t[e[s]]=i:t[s]=i,t}),{})}})),v(this,"initialize",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error("Require GA_MEASUREMENT_ID");var r="string"===typeof t?[{trackingId:t}]:t;e._currentMeasurementId=r[0].trackingId;var s=n.gaOptions,i=n.gtagOptions,a=n.nonce,o=n.testMode,l=void 0!==o&&o,u=n.gtagUrl;if(e._testMode=l,l||e._loadGA(e._currentMeasurementId,a,u),e.isInitialized||(e._gtag("js",new Date),r.forEach((function(t){var n=p(p(p({},e._toGtagOptions(p(p({},s),t.gaOptions))),i),t.gtagOptions);Object.keys(n).length?e._gtag("config",t.trackingId,n):e._gtag("config",t.trackingId)}))),e.isInitialized=!0,!l){var c=h(e._queueGtag);for(e._queueGtag=[],e._isQueuing=!1;c.length;){var d=c.shift();e._gtag.apply(e,h(d)),"get"===d[0]&&(e._isQueuing=!0)}}})),v(this,"set",(function(t){t?"object"===c(t)?(0===Object.keys(t).length&&console.warn("empty `fieldsObject` given to .set()"),e._gaCommand("set",t)):console.warn("Expected `fieldsObject` arg to be an Object"):console.warn("`fieldsObject` is required in .set()")})),v(this,"_gaCommandSendEvent",(function(t,n,r,s,i){e._gtag("event",n,p(p({event_category:t,event_label:r,value:s},i&&{non_interaction:i.nonInteraction}),e._toGtagOptions(i)))})),v(this,"_gaCommandSendEventParameters",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if("string"===typeof n[0])e._gaCommandSendEvent.apply(e,h(n.slice(1)));else{var s=n[0],a=s.eventCategory,o=s.eventAction,l=s.eventLabel,c=s.eventValue,d=(s.hitType,u(s,i));e._gaCommandSendEvent(a,o,l,c,d)}})),v(this,"_gaCommandSendTiming",(function(t,n,r,s){e._gtag("event","timing_complete",{name:n,value:r,event_category:t,event_label:s})})),v(this,"_gaCommandSendPageview",(function(t,n){if(n&&Object.keys(n).length){var r=e._toGtagOptions(n),s=r.title,i=r.location,o=u(r,a);e._gtag("event","page_view",p(p(p(p({},t&&{page_path:t}),s&&{page_title:s}),i&&{page_location:i}),o))}else t?e._gtag("event","page_view",{page_path:t}):e._gtag("event","page_view")})),v(this,"_gaCommandSendPageviewParameters",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if("string"===typeof n[0])e._gaCommandSendPageview.apply(e,h(n.slice(1)));else{var s=n[0],i=s.page,a=(s.hitType,u(s,o));e._gaCommandSendPageview(i,a)}})),v(this,"_gaCommandSend",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var s="string"===typeof n[0]?n[0]:n[0].hitType;switch(s){case"event":e._gaCommandSendEventParameters.apply(e,n);break;case"pageview":e._gaCommandSendPageviewParameters.apply(e,n);break;case"timing":e._gaCommandSendTiming.apply(e,h(n.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(s));break;default:console.warn("Send command doesn't exist: ".concat(s))}})),v(this,"_gaCommandSet",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"===typeof n[0]&&(n[0]=v({},n[0],n[1])),e._gtag("set",e._toGtagOptions(n[0]))})),v(this,"_gaCommand",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];switch(t){case"send":e._gaCommandSend.apply(e,r);break;case"set":e._gaCommandSet.apply(e,r);break;default:console.warn("Command doesn't exist: ".concat(t))}})),v(this,"ga",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if("string"===typeof n[0])e._gaCommand.apply(e,n);else{var s=n[0];e._gtag("get",e._currentMeasurementId,"client_id",(function(t){e._isQueuing=!1;var n=e._queueGtag;for(s({get:function(n){return"clientId"===n?t:"trackingId"===n?e._currentMeasurementId:"apiVersion"===n?"1":void 0}});n.length;){var r=n.shift();e._gtag.apply(e,h(r))}})),e._isQueuing=!0}return e.ga})),v(this,"event",(function(t,n){if("string"===typeof t)e._gtag("event",t,e._toGtagOptions(n));else{var r=t.action,i=t.category,a=t.label,o=t.value,l=t.nonInteraction,u=t.transport;if(!i||!r)return void console.warn("args.category AND args.action are required in event()");var c={hitType:"event",eventCategory:(0,s.default)(i),eventAction:(0,s.default)(r)};a&&(c.eventLabel=(0,s.default)(a)),"undefined"!==typeof o&&("number"!==typeof o?console.warn("Expected `args.value` arg to be a Number."):c.eventValue=o),"undefined"!==typeof l&&("boolean"!==typeof l?console.warn("`args.nonInteraction` must be a boolean."):c.nonInteraction=l),"undefined"!==typeof u&&("string"!==typeof u?console.warn("`args.transport` must be a string."):(-1===["beacon","xhr","image"].indexOf(u)&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),c.transport=u)),e._gaCommand("send",c)}})),v(this,"send",(function(t){e._gaCommand("send",t)})),this.reset()}var e,n,l;return e=t,n=[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}],n&&y(e.prototype,n),l&&y(e,l),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.GA4=x;var S=new x;e.default=S},5189:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;"undefined"!==typeof window&&("undefined"===typeof window.gtag&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(r=window).gtag.apply(r,e))};e.default=n},1092:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}e.Ay=void 0;var s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var n=i(e);if(n&&n.has(t))return n.get(t);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var l=a?Object.getOwnPropertyDescriptor(t,o):null;l&&(l.get||l.set)?Object.defineProperty(s,o,l):s[o]=t[o]}s.default=t,n&&n.set(t,s);return s}(n(5068));function i(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}s.GA4;var a=s.default;e.Ay=a},8330:(t,e,n)=>{var r,s;n.d(e,{Kd:()=>p,N_:()=>g});var i=n(8878),a=n(8815),o=n(3229),l=n(1642);function u(){return u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u.apply(this,arguments)}function c(t,e){if(null==t)return{};var n,r,s={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(s[n]=t[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const h=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(b){}new Map;const d=(r||(r=n.t(i,2))).startTransition;(s||(s=n.t(a,2))).flushSync,(r||(r=n.t(i,2))).useId;function p(t){let{basename:e,children:n,future:r,window:s}=t,a=i.useRef();null==a.current&&(a.current=(0,l.zR)({window:s,v5Compat:!0}));let u=a.current,[c,h]=i.useState({action:u.action,location:u.location}),{v7_startTransition:p}=r||{},f=i.useCallback((t=>{p&&d?d((()=>h(t))):h(t)}),[h,p]);return i.useLayoutEffect((()=>u.listen(f)),[u,f]),i.createElement(o.Ix,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:u,future:r})}const f="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,m=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,g=i.forwardRef((function(t,e){let n,{onClick:r,relative:s,reloadDocument:a,replace:d,state:p,target:g,to:y,preventScrollReset:v,unstable_viewTransition:x}=t,S=c(t,h),{basename:w}=i.useContext(o.jb),_=!1;if("string"===typeof y&&m.test(y)&&(n=y,f))try{let t=new URL(window.location.href),e=y.startsWith("//")?new URL(t.protocol+y):new URL(y),n=(0,l.pb)(e.pathname,w);e.origin===t.origin&&null!=n?y=n+e.search+e.hash:_=!0}catch(b){}let E=(0,o.$P)(y,{relative:s}),T=function(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:u,unstable_viewTransition:c}=void 0===e?{}:e,h=(0,o.Zp)(),d=(0,o.zy)(),p=(0,o.x$)(t,{relative:u});return i.useCallback((e=>{if(function(t,e){return 0===t.button&&(!e||"_self"===e)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)}(e,n)){e.preventDefault();let n=void 0!==r?r:(0,l.AO)(d)===(0,l.AO)(p);h(t,{replace:n,state:s,preventScrollReset:a,relative:u,unstable_viewTransition:c})}}),[d,h,p,r,s,n,t,a,u,c])}(y,{replace:d,state:p,target:g,preventScrollReset:v,relative:s,unstable_viewTransition:x});return i.createElement("a",u({},S,{href:n||E,onClick:_||a?r:function(t){r&&r(t),t.defaultPrevented||T(t)},ref:e,target:g}))}));var y,v;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(y||(y={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(v||(v={}))},3229:(t,e,n)=>{var r;n.d(e,{$P:()=>p,BV:()=>P,C5:()=>L,Ix:()=>O,Zp:()=>y,jb:()=>u,qh:()=>N,x$:()=>v,zy:()=>m});var s=n(8878),i=n(1642);function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a.apply(this,arguments)}const o=s.createContext(null);const l=s.createContext(null);const u=s.createContext(null);const c=s.createContext(null);const h=s.createContext({outlet:null,matches:[],isDataRoute:!1});const d=s.createContext(null);function p(t,e){let{relative:n}=void 0===e?{}:e;f()||(0,i.Oi)(!1);let{basename:r,navigator:a}=s.useContext(u),{hash:o,pathname:l,search:c}=v(t,{relative:n}),h=l;return"/"!==r&&(h="/"===l?r:(0,i.HS)([r,l])),a.createHref({pathname:h,search:c,hash:o})}function f(){return null!=s.useContext(c)}function m(){return f()||(0,i.Oi)(!1),s.useContext(c).location}function g(t){s.useContext(u).static||s.useLayoutEffect(t)}function y(){let{isDataRoute:t}=s.useContext(h);return t?function(){let{router:t}=I(T.UseNavigateStable),e=R(A.UseNavigateStable),n=s.useRef(!1);g((()=>{n.current=!0}));let r=s.useCallback((function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?t.navigate(r):t.navigate(r,a({fromRouteId:e},s)))}),[t,e]);return r}():function(){f()||(0,i.Oi)(!1);let t=s.useContext(o),{basename:e,future:n,navigator:r}=s.useContext(u),{matches:a}=s.useContext(h),{pathname:l}=m(),c=JSON.stringify((0,i.yD)(a,n.v7_relativeSplatPath)),d=s.useRef(!1);g((()=>{d.current=!0}));let p=s.useCallback((function(n,s){if(void 0===s&&(s={}),!d.current)return;if("number"===typeof n)return void r.go(n);let a=(0,i.Gh)(n,JSON.parse(c),l,"path"===s.relative);null==t&&"/"!==e&&(a.pathname="/"===a.pathname?e:(0,i.HS)([e,a.pathname])),(s.replace?r.replace:r.push)(a,s.state,s)}),[e,r,c,l,t]);return p}()}function v(t,e){let{relative:n}=void 0===e?{}:e,{future:r}=s.useContext(u),{matches:a}=s.useContext(h),{pathname:o}=m(),l=JSON.stringify((0,i.yD)(a,r.v7_relativeSplatPath));return s.useMemo((()=>(0,i.Gh)(t,JSON.parse(l),o,"path"===n)),[t,l,o,n])}function b(t,e,n,r){f()||(0,i.Oi)(!1);let{navigator:o}=s.useContext(u),{matches:l}=s.useContext(h),d=l[l.length-1],p=d?d.params:{},g=(d&&d.pathname,d?d.pathnameBase:"/");d&&d.route;let y,v=m();if(e){var b;let t="string"===typeof e?(0,i.Rr)(e):e;"/"===g||(null==(b=t.pathname)?void 0:b.startsWith(g))||(0,i.Oi)(!1),y=t}else y=v;let x=y.pathname||"/",S=x;if("/"!==g){let t=g.replace(/^\//,"").split("/");S="/"+x.replace(/^\//,"").split("/").slice(t.length).join("/")}let w=(0,i.ue)(t,{pathname:S});let _=E(w&&w.map((t=>Object.assign({},t,{params:Object.assign({},p,t.params),pathname:(0,i.HS)([g,o.encodeLocation?o.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?g:(0,i.HS)([g,o.encodeLocation?o.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),l,n,r);return e&&_?s.createElement(c.Provider,{value:{location:a({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:i.rc.Pop}},_):_}function x(){let t=function(){var t;let e=s.useContext(d),n=C(A.UseRouteError),r=R(A.UseRouteError);if(void 0!==e)return e;return null==(t=n.errors)?void 0:t[r]}(),e=(0,i.pX)(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},e),n?s.createElement("pre",{style:a},n):null,null)}const S=s.createElement(x,null);class w extends s.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?s.createElement(h.Provider,{value:this.props.routeContext},s.createElement(d.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _(t){let{routeContext:e,match:n,children:r}=t,i=s.useContext(o);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(h.Provider,{value:e},r)}function E(t,e,n,r){var a;if(void 0===e&&(e=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==t){var o;if(!n)return null;if(n.errors)t=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===e.length&&!n.initialized&&n.matches.length>0))return null;t=n.matches}}let l=t,u=null==(a=n)?void 0:a.errors;if(null!=u){let t=l.findIndex((t=>t.route.id&&void 0!==(null==u?void 0:u[t.route.id])));t>=0||(0,i.Oi)(!1),l=l.slice(0,Math.min(l.length,t+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<l.length;s++){let t=l[s];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(h=s),t.route.id){let{loaderData:e,errors:r}=n,s=t.route.loader&&void 0===e[t.route.id]&&(!r||void 0===r[t.route.id]);if(t.route.lazy||s){c=!0,l=h>=0?l.slice(0,h+1):[l[0]];break}}}return l.reduceRight(((t,r,i)=>{let a,o=!1,d=null,p=null;var f;n&&(a=u&&r.route.id?u[r.route.id]:void 0,d=r.route.errorElement||S,c&&(h<0&&0===i?(f="route-fallback",!1||k[f]||(k[f]=!0),o=!0,p=null):h===i&&(o=!0,p=r.route.hydrateFallbackElement||null)));let m=e.concat(l.slice(0,i+1)),g=()=>{let e;return e=a?d:o?p:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:t,s.createElement(_,{match:r,routeContext:{outlet:t,matches:m,isDataRoute:null!=n},children:e})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(w,{location:n.location,revalidation:n.revalidation,component:d,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var T=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(T||{}),A=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(A||{});function I(t){let e=s.useContext(o);return e||(0,i.Oi)(!1),e}function C(t){let e=s.useContext(l);return e||(0,i.Oi)(!1),e}function R(t){let e=function(){let t=s.useContext(h);return t||(0,i.Oi)(!1),t}(),n=e.matches[e.matches.length-1];return n.route.id||(0,i.Oi)(!1),n.route.id}const k={};(r||(r=n.t(s,2))).startTransition;function L(t){let{to:e,replace:n,state:r,relative:a}=t;f()||(0,i.Oi)(!1);let{future:o,static:l}=s.useContext(u),{matches:c}=s.useContext(h),{pathname:d}=m(),p=y(),g=(0,i.Gh)(e,(0,i.yD)(c,o.v7_relativeSplatPath),d,"path"===a),v=JSON.stringify(g);return s.useEffect((()=>p(JSON.parse(v),{replace:n,state:r,relative:a})),[p,v,a,n,r]),null}function N(t){(0,i.Oi)(!1)}function O(t){let{basename:e="/",children:n=null,location:r,navigationType:o=i.rc.Pop,navigator:l,static:h=!1,future:d}=t;f()&&(0,i.Oi)(!1);let p=e.replace(/^\/*/,"/"),m=s.useMemo((()=>({basename:p,navigator:l,static:h,future:a({v7_relativeSplatPath:!1},d)})),[p,d,l,h]);"string"===typeof r&&(r=(0,i.Rr)(r));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:x="default"}=r,S=s.useMemo((()=>{let t=(0,i.pb)(g,p);return null==t?null:{location:{pathname:t,search:y,hash:v,state:b,key:x},navigationType:o}}),[p,g,y,v,b,x,o]);return null==S?null:s.createElement(u.Provider,{value:m},s.createElement(c.Provider,{children:n,value:S}))}function P(t){let{children:e,location:n}=t;return b(F(e),n)}new Promise((()=>{}));s.Component;function F(t,e){void 0===e&&(e=[]);let n=[];return s.Children.forEach(t,((t,r)=>{if(!s.isValidElement(t))return;let a=[...e,r];if(t.type===s.Fragment)return void n.push.apply(n,F(t.props.children,a));t.type!==N&&(0,i.Oi)(!1),t.props.index&&t.props.children&&(0,i.Oi)(!1);let o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=F(t.props.children,a)),n.push(o)})),n}},1406:(t,e,n)=>{var r=n(8878),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,n){var r,i={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)a.call(e,r)&&!l.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===i[r]&&(i[r]=e[r]);return{$$typeof:s,type:t,key:u,ref:c,props:i,_owner:o.current}}e.Fragment=i,e.jsx=u,e.jsxs=u},33:(t,e)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}function v(){}function b(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var S=Array.isArray,w=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,r){var s,i={},a=null,o=null;if(null!=e)for(s in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,s)&&!E.hasOwnProperty(s)&&(i[s]=e[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(s in l=t.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:t,key:a,ref:o,props:i,_owner:_.current}}function A(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var I=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function R(t,e,s,i,a){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var l=!1;if(null===t)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=t),t=""===i?"."+C(l,0):i,S(a)?(s="",null!=t&&(s=t.replace(I,"$&/")+"/"),R(a,e,s,"",(function(t){return t}))):null!=a&&(A(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+t)),e.push(a)),1;if(l=0,i=""===i?".":i+":",S(t))for(var u=0;u<t.length;u++){var c=i+C(o=t[u],u);l+=R(o,e,s,c,a)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(o=t.next()).done;)l+=R(o=o.value,e,s,c=i+C(o,u++),a);else if("object"===o)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function k(t,e,n){if(null==t)return t;var r=[],s=0;return R(t,r,"","",(function(t){return e.call(n,t,s++)})),r}function L(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var N={current:null},O={transition:null},P={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:O,ReactCurrentOwner:_};function F(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:k,forEach:function(t,e,n){k(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return k(t,(function(){e++})),e},toArray:function(t){return k(t,(function(t){return t}))||[]},only:function(t){if(!A(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=s,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,e.act=F,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=m({},t.props),i=t.key,a=t.ref,o=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,o=_.current),void 0!==e.key&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)w.call(e,u)&&!E.hasOwnProperty(u)&&(s[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)s.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];s.children=l}return{$$typeof:n,type:t.type,key:i,ref:a,props:s,_owner:o}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:t},t.Consumer=t},e.createElement=T,e.createFactory=function(t){var e=T.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=A,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:L}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=O.transition;O.transition={};try{t()}finally{O.transition=e}},e.unstable_act=F,e.useCallback=function(t,e){return N.current.useCallback(t,e)},e.useContext=function(t){return N.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return N.current.useDeferredValue(t)},e.useEffect=function(t,e){return N.current.useEffect(t,e)},e.useId=function(){return N.current.useId()},e.useImperativeHandle=function(t,e,n){return N.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return N.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return N.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return N.current.useMemo(t,e)},e.useReducer=function(t,e,n){return N.current.useReducer(t,e,n)},e.useRef=function(t){return N.current.useRef(t)},e.useState=function(t){return N.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return N.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return N.current.useTransition()},e.version="18.3.1"},8878:(t,e,n)=>{t.exports=n(33)},782:(t,e,n)=>{t.exports=n(1406)},9169:(t,e)=>{function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,s=t[r];if(!(0<i(s,e)))break t;t[r]=e,t[n]=s,n=r}}function r(t){return 0===t.length?null:t[0]}function s(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,s=t.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=t[o],u=o+1,c=t[u];if(0>i(l,n))u<s&&0>i(c,l)?(t[r]=c,t[u]=n,r=u):(t[r]=l,t[o]=n,r=o);else{if(!(u<s&&0>i(c,n)))break t;t[r]=c,t[u]=n,r=u}}}return e}function i(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(t){for(var e=r(c);null!==e;){if(null===e.callback)s(c);else{if(!(e.startTime<=t))break;s(c),e.sortIndex=e.expirationTime,n(u,e)}e=r(c)}}function S(t){if(g=!1,x(t),!m)if(null!==r(u))m=!0,O(w);else{var e=r(c);null!==e&&P(S,e.startTime-t)}}function w(t,n){m=!1,g&&(g=!1,v(A),A=-1),f=!0;var i=p;try{for(x(n),d=r(u);null!==d&&(!(d.expirationTime>n)||t&&!R());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var o=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof o?d.callback=o:d===r(u)&&s(u),x(n)}else s(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&P(S,h.startTime-n),l=!1}return l}finally{d=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,T=null,A=-1,I=5,C=-1;function R(){return!(e.unstable_now()-C<I)}function k(){if(null!==T){var t=e.unstable_now();C=t;var n=!0;try{n=T(!0,t)}finally{n?_():(E=!1,T=null)}}else E=!1}if("function"===typeof b)_=function(){b(k)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,N=L.port2;L.port1.onmessage=k,_=function(){N.postMessage(null)}}else _=function(){y(k,0)};function O(t){T=t,E||(E=!0,_())}function P(t,n){A=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,O(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_scheduleCallback=function(t,s,i){var a=e.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:h++,callback:s,priorityLevel:t,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(t.sortIndex=i,n(c,t),null===r(u)&&t===r(c)&&(g?(v(A),A=-1):g=!0,P(S,i-a))):(t.sortIndex=o,n(u,t),m||f||(m=!0,O(w))),t},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(t){var e=p;return function(){var n=p;p=e;try{return t.apply(this,arguments)}finally{p=n}}}},7116:(t,e,n)=>{t.exports=n(9169)},5384:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.errorMessages=e.ErrorType=void 0,function(t){t.MalformedUnicode="MALFORMED_UNICODE",t.MalformedHexadecimal="MALFORMED_HEXADECIMAL",t.CodePointLimit="CODE_POINT_LIMIT",t.OctalDeprecation="OCTAL_DEPRECATION",t.EndOfString="END_OF_STRING"}(n=e.ErrorType||(e.ErrorType={})),e.errorMessages=new Map([[n.MalformedUnicode,"malformed Unicode character escape sequence"],[n.MalformedHexadecimal,"malformed hexadecimal character escape sequence"],[n.CodePointLimit,"Unicode codepoint must not be greater than 0x10FFFF in escape sequence"],[n.OctalDeprecation,'"0"-prefixed octal literals and octal escape sequences are deprecated; for octal literals use the "0o" prefix instead'],[n.EndOfString,"malformed escape sequence at end of string"]])},2527:(t,e,n)=>{e.MH=void 0;const r=n(5384);function s(t,e,n){const s=function(t){return t.match(/[^a-f0-9]/i)?NaN:parseInt(t,16)}(t);if(Number.isNaN(s)||void 0!==n&&n!==t.length)throw new SyntaxError(r.errorMessages.get(e));return s}function i(t,e){const n=s(t,r.ErrorType.MalformedUnicode,4);if(void 0!==e){const t=s(e,r.ErrorType.MalformedUnicode,4);return String.fromCharCode(n,t)}return String.fromCharCode(n)}const a=new Map([["b","\b"],["f","\f"],["n","\n"],["r","\r"],["t","\t"],["v","\v"],["0","\0"]]);const o=/\\(?:(\\)|x([\s\S]{0,2})|u(\{[^}]*\}?)|u([\s\S]{4})\\u([^{][\s\S]{0,3})|u([\s\S]{0,4})|([0-3]?[0-7]{1,2})|([\s\S])|$)/g;function l(t,e=!1){return t.replace(o,(function(t,n,o,l,u,c,h,d,p){if(void 0!==n)return"\\";if(void 0!==o)return function(t){const e=s(t,r.ErrorType.MalformedHexadecimal,2);return String.fromCharCode(e)}(o);if(void 0!==l)return function(t){if("{"!==(e=t).charAt(0)||"}"!==e.charAt(e.length-1))throw new SyntaxError(r.errorMessages.get(r.ErrorType.MalformedUnicode));var e;const n=s(t.slice(1,-1),r.ErrorType.MalformedUnicode);try{return String.fromCodePoint(n)}catch(i){throw i instanceof RangeError?new SyntaxError(r.errorMessages.get(r.ErrorType.CodePointLimit)):i}}(l);if(void 0!==u)return i(u,c);if(void 0!==h)return i(h);if("0"===d)return"\0";if(void 0!==d)return function(t,e=!1){if(e)throw new SyntaxError(r.errorMessages.get(r.ErrorType.OctalDeprecation));const n=parseInt(t,8);return String.fromCharCode(n)}(d,!e);if(void 0!==p)return f=p,a.get(f)||f;var f;throw new SyntaxError(r.errorMessages.get(r.ErrorType.EndOfString))}))}e.MH=l},7365:(t,e,n)=>{n.d(e,{U:()=>a,_:()=>o});var r=n(5874),s=n(7589);function i(t,e){const n=[];for(let r=0;r<Math.min(t.length,e.length);r++){const s=t[r]??[],i=e[r]??[];for(let t=0;t<Math.max(s.length,i.length);t++){const e=s[t]??"",a=i[t]??"";null===e?.trim().match(/^\*+$/)&&a!==e&&n.push({row:r,col:t,expected:e,given:a})}}return n}function a(t,e){const n=s.dl.parse(t),a=s.dl.parse(e);if((0,r.ys)(n)||(0,r.ys)(a))return!1;return 0==i((0,r.Ok)(n),(0,r.Ok)(a)).length}function o(t,e){const n=s.dl.parse(t),a=s.dl.parse(e);if((0,r.ys)(n)||(0,r.ys)(a))return{text:"",failureNum:0,decorations:[],lineNumbers:[]};const o=(0,r.Ok)(n),u=i(o,(0,r.Ok)(a)),c=new Array(o.length);for(const r of u){const t=c[r.row];t?t.push(r):c[r.row]=[r]}const h=e.split("\n"),d=new Array(o.length);for(let r=0;r<c.length;r++)c[r]&&(d[r]=l(h[r],c[r]));const p=[];let f=0;const m=[],g=[];for(let r=0;r<h.length;r++){const t=d[r];g.push((r+1).toString()),t?(g.push(""),p.push(t.givenLine),m.push({span:{start:f,end:f+t.givenLine.length,line:p.length},type:"error-line"}),m.push(...t.incorrectCellSpans.map((t=>({span:{start:t.start+f,end:t.end+f,line:t.line},type:"error-cell"})))),f+=t.expectedLine.length+1,p.push(t.expectedLine),m.push({span:{start:f,end:f+t.expectedLine.length,line:r},type:"correct-line"}),m.push(...t.correctCellSpans.map((t=>({span:{start:t.start+f,end:t.end+f,line:p.length},type:"correct-cell"})))),f+=t.givenLine.length+1):(p.push(h[r]),f+=h[r].length+1)}let y=p.join("\n");return y.endsWith("\n")&&(y=y.substring(0,y.length-1)),{text:y,failureNum:u.length,decorations:m,lineNumbers:g}}function l(t,e){const n=t.split("|").filter((t=>""!=t)),r=Array.from(n),s=[];let i=0;for(let l=0;l<n.length;l++)s.push(i+1),i+=n[l].length+1;const a=[],o=[];for(const l of e){n[l.col]=l.expected,r[l.col]=l.given;const t={start:s[l.col],end:s[l.col]+l.expected.length,line:0};a.push(t),o.push(t)}return{expectedLine:`|${n.join("|")}|`,givenLine:`|${r.join("|")}|`,correctCellSpans:a,incorrectCellSpans:o}}},1296:(t,e,n)=>{n.d(e,{g:()=>s});var r=n(5874);async function s(t,e){try{const s=await t.readFile(e);let i;try{const n=e.replace("VME.tst",".tst").replace(".tst",".cmp");i=await t.readFile(n)}catch(n){}return(0,r.Ok)({tst:s,cmp:i})}catch(n){return(0,r._)(n)}}},7490:(t,e,n)=>{n.d(e,{vl:()=>p,ZB:()=>c,wG:()=>g,FX:()=>d});var r=n(782),s=n(742),i=n(8878),a=n(2469),o=n(6980);class l{signBehaviors=new Map;constructor(t,e){if(o.Mo.has(t)){const n=(0,a.Z1)(o.Mo.get(t)?.()),r=[...n.ins.entries(),...n.outs.entries()];for(const t of r)this.signBehaviors.set(t.name,!e||!e.includes(t.name))}}isSigned(t){return this.signBehaviors.get(t)}}const u=new Map([["Mux4Way16",["sel"]],["Mux8Way16",["sel"]],["DMux4Way",["sel"]],["DMux8Way",["sel"]],["RAM8",["address"]],["RAM64",["address"]],["RAM512",["address"]],["RAM4K",["address"]],["RAM16K",["address"]],["Screen",["address"]],["Memory",["address"]],["CPU",["addressM","pc"]]]),c=(0,i.createContext)({});function h(t){return{pin:t,bits:(0,s.y)(0,t.width).map((e=>[e,t.voltage(e)])).reverse()}}function d(t){return[...t.entries()].map(h)}const p=t=>{const{inPins:e,outPins:n,internalPins:s}=t.sim,i=(a=t.sim.chip[0].name??"",new l(a,u.get(a)));var a;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{children:"\n        table.pinout th {\n          font-weight: bold;\n        }\n\n        table.pinout tbody td:first-child {\n          text-align: right;\n          --font-size: 1rem;\n          width: 0;\n          white-space: nowrap;\n          border-right: var(--border-width) solid var(--table-border-color);\n        }\n\n        table.pinout tbody button {\n          --font-size: 0.875em;\n          font-family: var(--font-family-monospace);\n          max-width: 2em;\n        }\n        "}),(0,r.jsx)("table",{className:"pinout",children:(0,r.jsxs)("tbody",{children:[(0,r.jsx)(f,{pins:e,header:"Input pins",toggle:t.toggle,setInputValid:t.setInputValid,displayInfo:i}),(0,r.jsx)(f,{pins:n,header:"Output pins",disabled:t.sim.pending,enableEdit:!1,displayInfo:i}),!t.hideInternal&&(0,r.jsx)(f,{pins:s,header:"Internal pins",disabled:t.sim.pending,enableEdit:!1,displayInfo:i})]})})]})},f=t=>(0,r.jsxs)(r.Fragment,{children:[t.pins.length>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("th",{colSpan:2,children:t.header})}),[...t.pins].map((e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.pin.name}),(0,r.jsx)("td",{children:(0,r.jsx)(m,{pin:e,toggle:t.toggle,disabled:t.disabled,enableEdit:t.enableEdit,signed:t.displayInfo.isSigned(e.pin.name),setInputValid:t.setInputValid,internal:"Internal pins"===t.header})})]},e.pin.name)))]}),m=({pin:t,toggle:e,disabled:n=!1,enableEdit:s=!0,signed:a=!0,setInputValid:o,internal:l=!1})=>{const[u,h]=(0,i.useState)(!0);let d=!0;const[p,f]=(0,i.useState)(""),m=(0,i.useContext)(c);m instanceof g&&m.registerCallback((()=>{h(!0)}));const y=t=>{d=t,o?.(t)},v=n=>{for(let r=0;r<t.bits.length;r++)t.bits[t.bits.length-r-1][1]!==(n>>r&1)&&e?.(t.pin,r)};return(0,i.useEffect)((()=>{if(!u&&d){let e=0;if(a&&t.bits[0][1]){for(const[n,r]of t.bits)n<t.bits.length-1&&!r&&(e+=2**n);e=-e-1}else{const n=a?t.bits.length-1:t.bits.length;for(const[r,s]of t.bits)r<n&&s&&(e+=2**r)}f(e.toString())}}),[t,u]),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,r.jsx)("fieldset",{role:"group",style:{width:`${t.bits.length}rem`},children:u?t.bits.map((([s,i])=>(0,r.jsx)("button",{disabled:n,style:l?{backgroundColor:"grey"}:{},onClick:()=>e?.(t.pin,s),"data-testid":`pin-${s}`,children:i},s))):(0,r.jsx)("input",{className:"colored",value:p,onChange:e=>{(e=>{const n=e.replace(/[^\d]/g,""),r=a&&"-"===e[0]?`-${n}`:n;if(f(r),isNaN(parseInt(r)))y(!1);else{const e=parseInt(r);!a&&e>=Math.pow(2,t.bits.length)||a&&(e>=Math.pow(2,t.bits.length-1)||e<-Math.pow(2,t.bits.length-1))?y(!1):(v(e),y(!0))}})(e.target.value)},disabled:!s})}),t.bits.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{width:"1em"}}),(0,r.jsx)("button",{className:"pin-control",onClick:()=>{h(!u)},children:u?"dec":"bin"})]})]})};class g{callbacks=[];registerCallback(t){this.callbacks.push(t)}reset(){for(const t of this.callbacks)t()}}},9646:(t,e,n)=>{n.d(e,{A:()=>q,b:()=>K});var r=Symbol.for("immer-nothing"),s=Symbol.for("immer-draftable"),i=Symbol.for("immer-state");function a(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var o=Object.getPrototypeOf;function l(t){return!!t&&!!t[i]}function u(t){return!!t&&(h(t)||Array.isArray(t)||!!t[s]||!!t.constructor?.[s]||g(t)||y(t))}var c=Object.prototype.constructor.toString();function h(t){if(!t||"object"!==typeof t)return!1;const e=o(t);if(null===e)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===c}function d(t,e){0===p(t)?Reflect.ownKeys(t).forEach((n=>{e(n,t[n],t)})):t.forEach(((n,r)=>e(r,n,t)))}function p(t){const e=t[i];return e?e.type_:Array.isArray(t)?1:g(t)?2:y(t)?3:0}function f(t,e){return 2===p(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function m(t,e,n){const r=p(t);2===r?t.set(e,n):3===r?t.add(n):t[e]=n}function g(t){return t instanceof Map}function y(t){return t instanceof Set}function v(t){return t.copy_||t.base_}function b(t,e){if(g(t))return new Map(t);if(y(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=h(t);if(!0===e||"class_only"===e&&!n){const e=Object.getOwnPropertyDescriptors(t);delete e[i];let n=Reflect.ownKeys(e);for(let r=0;r<n.length;r++){const s=n[r],i=e[s];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(o(t),e)}{const e=o(t);if(null!==e&&n)return{...t};const r=Object.create(e);return Object.assign(r,t)}}function x(t,e=!1){return w(t)||l(t)||!u(t)||(p(t)>1&&(t.set=t.add=t.clear=t.delete=S),Object.freeze(t),e&&Object.entries(t).forEach((([t,e])=>x(e,!0)))),t}function S(){a(2)}function w(t){return Object.isFrozen(t)}var _,E={};function T(t){const e=E[t];return e||a(0),e}function A(){return _}function I(t,e){e&&(T("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function C(t){R(t),t.drafts_.forEach(L),t.drafts_=null}function R(t){t===_&&(_=t.parent_)}function k(t){return _={drafts_:[],parent_:_,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function L(t){const e=t[i];0===e.type_||1===e.type_?e.revoke_():e.revoked_=!0}function N(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return void 0!==t&&t!==n?(n[i].modified_&&(C(e),a(4)),u(t)&&(t=O(e,t),e.parent_||F(e,t)),e.patches_&&T("Patches").generateReplacementPatches_(n[i].base_,t,e.patches_,e.inversePatches_)):t=O(e,n,[]),C(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==r?t:void 0}function O(t,e,n){if(w(e))return e;const r=e[i];if(!r)return d(e,((s,i)=>P(t,r,e,s,i,n))),e;if(r.scope_!==t)return e;if(!r.modified_)return F(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const e=r.copy_;let s=e,i=!1;3===r.type_&&(s=new Set(e),e.clear(),i=!0),d(s,((s,a)=>P(t,r,e,s,a,n,i))),F(t,e,!1),n&&t.patches_&&T("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function P(t,e,n,r,s,i,a){if(l(s)){const a=O(t,s,i&&e&&3!==e.type_&&!f(e.assigned_,r)?i.concat(r):void 0);if(m(n,r,a),!l(a))return;t.canAutoFreeze_=!1}else a&&n.add(s);if(u(s)&&!w(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;O(t,s),e&&e.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||F(t,s)}}function F(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&x(e,n)}var D={get(t,e){if(e===i)return t;const n=v(t);if(!f(n,e))return function(t,e,n){const r=j(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}(t,n,e);const r=n[e];return t.finalized_||!u(r)?r:r===U(t.base_,e)?(V(t),t.copy_[e]=B(r,t)):r},has:(t,e)=>e in v(t),ownKeys:t=>Reflect.ownKeys(v(t)),set(t,e,n){const r=j(v(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const r=U(v(t),e),o=r?.[i];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(((s=n)===(a=r)?0!==s||1/s===1/a:s!==s&&a!==a)&&(void 0!==n||f(t.base_,e)))return!0;V(t),z(t)}var s,a;return t.copy_[e]===n&&(void 0!==n||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty:(t,e)=>(void 0!==U(t.base_,e)||e in t.base_?(t.assigned_[e]=!1,V(t),z(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0),getOwnPropertyDescriptor(t,e){const n=v(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.type_||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty(){a(11)},getPrototypeOf:t=>o(t.base_),setPrototypeOf(){a(12)}},M={};function U(t,e){const n=t[i];return(n?v(n):t)[e]}function j(t,e){if(!(e in t))return;let n=o(t);for(;n;){const t=Object.getOwnPropertyDescriptor(n,e);if(t)return t;n=o(n)}}function z(t){t.modified_||(t.modified_=!0,t.parent_&&z(t.parent_))}function V(t){t.copy_||(t.copy_=b(t.base_,t.scope_.immer_.useStrictShallowCopy_))}d(D,((t,e)=>{M[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),M.deleteProperty=function(t,e){return M.set.call(this,t,e,void 0)},M.set=function(t,e,n){return D.set.call(this,t[0],e,n,t[0])};function B(t,e){const n=g(t)?T("MapSet").proxyMap_(t,e):y(t)?T("MapSet").proxySet_(t,e):function(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:A(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,i=D;n&&(s=[r],i=M);const{revoke:a,proxy:o}=Proxy.revocable(s,i);return r.draft_=o,r.revoke_=a,o}(t,e);return(e?e.scope_:A()).drafts_.push(n),n}function $(t){if(!u(t)||w(t))return t;const e=t[i];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=b(t,e.scope_.immer_.useStrictShallowCopy_)}else n=b(t,!0);return d(n,((t,e)=>{m(n,t,$(e))})),e&&(e.finalized_=!1),n}var H=new class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,n)=>{if("function"===typeof t&&"function"!==typeof e){const n=e;e=t;const r=this;return function(t=n,...s){return r.produce(t,(t=>e.call(this,t,...s)))}}let s;if("function"!==typeof e&&a(6),void 0!==n&&"function"!==typeof n&&a(7),u(t)){const r=k(this),i=B(t,void 0);let a=!0;try{s=e(i),a=!1}finally{a?C(r):R(r)}return I(r,n),N(s,r)}if(!t||"object"!==typeof t){if(s=e(t),void 0===s&&(s=t),s===r&&(s=void 0),this.autoFreeze_&&x(s,!0),n){const e=[],r=[];T("Patches").generateReplacementPatches_(t,s,e,r),n(e,r)}return s}a(1)},this.produceWithPatches=(t,e)=>{if("function"===typeof t)return(e,...n)=>this.produceWithPatches(e,(e=>t(e,...n)));let n,r;return[this.produce(t,e,((t,e)=>{n=t,r=e})),n,r]},"boolean"===typeof t?.autoFreeze&&this.setAutoFreeze(t.autoFreeze),"boolean"===typeof t?.useStrictShallowCopy&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){u(t)||a(8),l(t)&&(t=function(t){l(t)||a(10);return $(t)}(t));const e=k(this),n=B(t,void 0);return n[i].isManual_=!0,R(e),n}finishDraft(t,e){const n=t&&t[i];n&&n.isManual_||a(9);const{scope_:r}=n;return I(r,e),N(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));const r=T("Patches").applyPatches_;return l(t)?r(t,e):this.produce(t,(t=>r(t,e)))}},G=H.produce;H.produceWithPatches.bind(H),H.setAutoFreeze.bind(H),H.setUseStrictShallowCopy.bind(H),H.applyPatches.bind(H),H.createDraft.bind(H),H.finishDraft.bind(H);var W=n(8878);function q(t,e){return(0,W.useReducer)(((e,n)=>G(e,(e=>{t[n.action](e,n.payload)}))),e)}function K(t){const[e,n]=(0,W.useState)(t);return(0,W.useEffect)((()=>{n(t)}),[t]),[e,n]}},910:(t,e,n)=>{n.d(e,{L:()=>p,A:()=>d});var r=n(4544),s=n(8878),i=n(1916),a=n(2469);const o="NAND2TetrisIndexedDB",l=1,u="FileSystemAccess",c="Handler";function h(){return new Promise(((t,e)=>{const n=window.indexedDB.open(o,l);n.onsuccess=()=>{t(n.result)},n.onerror=()=>{e(n.error)},n.onupgradeneeded=t=>{n.result.createObjectStore(u)}}))}function d(){const t=(0,s.useMemo)((()=>new r.JU),[]),[e,n]=(0,s.useState)(new r.Q2(t)),[l,d]=(0,s.useState)(),p=(0,s.useCallback)((s=>{const a=new r.Q2(new i.Le(new i.Ik(s),t));a.cd(e.cwd()),n(a),d(s.name)}),[n,d]);(0,s.useEffect)((()=>{l||async function(){const t=await h();return new Promise(((e,n)=>{const r=t.transaction([u],"readonly"),s=r.objectStore(u).get(c);s.onsuccess=()=>{const t=s.result;void 0===t?e():((0,a.vA)(t instanceof FileSystemDirectoryHandle,`Retrieved ${c} in ${u} in ${o} is not a FileSystemDirectoryHandle`),e(t))},r.onerror=()=>{console.error("Error in loading FileSystemDirectoryHandle transaction",{err:r.error}),n(r.error)},s.onerror=()=>{console.error("Error in FileSystemDirectoryHandle handleRequest",{err:s.error}),n(s.error)}}))}().then((t=>{t&&p(t)}))}),[l,p]);const f="showDirectoryPicker"in window,m=(0,s.useCallback)((async(t=!1)=>{if(!f||l&&!t)return;const e=await(0,i.EH)(),n=await async function(t){const e=(await h()).transaction([u],"readwrite");return e.objectStore(u).add(t,c),e.commit(),new Promise(((n,r)=>{e.oncomplete=()=>{n(t)},e.onerror=()=>{r(e.error)}}))}(e);p(n)}),[l,p]),g=(0,s.useCallback)((async()=>{l&&(await async function(){const t=(await h()).transaction([u],"readwrite");return t.objectStore(u).delete(c),new Promise(((e,n)=>{t.oncomplete=()=>{e()},t.onerror=()=>{n(t.error)}}))}(),n(new r.Q2(t)),d(void 0))}),[l,t]),[y,v]=(0,s.useState)("");return{fs:e,status:y,setStatus:v,storage:localStorage,canUpgradeFs:f,upgradeFs:m,closeFs:g,upgraded:l}}const p=(0,s.createContext)({fs:new r.Q2(new r.JU),canUpgradeFs:!1,upgradeFs(){},closeFs(){},status:"",setStatus(){},storage:{}})},1916:(t,e,n)=>{n.d(e,{EH:()=>i,Ik:()=>a,Le:()=>o});var r=n(4544);function s(t){return t.split(r.d$).slice(0,-1).join(r.d$)}function i(){return window.showDirectoryPicker({id:"nand2tetris",mode:"readwrite",startIn:"documents"})}class a{baseDir;constructor(t){this.baseDir=t}async getFolder(t,e=!1){let n=this.baseDir;const s=t.split(r.d$).slice(1).filter((t=>""!=t.trim()));for(const r of s)n=await n.getDirectoryHandle(r,{create:e});return n}async copyFile(t,e){throw new Error("unimplemented: FileSystemAccessFileSystemAdapter::copyFile")}async mkdir(t){this.getFolder(t,!0)}async readFile(t){const e=await this.getFolder(s(t));return(await(await e.getFileHandle((0,r.P8)(t))).getFile()).text()}async writeFile(t,e){const n=await this.getFolder(s(t),!0),i=await(await n.getFileHandle((0,r.P8)(t),{create:!0})).createWritable();await i.write(e),await i.close()}async readdir(t){const e=await this.getFolder(t),n=[];for await(const[r,s]of e.entries())n.push(r);return n}async scandir(t){const e=await this.getFolder(t),n=[];for await(const[r,s]of e.entries())n.push({name:r,isDirectory:()=>"directory"==s.kind,isFile:()=>"file"==s.kind});return n}async stat(t){const e=await this.getFolder(s(t));for await(const[n,s]of e.entries())if(n==(0,r.P8)(t))return{name:n,isDirectory:()=>"directory"==s.kind,isFile:()=>"file"==s.kind};return{name:(0,r.P8)(t),isDirectory:()=>!1,isFile:()=>!1}}async rm(t){const e=await this.getFolder(s(t),!0);await e.removeEntry((0,r.P8)(t),{recursive:!0})}}class o{adapter;nextAdapter;constructor(t,e){this.adapter=t,this.nextAdapter=e}stat(t){return this.adapter.stat(t).catch((e=>{if(this.nextAdapter)return this.nextAdapter.stat(t);throw e}))}readdir(t){return this.adapter.readdir(t).catch((e=>{if(this.nextAdapter)return this.nextAdapter.readdir(t);throw e}))}scandir(t){return this.adapter.scandir(t).catch((e=>{if(this.nextAdapter)return this.nextAdapter.scandir(t);throw e}))}async mkdir(t){return this.nextAdapter&&await this.nextAdapter.mkdir(t),this.adapter.mkdir(t)}async copyFile(t,e){return this.nextAdapter&&await this.nextAdapter.copyFile(t,e),this.adapter.copyFile(t,e)}readFile(t){return this.adapter.readFile(t).catch((e=>{if(this.nextAdapter)return this.nextAdapter.readFile(t);throw e}))}async writeFile(t,e){return this.nextAdapter&&await(this.nextAdapter?.writeFile(t,e)),this.adapter.writeFile(t,e)}async rm(t){return this.nextAdapter&&await this.nextAdapter.rm(t),this.adapter.rm(t)}}},3180:(t,e,n)=>{n.d(e,{C1:()=>A,GH:()=>S,NY:()=>b,XC:()=>v});var r=n(4641),s=n(5874),i=n(8878),a=n(8463),o=n(7738),l=n(6980),u=n(9651),c=n(3096),h=n(6554),d=n(1106),p=n(7490),f=n(9646),m=n(2469),g=n(7365),y=n(910);const v="noScreen",b=[["01","Project 1"],["02","Project 2"],["03","Project 3"],["05","Project 5"]];function x(t){return t in a.O?a.O[t]:a.Kx[t].concat(a.a5[t])}function S(t,e){return a.Kx[t].includes(e)}async function w(t,e){const r=await async function(t,e){const{ChipProjects:r}=await Promise.all([n.e(828),n.e(288)]).then(n.bind(n,3288));return S(t,e)?r[t].BUILTIN_CHIPS[e]:r[t].CHIPS[`${e}.hdl`]}(t,e);if(S(t,e))return r;const s="//// Replace this comment with your code.",i=`BUILTIN ${e};`;return r.includes(s)?r.replace(s,i):r.replace("PARTS:",`PARTS:\n    ${i}`)}function _(t,e=!1,n=!1){return{clocked:t.clocked,inPins:(0,p.FX)(t.ins),outPins:(0,p.FX)(t.outs),internalPins:(0,p.FX)(t.pins),chip:[t],pending:e,invalid:n}}const E=c.z.get();function T(t,e,i,p){const f=function(t){const e=t["/chip/project"]??"01";return{project:e,chips:x(e),chipName:t["/chip/chip"]??a.a5[e][0]}}(i);let{project:y,chipName:b}=f;const{chips:T}=f;let A=new u.ti,I=[],C=new d.BX,R=!1,k=!1,L=!1;const N={setFiles(t,{hdl:e=t.files.hdl,tst:n=t.files.tst,cmp:r=t.files.cmp,out:s=""}){t.files.hdl=e,t.files.tst=n,t.files.cmp=r,t.files.out=s},updateChip(t,e){t.sim=_(A,e?.pending??t.sim.pending,e?.invalid??t.sim.invalid),t.controls.error=t.sim.invalid?e?.error??t.controls.error:void 0},setProject(t,e){const n=x(e),r=t.controls.chipName&&n.includes(t.controls.chipName)?t.controls.chipName:n[0];t.controls.project=e,t.controls.chips=n,this.setChip(t,r)},setChip(t,e){t.controls.chipName=e,t.controls.tests=Array.from(I),t.controls.hasBuiltin=l.Mo.has(e),t.controls.builtinOnly=S(t.controls.project,e)},setTest(t,e){t.controls.testName=e},setVisualizationParams(t,e){t.controls.visualizationParameters=new Set(e)},testRunning(t){t.controls.runningTest=!0},testFinished(t){t.controls.runningTest=!1;const n=(0,g.U)(t.files.cmp.trim(),t.files.out.trim());Promise.resolve().then((()=>{e(n?"Simulation successful: The output file is identical to the compare file":"Simulation error: The output file differs from the compare file")}))},updateTestStep(t){if(t.files.out=C?.log()??"",C?.currentStep?.span)t.controls.span=C.currentStep.span;else if(C.done){const e=t.files.tst.length;t.controls.span={start:e-1,end:e,line:t.files.tst.split("\n").length}}this.updateChip(t,{pending:t.sim.pending,invalid:t.sim.invalid})},updateConfig(t,e){t.config={...t.config,...e}}},O={setProject(t){y=i["/chip/project"]=t,p.current({action:"setProject",payload:y}),this.setChip(a.a5[y][0])},async setChip(t,e=i["/chip/project"]??"01"){b=i["/chip/chip"]=t,k=S(e,b),k?this.useBuiltin():(await this.loadChip(e,b),R&&this.useBuiltin()),await this.initializeTest(t),p.current({action:"setChip",payload:b})},setTest(t){p.current({action:"setTest",payload:t}),p.current({action:"setVisualizationParams",payload:new Set("ComputerAdd.tst"==t||"ComputerMax.tst"==t?[v]:[])}),this.loadTest(t)},reset(){c.z.get().reset(),A.reset(),C.reset(),p.current({action:"setFiles",payload:{}}),p.current({action:"updateChip"})},async updateFiles({hdl:t,tst:n,cmp:s}){L=!1,p.current({action:"setFiles",payload:{hdl:t,tst:n,cmp:s}});try{t&&await this.compileChip(t),n&&this.compileTest(n)}catch(i){e((0,r.V)(i))}p.current({action:"updateChip",payload:{invalid:L}}),L||e("HDL code: No syntax errors")},async compileChip(t){A.remove();const n=await(0,o.qg)(t,b);if((0,s.ys)(n)){const t=(0,s._)(n);return e((0,s._)(n).message),L=!0,void p.current({action:"updateChip",payload:{invalid:!0,error:t}})}this.replaceChip((0,s.Ok)(n))},replaceChip(t){const e=A.ins;for(const[n,{busVoltage:r}]of e){const e=t.ins.get(n);e&&(e.busVoltage=r)}E.reset(),t.eval(),A=t,A.reset(),C=C.with(A).reset(),p.current({action:"updateChip",payload:{invalid:!1}}),p.current({action:"updateTestStep"})},async loadChip(e,n){i["/chip/chip"]=n;const r=await t.readFile((s="hdl",`/projects/${e}/${n}.${s}`)).catch((()=>function(t){return`CHIP ${t} {\n  IN in;\n  OUT out;\n  PARTS:\n}`}(n)));var s;p.current({action:"setFiles",payload:{hdl:r}}),await this.compileChip(r)},async initializeTest(e){I=(await t.scandir(`/projects/${y}`)).filter((t=>t.name.startsWith(e)&&t.name.endsWith(".tst"))).map((t=>t.name)),I.length>0&&await this.setTest(I[0])},async loadTest(e){const[n,r]=await Promise.all([t.readFile(`/projects/${y}/${e}`).catch((()=>"repeat 10 {\n  tick,\n  tock;\n}")),t.readFile(`/projects/${y}/${e}`.replace(".tst",".cmp")).catch((()=>"| in|out|"))]);p.current({action:"setFiles",payload:{cmp:r,tst:n}}),this.compileTest(n)},async saveChip(n,r=y,s=b){p.current({action:"setFiles",payload:{hdl:n}});const i=`/projects/${r}/${s}.hdl`;await t.writeFile(i,n),e(`Saved ${i}`)},toggle(t,e){void 0!==e?t.busVoltage=t.busVoltage^1<<e:1===t.width?t.toggle():t.busVoltage+=1,p.current({action:"updateChip",payload:{pending:!0}})},eval(){A.eval(),p.current({action:"updateChip",payload:{pending:!1}})},clock(){E.toggle(),E.isLow&&E.frame(),p.current({action:"updateChip"})},async useBuiltin(t=!0,n){if(!t)return k||(R=!1),void await this.loadChip(y,b);k||(R=!0);const i=b,a=await(0,l.M1)(i);if((0,s.ys)(a))return void e(`Failed to load builtin ${i}: ${(0,r.V)((0,s._)(a))}`);n&&await this.saveChip(n,y,b);const o=await w(y,i);p.current({action:"setFiles",payload:{hdl:o}}),this.replaceChip((0,s.Ok)(a))},async initialize(){await this.setChip(b,y)},compileTest(n){p.current({action:"setFiles",payload:{tst:n}});const r=h.uG.parse(n);return(0,s.ys)(r)?(e(`Failed to parse test ${(0,s._)(r).message}`),L=!0,!1):(C=d.BX.from((0,s.Ok)(r),e).with(A).reset(),C.setFileSystem(t),p.current({action:"updateTestStep"}),!0)},async runTest(e){this.compileTest(e)&&(p.current({action:"testRunning"}),t.pushd("/samples"),await C.run(),t.popd(),p.current({action:"updateTestStep"}),p.current({action:"testFinished"}))},tick(){return this.stepTest()},async stepTest(){(0,m.vA)(C.chipId===A.id,"Test and chip out of sync");const t=await C.step();return p.current({action:"updateTestStep"}),t&&p.current({action:"testFinished"}),t},async resetFile(){const{ChipProjects:t}=await Promise.all([n.e(828),n.e(288)]).then(n.bind(n,3288)),e=t[y].CHIPS[`${b}.hdl`];p.current({action:"setFiles",payload:{hdl:e}})},getProjectFiles:async()=>await Promise.all(a.a5[y].map((e=>({name:`${e}.hdl`,content:t.readFile(`/projects/${y}/${e}.hdl`)}))))};return{initialState:{controls:{project:y,chips:T,chipName:b,tests:I,testName:"",hasBuiltin:l.Mo.has(b),builtinOnly:S(y,b),runningTest:!1,error:void 0,visualizationParameters:new Set},files:{hdl:"",cmp:"",tst:"",out:""},sim:_(new u.ti),config:{speed:2}},reducers:N,actions:O}}function A(){const{fs:t,setStatus:e,storage:n}=(0,i.useContext)(y.L),r=(0,i.useRef)((()=>{})),{initialState:s,reducers:a,actions:o}=(0,i.useMemo)((()=>T(t,e,n,r)),[t,e,n,r]),[l,u]=(0,f.A)(a,s);return r.current=u,{state:l,dispatch:r,actions:o}}},4256:(t,e,n)=>{n.d(e,{X:()=>s});var r=n(7076);class s extends r.qN{dispatch;constructor(t,e){super(t,t.size,0),this.dispatch=e}async load(t,e){await super.load(t,e),this.dispatch.current({action:"update"})}}},8849:(t,e,n)=>{n.d(e,{$:()=>x,vw:()=>w});var r=n(5874),s=n(8463),i=n(7076),a=n(6554),o=n(9563),l=n(3977);const u='Vm <: Base {\n  Root := Vm\n\n  Vm = newline* VmInstructionLine* VmInstruction?\n\n  space := comment | " " | "\t"\n  whitespace = lineComment | comment | space\n\n  VmInstructionLine = VmInstruction newline+\n  VmInstruction =\n    | StackInstruction\n    | OpInstruction\n    | FunctionInstruction\n    | CallInstruction\n    | ReturnInstruction\n    | GotoInstruction\n    | LabelInstruction\n  \n  StackInstruction = (push | pop) MemorySegment Number\n  OpInstruction = Add | Sub | Neg | Lt | Gt | Eq | And | Or | Not\n  FunctionInstruction = function Name Number \n  CallInstruction =  call Name Number\n  ReturnInstruction = return\n  LabelInstruction = label Name\n  GotoInstruction = (goto | ifGoto) Name\n\n  MemorySegment = argument | local | static | constant | this | that | pointer | temp\n\n  push = "push" whitespace+\n  pop = "pop" whitespace+\n  function = "function" whitespace+\n  call = "call" whitespace+\n  return = "return"\n  goto = "goto" whitespace+\n  ifGoto = "if-goto" whitespace+\n  label = "label" whitespace+\n\n  argument = "argument" whitespace+\n  local = "local" whitespace+\n  static = "static" whitespace+\n  constant = "constant" whitespace+\n  this = "this" whitespace+\n  that = "that" whitespace+\n  pointer = "pointer" whitespace+\n  temp = "temp" whitespace+\n\n  Add = "add" \n  Sub = "sub" \n  Neg = "neg" \n  Eq = "eq"\n  Lt = "lt" \n  Gt = "gt" \n  And = "and" \n  Or = "or" \n  Not = "not"\n}',c=(0,o.qN)(u,l.lN),h=c.extendSemantics(l.JE);h.addAttribute("op",{push:(t,e)=>"push",pop:(t,e)=>"pop",function:(t,e)=>"function",call:(t,e)=>"call",return:t=>"return",goto:(t,e)=>"goto",ifGoto:(t,e)=>"if-goto",label:(t,e)=>"label",Add:t=>"add",Sub:t=>"sub",Neg:t=>"neg",Eq:t=>"eq",Lt:t=>"lt",Gt:t=>"gt",And:t=>"and",Or:t=>"or",Not:t=>"not"}),h.addAttribute("segment",{argument:(t,e)=>"argument",local:(t,e)=>"local",static:(t,e)=>"static",constant:(t,e)=>"constant",this:(t,e)=>"this",that:(t,e)=>"that",pointer:(t,e)=>"pointer",temp:(t,e)=>"temp"}),h.addAttribute("instruction",{StackInstruction({op:t},{segment:e},n){return{op:t,segment:e,offset:Number(n.sourceString),span:(0,l.Ln)(this.source)}},OpInstruction({op:t}){return{op:t,span:(0,l.Ln)(this.source)}},FunctionInstruction(t,{name:e},n){return{op:"function",name:e,nVars:Number(n.sourceString),span:(0,l.Ln)(this.source)}},CallInstruction(t,{name:e},n){return{op:"call",name:e,nArgs:Number(n.sourceString),span:(0,l.Ln)(this.source)}},ReturnInstruction(t){return{op:"return",span:(0,l.Ln)(this.source)}},LabelInstruction(t,{name:e}){return{op:"label",label:e,span:(0,l.Ln)(this.source)}},GotoInstruction({op:t},{name:e}){return{op:t,label:e,span:(0,l.Ln)(this.source)}},VmInstructionLine:(t,e)=>t.instruction}),h.addAttribute("vm",{Vm(t,e,n){const r=e.children.map((t=>t.instruction))??[];return{instructions:n.child(0)?[...r,n.child(0).instruction]:r}}}),h.addAttribute("root",{Root:({vm:t})=>t});const d={grammar:u,semantics:h,parser:c,parse:(0,l.Q5)(c,h)};var p=n(8783),f=n(9928),m=n(8878),g=n(7365),y=n(9646),v=n(910),b=n(4256);const x="repeat {\n\tvmstep;\n}";function S(t,e,n,r){const s=new b.X(t.vm.RAM,e),a=new b.X(t.vm.Screen,e),o=new i.PC(new b.X(t.vm.RAM,e)),l=t.vm.derivedLine();let u=[];try{u=t.vm.vmStack().reverse()}catch(c){n("Runtime error: Invalid stack")}return{Keyboard:o,RAM:s,Screen:a,Stack:u,Prog:t.vm.program,Statics:[...t.vm.memory.map(((t,e)=>e),16,16+t.vm.getStaticCount())],Temp:[...t.vm.memory.map(((t,e)=>e),5,13)],AddedSysInit:t.vm.addedSysInit,highlight:l,showHighlight:r}}function w(){const{fs:t,setStatus:e,storage:n}=(0,m.useContext)(v.L),i=(0,m.useRef)((()=>{})),{initialState:o,reducers:l,actions:u}=(0,m.useMemo)((()=>function(t,e,n,i){const o=(0,r.oA)(d.parse(s.J5));let l=(0,r.oA)(f.Vm.build(o.instructions)),u=new p.Y(e).with(l),c=!1,h=!0,m="",y=!0;const v={setVm(t,e){t.files.vm=e},setTst(t,{tst:e,cmp:n}){t.files.tst=e,t.files.cmp=n??""},setExitCode(t,e){t.controls.exitCode=e},setValid(t,e){t.controls.valid=e},setShowHighlight(t,e){t.vm.showHighlight=e},setError(t,n){n?(t.controls.valid=!1,e(n?.message)):t.controls.valid=!0,t.controls.error=n},setPath(t,e){t.test.path=e},update(t){t.vm=S(u,i,e,y),t.test.highlight=u.currentStep?.span},setAnimate(t,e){t.controls.animate=e},testStep(t){t.files.out=u.log()},testFinished(t){const n=(0,g.U)(t.files.cmp.trim(),t.files.out);e(n?"Simulation successful: The output file is identical to the compare file":"Simulation error: The output file differs from the compare file")},setTitle(t,e){t.title=e},updateConfig(t,e){t.config={...t.config,...e}}},b={vm:S(u,i,e,!0),controls:{exitCode:void 0,runningTest:!1,animate:!0,valid:!0},test:{highlight:void 0,path:"/"},files:{vm:"",tst:x,cmp:"",out:""},config:{ram1Format:"dec",ram2Format:"dec",screenScale:1,speed:2,testSpeed:2}},w={setVm(t){if(y=!1,i.current({action:"setVm",payload:t}),m==t)return;m=t;const e=d.parse(t);if((0,r.ys)(e))return i.current({action:"setError",payload:(0,r._)(e)}),!1;const n=(0,r.oA)(e).instructions,s=f.Vm.build(n);return this.replaceVm(s)},loadVm(t){y=!1;for(const r of t)r.content.endsWith("\n")&&(r.content=r.content.slice(0,-1));const e=t.map((t=>t.content)).join("\n");if(i.current({action:"setVm",payload:e}),m==e)return;m=e;const n=[];let s=0;for(const o of t){const t=d.parse(o.content);if((0,r.ys)(t))return i.current({action:"setError",payload:(0,r._)(t)}),!1;const e=(0,r.oA)(t).instructions;for(const n of e)void 0!=n.span?.line&&(n.span.line+=s);s+=o.content.split("\n").length,n.push({name:o.name,instructions:e})}const a=f.Vm.buildFromFiles(n);return this.replaceVm(a)},replaceVm:t=>(0,r.ys)(t)?(i.current({action:"setError",payload:(0,r._)(t)}),!1):(i.current({action:"setError"}),e("Compiled VM code successfully"),l=(0,r.oA)(t),u.vm=l,i.current({action:"update"}),!0),loadTest(n,s,o){i.current({action:"setTst",payload:{tst:s,cmp:o}});const c=a.uG.parse(s);return(0,r.ys)(c)?(i.current({action:"setValid",payload:!1}),e("Failed to parse test"),!1):(i.current({action:"setValid",payload:!0}),e("Parsed tst"),l.reset(),u=p.Y.from((0,r.oA)(c),n,(t=>{this.loadVm(t)}),e).using(t),u.vm=l,i.current({action:"update"}),!0)},setAnimate(t){h=t,i.current({action:"setAnimate",payload:t})},async testStep(){y=!0;let t=!1;try{return t=await u.step(),i.current({action:"testStep"}),t&&i.current({action:"testFinished"}),h&&i.current({action:"update"}),t}catch(n){return e(`Runtime error: ${n.message}`),i.current({action:"setValid",payload:!1}),!0}},setPaused(t=!0){l.setPaused(t)},step(){y=!0;try{let t=!1;const e=l.step();return void 0!==e&&(t=!0,i.current({action:"setExitCode",payload:e})),h&&i.current({action:"update"}),t}catch(t){return e(`Runtime error: ${t.message}`),i.current({action:"setValid",payload:!1}),!0}},reset(){y=!0,u.reset(),l.reset(),i.current({action:"update"}),i.current({action:"setExitCode",payload:void 0}),i.current({action:"setValid",payload:!0})},toggleUseTest(){c=!c,i.current({action:"update"})},initialize(){i.current({action:"setTitle",payload:void 0}),this.setVm(s.J5)}};return{initialState:b,reducers:v,actions:w}}(t,e,0,i)),[t,e,n,i]),[c,h]=(0,y.A)(l,o);return i.current=h,{state:c,dispatch:i,actions:u}}},2469:(t,e,n)=>{n.d(e,{H8:()=>a,Z1:()=>i,vA:()=>s});class r extends Error{constructor(t="Assertion failed"){super(t)}}function s(t,e){if(!t)throw new r(e instanceof Function?e():e)}function i(t,e="Assertion failed: value does not exist"){return s(null!=t,e),t}function a(t,e=`Unexpected value ${t}`){throw new Error(e instanceof Function?e():e)}},4641:(t,e,n)=>{n.d(e,{V:()=>r});const r=t=>{if((t=>"function"===typeof t?.toString||"string"===typeof t)(t)){const e=t.toString();return"[object Object]"===e?JSON.stringify(t):e}return JSON.stringify(t)}},4544:(t,e,n)=>{n.d(e,{JU:()=>p,P8:()=>u,Q2:()=>h,cL:()=>f,d$:()=>a});const r={SEP:"\\",WD:"C:\\\\",isAbsolute:t=>Boolean(t.match(new RegExp("^[a-zA-Z]:\\\\")))},s={SEP:"/",WD:"/",isAbsolute:t=>"/"==t[0]},i="undefined"!==typeof process&&"win32"==process.platform?r:s,a=i.SEP,o=i.WD,l=i.isAbsolute;function u(t){t.endsWith(a)&&(t=t.substring(0,t.length-1));return t.split(a).at(-1)??""}function c(...t){const e=[];for(const n of t)for(const t of n.split(a))switch(t){case"":case".":break;case"..":e.pop();break;default:e.push(t)}return(i==s?a:"")+e.join(a)}class h{adapter;wd=o;stack=[];constructor(t=new d){this.adapter=t}cwd(){return this.wd}cd(t){this.wd=this.p(t)}pushd(t){this.stack.push(this.wd),this.cd(t)}popd(){this.stack.length>0&&(this.wd=this.stack.pop())}stat(t){return this.adapter.stat(this.p(t))}scandir(t){return this.adapter.scandir(this.p(t))}readdir(t){return this.adapter.readdir(this.p(t))}mkdir(t){return this.adapter.mkdir(this.p(t))}copyFile(t,e){return this.adapter.copyFile(this.p(t),this.p(e))}readFile(t){return this.adapter.readFile(this.p(t))}writeFile(t,e){return this.adapter.writeFile(this.p(t),e)}rm(t){return this.adapter.rm(this.p(t))}p(t){return l(t)?t:c(this.cwd(),t)}}class d{fs;constructor(t={}){this.fs=t}stat(t){return new Promise(((e,n)=>{if(this.fs[t])return e({name:u(t),isDirectory:()=>!1,isFile:()=>!0});t.endsWith(a)||(t+=a);for(let r of Object.keys(this.fs))if(r.startsWith(t))return e({name:u(t),isDirectory:()=>!0,isFile:()=>!1});n()}))}async scandir(t){return(await this.readdir(t)).map((e=>{let n=void 0!==this.fs[c(t,e)];return{name:e,isDirectory:()=>!n,isFile:()=>n}}))}readdir(t){return t.endsWith(a)||(t+=a),new Promise((e=>{let n=new Set;for(const r of Object.keys(this.fs))if(r.startsWith(t)){const e=r.indexOf(a,t.length+1),s=r.substring(t.length,-1===e?void 0:e);n.add(s)}return e([...n].sort())}))}mkdir(t){return Promise.resolve()}copyFile(t,e){return new Promise((n=>{this.fs[e]=this.fs[t],n()}))}readFile(t){return new Promise(((e,n)=>{let r=this.fs[t];if(void 0===r){n(new Error(`File Not Found ${t}`))}else e(r)}))}writeFile(t,e){return new Promise((n=>{this.fs[t]=e,n()}))}rm(t){return new Promise((e=>{delete this.fs[t],e()}))}}class p extends d{constructor(){super(window.localStorage)}}async function f(t,e){for(const[n,r]of Object.entries(e))"string"===typeof r?await t.writeFile(n,r):(t.cd(n),await f(t,r),t.cd(".."))}},742:(t,e,n)=>{function r(t,e,n=1){const r=[];for(let s=t;s<e;s+=n)r.push(s);return r}n.d(e,{y:()=>r})},5874:(t,e,n)=>{n.d(e,{HQ:()=>s,Ok:()=>a,_:()=>o,oA:()=>l,ys:()=>i});const r=t=>null===t;const s=t=>Object.prototype.hasOwnProperty.call(t??{},"ok"),i=t=>Object.prototype.hasOwnProperty.call(t,"err");function a(t){return s(t)?t.ok:{ok:t,map(t){return t(a(this))}}}function o(t){return t.err??{err:t,map(t){return this}}}function l(t){if(r(t))throw new Error("Attempted to unwrap None");if(i(t))throw o(t);return s(t)?a(t):t}},8256:(t,e,n)=>{n.d(e,{Ru:()=>_});var r=n(2527);const s=t=>"string"===typeof t,i=new Map,a="en";function o(t){return[...Array.isArray(t)?t:[t],a]}function l(t,e,n){const r=o(t);return h((()=>d("date",r,n)),(()=>new Intl.DateTimeFormat(r,n))).format(s(e)?new Date(e):e)}function u(t,e,n){const r=o(t);return h((()=>d("number",r,n)),(()=>new Intl.NumberFormat(r,n))).format(e)}function c(t,e,n,{offset:r=0,...s}){const i=o(t),a=e?h((()=>d("plural-ordinal",i)),(()=>new Intl.PluralRules(i,{type:"ordinal"}))):h((()=>d("plural-cardinal",i)),(()=>new Intl.PluralRules(i,{type:"cardinal"})));return s[n]??s[a.select(n-r)]??s.other}function h(t,e){const n=t();let r=i.get(n);return r||(r=e(),i.set(n,r)),r}function d(t,e,n){return`${t}-${e.join("-")}-${JSON.stringify(n)}`}const p=/\\u[a-fA-F0-9]{4}|\\x[a-fA-F0-9]{2}/g,f="%__lingui_octothorpe__%",m=(t,e)=>e[t]??e.other;function g(t,e,n){return(i={},a)=>{const o=((t,e,n={})=>{const r=e||t,s=t=>"object"===typeof t?t:n[t]||{style:t},i=(t,e)=>{const i=Object.keys(n).length?s("number"):void 0,a=u(r,t,i);return e.replace(new RegExp(f,"g"),a)};return{plural:(t,e)=>{const{offset:n=0}=e,s=c(r,!1,t,e);return i(t-n,s)},selectordinal:(t,e)=>{const{offset:n=0}=e,s=c(r,!0,t,e);return i(t-n,s)},select:m,number:(t,e)=>u(r,t,s(e)),date:(t,e)=>l(r,t,s(e))}})(e,n,a),h=(t,e=!1)=>Array.isArray(t)?t.reduce(((t,n)=>{if("#"===n&&e)return t+f;if(s(n))return t+n;const[r,a,l]=n;let u,c={};if("plural"===a||"selectordinal"===a||"select"===a?Object.entries(l).forEach((([t,e])=>{c[t]=h(e,"plural"===a||"selectordinal"===a)})):c=l,a){u=(0,o[a])(i[r],c)}else u=i[r];return null==u?t:t+u}),""):t,d=h(t);return s(d)&&p.test(d)?(0,r.MH)(d.trim()):s(d)?d.trim():d?String(d):""}}var y=Object.defineProperty,v=(t,e,n)=>(((t,e,n)=>{e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!==typeof e?e+"":e,n),n);class b{constructor(){v(this,"_events",{})}on(t,e){var n;return(n=this._events)[t]??(n[t]=[]),this._events[t].push(e),()=>this.removeListener(t,e)}removeListener(t,e){const n=this._getListeners(t);if(!n)return;const r=n.indexOf(e);~r&&n.splice(r,1)}emit(t,...e){const n=this._getListeners(t);n&&n.map((t=>t.apply(this,e)))}_getListeners(t){const e=this._events[t];return!!Array.isArray(e)&&e}}var x=Object.defineProperty,S=(t,e,n)=>(((t,e,n)=>{e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!==typeof e?e+"":e,n),n);class w extends b{constructor(t){super(),S(this,"_locale",""),S(this,"_locales"),S(this,"_localeData",{}),S(this,"_messages",{}),S(this,"_missing"),S(this,"t",this._.bind(this)),null!=t.missing&&(this._missing=t.missing),null!=t.messages&&this.load(t.messages),null!=t.localeData&&this.loadLocaleData(t.localeData),("string"===typeof t.locale||t.locales)&&this.activate(t.locale??a,t.locales)}get locale(){return this._locale}get locales(){return this._locales}get messages(){return this._messages[this._locale]??{}}get localeData(){return this._localeData[this._locale]??{}}_loadLocaleData(t,e){const n=this._localeData[t];n?Object.assign(n,e):this._localeData[t]=e}loadLocaleData(t,e){null!=e?this._loadLocaleData(t,e):Object.keys(t).forEach((e=>this._loadLocaleData(e,t[e]))),this.emit("change")}_load(t,e){const n=this._messages[t];n?Object.assign(n,e):this._messages[t]=e}load(t,e){"string"==typeof t&&"object"===typeof e?this._load(t,e):Object.entries(t).forEach((([t,e])=>this._load(t,e))),this.emit("change")}loadAndActivate({locale:t,locales:e,messages:n}){this._locale=t,this._locales=e||void 0,this._messages[this._locale]=n,this.emit("change")}activate(t,e){this._locale=t,this._locales=e,this.emit("change")}_(t,e,n){let r=n?.message;t||(t=""),s(t)||(e=t.values||e,r=t.message,t=t.id);const i=this.messages[t],a=void 0===i,o=this._missing;if(o&&a)return(t=>"function"===typeof t)(o)?o(this._locale,t):o;a&&this.emit("missing",{id:t,locale:this._locale});let l=i||r||t;return s(l)&&p.test(l)?JSON.parse(`"${l}"`):s(l)?l:g(l,this._locale,this._locales)(e,n?.formats)}date(t,e){return l(this._locales||this._locale,t,e)}number(t,e){return u(this._locales||this._locale,t,e)}}const _=function(t={}){return new w(t)}()},1391:(t,e,n)=>{n.d(e,{CY:()=>f,x6:()=>m});var r=n(8878);const s=/<([a-zA-Z0-9]+)>(.*?)<\/\1>|<([a-zA-Z0-9]+)\/>/,i=/(?:\r\n|\r|\n)/g,a={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0};function o(t,e={}){const n=u(0,"$lingui$"),c=t.replace(i,"").split(s);if(1===c.length)return t;const h=[],d=c.shift();d&&h.push(d);for(const[s,i,u]of l(c)){let t="undefined"!==typeof s?e[s]:void 0;(!t||a[t.type]&&i)&&(t?console.error(`${t.type} is a void element tag therefore it must have no children`):console.error(`Can't use element at index '${s}' as it is not declared in the original translation`),t=r.createElement(r.Fragment)),Array.isArray(t)&&(t=r.createElement(r.Fragment,{},t)),h.push(r.cloneElement(t,{key:n()},i?o(i,e):t.props.children)),u&&h.push(u)}return 1===h.length?h[0]:h}function l(t){if(!t.length)return[];const[e,n,r,s]=t.slice(0,4);return[[e||r,n||"",s]].concat(l(t.slice(4,t.length)))}const u=(t=0,e="")=>()=>`${e}_${t++}`;function c(t){const{render:e,component:n,id:s,message:i,formats:a,lingui:{i18n:l,defaultComponent:u}}=t,c={...t.values},d={...t.components};c&&Object.keys(c).forEach((t=>{const e=c[t];if(!(r.isValidElement(e)||Array.isArray(e)&&e.every(r.isValidElement)))return;const n=Object.keys(d).length;d[n]=e,c[t]=`<${n}/>`}));const p=l&&"function"===typeof l._?l._(s,c,{message:i,formats:a}):s,f=p?o(p,d):null;if(null===e||null===n)return f;const m=u||h,g={id:s,message:i,translation:f,isTranslated:s!==f&&i!==f,children:f};if(e&&n)console.error("You can't use both `component` and `render` prop at the same time. `component` is ignored.");else if(e&&"function"!==typeof e)console.error(`Invalid value supplied to prop \`render\`. It must be a function, provided ${e}`);else if(n&&"function"!==typeof n)return console.error(`Invalid value supplied to prop \`component\`. It must be a React component, provided ${n}`),r.createElement(m,g,f);if("function"===typeof e)return e(g);const y=n||m;return r.createElement(y,g,f)}const h=({children:t})=>r.createElement(r.Fragment,null,t),d=r.createContext(null),p=t=>r.useContext(d);const f=({i18n:t,defaultComponent:e,children:n})=>{const s=r.useRef(t.locale),i=r.useCallback((()=>({i18n:t,defaultComponent:e,_:t.t.bind(t)})),[t,e]),[a,o]=r.useState(i());return r.useEffect((()=>{const e=()=>{s.current=t.locale,o(i())},n=t.on("change",e);return s.current!==t.locale&&e(),n}),[t,i]),s.current?r.createElement(d.Provider,{value:a},n):null};function m(t){let e;const n=p(e);return r.createElement(c,{...t,lingui:n})}},9563:(t,e,n)=>{n.d(e,{qN:()=>ae});var r={};n.r(r),n.d(r,{CV:()=>m,b0:()=>i,vA:()=>a,Ms:()=>h,xA:()=>o,$L:()=>c,pX:()=>p,lO:()=>d,Ho:()=>f,ux:()=>u,xq:()=>l,qj:()=>y,rE:()=>v});const s={};for(let oe=0;oe<128;oe++)s[oe]=String.fromCharCode(oe);function i(t){const e=t||"";return function(){throw new Error("this method "+e+" is abstract! (it has no implementation in class "+this.constructor.name+")")}}function a(t,e){if(!t)throw new Error(e||"Assertion failed")}function o(t,e,n){let r;Object.defineProperty(t,e,{get(){return r||(r=n.call(this)),r}})}function l(t,e){return new Array(e+1).join(t)}function u(t,e){return function(t,e){const n=[];for(;e-- >0;)n.push(t());return n}((()=>t),e)}function c(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];t.lastIndexOf(r)!==n&&e.indexOf(r)<0&&e.push(r)}return e}function h(t){const e=[];return t.forEach((t=>{e.indexOf(t)<0&&e.push(t)})),e}function d(t){const e=t[0];return e===e.toUpperCase()}function p(t){return!d(t)}function f(t,e,n){const r=n||" ";return t.length<e?l(r,e-t.length)+t:t}function m(){this.strings=[]}s["'".charCodeAt(0)]="\\'",s['"'.charCodeAt(0)]='\\"',s["\\".charCodeAt(0)]="\\\\",s["\b".charCodeAt(0)]="\\b",s["\f".charCodeAt(0)]="\\f",s["\n".charCodeAt(0)]="\\n",s["\r".charCodeAt(0)]="\\r",s["\t".charCodeAt(0)]="\\t",s["\v".charCodeAt(0)]="\\v",m.prototype.append=function(t){this.strings.push(t)},m.prototype.contents=function(){return this.strings.join("")};const g=t=>String.fromCodePoint(parseInt(t,16));function y(t){if("\\"!==t.charAt(0))return t;switch(t.charAt(1)){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"x":return g(t.slice(2,4));case"u":return"{"===t.charAt(2)?g(t.slice(3,-1)):g(t.slice(2,6));default:return t.charAt(1)}}function v(t){if(null==t)return String(t);const e=Object.prototype.toString.call(t);try{let n;return n=t.constructor&&t.constructor.name?t.constructor.name:0===e.indexOf("[object ")?e.slice(8,-1):typeof t,n+": "+JSON.stringify(String(t))}catch(n){return e}}const b={Lu:/\p{Lu}/u,Ll:/\p{Ll}/u,Lt:/\p{Lt}/u,Lm:/\p{Lm}/u,Lo:/\p{Lo}/u,Nl:/\p{Nl}/u,Nd:/\p{Nd}/u,Mn:/\p{Mn}/u,Mc:/\p{Mc}/u,Pc:/\p{Pc}/u,Zs:/\p{Zs}/u,L:/\p{Letter}/u,Ltmo:/\p{Lt}|\p{Lm}|\p{Lo}/u};class x{constructor(){if(this.constructor===x)throw new Error("PExpr cannot be instantiated -- it's abstract")}withSource(t){return t&&(this.source=t.trimmed()),this}}const S=Object.create(x.prototype),w=Object.create(x.prototype);class _ extends x{constructor(t){super(),this.obj=t}}class E extends x{constructor(t,e){super(),this.from=t,this.to=e,this.matchCodePoint=t.length>1||e.length>1}}class T extends x{constructor(t){super(),this.index=t}}class A extends x{constructor(t){super(),this.terms=t}}class I extends A{constructor(t,e,n){super([n,t.rules[e].body]),this.superGrammar=t,this.name=e,this.body=n}}class C extends A{constructor(t,e,n,r){const s=t.rules[e].body;super([...n,s,...r]),this.superGrammar=t,this.ruleName=e,this.expansionPos=n.length}}class R extends x{constructor(t){super(),this.factors=t}}class k extends x{constructor(t){super(),this.expr=t}}class L extends k{}class N extends k{}class O extends k{}L.prototype.operator="*",N.prototype.operator="+",O.prototype.operator="?",L.prototype.minNumMatches=0,N.prototype.minNumMatches=1,O.prototype.minNumMatches=0,L.prototype.maxNumMatches=Number.POSITIVE_INFINITY,N.prototype.maxNumMatches=Number.POSITIVE_INFINITY,O.prototype.maxNumMatches=1;class P extends x{constructor(t){super(),this.expr=t}}class F extends x{constructor(t){super(),this.expr=t}}class D extends x{constructor(t){super(),this.expr=t}}class M extends x{constructor(t,e=[]){super(),this.ruleName=t,this.args=e}isSyntactic(){return d(this.ruleName)}toMemoKey(){return this._memoKey||Object.defineProperty(this,"_memoKey",{value:this.toString()}),this._memoKey}}class U extends x{constructor(t){super(),this.category=t,this.pattern=b[t]}}function j(t,e){let n;return e?(n=new Error(e.getLineAndColumnMessage()+t),n.shortMessage=t,n.interval=e):n=new Error(t),n}function z(){return j("Interval sources don't match")}function V(t,e,n){return j("Rule "+t+" is not declared in grammar "+e,n)}function B(t,e,n,r){let s="Duplicate declaration for rule '"+t+"' in grammar '"+e+"'";return e!==n&&(s+=" (originally declared in '"+n+"')"),j(s,r)}function $(t,e,n,r){return j("Wrong number of parameters for rule "+t+" (expected "+e+", got "+n+")",r)}function H(t,e,n){return j("Duplicate parameter names in rule "+t+": "+e.join(", "),n)}function G(t,e){return j("Incorrect argument type: expected "+t,e.source)}function W(t,e){const n=e.length>0?e[e.length-1].args:[];let r="Nullable expression "+t.expr.substituteParams(n)+" is not allowed inside '"+t.operator+"' (possible infinite loop)";if(e.length>0){r+="\nApplication stack (most recent application last):\n"+e.map((t=>new M(t.ruleName,t.args))).join("\n")}return j(r,t.expr.source)}function q(t,e,n,r){return j("Rule "+t+" involves an alternation which has inconsistent arity (expected "+e+", got "+n+")",r.source)}function K(t){if(1===t.length)throw t[0];if(t.length>1)throw function(t){const e=t.map((t=>t.message));return j(["Errors:"].concat(e).join("\n- "),t[0].interval)}(t)}function Y(t,e,n){const r=t.length;return(t.slice(0,n)+e+t.slice(n+e.length)).substr(0,r)}function Q(...t){const e=this,{offset:n}=e,{xq:s}=r,i=new m;i.append("Line "+e.lineNum+", col "+e.colNum+":\n");const o=function(t){let e=0;return t.map((t=>{const n=t.toString();return e=Math.max(e,n.length),n})).map((t=>f(t,e)))}([null==e.prevLine?0:e.lineNum-1,e.lineNum,null==e.nextLine?0:e.lineNum+1]),l=(t,e,n)=>{i.append(n+o[t]+" | "+e+"\n")};null!=e.prevLine&&l(0,e.prevLine,"  "),l(1,e.line,"> ");const u=e.line.length;let c=s(" ",u+1);for(let r=0;r<t.length;++r){let i=t[r][0],o=t[r][1];a(i>=0&&i<=o,"range start must be >= 0 and <= end");const l=n-e.colNum+1;i=Math.max(0,i-l),o=Math.min(o-l,u),c=Y(c,s("~",o-i),i)}const h=2+o[1].length+3;return i.append(s(" ",h)),c=Y(c,"^",e.colNum-1),i.append(c.replace(/ +$/,"")+"\n"),null!=e.nextLine&&l(2,e.nextLine,"  "),i.contents()}let X=[];function J(t){X.push(t)}function Z(t,e){let n=1,r=1,s=0,i=0,a=null,o=null,l=-1;for(;s<e;){const e=t.charAt(s++);"\n"===e?(n++,r=1,l=i,i=s):"\r"!==e&&r++}let u=t.indexOf("\n",i);if(-1===u)u=t.length;else{const e=t.indexOf("\n",u+1);a=-1===e?t.slice(u):t.slice(u,e),a=a.replace(/^\r?\n/,"").replace(/\r$/,"")}l>=0&&(o=t.slice(l,i).replace(/\r?\n$/,""));return{offset:e,lineNum:n,colNum:r,line:t.slice(i,u).replace(/\r$/,""),prevLine:o,nextLine:a,toString:Q}}function tt(t,e,...n){return Z(t,e).toString(...n)}const et=(()=>{let t=0;return e=>""+e+t++})();class nt{constructor(t,e,n){this.sourceString=t,this.startIdx=e,this.endIdx=n}get contents(){return void 0===this._contents&&(this._contents=this.sourceString.slice(this.startIdx,this.endIdx)),this._contents}get length(){return this.endIdx-this.startIdx}coverageWith(...t){return nt.coverage(...t,this)}collapsedLeft(){return new nt(this.sourceString,this.startIdx,this.startIdx)}collapsedRight(){return new nt(this.sourceString,this.endIdx,this.endIdx)}getLineAndColumn(){return Z(this.sourceString,this.startIdx)}getLineAndColumnMessage(){const t=[this.startIdx,this.endIdx];return tt(this.sourceString,this.startIdx,t)}minus(t){if(this.sourceString!==t.sourceString)throw z();return this.startIdx===t.startIdx&&this.endIdx===t.endIdx?[]:this.startIdx<t.startIdx&&t.endIdx<this.endIdx?[new nt(this.sourceString,this.startIdx,t.startIdx),new nt(this.sourceString,t.endIdx,this.endIdx)]:this.startIdx<t.endIdx&&t.endIdx<this.endIdx?[new nt(this.sourceString,t.endIdx,this.endIdx)]:this.startIdx<t.startIdx&&t.startIdx<this.endIdx?[new nt(this.sourceString,this.startIdx,t.startIdx)]:[this]}relativeTo(t){if(this.sourceString!==t.sourceString)throw z();return a(this.startIdx>=t.startIdx&&this.endIdx<=t.endIdx,"other interval does not cover this one"),new nt(this.sourceString,this.startIdx-t.startIdx,this.endIdx-t.startIdx)}trimmed(){const{contents:t}=this,e=this.startIdx+t.match(/^\s*/)[0].length,n=this.endIdx-t.match(/\s*$/)[0].length;return new nt(this.sourceString,e,n)}subInterval(t,e){const n=this.startIdx+t;return new nt(this.sourceString,n,n+e)}}nt.coverage=function(t,...e){let{startIdx:n,endIdx:r}=t;for(const s of e){if(s.sourceString!==t.sourceString)throw z();n=Math.min(n,s.startIdx),r=Math.max(r,s.endIdx)}return new nt(t.sourceString,n,r)};class rt{constructor(t){this.source=t,this.pos=0,this.examinedLength=0}atEnd(){const t=this.pos>=this.source.length;return this.examinedLength=Math.max(this.examinedLength,this.pos+1),t}next(){const t=this.source[this.pos++];return this.examinedLength=Math.max(this.examinedLength,this.pos),t}nextCharCode(){const t=this.next();return t&&t.charCodeAt(0)}nextCodePoint(){const t=this.source.slice(this.pos++).codePointAt(0);return t>65535&&(this.pos+=1),this.examinedLength=Math.max(this.examinedLength,this.pos),t}matchString(t,e){let n;if(e){for(n=0;n<t.length;n++){const e=this.next(),r=t[n];if(null==e||e.toUpperCase()!==r.toUpperCase())return!1}return!0}for(n=0;n<t.length;n++)if(this.next()!==t[n])return!1;return!0}sourceSlice(t,e){return this.source.slice(t,e)}interval(t,e){return new nt(this.source,t,e||this.pos)}}class st{constructor(t,e,n,r,s,i,a){this.matcher=t,this.input=e,this.startExpr=n,this._cst=r,this._cstOffset=s,this._rightmostFailurePosition=i,this._rightmostFailures=a,this.failed()&&(o(this,"message",(function(){const t="Expected "+this.getExpectedText();return tt(this.input,this.getRightmostFailurePosition())+t})),o(this,"shortMessage",(function(){const t="expected "+this.getExpectedText(),e=Z(this.input,this.getRightmostFailurePosition());return"Line "+e.lineNum+", col "+e.colNum+": "+t})))}succeeded(){return!!this._cst}failed(){return!this.succeeded()}getRightmostFailurePosition(){return this._rightmostFailurePosition}getRightmostFailures(){if(!this._rightmostFailures){this.matcher.setInput(this.input);const t=this.matcher._match(this.startExpr,{tracing:!1,positionToRecordFailures:this.getRightmostFailurePosition()});this._rightmostFailures=t.getRightmostFailures()}return this._rightmostFailures}toString(){return this.succeeded()?"[match succeeded]":"[match failed at position "+this.getRightmostFailurePosition()+"]"}getExpectedText(){if(this.succeeded())throw new Error("cannot get expected text of a successful MatchResult");const t=new m;let e=this.getRightmostFailures();e=e.filter((t=>!t.isFluffy()));for(let n=0;n<e.length;n++)n>0&&(n===e.length-1?t.append(e.length>2?", or ":" or "):t.append(", ")),t.append(e[n].toString());return t.contents()}getInterval(){const t=this.getRightmostFailurePosition();return new nt(this.input,t,t)}}class it{constructor(){this.applicationMemoKeyStack=[],this.memo={},this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,this.currentLeftRecursion=void 0}isActive(t){return this.applicationMemoKeyStack.indexOf(t.toMemoKey())>=0}enter(t){this.applicationMemoKeyStack.push(t.toMemoKey())}exit(){this.applicationMemoKeyStack.pop()}startLeftRecursion(t,e){e.isLeftRecursion=!0,e.headApplication=t,e.nextLeftRecursion=this.currentLeftRecursion,this.currentLeftRecursion=e;const{applicationMemoKeyStack:n}=this,r=n.indexOf(t.toMemoKey())+1,s=n.slice(r);e.isInvolved=function(t){return s.indexOf(t)>=0},e.updateInvolvedApplicationMemoKeys=function(){for(let t=r;t<n.length;t++){const e=n[t];this.isInvolved(e)||s.push(e)}}}endLeftRecursion(){this.currentLeftRecursion=this.currentLeftRecursion.nextLeftRecursion}shouldUseMemoizedResult(t){if(!t.isLeftRecursion)return!0;const{applicationMemoKeyStack:e}=this;for(let n=0;n<e.length;n++){const r=e[n];if(t.isInvolved(r))return!1}return!0}memoize(t,e){return this.memo[t]=e,this.maxExaminedLength=Math.max(this.maxExaminedLength,e.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,e.rightmostFailureOffset),e}clearObsoleteEntries(t,e){if(t+this.maxExaminedLength<=e)return;const{memo:n}=this;this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,Object.keys(n).forEach((r=>{const s=n[r];t+s.examinedLength>e?delete n[r]:(this.maxExaminedLength=Math.max(this.maxExaminedLength,s.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,s.rightmostFailureOffset))}))}}const at="\u22c5",ot="\u2409",lt="\u240a",ut="\u240d",ct={succeeded:1,isRootNode:2,isImplicitSpaces:4,isMemoized:8,isHeadOfLeftRecursion:16,terminatesLR:32};function ht(t){return"string"===typeof t?t.replace(/ /g,at).replace(/\t/g,ot).replace(/\n/g,lt).replace(/\r/g,ut):String(t)}class dt{constructor(t,e,n,r,s,i,a){this.input=t,this.pos=this.pos1=e,this.pos2=n,this.source=new nt(t,e,n),this.expr=r,this.bindings=i,this.children=a||[],this.terminatingLREntry=null,this._flags=s?ct.succeeded:0}get displayString(){return this.expr.toDisplayString()}clone(){return this.cloneWithExpr(this.expr)}cloneWithExpr(t){const e=new dt(this.input,this.pos,this.pos2,t,this.succeeded,this.bindings,this.children);return e.isHeadOfLeftRecursion=this.isHeadOfLeftRecursion,e.isImplicitSpaces=this.isImplicitSpaces,e.isMemoized=this.isMemoized,e.isRootNode=this.isRootNode,e.terminatesLR=this.terminatesLR,e.terminatingLREntry=this.terminatingLREntry,e}recordLRTermination(t,e){this.terminatingLREntry=new dt(this.input,this.pos,this.pos2,this.expr,!1,[e],[t]),this.terminatingLREntry.terminatesLR=!0}walk(t,e){let n=t;function r(t,s,i){let a=!0;n.enter&&n.enter.call(e,t,s,i)===dt.prototype.SKIP&&(a=!1),a&&(t.children.forEach((e=>{r(e,t,i+1)})),n.exit&&n.exit.call(e,t,s,i))}"function"===typeof n&&(n={enter:n}),this.isRootNode?this.children.forEach((t=>{r(t,null,0)})):r(this,null,0)}toString(){const t=new m;return this.walk(((e,n,r)=>{if(!e)return this.SKIP;if("Alt"!==e.expr.constructor.name){if(t.append(function(t,e,n){const r=ht(t.slice(e,e+n));return r.length<n?r+u(" ",n-r.length).join(""):r}(e.input,e.pos,10)+u(" ",2*r+1).join("")),t.append((e.succeeded?"\u2713":"\u2717")+" "+e.displayString),e.isHeadOfLeftRecursion&&t.append(" (LR)"),e.succeeded){const n=ht(e.source.contents);t.append(" \u21d2  "),t.append("string"===typeof n?'"'+n+'"':n)}t.append("\n")}})),t.contents()}}let pt,ft,mt;dt.prototype.SKIP={},Object.keys(ct).forEach((t=>{const e=ct[t];Object.defineProperty(dt.prototype,t,{get(){return 0!==(this._flags&e)},set(t){t?this._flags|=e:this._flags&=~e}})})),x.prototype.allowsSkippingPrecedingSpace=i("allowsSkippingPrecedingSpace"),S.allowsSkippingPrecedingSpace=w.allowsSkippingPrecedingSpace=M.prototype.allowsSkippingPrecedingSpace=_.prototype.allowsSkippingPrecedingSpace=E.prototype.allowsSkippingPrecedingSpace=U.prototype.allowsSkippingPrecedingSpace=function(){return!0},A.prototype.allowsSkippingPrecedingSpace=k.prototype.allowsSkippingPrecedingSpace=D.prototype.allowsSkippingPrecedingSpace=F.prototype.allowsSkippingPrecedingSpace=P.prototype.allowsSkippingPrecedingSpace=T.prototype.allowsSkippingPrecedingSpace=R.prototype.allowsSkippingPrecedingSpace=function(){return!1},J((t=>{pt=t})),x.prototype.assertAllApplicationsAreValid=function(t,e){ft=0,this._assertAllApplicationsAreValid(t,e)},x.prototype._assertAllApplicationsAreValid=i("_assertAllApplicationsAreValid"),S._assertAllApplicationsAreValid=w._assertAllApplicationsAreValid=_.prototype._assertAllApplicationsAreValid=E.prototype._assertAllApplicationsAreValid=T.prototype._assertAllApplicationsAreValid=U.prototype._assertAllApplicationsAreValid=function(t,e){},D.prototype._assertAllApplicationsAreValid=function(t,e){ft++,this.expr._assertAllApplicationsAreValid(t,e),ft--},A.prototype._assertAllApplicationsAreValid=function(t,e){for(let n=0;n<this.terms.length;n++)this.terms[n]._assertAllApplicationsAreValid(t,e)},R.prototype._assertAllApplicationsAreValid=function(t,e){for(let n=0;n<this.factors.length;n++)this.factors[n]._assertAllApplicationsAreValid(t,e)},k.prototype._assertAllApplicationsAreValid=P.prototype._assertAllApplicationsAreValid=F.prototype._assertAllApplicationsAreValid=function(t,e){this.expr._assertAllApplicationsAreValid(t,e)},M.prototype._assertAllApplicationsAreValid=function(t,e,n=!1){const r=e.rules[this.ruleName],s=d(t)&&0===ft;if(!r)throw V(this.ruleName,e.name,this.source);if(!n&&d(this.ruleName)&&!s)throw function(t,e){return j("Cannot apply syntactic rule "+t+" from here (inside a lexical context)",e.source)}(this.ruleName,this);const i=this.args.length,a=r.formals.length;if(i!==a)throw function(t,e,n,r){return j("Wrong number of arguments for rule "+t+" (expected "+e+", got "+n+")",r)}(this.ruleName,a,i,this.source);const o=pt&&r===pt.rules.applySyntactic;if(pt&&r===pt.rules.caseInsensitive&&!(this.args[0]instanceof _))throw G('a Terminal (e.g. "abc")',this.args[0]);if(o){const t=this.args[0];if(!(t instanceof M))throw G("a syntactic rule application",t);if(!d(t.ruleName))throw function(t){const{ruleName:e}=t;return j(`applySyntactic is for syntactic rules, but '${e}' is a lexical rule. NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. See https://ohmjs.org/d/svl for more details.`,t.source)}(t);if(s)throw j("applySyntactic is not required here (in a syntactic context)",this.source)}this.args.forEach((n=>{if(n._assertAllApplicationsAreValid(t,e,o),1!==n.getArity())throw function(t,e){return j("Invalid parameter to rule "+t+": "+e+" has arity "+e.getArity()+", but parameter expressions must have arity 1",e.source)}(this.ruleName,n)}))},x.prototype.assertChoicesHaveUniformArity=i("assertChoicesHaveUniformArity"),S.assertChoicesHaveUniformArity=w.assertChoicesHaveUniformArity=_.prototype.assertChoicesHaveUniformArity=E.prototype.assertChoicesHaveUniformArity=T.prototype.assertChoicesHaveUniformArity=D.prototype.assertChoicesHaveUniformArity=U.prototype.assertChoicesHaveUniformArity=function(t){},A.prototype.assertChoicesHaveUniformArity=function(t){if(0===this.terms.length)return;const e=this.terms[0].getArity();for(let n=0;n<this.terms.length;n++){const r=this.terms[n];r.assertChoicesHaveUniformArity();const s=r.getArity();if(e!==s)throw q(t,e,s,r)}},I.prototype.assertChoicesHaveUniformArity=function(t){const e=this.terms[0].getArity(),n=this.terms[1].getArity();if(e!==n)throw q(t,n,e,this.terms[0])},R.prototype.assertChoicesHaveUniformArity=function(t){for(let e=0;e<this.factors.length;e++)this.factors[e].assertChoicesHaveUniformArity(t)},k.prototype.assertChoicesHaveUniformArity=function(t){this.expr.assertChoicesHaveUniformArity(t)},P.prototype.assertChoicesHaveUniformArity=function(t){},F.prototype.assertChoicesHaveUniformArity=function(t){this.expr.assertChoicesHaveUniformArity(t)},M.prototype.assertChoicesHaveUniformArity=function(t){},x.prototype.assertIteratedExprsAreNotNullable=i("assertIteratedExprsAreNotNullable"),S.assertIteratedExprsAreNotNullable=w.assertIteratedExprsAreNotNullable=_.prototype.assertIteratedExprsAreNotNullable=E.prototype.assertIteratedExprsAreNotNullable=T.prototype.assertIteratedExprsAreNotNullable=U.prototype.assertIteratedExprsAreNotNullable=function(t){},A.prototype.assertIteratedExprsAreNotNullable=function(t){for(let e=0;e<this.terms.length;e++)this.terms[e].assertIteratedExprsAreNotNullable(t)},R.prototype.assertIteratedExprsAreNotNullable=function(t){for(let e=0;e<this.factors.length;e++)this.factors[e].assertIteratedExprsAreNotNullable(t)},k.prototype.assertIteratedExprsAreNotNullable=function(t){if(this.expr.assertIteratedExprsAreNotNullable(t),this.expr.isNullable(t))throw W(this,[])},O.prototype.assertIteratedExprsAreNotNullable=P.prototype.assertIteratedExprsAreNotNullable=F.prototype.assertIteratedExprsAreNotNullable=D.prototype.assertIteratedExprsAreNotNullable=function(t){this.expr.assertIteratedExprsAreNotNullable(t)},M.prototype.assertIteratedExprsAreNotNullable=function(t){this.args.forEach((e=>{e.assertIteratedExprsAreNotNullable(t)}))};class gt{constructor(t){this.matchLength=t}get ctorName(){throw new Error("subclass responsibility")}numChildren(){return this.children?this.children.length:0}childAt(t){if(this.children)return this.children[t]}indexOfChild(t){return this.children.indexOf(t)}hasChildren(){return this.numChildren()>0}hasNoChildren(){return!this.hasChildren()}onlyChild(){if(1!==this.numChildren())throw new Error("cannot get only child of a node of type "+this.ctorName+" (it has "+this.numChildren()+" children)");return this.firstChild()}firstChild(){if(this.hasNoChildren())throw new Error("cannot get first child of a "+this.ctorName+" node, which has no children");return this.childAt(0)}lastChild(){if(this.hasNoChildren())throw new Error("cannot get last child of a "+this.ctorName+" node, which has no children");return this.childAt(this.numChildren()-1)}childBefore(t){const e=this.indexOfChild(t);if(e<0)throw new Error("Node.childBefore() called w/ an argument that is not a child");if(0===e)throw new Error("cannot get child before first child");return this.childAt(e-1)}childAfter(t){const e=this.indexOfChild(t);if(e<0)throw new Error("Node.childAfter() called w/ an argument that is not a child");if(e===this.numChildren()-1)throw new Error("cannot get child after last child");return this.childAt(e+1)}isTerminal(){return!1}isNonterminal(){return!1}isIteration(){return!1}isOptional(){return!1}}class yt extends gt{get ctorName(){return"_terminal"}isTerminal(){return!0}get primitiveValue(){throw new Error("The `primitiveValue` property was removed in Ohm v17.")}}class vt extends gt{constructor(t,e,n,r){super(r),this.ruleName=t,this.children=e,this.childOffsets=n}get ctorName(){return this.ruleName}isNonterminal(){return!0}isLexical(){return p(this.ctorName)}isSyntactic(){return d(this.ctorName)}}class bt extends gt{constructor(t,e,n,r){super(n),this.children=t,this.childOffsets=e,this.optional=r}get ctorName(){return"_iter"}isIteration(){return!0}isOptional(){return this.optional}}function xt(t,e){const n={};if(t.source&&e){const r=t.source.relativeTo(e);n.sourceInterval=[r.startIdx,r.endIdx]}return n}function St(t){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)}function wt(t){const e=Object.create(null);t.forEach((t=>{e[t]=(e[t]||0)+1})),Object.keys(e).forEach((n=>{if(e[n]<=1)return;let r=1;t.forEach(((e,s)=>{e===n&&(t[s]=e+"_"+r++)}))}))}x.prototype.eval=i("eval"),S.eval=function(t){const{inputStream:e}=t,n=e.pos,r=e.nextCodePoint();return void 0!==r?(t.pushBinding(new yt(String.fromCodePoint(r).length),n),!0):(t.processFailure(n,this),!1)},w.eval=function(t){const{inputStream:e}=t,n=e.pos;return e.atEnd()?(t.pushBinding(new yt(0),n),!0):(t.processFailure(n,this),!1)},_.prototype.eval=function(t){const{inputStream:e}=t,n=e.pos;return e.matchString(this.obj)?(t.pushBinding(new yt(this.obj.length),n),!0):(t.processFailure(n,this),!1)},E.prototype.eval=function(t){const{inputStream:e}=t,n=e.pos,r=this.matchCodePoint?e.nextCodePoint():e.nextCharCode();return void 0!==r&&this.from.codePointAt(0)<=r&&r<=this.to.codePointAt(0)?(t.pushBinding(new yt(String.fromCodePoint(r).length),n),!0):(t.processFailure(n,this),!1)},T.prototype.eval=function(t){return t.eval(t.currentApplication().args[this.index])},D.prototype.eval=function(t){t.enterLexifiedContext();const e=t.eval(this.expr);return t.exitLexifiedContext(),e},A.prototype.eval=function(t){for(let e=0;e<this.terms.length;e++)if(t.eval(this.terms[e]))return!0;return!1},R.prototype.eval=function(t){for(let e=0;e<this.factors.length;e++){const n=this.factors[e];if(!t.eval(n))return!1}return!0},k.prototype.eval=function(t){const{inputStream:e}=t,n=e.pos,r=this.getArity(),s=[],i=[];for(;s.length<r;)s.push([]),i.push([]);let a,o=0,l=n;for(;o<this.maxNumMatches&&t.eval(this.expr);){if(e.pos===l)throw W(this,t._applicationStack);l=e.pos,o++;const n=t._bindings.splice(t._bindings.length-r,r),u=t._bindingOffsets.splice(t._bindingOffsets.length-r,r);for(a=0;a<n.length;a++)s[a].push(n[a]),i[a].push(u[a])}if(o<this.minNumMatches)return!1;let u=t.posToOffset(n),c=0;if(o>0){const t=s[r-1],e=i[r-1],n=e[e.length-1]+t[t.length-1].matchLength;u=i[0][0],c=n-u}const h=this instanceof O;for(a=0;a<s.length;a++)t._bindings.push(new bt(s[a],i[a],c,h)),t._bindingOffsets.push(u);return!0},P.prototype.eval=function(t){const{inputStream:e}=t,n=e.pos;t.pushFailuresInfo();const r=t.eval(this.expr);return t.popFailuresInfo(),r?(t.processFailure(n,this),!1):(e.pos=n,!0)},F.prototype.eval=function(t){const{inputStream:e}=t,n=e.pos;return!!t.eval(this.expr)&&(e.pos=n,!0)},M.prototype.eval=function(t){const e=t.currentApplication(),n=e?e.args:[],r=this.substituteParams(n),s=t.getCurrentPosInfo();if(s.isActive(r))return r.handleCycle(t);const i=r.toMemoKey(),a=s.memo[i];if(a&&s.shouldUseMemoizedResult(a)){if(t.hasNecessaryInfo(a))return t.useMemoizedResult(t.inputStream.pos,a);delete s.memo[i]}return r.reallyEval(t)},M.prototype.handleCycle=function(t){const e=t.getCurrentPosInfo(),{currentLeftRecursion:n}=e,r=this.toMemoKey();let s=e.memo[r];return n&&n.headApplication.toMemoKey()===r?s.updateInvolvedApplicationMemoKeys():s||(s=e.memoize(r,{matchLength:0,examinedLength:0,value:!1,rightmostFailureOffset:-1}),e.startLeftRecursion(this,s)),t.useMemoizedResult(t.inputStream.pos,s)},M.prototype.reallyEval=function(t){const{inputStream:e}=t,n=e.pos,r=t.getCurrentPosInfo(),s=t.grammar.rules[this.ruleName],{body:i}=s,{description:o}=s;t.enterApplication(r,this),o&&t.pushFailuresInfo();const l=e.examinedLength;e.examinedLength=0;let u=this.evalOnce(i,t);const c=r.currentLeftRecursion,h=this.toMemoKey(),d=c&&c.headApplication.toMemoKey()===h;let p;t.doNotMemoize?t.doNotMemoize=!1:d?(u=this.growSeedResult(i,t,n,c,u),r.endLeftRecursion(),p=c,p.examinedLength=e.examinedLength-n,p.rightmostFailureOffset=t._getRightmostFailureOffset(),r.memoize(h,p)):c&&c.isInvolved(h)||(p=r.memoize(h,{matchLength:e.pos-n,examinedLength:e.examinedLength-n,value:u,failuresAtRightmostPosition:t.cloneRecordedFailures(),rightmostFailureOffset:t._getRightmostFailureOffset()}));const f=!!u;if(o&&(t.popFailuresInfo(),f||t.processFailure(n,this),p&&(p.failuresAtRightmostPosition=t.cloneRecordedFailures())),t.isTracing()&&p){const e=t.getTraceEntry(n,this,f,f?[u]:[]);d&&(a(null!=e.terminatingLREntry||!f),e.isHeadOfLeftRecursion=!0),p.traceEntry=e}return e.examinedLength=Math.max(e.examinedLength,l),t.exitApplication(r,u),f},M.prototype.evalOnce=function(t,e){const{inputStream:n}=e,r=n.pos;if(e.eval(t)){const s=t.getArity(),i=e._bindings.splice(e._bindings.length-s,s),a=e._bindingOffsets.splice(e._bindingOffsets.length-s,s),o=n.pos-r;return new vt(this.ruleName,i,a,o)}return!1},M.prototype.growSeedResult=function(t,e,n,r,s){if(!s)return!1;const{inputStream:i}=e;for(;;){if(r.matchLength=i.pos-n,r.value=s,r.failuresAtRightmostPosition=e.cloneRecordedFailures(),e.isTracing()){const t=e.trace[e.trace.length-1];r.traceEntry=new dt(e.input,n,i.pos,this,!0,[s],[t.clone()])}if(i.pos=n,s=this.evalOnce(t,e),i.pos-n<=r.matchLength)break;e.isTracing()&&e.trace.splice(-2,1)}return e.isTracing()&&r.traceEntry.recordLRTermination(e.trace.pop(),s),i.pos=n+r.matchLength,r.value},U.prototype.eval=function(t){const{inputStream:e}=t,n=e.pos,r=e.next();return r&&this.pattern.test(r)?(t.pushBinding(new yt(r.length),n),!0):(t.processFailure(n,this),!1)},x.prototype.getArity=i("getArity"),S.getArity=w.getArity=_.prototype.getArity=E.prototype.getArity=T.prototype.getArity=M.prototype.getArity=U.prototype.getArity=function(){return 1},A.prototype.getArity=function(){return 0===this.terms.length?0:this.terms[0].getArity()},R.prototype.getArity=function(){let t=0;for(let e=0;e<this.factors.length;e++)t+=this.factors[e].getArity();return t},k.prototype.getArity=function(){return this.expr.getArity()},P.prototype.getArity=function(){return 0},F.prototype.getArity=D.prototype.getArity=function(){return this.expr.getArity()},x.prototype.outputRecipe=i("outputRecipe"),S.outputRecipe=function(t,e){return["any",xt(this,e)]},w.outputRecipe=function(t,e){return["end",xt(this,e)]},_.prototype.outputRecipe=function(t,e){return["terminal",xt(this,e),this.obj]},E.prototype.outputRecipe=function(t,e){return["range",xt(this,e),this.from,this.to]},T.prototype.outputRecipe=function(t,e){return["param",xt(this,e),this.index]},A.prototype.outputRecipe=function(t,e){return["alt",xt(this,e)].concat(this.terms.map((n=>n.outputRecipe(t,e))))},I.prototype.outputRecipe=function(t,e){return this.terms[0].outputRecipe(t,e)},C.prototype.outputRecipe=function(t,e){const n=this.terms.slice(0,this.expansionPos),r=this.terms.slice(this.expansionPos+1);return["splice",xt(this,e),n.map((n=>n.outputRecipe(t,e))),r.map((n=>n.outputRecipe(t,e)))]},R.prototype.outputRecipe=function(t,e){return["seq",xt(this,e)].concat(this.factors.map((n=>n.outputRecipe(t,e))))},L.prototype.outputRecipe=N.prototype.outputRecipe=O.prototype.outputRecipe=P.prototype.outputRecipe=F.prototype.outputRecipe=D.prototype.outputRecipe=function(t,e){return[this.constructor.name.toLowerCase(),xt(this,e),this.expr.outputRecipe(t,e)]},M.prototype.outputRecipe=function(t,e){return["app",xt(this,e),this.ruleName,this.args.map((n=>n.outputRecipe(t,e)))]},U.prototype.outputRecipe=function(t,e){return["unicodeChar",xt(this,e),this.category]},x.prototype.introduceParams=i("introduceParams"),S.introduceParams=w.introduceParams=_.prototype.introduceParams=E.prototype.introduceParams=T.prototype.introduceParams=U.prototype.introduceParams=function(t){return this},A.prototype.introduceParams=function(t){return this.terms.forEach(((e,n,r)=>{r[n]=e.introduceParams(t)})),this},R.prototype.introduceParams=function(t){return this.factors.forEach(((e,n,r)=>{r[n]=e.introduceParams(t)})),this},k.prototype.introduceParams=P.prototype.introduceParams=F.prototype.introduceParams=D.prototype.introduceParams=function(t){return this.expr=this.expr.introduceParams(t),this},M.prototype.introduceParams=function(t){const e=t.indexOf(this.ruleName);if(e>=0){if(this.args.length>0)throw new Error("Parameterized rules cannot be passed as arguments to another rule.");return new T(e).withSource(this.source)}return this.args.forEach(((e,n,r)=>{r[n]=e.introduceParams(t)})),this},x.prototype.isNullable=function(t){return this._isNullable(t,Object.create(null))},x.prototype._isNullable=i("_isNullable"),S._isNullable=E.prototype._isNullable=T.prototype._isNullable=N.prototype._isNullable=U.prototype._isNullable=function(t,e){return!1},w._isNullable=function(t,e){return!0},_.prototype._isNullable=function(t,e){return"string"===typeof this.obj&&""===this.obj},A.prototype._isNullable=function(t,e){return 0===this.terms.length||this.terms.some((n=>n._isNullable(t,e)))},R.prototype._isNullable=function(t,e){return this.factors.every((n=>n._isNullable(t,e)))},L.prototype._isNullable=O.prototype._isNullable=P.prototype._isNullable=F.prototype._isNullable=function(t,e){return!0},D.prototype._isNullable=function(t,e){return this.expr._isNullable(t,e)},M.prototype._isNullable=function(t,e){const n=this.toMemoKey();if(!Object.prototype.hasOwnProperty.call(e,n)){const{body:r}=t.rules[this.ruleName],s=r.substituteParams(this.args);e[n]=!1,e[n]=s._isNullable(t,e)}return e[n]},x.prototype.substituteParams=i("substituteParams"),S.substituteParams=w.substituteParams=_.prototype.substituteParams=E.prototype.substituteParams=U.prototype.substituteParams=function(t){return this},T.prototype.substituteParams=function(t){return t[this.index]},A.prototype.substituteParams=function(t){return new A(this.terms.map((e=>e.substituteParams(t))))},R.prototype.substituteParams=function(t){return new R(this.factors.map((e=>e.substituteParams(t))))},k.prototype.substituteParams=P.prototype.substituteParams=F.prototype.substituteParams=D.prototype.substituteParams=function(t){return new this.constructor(this.expr.substituteParams(t))},M.prototype.substituteParams=function(t){if(0===this.args.length)return this;{const e=this.args.map((e=>e.substituteParams(t)));return new M(this.ruleName,e)}},x.prototype.toArgumentNameList=i("toArgumentNameList"),S.toArgumentNameList=function(t,e){return["any"]},w.toArgumentNameList=function(t,e){return["end"]},_.prototype.toArgumentNameList=function(t,e){return"string"===typeof this.obj&&/^[_a-zA-Z0-9]+$/.test(this.obj)?["_"+this.obj]:["$"+t]},E.prototype.toArgumentNameList=function(t,e){let n=this.from+"_to_"+this.to;return St(n)||(n="_"+n),St(n)||(n="$"+t),[n]},A.prototype.toArgumentNameList=function(t,e){const n=this.terms.map((e=>e.toArgumentNameList(t,!0))),r=[],s=n[0].length;for(let i=0;i<s;i++){const t=[];for(let r=0;r<this.terms.length;r++)t.push(n[r][i]);const e=h(t);r.push(e.join("_or_"))}return e||wt(r),r},R.prototype.toArgumentNameList=function(t,e){let n=[];return this.factors.forEach((e=>{const r=e.toArgumentNameList(t,!0);n=n.concat(r),t+=r.length})),e||wt(n),n},k.prototype.toArgumentNameList=function(t,e){const n=this.expr.toArgumentNameList(t,e).map((t=>"s"===t[t.length-1]?t+"es":t+"s"));return e||wt(n),n},O.prototype.toArgumentNameList=function(t,e){return this.expr.toArgumentNameList(t,e).map((t=>"opt"+t[0].toUpperCase()+t.slice(1)))},P.prototype.toArgumentNameList=function(t,e){return[]},F.prototype.toArgumentNameList=D.prototype.toArgumentNameList=function(t,e){return this.expr.toArgumentNameList(t,e)},M.prototype.toArgumentNameList=function(t,e){return[this.ruleName]},U.prototype.toArgumentNameList=function(t,e){return["$"+t]},T.prototype.toArgumentNameList=function(t,e){return["param"+this.index]},x.prototype.toDisplayString=i("toDisplayString"),A.prototype.toDisplayString=R.prototype.toDisplayString=function(){return this.source?this.source.trimmed().contents:"["+this.constructor.name+"]"},S.toDisplayString=w.toDisplayString=k.prototype.toDisplayString=P.prototype.toDisplayString=F.prototype.toDisplayString=D.prototype.toDisplayString=_.prototype.toDisplayString=E.prototype.toDisplayString=T.prototype.toDisplayString=function(){return this.toString()},M.prototype.toDisplayString=function(){if(this.args.length>0){const t=this.args.map((t=>t.toDisplayString()));return this.ruleName+"<"+t.join(",")+">"}return this.ruleName},U.prototype.toDisplayString=function(){return"Unicode ["+this.category+"] character"};class _t{constructor(t,e,n){if(!function(t){return"description"===t||"string"===t||"code"===t}(n))throw new Error("invalid Failure type: "+n);this.pexpr=t,this.text=e,this.type=n,this.fluffy=!1}getPExpr(){return this.pexpr}getText(){return this.text}getType(){return this.type}isDescription(){return"description"===this.type}isStringTerminal(){return"string"===this.type}isCode(){return"code"===this.type}isFluffy(){return this.fluffy}makeFluffy(){this.fluffy=!0}clearFluffy(){this.fluffy=!1}subsumes(t){return this.getText()===t.getText()&&this.type===t.type&&(!this.isFluffy()||this.isFluffy()&&t.isFluffy())}toString(){return"string"===this.type?JSON.stringify(this.getText()):this.getText()}clone(){const t=new _t(this.pexpr,this.text,this.type);return this.isFluffy()&&t.makeFluffy(),t}toKey(){return this.toString()+"#"+this.type}}x.prototype.toFailure=i("toFailure"),S.toFailure=function(t){return new _t(this,"any object","description")},w.toFailure=function(t){return new _t(this,"end of input","description")},_.prototype.toFailure=function(t){return new _t(this,this.obj,"string")},E.prototype.toFailure=function(t){return new _t(this,JSON.stringify(this.from)+".."+JSON.stringify(this.to),"code")},P.prototype.toFailure=function(t){const e=this.expr===S?"nothing":"not "+this.expr.toFailure(t);return new _t(this,e,"description")},F.prototype.toFailure=function(t){return this.expr.toFailure(t)},M.prototype.toFailure=function(t){let{description:e}=t.rules[this.ruleName];if(!e){e=(/^[aeiouAEIOU]/.test(this.ruleName)?"an":"a")+" "+this.ruleName}return new _t(this,e,"description")},U.prototype.toFailure=function(t){return new _t(this,"a Unicode ["+this.category+"] character","description")},A.prototype.toFailure=function(t){const e="("+this.terms.map((e=>e.toFailure(t))).join(" or ")+")";return new _t(this,e,"description")},R.prototype.toFailure=function(t){const e=this.factors.map((e=>e.toFailure(t))),n="("+e.join(" ")+")";return new _t(this,n,"description")},k.prototype.toFailure=function(t){const e="("+this.expr.toFailure(t)+this.operator+")";return new _t(this,e,"description")},x.prototype.toString=i("toString"),S.toString=function(){return"any"},w.toString=function(){return"end"},_.prototype.toString=function(){return JSON.stringify(this.obj)},E.prototype.toString=function(){return JSON.stringify(this.from)+".."+JSON.stringify(this.to)},T.prototype.toString=function(){return"$"+this.index},D.prototype.toString=function(){return"#("+this.expr.toString()+")"},A.prototype.toString=function(){return 1===this.terms.length?this.terms[0].toString():"("+this.terms.map((t=>t.toString())).join(" | ")+")"},R.prototype.toString=function(){return 1===this.factors.length?this.factors[0].toString():"("+this.factors.map((t=>t.toString())).join(" ")+")"},k.prototype.toString=function(){return this.expr+this.operator},P.prototype.toString=function(){return"~"+this.expr},F.prototype.toString=function(){return"&"+this.expr},M.prototype.toString=function(){if(this.args.length>0){const t=this.args.map((t=>t.toString()));return this.ruleName+"<"+t.join(",")+">"}return this.ruleName},U.prototype.toString=function(){return"\\p{"+this.category+"}"};class Et extends x{constructor(t){super(),this.obj=t}_getString(t){const e=t.currentApplication().args[this.obj.index];return a(e instanceof _,"expected a Terminal expression"),e.obj}allowsSkippingPrecedingSpace(){return!0}eval(t){const{inputStream:e}=t,n=e.pos,r=this._getString(t);return e.matchString(r,!0)?(t.pushBinding(new yt(r.length),n),!0):(t.processFailure(n,this),!1)}getArity(){return 1}substituteParams(t){return new Et(this.obj.substituteParams(t))}toDisplayString(){return this.obj.toDisplayString()+" (case-insensitive)"}toFailure(t){return new _t(this,this.obj.toFailure(t)+" (case-insensitive)","description")}_isNullable(t,e){return this.obj._isNullable(t,e)}}J((t=>{mt=t.rules.applySyntactic.body}));const Tt=new M("spaces");class At{constructor(t,e,n){this.matcher=t,this.startExpr=e,this.grammar=t.grammar,this.input=t.getInput(),this.inputStream=new rt(this.input),this.memoTable=t._memoTable,this.userData=void 0,this.doNotMemoize=!1,this._bindings=[],this._bindingOffsets=[],this._applicationStack=[],this._posStack=[0],this.inLexifiedContextStack=[!1],this.rightmostFailurePosition=-1,this._rightmostFailurePositionStack=[],this._recordedFailuresStack=[],void 0!==n&&(this.positionToRecordFailures=n,this.recordedFailures=Object.create(null))}posToOffset(t){return t-this._posStack[this._posStack.length-1]}enterApplication(t,e){this._posStack.push(this.inputStream.pos),this._applicationStack.push(e),this.inLexifiedContextStack.push(!1),t.enter(e),this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this.rightmostFailurePosition=-1}exitApplication(t,e){const n=this._posStack.pop();this._applicationStack.pop(),this.inLexifiedContextStack.pop(),t.exit(),this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,this._rightmostFailurePositionStack.pop()),e&&this.pushBinding(e,n)}enterLexifiedContext(){this.inLexifiedContextStack.push(!0)}exitLexifiedContext(){this.inLexifiedContextStack.pop()}currentApplication(){return this._applicationStack[this._applicationStack.length-1]}inSyntacticContext(){const t=this.currentApplication();return t?t.isSyntactic()&&!this.inLexifiedContext():this.startExpr.factors[0].isSyntactic()}inLexifiedContext(){return this.inLexifiedContextStack[this.inLexifiedContextStack.length-1]}skipSpaces(){return this.pushFailuresInfo(),this.eval(Tt),this.popBinding(),this.popFailuresInfo(),this.inputStream.pos}skipSpacesIfInSyntacticContext(){return this.inSyntacticContext()?this.skipSpaces():this.inputStream.pos}maybeSkipSpacesBefore(t){return t.allowsSkippingPrecedingSpace()&&t!==Tt?this.skipSpacesIfInSyntacticContext():this.inputStream.pos}pushBinding(t,e){this._bindings.push(t),this._bindingOffsets.push(this.posToOffset(e))}popBinding(){this._bindings.pop(),this._bindingOffsets.pop()}numBindings(){return this._bindings.length}truncateBindings(t){for(;this._bindings.length>t;)this.popBinding()}getCurrentPosInfo(){return this.getPosInfo(this.inputStream.pos)}getPosInfo(t){let e=this.memoTable[t];return e||(e=this.memoTable[t]=new it),e}processFailure(t,e){if(this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,t),this.recordedFailures&&t===this.positionToRecordFailures){const t=this.currentApplication();t&&(e=e.substituteParams(t.args)),this.recordFailure(e.toFailure(this.grammar),!1)}}recordFailure(t,e){const n=t.toKey();this.recordedFailures[n]?this.recordedFailures[n].isFluffy()&&!t.isFluffy()&&this.recordedFailures[n].clearFluffy():this.recordedFailures[n]=e?t.clone():t}recordFailures(t,e){Object.keys(t).forEach((n=>{this.recordFailure(t[n],e)}))}cloneRecordedFailures(){if(!this.recordedFailures)return;const t=Object.create(null);return Object.keys(this.recordedFailures).forEach((e=>{t[e]=this.recordedFailures[e].clone()})),t}getRightmostFailurePosition(){return this.rightmostFailurePosition}_getRightmostFailureOffset(){return this.rightmostFailurePosition>=0?this.posToOffset(this.rightmostFailurePosition):-1}getMemoizedTraceEntry(t,e){const n=this.memoTable[t];if(n&&e instanceof M){const t=n.memo[e.toMemoKey()];if(t&&t.traceEntry){const n=t.traceEntry.cloneWithExpr(e);return n.isMemoized=!0,n}}return null}getTraceEntry(t,e,n,r){if(e instanceof M){const t=this.currentApplication(),n=t?t.args:[];e=e.substituteParams(n)}return this.getMemoizedTraceEntry(t,e)||new dt(this.input,t,this.inputStream.pos,e,n,r,this.trace)}isTracing(){return!!this.trace}hasNecessaryInfo(t){return!(this.trace&&!t.traceEntry)&&(!this.recordedFailures||this.inputStream.pos+t.rightmostFailureOffset!==this.positionToRecordFailures||!!t.failuresAtRightmostPosition)}useMemoizedResult(t,e){this.trace&&this.trace.push(e.traceEntry);const n=this.inputStream.pos+e.rightmostFailureOffset;return this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,n),this.recordedFailures&&this.positionToRecordFailures===n&&e.failuresAtRightmostPosition&&this.recordFailures(e.failuresAtRightmostPosition,!0),this.inputStream.examinedLength=Math.max(this.inputStream.examinedLength,e.examinedLength+t),!!e.value&&(this.inputStream.pos+=e.matchLength,this.pushBinding(e.value,t),!0)}eval(t){const{inputStream:e}=this,n=this._bindings.length,r=this.userData;let s;this.recordedFailures&&(s=this.recordedFailures,this.recordedFailures=Object.create(null));const i=e.pos,a=this.maybeSkipSpacesBefore(t);let o;this.trace&&(o=this.trace,this.trace=[]);const l=t.eval(this);if(this.trace){const e=this._bindings.slice(n),r=this.getTraceEntry(a,t,l,e);r.isImplicitSpaces=t===Tt,r.isRootNode=t===this.startExpr,o.push(r),this.trace=o}return l?this.recordedFailures&&e.pos===this.positionToRecordFailures&&Object.keys(this.recordedFailures).forEach((t=>{this.recordedFailures[t].makeFluffy()})):(e.pos=i,this.truncateBindings(n),this.userData=r),this.recordedFailures&&this.recordFailures(s,!1),t===mt&&this.skipSpaces(),l}getMatchResult(){let t;this.grammar._setUpMatchState(this),this.eval(this.startExpr),this.recordedFailures&&(t=Object.keys(this.recordedFailures).map((t=>this.recordedFailures[t])));const e=this._bindings[0];return e&&(e.grammar=this.grammar),new st(this.matcher,this.input,this.startExpr,e,this._bindingOffsets[0],this.rightmostFailurePosition,t)}getTrace(){this.trace=[];const t=this.getMatchResult(),e=this.trace[this.trace.length-1];return e.result=t,e}pushFailuresInfo(){this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this._recordedFailuresStack.push(this.recordedFailures)}popFailuresInfo(){this.rightmostFailurePosition=this._rightmostFailurePositionStack.pop(),this.recordedFailures=this._recordedFailuresStack.pop()}}class It{constructor(t){this.grammar=t,this._memoTable=[],this._input="",this._isMemoTableStale=!1}_resetMemoTable(){this._memoTable=[],this._isMemoTableStale=!1}getInput(){return this._input}setInput(t){return this._input!==t&&this.replaceInputRange(0,this._input.length,t),this}replaceInputRange(t,e,n){const r=this._input,s=this._memoTable;if(t<0||t>r.length||e<0||e>r.length||t>e)throw new Error("Invalid indices: "+t+" and "+e);this._input=r.slice(0,t)+n+r.slice(e),this._input!==r&&s.length>0&&(this._isMemoTableStale=!0);const i=s.slice(e);s.length=t;for(let a=0;a<n.length;a++)s.push(void 0);for(const a of i)s.push(a);for(let a=0;a<t;a++){const e=s[a];e&&e.clearObsoleteEntries(a,t)}return this}match(t,e={incremental:!0}){return this._match(this._getStartExpr(t),{incremental:e.incremental,tracing:!1})}trace(t,e={incremental:!0}){return this._match(this._getStartExpr(t),{incremental:e.incremental,tracing:!0})}_match(t,e={}){const n={tracing:!1,incremental:!0,positionToRecordFailures:void 0,...e};if(n.incremental){if(this._isMemoTableStale&&!this.grammar.supportsIncrementalParsing)throw function(t){return j(`Grammar '${t.name}' does not support incremental parsing`)}(this.grammar)}else this._resetMemoTable();const r=new At(this,t,n.positionToRecordFailures);return n.tracing?r.getTrace():r.getMatchResult()}_getStartExpr(t){const e=t||this.grammar.defaultStartRule;if(!e)throw new Error("Missing start rule argument -- the grammar has no default start rule.");const n=this.grammar.parseApplication(e);return new R([n,w])}}const Ct=[],Rt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);class kt{constructor(t,e,n){this._node=t,this.source=e,this._baseInterval=n,t.isNonterminal()&&a(e===n),this._childWrappers=[]}_forgetMemoizedResultFor(t){delete this._node[this._semantics.attributeKeys[t]],this.children.forEach((e=>{e._forgetMemoizedResultFor(t)}))}child(t){if(!(0<=t&&t<this._node.numChildren()))return;let e=this._childWrappers[t];if(!e){const n=this._node.childAt(t),r=this._node.childOffsets[t],s=this._baseInterval.subInterval(r,n.matchLength),i=n.isNonterminal()?s:this._baseInterval;e=this._childWrappers[t]=this._semantics.wrap(n,s,i)}return e}_children(){for(let t=0;t<this._node.numChildren();t++)this.child(t);return this._childWrappers}isIteration(){return this._node.isIteration()}isTerminal(){return this._node.isTerminal()}isNonterminal(){return this._node.isNonterminal()}isSyntactic(){return this.isNonterminal()&&this._node.isSyntactic()}isLexical(){return this.isNonterminal()&&this._node.isLexical()}isOptional(){return this._node.isOptional()}iteration(t){const e=t||[],n=e.map((t=>t._node)),r=new bt(n,[],-1,!1),s=this._semantics.wrap(r,null,null);return s._childWrappers=e,s}get children(){return this._children()}get ctorName(){return this._node.ctorName}get numChildren(){return this._node.numChildren()}get sourceString(){return this.source.contents}}class Lt{constructor(t,e){const n=this;if(this.grammar=t,this.checkedActionDicts=!1,this.Wrapper=class extends(e?e.Wrapper:kt){constructor(t,e,r){super(t,e,r),n.checkActionDictsIfHaventAlready(),this._semantics=n}toString(){return"[semantics wrapper for "+n.grammar.name+"]"}},this.super=e,e){if(!t.equals(this.super.grammar)&&!t._inheritsFrom(this.super.grammar))throw new Error("Cannot extend a semantics for grammar '"+this.super.grammar.name+"' for use with grammar '"+t.name+"' (not a sub-grammar)");this.operations=Object.create(this.super.operations),this.attributes=Object.create(this.super.attributes),this.attributeKeys=Object.create(null);for(const t in this.attributes)Object.defineProperty(this.attributeKeys,t,{value:et(t)})}else this.operations=Object.create(null),this.attributes=Object.create(null),this.attributeKeys=Object.create(null)}toString(){return"[semantics for "+this.grammar.name+"]"}checkActionDictsIfHaventAlready(){this.checkedActionDicts||(this.checkActionDicts(),this.checkedActionDicts=!0)}checkActionDicts(){let t;for(t in this.operations)this.operations[t].checkActionDict(this.grammar);for(t in this.attributes)this.attributes[t].checkActionDict(this.grammar)}toRecipe(t){function e(t){return t.super!==Lt.BuiltInSemantics._getSemantics()}let n="(function(g) {\n";if(e(this)){n+="  var semantics = "+this.super.toRecipe(!0)+"(g";const t=this.super.grammar;let e=this.grammar;for(;e!==t;)n+=".superGrammar",e=e.superGrammar;n+=");\n",n+="  return g.extendSemantics(semantics)"}else n+="  return g.createSemantics()";return["Operation","Attribute"].forEach((t=>{const r=this[t.toLowerCase()+"s"];Object.keys(r).forEach((s=>{const{actionDict:i,formals:a,builtInDefault:o}=r[s];let l,u=s;a.length>0&&(u+="("+a.join(", ")+")"),l=e(this)&&this.super[t.toLowerCase()+"s"][s]?"extend"+t:"add"+t,n+="\n    ."+l+"("+JSON.stringify(u)+", {";const c=[];Object.keys(i).forEach((t=>{if(i[t]!==o){let e=i[t].toString().trim();e=e.replace(/^.*\(/,"function("),c.push("\n      "+JSON.stringify(t)+": "+e)}})),n+=c.join(",")+"\n    })"}))})),n+=";\n  })",t||(n="(function() {\n  var grammar = this.fromRecipe("+this.grammar.toRecipe()+");\n  var semantics = "+n+"(grammar);\n  return semantics;\n});\n"),n}addOperationOrAttribute(t,e,n){const r=t+"s",s=Nt(e,t),{name:i}=s,{formals:a}=s;this.assertNewName(i,t);const o=function(t,e,n){return function(...r){const s=(this._semantics.operations[e]||this._semantics.attributes[e]).formals.map((t=>this.args[t]));if(this.isIteration()||1!==r.length)throw function(t,e,n,r){let s=r.slice(0,-1).map((t=>{const e="  "+t[0].name+" > "+t[1];return 3===t.length?e+" for '"+t[2]+"'":e})).join("\n");s+="\n  "+e+" > "+t;let i="";"_iter"===t&&(i=["\nNOTE: as of Ohm v16, there is no default action for iteration nodes \u2014 see ","  https://ohmjs.org/d/dsa for details."].join("\n"));const a=j([`Missing semantic action for '${t}' in ${n} '${e}'.${i}`,"Action stack (most recent call last):",s].join("\n"));return a.name="missingSemanticAction",a}(this.ctorName,e,t,Ct);return n.apply(r[0],s)}}(t,i,c),l={_default:o};Object.keys(n).forEach((t=>{l[t]=n[t]}));const u="operation"===t?new Ot(i,a,l,o):new Pt(i,l,o);function c(...e){const n=this._semantics[r][i];if(arguments.length!==n.formals.length)throw new Error("Invalid number of arguments passed to "+i+" "+t+" (expected "+n.formals.length+", got "+arguments.length+")");const s=Object.create(null);for(const[t,r]of Object.entries(e)){s[n.formals[t]]=r}const a=this.args;this.args=s;const o=n.execute(this._semantics,this);return this.args=a,o}u.checkActionDict(this.grammar),this[r][i]=u,"operation"===t?(this.Wrapper.prototype[i]=c,this.Wrapper.prototype[i].toString=function(){return"["+i+" operation]"}):(Object.defineProperty(this.Wrapper.prototype,i,{get:c,configurable:!0}),Object.defineProperty(this.attributeKeys,i,{value:et(i)}))}extendOperationOrAttribute(t,e,n){const r=t+"s";if(Nt(e,"attribute"),!this.super||!(e in this.super[r]))throw new Error("Cannot extend "+t+" '"+e+"': did not inherit an "+t+" with that name");if(Rt(this[r],e))throw new Error("Cannot extend "+t+" '"+e+"' again");const s=this[r][e].formals,i=this[r][e].actionDict,a=Object.create(i);Object.keys(n).forEach((t=>{a[t]=n[t]})),this[r][e]="operation"===t?new Ot(e,s,a):new Pt(e,a),this[r][e].checkActionDict(this.grammar)}assertNewName(t,e){if(Rt(kt.prototype,t))throw new Error("Cannot add "+e+" '"+t+"': that's a reserved name");if(t in this.operations)throw new Error("Cannot add "+e+" '"+t+"': an operation with that name already exists");if(t in this.attributes)throw new Error("Cannot add "+e+" '"+t+"': an attribute with that name already exists")}wrap(t,e,n){const r=n||e;return t instanceof this.Wrapper?t:new this.Wrapper(t,e,r)}}function Nt(t,e){if(!Lt.prototypeGrammar)return a(-1===t.indexOf("(")),{name:t,formals:[]};const n=Lt.prototypeGrammar.match(t,"operation"===e?"OperationSignature":"AttributeSignature");if(n.failed())throw new Error(n.message);return Lt.prototypeGrammarSemantics(n).parse()}Lt.createSemantics=function(t,e){const n=new Lt(t,void 0!==e?e:Lt.BuiltInSemantics._getSemantics()),r=function(e){if(!(e instanceof st))throw new TypeError("Semantics expected a MatchResult, but got "+v(e));if(e.failed())throw new TypeError("cannot apply Semantics to "+e.toString());const r=e._cst;if(r.grammar!==t)throw new Error("Cannot use a MatchResult from grammar '"+r.grammar.name+"' with a semantics for '"+t.name+"'");const s=new rt(e.input);return n.wrap(r,s.interval(e._cstOffset,e.input.length))};return r.addOperation=function(t,e){return n.addOperationOrAttribute("operation",t,e),r},r.extendOperation=function(t,e){return n.extendOperationOrAttribute("operation",t,e),r},r.addAttribute=function(t,e){return n.addOperationOrAttribute("attribute",t,e),r},r.extendAttribute=function(t,e){return n.extendOperationOrAttribute("attribute",t,e),r},r._getActionDict=function(e){const r=n.operations[e]||n.attributes[e];if(!r)throw new Error('"'+e+'" is not a valid operation or attribute name in this semantics for "'+t.name+'"');return r.actionDict},r._remove=function(t){let e;return t in n.operations?(e=n.operations[t],delete n.operations[t]):t in n.attributes&&(e=n.attributes[t],delete n.attributes[t]),delete n.Wrapper.prototype[t],e},r.getOperationNames=function(){return Object.keys(n.operations)},r.getAttributeNames=function(){return Object.keys(n.attributes)},r.getGrammar=function(){return n.grammar},r.toRecipe=function(t){return n.toRecipe(t)},r.toString=n.toString.bind(n),r._getSemantics=function(){return n},r};class Ot{constructor(t,e,n,r){this.name=t,this.formals=e,this.actionDict=n,this.builtInDefault=r}checkActionDict(t){t._checkTopDownActionDict(this.typeName,this.name,this.actionDict)}execute(t,e){try{const{ctorName:t}=e._node;let n=this.actionDict[t];return n?(Ct.push([this,t]),n.apply(e,e._children())):e.isNonterminal()&&(n=this.actionDict._nonterminal,n)?(Ct.push([this,"_nonterminal",t]),n.apply(e,e._children())):(Ct.push([this,"default action",t]),this.actionDict._default.apply(e,e._children()))}finally{Ct.pop()}}}Ot.prototype.typeName="operation";class Pt extends Ot{constructor(t,e,n){super(t,[],e,n)}execute(t,e){const n=e._node,r=t.attributeKeys[this.name];return Rt(n,r)||(n[r]=Ot.prototype.execute.call(this,t,e)),n[r]}}Pt.prototype.typeName="attribute";const Ft=["_iter","_terminal","_nonterminal","_default"];function Dt(t){return Object.keys(t.rules).sort().map((e=>t.rules[e]))}let Mt,Ut;class jt{constructor(t,e,n,r){if(this.name=t,this.superGrammar=e,this.rules=n,r){if(!(r in n))throw new Error("Invalid start rule: '"+r+"' is not a rule in grammar '"+t+"'");this.defaultStartRule=r}this._matchStateInitializer=void 0,this.supportsIncrementalParsing=!0}matcher(){return new It(this)}isBuiltIn(){return this===jt.ProtoBuiltInRules||this===jt.BuiltInRules}equals(t){if(this===t)return!0;if(null==t||this.name!==t.name||this.defaultStartRule!==t.defaultStartRule||this.superGrammar!==t.superGrammar&&!this.superGrammar.equals(t.superGrammar))return!1;const e=Dt(this),n=Dt(t);return e.length===n.length&&e.every(((t,e)=>t.description===n[e].description&&t.formals.join(",")===n[e].formals.join(",")&&t.body.toString()===n[e].body.toString()))}match(t,e){const n=this.matcher();return n.replaceInputRange(0,0,t),n.match(e)}trace(t,e){const n=this.matcher();return n.replaceInputRange(0,0,t),n.trace(e)}createSemantics(){return Lt.createSemantics(this)}extendSemantics(t){return Lt.createSemantics(this,t._getSemantics())}_checkTopDownActionDict(t,e,n){const r=[];for(const s in n){const t=n[s];if(!Ft.includes(s)&&!(s in this.rules)){r.push(`'${s}' is not a valid semantic action for '${this.name}'`);continue}if("function"!==typeof t){r.push(`'${s}' must be a function in an action dictionary for '${this.name}'`);continue}const e=t.length,i=this._topDownActionArity(s);if(e!==i){let t;t="_iter"===s||"_nonterminal"===s?`it should use a rest parameter, e.g. \`${s}(...children) {}\`. NOTE: this is new in Ohm v16 \u2014 see https://ohmjs.org/d/ati for details.`:`expected ${i}, got ${e}`,r.push(`Semantic action '${s}' has the wrong arity: ${t}`)}}if(r.length>0){const n=r.map((t=>"- "+t)),s=new Error([`Found errors in the action dictionary of the '${e}' ${t}:`,...n].join("\n"));throw s.problems=r,s}}_topDownActionArity(t){return Ft.includes(t)?0:this.rules[t].body.getArity()}_inheritsFrom(t){let e=this.superGrammar;for(;e;){if(e.equals(t,!0))return!0;e=e.superGrammar}return!1}toRecipe(t=void 0){const e={};this.source&&(e.source=this.source.contents);let n=null;this.defaultStartRule&&(n=this.defaultStartRule);const r={};Object.keys(this.rules).forEach((t=>{const e=this.rules[t],{body:n}=e,s=!this.superGrammar||!this.superGrammar.rules[t];let i;i=s?"define":n instanceof I?"extend":"override";const a={};if(e.source&&this.source){const t=e.source.relativeTo(this.source);a.sourceInterval=[t.startIdx,t.endIdx]}const o=s?e.description:null,l=n.outputRecipe(e.formals,this.source);r[t]=[i,a,o,e.formals,l]}));let s="null";t?s=t:this.superGrammar&&!this.superGrammar.isBuiltIn()&&(s=this.superGrammar.toRecipe());const i=[...["grammar",e,this.name].map(JSON.stringify),s,...[n,r].map(JSON.stringify)];return`[${i.join(",")}]`.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}toOperationActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}toAttributeActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}_toOperationOrAttributeActionDictionaryTemplate(){const t=new m;t.append("{");let e=!0;for(const n in this.rules){const{body:r}=this.rules[n];e?e=!1:t.append(","),t.append("\n"),t.append("  "),this.addSemanticActionTemplate(n,r,t)}return t.append("\n}"),t.contents()}addSemanticActionTemplate(t,e,n){n.append(t),n.append(": function(");const r=this._topDownActionArity(t);n.append(u("_",r).join(", ")),n.append(") {\n"),n.append("  }")}parseApplication(t){let e;if(-1===t.indexOf("<"))e=new M(t);else{const n=Mt.match(t,"Base_application");e=Ut(n,{})}if(!(e.ruleName in this.rules))throw V(e.ruleName,this.name);const{formals:n}=this.rules[e.ruleName];if(n.length!==e.args.length){const{source:t}=this.rules[e.ruleName];throw $(e.ruleName,n.length,e.args.length,t)}return e}_setUpMatchState(t){this._matchStateInitializer&&this._matchStateInitializer(t)}}jt.ProtoBuiltInRules=new jt("ProtoBuiltInRules",void 0,{any:{body:S,formals:[],description:"any character",primitive:!0},end:{body:w,formals:[],description:"end of input",primitive:!0},caseInsensitive:{body:new Et(new T(0)),formals:["str"],primitive:!0},lower:{body:new U("Ll"),formals:[],description:"a lowercase letter",primitive:!0},upper:{body:new U("Lu"),formals:[],description:"an uppercase letter",primitive:!0},unicodeLtmo:{body:new U("Ltmo"),formals:[],description:"a Unicode character in Lt, Lm, or Lo",primitive:!0},spaces:{body:new L(new M("space")),formals:[]},space:{body:new E("\0"," "),formals:[],description:"a space"}}),jt.initApplicationParser=function(t,e){Mt=t,Ut=e};class zt{constructor(t){this.name=t}sourceInterval(t,e){return this.source.subInterval(t,e-t)}ensureSuperGrammar(){return this.superGrammar||this.withSuperGrammar("BuiltInRules"===this.name?jt.ProtoBuiltInRules:jt.BuiltInRules),this.superGrammar}ensureSuperGrammarRuleForOverriding(t,e){const n=this.ensureSuperGrammar().rules[t];if(!n)throw r=t,s=this.superGrammar.name,j("Cannot override rule "+r+" because it is not declared in "+s,e);var r,s;return n}installOverriddenOrExtendedRule(t,e,n,r){const s=c(e);if(s.length>0)throw H(t,s,r);const i=this.ensureSuperGrammar().rules[t],a=i.formals,o=a?a.length:0;if(e.length!==o)throw $(t,o,e.length,r);return this.install(t,e,n,i.description,r)}install(t,e,n,r,s,i=!1){return this.rules[t]={body:n.introduceParams(e),formals:e,description:r,source:s,primitive:i},this}withSuperGrammar(t){if(this.superGrammar)throw new Error("the super grammar of a GrammarDecl cannot be set more than once");return this.superGrammar=t,this.rules=Object.create(t.rules),t.isBuiltIn()||(this.defaultStartRule=t.defaultStartRule),this}withDefaultStartRule(t){return this.defaultStartRule=t,this}withSource(t){return this.source=new rt(t).interval(0,t.length),this}build(){const t=new jt(this.name,this.ensureSuperGrammar(),this.rules,this.defaultStartRule);t._matchStateInitializer=t.superGrammar._matchStateInitializer,t.supportsIncrementalParsing=t.superGrammar.supportsIncrementalParsing;const e=[];let n=!1;return Object.keys(t.rules).forEach((r=>{const{body:s}=t.rules[r];try{s.assertChoicesHaveUniformArity(r)}catch(i){e.push(i)}try{s.assertAllApplicationsAreValid(r,t)}catch(i){e.push(i),n=!0}})),n||Object.keys(t.rules).forEach((n=>{const{body:r}=t.rules[n];try{r.assertIteratedExprsAreNotNullable(t,[])}catch(s){e.push(s)}})),e.length>0&&K(e),this.source&&(t.source=this.source),t}define(t,e,n,r,s,i){if(this.ensureSuperGrammar(),this.superGrammar.rules[t])throw B(t,this.name,this.superGrammar.name,s);if(this.rules[t])throw B(t,this.name,this.name,s);const a=c(e);if(a.length>0)throw H(t,a,s);return this.install(t,e,n,r,s,i)}override(t,e,n,r,s){return this.ensureSuperGrammarRuleForOverriding(t,s),this.installOverriddenOrExtendedRule(t,e,n,s),this}extend(t,e,n,r,s){if(!this.ensureSuperGrammar().rules[t])throw i=t,a=this.superGrammar.name,j("Cannot extend rule "+i+" because it is not declared in "+a,s);var i,a;const o=new I(this.superGrammar,t,n);return o.source=n.source,this.installOverriddenOrExtendedRule(t,e,o,s),this}}class Vt{constructor(){this.currentDecl=null,this.currentRuleName=null}newGrammar(t){return new zt(t)}grammar(t,e,n,r,s){const i=new zt(e);return n&&i.withSuperGrammar(n instanceof jt?n:this.fromRecipe(n)),r&&i.withDefaultStartRule(r),t&&t.source&&i.withSource(t.source),this.currentDecl=i,Object.keys(s).forEach((t=>{this.currentRuleName=t;const e=s[t],n=e[0],r=e[1],a=e[2],o=e[3],l=this.fromRecipe(e[4]);let u;i.source&&r&&r.sourceInterval&&(u=i.source.subInterval(r.sourceInterval[0],r.sourceInterval[1]-r.sourceInterval[0])),i[n](t,o,l,a,u)})),this.currentRuleName=this.currentDecl=null,i.build()}terminal(t){return new _(t)}range(t,e){return new E(t,e)}param(t){return new T(t)}alt(...t){let e=[];for(let n of t)n instanceof x||(n=this.fromRecipe(n)),n instanceof A?e=e.concat(n.terms):e.push(n);return 1===e.length?e[0]:new A(e)}seq(...t){let e=[];for(let n of t)n instanceof x||(n=this.fromRecipe(n)),n instanceof R?e=e.concat(n.factors):e.push(n);return 1===e.length?e[0]:new R(e)}star(t){return t instanceof x||(t=this.fromRecipe(t)),new L(t)}plus(t){return t instanceof x||(t=this.fromRecipe(t)),new N(t)}opt(t){return t instanceof x||(t=this.fromRecipe(t)),new O(t)}not(t){return t instanceof x||(t=this.fromRecipe(t)),new P(t)}lookahead(t){return t instanceof x||(t=this.fromRecipe(t)),new F(t)}lex(t){return t instanceof x||(t=this.fromRecipe(t)),new D(t)}app(t,e){return e&&e.length>0&&(e=e.map((function(t){return t instanceof x?t:this.fromRecipe(t)}),this)),new M(t,e)}splice(t,e){return new C(this.currentDecl.superGrammar,this.currentRuleName,t.map((t=>this.fromRecipe(t))),e.map((t=>this.fromRecipe(t))))}fromRecipe(t){const e="grammar"===t[0]?t.slice(1):t.slice(2),n=this[t[0]](...e),r=t[1];return r&&r.sourceInterval&&this.currentDecl&&n.withSource(this.currentDecl.sourceInterval(...r.sourceInterval)),n}}function Bt(t){return"function"===typeof t?t.call(new Vt):("string"===typeof t&&(t=JSON.parse(t)),(new Vt).fromRecipe(t))}const $t=Bt(["grammar",{source:'BuiltInRules {\n\n  alnum  (an alpha-numeric character)\n    = letter\n    | digit\n\n  letter  (a letter)\n    = lower\n    | upper\n    | unicodeLtmo\n\n  digit  (a digit)\n    = "0".."9"\n\n  hexDigit  (a hexadecimal digit)\n    = digit\n    | "a".."f"\n    | "A".."F"\n\n  ListOf<elem, sep>\n    = NonemptyListOf<elem, sep>\n    | EmptyListOf<elem, sep>\n\n  NonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  EmptyListOf<elem, sep>\n    = /* nothing */\n\n  listOf<elem, sep>\n    = nonemptyListOf<elem, sep>\n    | emptyListOf<elem, sep>\n\n  nonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  emptyListOf<elem, sep>\n    = /* nothing */\n\n  // Allows a syntactic rule application within a lexical context.\n  applySyntactic<app> = app\n}'},"BuiltInRules",null,null,{alnum:["define",{sourceInterval:[18,78]},"an alpha-numeric character",[],["alt",{sourceInterval:[60,78]},["app",{sourceInterval:[60,66]},"letter",[]],["app",{sourceInterval:[73,78]},"digit",[]]]],letter:["define",{sourceInterval:[82,142]},"a letter",[],["alt",{sourceInterval:[107,142]},["app",{sourceInterval:[107,112]},"lower",[]],["app",{sourceInterval:[119,124]},"upper",[]],["app",{sourceInterval:[131,142]},"unicodeLtmo",[]]]],digit:["define",{sourceInterval:[146,177]},"a digit",[],["range",{sourceInterval:[169,177]},"0","9"]],hexDigit:["define",{sourceInterval:[181,254]},"a hexadecimal digit",[],["alt",{sourceInterval:[219,254]},["app",{sourceInterval:[219,224]},"digit",[]],["range",{sourceInterval:[231,239]},"a","f"],["range",{sourceInterval:[246,254]},"A","F"]]],ListOf:["define",{sourceInterval:[258,336]},null,["elem","sep"],["alt",{sourceInterval:[282,336]},["app",{sourceInterval:[282,307]},"NonemptyListOf",[["param",{sourceInterval:[297,301]},0],["param",{sourceInterval:[303,306]},1]]],["app",{sourceInterval:[314,336]},"EmptyListOf",[["param",{sourceInterval:[326,330]},0],["param",{sourceInterval:[332,335]},1]]]]],NonemptyListOf:["define",{sourceInterval:[340,388]},null,["elem","sep"],["seq",{sourceInterval:[372,388]},["param",{sourceInterval:[372,376]},0],["star",{sourceInterval:[377,388]},["seq",{sourceInterval:[378,386]},["param",{sourceInterval:[378,381]},1],["param",{sourceInterval:[382,386]},0]]]]],EmptyListOf:["define",{sourceInterval:[392,434]},null,["elem","sep"],["seq",{sourceInterval:[438,438]}]],listOf:["define",{sourceInterval:[438,516]},null,["elem","sep"],["alt",{sourceInterval:[462,516]},["app",{sourceInterval:[462,487]},"nonemptyListOf",[["param",{sourceInterval:[477,481]},0],["param",{sourceInterval:[483,486]},1]]],["app",{sourceInterval:[494,516]},"emptyListOf",[["param",{sourceInterval:[506,510]},0],["param",{sourceInterval:[512,515]},1]]]]],nonemptyListOf:["define",{sourceInterval:[520,568]},null,["elem","sep"],["seq",{sourceInterval:[552,568]},["param",{sourceInterval:[552,556]},0],["star",{sourceInterval:[557,568]},["seq",{sourceInterval:[558,566]},["param",{sourceInterval:[558,561]},1],["param",{sourceInterval:[562,566]},0]]]]],emptyListOf:["define",{sourceInterval:[572,682]},null,["elem","sep"],["seq",{sourceInterval:[685,685]}]],applySyntactic:["define",{sourceInterval:[685,710]},null,["app"],["param",{sourceInterval:[707,710]},0]]}]);jt.BuiltInRules=$t,function(t){X.forEach((e=>{e(t)})),X=null}(jt.BuiltInRules);const Ht=Bt(["grammar",{source:'Ohm {\n\n  Grammars\n    = Grammar*\n\n  Grammar\n    = ident SuperGrammar? "{" Rule* "}"\n\n  SuperGrammar\n    = "<:" ident\n\n  Rule\n    = ident Formals? ruleDescr? "="  RuleBody  -- define\n    | ident Formals?            ":=" OverrideRuleBody  -- override\n    | ident Formals?            "+=" RuleBody  -- extend\n\n  RuleBody\n    = "|"? NonemptyListOf<TopLevelTerm, "|">\n\n  TopLevelTerm\n    = Seq caseName  -- inline\n    | Seq\n\n  OverrideRuleBody\n    = "|"? NonemptyListOf<OverrideTopLevelTerm, "|">\n\n  OverrideTopLevelTerm\n    = "..."  -- superSplice\n    | TopLevelTerm\n\n  Formals\n    = "<" ListOf<ident, ","> ">"\n\n  Params\n    = "<" ListOf<Seq, ","> ">"\n\n  Alt\n    = NonemptyListOf<Seq, "|">\n\n  Seq\n    = Iter*\n\n  Iter\n    = Pred "*"  -- star\n    | Pred "+"  -- plus\n    | Pred "?"  -- opt\n    | Pred\n\n  Pred\n    = "~" Lex  -- not\n    | "&" Lex  -- lookahead\n    | Lex\n\n  Lex\n    = "#" Base  -- lex\n    | Base\n\n  Base\n    = ident Params? ~(ruleDescr? "=" | ":=" | "+=")  -- application\n    | oneCharTerminal ".." oneCharTerminal           -- range\n    | terminal                                       -- terminal\n    | "(" Alt ")"                                    -- paren\n\n  ruleDescr  (a rule description)\n    = "(" ruleDescrText ")"\n\n  ruleDescrText\n    = (~")" any)*\n\n  caseName\n    = "--" (~"\\n" space)* name (~"\\n" space)* ("\\n" | &"}")\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n  ident  (an identifier)\n    = name\n\n  terminal\n    = "\\"" terminalChar* "\\""\n\n  oneCharTerminal\n    = "\\"" terminalChar "\\""\n\n  terminalChar\n    = escapeChar\n      | ~"\\\\" ~"\\"" ~"\\n" "\\u{0}".."\\u{10FFFF}"\n\n  escapeChar  (an escape sequence)\n    = "\\\\\\\\"                                     -- backslash\n    | "\\\\\\""                                     -- doubleQuote\n    | "\\\\\\\'"                                     -- singleQuote\n    | "\\\\b"                                      -- backspace\n    | "\\\\n"                                      -- lineFeed\n    | "\\\\r"                                      -- carriageReturn\n    | "\\\\t"                                      -- tab\n    | "\\\\u{" hexDigit hexDigit? hexDigit?\n             hexDigit? hexDigit? hexDigit? "}"   -- unicodeCodePoint\n    | "\\\\u" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape\n    | "\\\\x" hexDigit hexDigit                    -- hexEscape\n\n  space\n   += comment\n\n  comment\n    = "//" (~"\\n" any)* &("\\n" | end)  -- singleLine\n    | "/*" (~"*/" any)* "*/"  -- multiLine\n\n  tokens = token*\n\n  token = caseName | comment | ident | operator | punctuation | terminal | any\n\n  operator = "<:" | "=" | ":=" | "+=" | "*" | "+" | "?" | "~" | "&"\n\n  punctuation = "<" | ">" | "," | "--"\n}'},"Ohm",null,"Grammars",{Grammars:["define",{sourceInterval:[9,32]},null,[],["star",{sourceInterval:[24,32]},["app",{sourceInterval:[24,31]},"Grammar",[]]]],Grammar:["define",{sourceInterval:[36,83]},null,[],["seq",{sourceInterval:[50,83]},["app",{sourceInterval:[50,55]},"ident",[]],["opt",{sourceInterval:[56,69]},["app",{sourceInterval:[56,68]},"SuperGrammar",[]]],["terminal",{sourceInterval:[70,73]},"{"],["star",{sourceInterval:[74,79]},["app",{sourceInterval:[74,78]},"Rule",[]]],["terminal",{sourceInterval:[80,83]},"}"]]],SuperGrammar:["define",{sourceInterval:[87,116]},null,[],["seq",{sourceInterval:[106,116]},["terminal",{sourceInterval:[106,110]},"<:"],["app",{sourceInterval:[111,116]},"ident",[]]]],Rule_define:["define",{sourceInterval:[131,181]},null,[],["seq",{sourceInterval:[131,170]},["app",{sourceInterval:[131,136]},"ident",[]],["opt",{sourceInterval:[137,145]},["app",{sourceInterval:[137,144]},"Formals",[]]],["opt",{sourceInterval:[146,156]},["app",{sourceInterval:[146,155]},"ruleDescr",[]]],["terminal",{sourceInterval:[157,160]},"="],["app",{sourceInterval:[162,170]},"RuleBody",[]]]],Rule_override:["define",{sourceInterval:[188,248]},null,[],["seq",{sourceInterval:[188,235]},["app",{sourceInterval:[188,193]},"ident",[]],["opt",{sourceInterval:[194,202]},["app",{sourceInterval:[194,201]},"Formals",[]]],["terminal",{sourceInterval:[214,218]},":="],["app",{sourceInterval:[219,235]},"OverrideRuleBody",[]]]],Rule_extend:["define",{sourceInterval:[255,305]},null,[],["seq",{sourceInterval:[255,294]},["app",{sourceInterval:[255,260]},"ident",[]],["opt",{sourceInterval:[261,269]},["app",{sourceInterval:[261,268]},"Formals",[]]],["terminal",{sourceInterval:[281,285]},"+="],["app",{sourceInterval:[286,294]},"RuleBody",[]]]],Rule:["define",{sourceInterval:[120,305]},null,[],["alt",{sourceInterval:[131,305]},["app",{sourceInterval:[131,170]},"Rule_define",[]],["app",{sourceInterval:[188,235]},"Rule_override",[]],["app",{sourceInterval:[255,294]},"Rule_extend",[]]]],RuleBody:["define",{sourceInterval:[309,362]},null,[],["seq",{sourceInterval:[324,362]},["opt",{sourceInterval:[324,328]},["terminal",{sourceInterval:[324,327]},"|"]],["app",{sourceInterval:[329,362]},"NonemptyListOf",[["app",{sourceInterval:[344,356]},"TopLevelTerm",[]],["terminal",{sourceInterval:[358,361]},"|"]]]]],TopLevelTerm_inline:["define",{sourceInterval:[385,408]},null,[],["seq",{sourceInterval:[385,397]},["app",{sourceInterval:[385,388]},"Seq",[]],["app",{sourceInterval:[389,397]},"caseName",[]]]],TopLevelTerm:["define",{sourceInterval:[366,418]},null,[],["alt",{sourceInterval:[385,418]},["app",{sourceInterval:[385,397]},"TopLevelTerm_inline",[]],["app",{sourceInterval:[415,418]},"Seq",[]]]],OverrideRuleBody:["define",{sourceInterval:[422,491]},null,[],["seq",{sourceInterval:[445,491]},["opt",{sourceInterval:[445,449]},["terminal",{sourceInterval:[445,448]},"|"]],["app",{sourceInterval:[450,491]},"NonemptyListOf",[["app",{sourceInterval:[465,485]},"OverrideTopLevelTerm",[]],["terminal",{sourceInterval:[487,490]},"|"]]]]],OverrideTopLevelTerm_superSplice:["define",{sourceInterval:[522,543]},null,[],["terminal",{sourceInterval:[522,527]},"..."]],OverrideTopLevelTerm:["define",{sourceInterval:[495,562]},null,[],["alt",{sourceInterval:[522,562]},["app",{sourceInterval:[522,527]},"OverrideTopLevelTerm_superSplice",[]],["app",{sourceInterval:[550,562]},"TopLevelTerm",[]]]],Formals:["define",{sourceInterval:[566,606]},null,[],["seq",{sourceInterval:[580,606]},["terminal",{sourceInterval:[580,583]},"<"],["app",{sourceInterval:[584,602]},"ListOf",[["app",{sourceInterval:[591,596]},"ident",[]],["terminal",{sourceInterval:[598,601]},","]]],["terminal",{sourceInterval:[603,606]},">"]]],Params:["define",{sourceInterval:[610,647]},null,[],["seq",{sourceInterval:[623,647]},["terminal",{sourceInterval:[623,626]},"<"],["app",{sourceInterval:[627,643]},"ListOf",[["app",{sourceInterval:[634,637]},"Seq",[]],["terminal",{sourceInterval:[639,642]},","]]],["terminal",{sourceInterval:[644,647]},">"]]],Alt:["define",{sourceInterval:[651,685]},null,[],["app",{sourceInterval:[661,685]},"NonemptyListOf",[["app",{sourceInterval:[676,679]},"Seq",[]],["terminal",{sourceInterval:[681,684]},"|"]]]],Seq:["define",{sourceInterval:[689,704]},null,[],["star",{sourceInterval:[699,704]},["app",{sourceInterval:[699,703]},"Iter",[]]]],Iter_star:["define",{sourceInterval:[719,736]},null,[],["seq",{sourceInterval:[719,727]},["app",{sourceInterval:[719,723]},"Pred",[]],["terminal",{sourceInterval:[724,727]},"*"]]],Iter_plus:["define",{sourceInterval:[743,760]},null,[],["seq",{sourceInterval:[743,751]},["app",{sourceInterval:[743,747]},"Pred",[]],["terminal",{sourceInterval:[748,751]},"+"]]],Iter_opt:["define",{sourceInterval:[767,783]},null,[],["seq",{sourceInterval:[767,775]},["app",{sourceInterval:[767,771]},"Pred",[]],["terminal",{sourceInterval:[772,775]},"?"]]],Iter:["define",{sourceInterval:[708,794]},null,[],["alt",{sourceInterval:[719,794]},["app",{sourceInterval:[719,727]},"Iter_star",[]],["app",{sourceInterval:[743,751]},"Iter_plus",[]],["app",{sourceInterval:[767,775]},"Iter_opt",[]],["app",{sourceInterval:[790,794]},"Pred",[]]]],Pred_not:["define",{sourceInterval:[809,824]},null,[],["seq",{sourceInterval:[809,816]},["terminal",{sourceInterval:[809,812]},"~"],["app",{sourceInterval:[813,816]},"Lex",[]]]],Pred_lookahead:["define",{sourceInterval:[831,852]},null,[],["seq",{sourceInterval:[831,838]},["terminal",{sourceInterval:[831,834]},"&"],["app",{sourceInterval:[835,838]},"Lex",[]]]],Pred:["define",{sourceInterval:[798,862]},null,[],["alt",{sourceInterval:[809,862]},["app",{sourceInterval:[809,816]},"Pred_not",[]],["app",{sourceInterval:[831,838]},"Pred_lookahead",[]],["app",{sourceInterval:[859,862]},"Lex",[]]]],Lex_lex:["define",{sourceInterval:[876,892]},null,[],["seq",{sourceInterval:[876,884]},["terminal",{sourceInterval:[876,879]},"#"],["app",{sourceInterval:[880,884]},"Base",[]]]],Lex:["define",{sourceInterval:[866,903]},null,[],["alt",{sourceInterval:[876,903]},["app",{sourceInterval:[876,884]},"Lex_lex",[]],["app",{sourceInterval:[899,903]},"Base",[]]]],Base_application:["define",{sourceInterval:[918,979]},null,[],["seq",{sourceInterval:[918,963]},["app",{sourceInterval:[918,923]},"ident",[]],["opt",{sourceInterval:[924,931]},["app",{sourceInterval:[924,930]},"Params",[]]],["not",{sourceInterval:[932,963]},["alt",{sourceInterval:[934,962]},["seq",{sourceInterval:[934,948]},["opt",{sourceInterval:[934,944]},["app",{sourceInterval:[934,943]},"ruleDescr",[]]],["terminal",{sourceInterval:[945,948]},"="]],["terminal",{sourceInterval:[951,955]},":="],["terminal",{sourceInterval:[958,962]},"+="]]]]],Base_range:["define",{sourceInterval:[986,1041]},null,[],["seq",{sourceInterval:[986,1022]},["app",{sourceInterval:[986,1001]},"oneCharTerminal",[]],["terminal",{sourceInterval:[1002,1006]},".."],["app",{sourceInterval:[1007,1022]},"oneCharTerminal",[]]]],Base_terminal:["define",{sourceInterval:[1048,1106]},null,[],["app",{sourceInterval:[1048,1056]},"terminal",[]]],Base_paren:["define",{sourceInterval:[1113,1168]},null,[],["seq",{sourceInterval:[1113,1124]},["terminal",{sourceInterval:[1113,1116]},"("],["app",{sourceInterval:[1117,1120]},"Alt",[]],["terminal",{sourceInterval:[1121,1124]},")"]]],Base:["define",{sourceInterval:[907,1168]},null,[],["alt",{sourceInterval:[918,1168]},["app",{sourceInterval:[918,963]},"Base_application",[]],["app",{sourceInterval:[986,1022]},"Base_range",[]],["app",{sourceInterval:[1048,1056]},"Base_terminal",[]],["app",{sourceInterval:[1113,1124]},"Base_paren",[]]]],ruleDescr:["define",{sourceInterval:[1172,1231]},"a rule description",[],["seq",{sourceInterval:[1210,1231]},["terminal",{sourceInterval:[1210,1213]},"("],["app",{sourceInterval:[1214,1227]},"ruleDescrText",[]],["terminal",{sourceInterval:[1228,1231]},")"]]],ruleDescrText:["define",{sourceInterval:[1235,1266]},null,[],["star",{sourceInterval:[1255,1266]},["seq",{sourceInterval:[1256,1264]},["not",{sourceInterval:[1256,1260]},["terminal",{sourceInterval:[1257,1260]},")"]],["app",{sourceInterval:[1261,1264]},"any",[]]]]],caseName:["define",{sourceInterval:[1270,1338]},null,[],["seq",{sourceInterval:[1285,1338]},["terminal",{sourceInterval:[1285,1289]},"--"],["star",{sourceInterval:[1290,1304]},["seq",{sourceInterval:[1291,1302]},["not",{sourceInterval:[1291,1296]},["terminal",{sourceInterval:[1292,1296]},"\n"]],["app",{sourceInterval:[1297,1302]},"space",[]]]],["app",{sourceInterval:[1305,1309]},"name",[]],["star",{sourceInterval:[1310,1324]},["seq",{sourceInterval:[1311,1322]},["not",{sourceInterval:[1311,1316]},["terminal",{sourceInterval:[1312,1316]},"\n"]],["app",{sourceInterval:[1317,1322]},"space",[]]]],["alt",{sourceInterval:[1326,1337]},["terminal",{sourceInterval:[1326,1330]},"\n"],["lookahead",{sourceInterval:[1333,1337]},["terminal",{sourceInterval:[1334,1337]},"}"]]]]],name:["define",{sourceInterval:[1342,1382]},"a name",[],["seq",{sourceInterval:[1363,1382]},["app",{sourceInterval:[1363,1372]},"nameFirst",[]],["star",{sourceInterval:[1373,1382]},["app",{sourceInterval:[1373,1381]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[1386,1418]},null,[],["alt",{sourceInterval:[1402,1418]},["terminal",{sourceInterval:[1402,1405]},"_"],["app",{sourceInterval:[1412,1418]},"letter",[]]]],nameRest:["define",{sourceInterval:[1422,1452]},null,[],["alt",{sourceInterval:[1437,1452]},["terminal",{sourceInterval:[1437,1440]},"_"],["app",{sourceInterval:[1447,1452]},"alnum",[]]]],ident:["define",{sourceInterval:[1456,1489]},"an identifier",[],["app",{sourceInterval:[1485,1489]},"name",[]]],terminal:["define",{sourceInterval:[1493,1531]},null,[],["seq",{sourceInterval:[1508,1531]},["terminal",{sourceInterval:[1508,1512]},'"'],["star",{sourceInterval:[1513,1526]},["app",{sourceInterval:[1513,1525]},"terminalChar",[]]],["terminal",{sourceInterval:[1527,1531]},'"']]],oneCharTerminal:["define",{sourceInterval:[1535,1579]},null,[],["seq",{sourceInterval:[1557,1579]},["terminal",{sourceInterval:[1557,1561]},'"'],["app",{sourceInterval:[1562,1574]},"terminalChar",[]],["terminal",{sourceInterval:[1575,1579]},'"']]],terminalChar:["define",{sourceInterval:[1583,1660]},null,[],["alt",{sourceInterval:[1602,1660]},["app",{sourceInterval:[1602,1612]},"escapeChar",[]],["seq",{sourceInterval:[1621,1660]},["not",{sourceInterval:[1621,1626]},["terminal",{sourceInterval:[1622,1626]},"\\"]],["not",{sourceInterval:[1627,1632]},["terminal",{sourceInterval:[1628,1632]},'"']],["not",{sourceInterval:[1633,1638]},["terminal",{sourceInterval:[1634,1638]},"\n"]],["range",{sourceInterval:[1639,1660]},"\0","\udbff\udfff"]]]],escapeChar_backslash:["define",{sourceInterval:[1703,1758]},null,[],["terminal",{sourceInterval:[1703,1709]},"\\\\"]],escapeChar_doubleQuote:["define",{sourceInterval:[1765,1822]},null,[],["terminal",{sourceInterval:[1765,1771]},'\\"']],escapeChar_singleQuote:["define",{sourceInterval:[1829,1886]},null,[],["terminal",{sourceInterval:[1829,1835]},"\\'"]],escapeChar_backspace:["define",{sourceInterval:[1893,1948]},null,[],["terminal",{sourceInterval:[1893,1898]},"\\b"]],escapeChar_lineFeed:["define",{sourceInterval:[1955,2009]},null,[],["terminal",{sourceInterval:[1955,1960]},"\\n"]],escapeChar_carriageReturn:["define",{sourceInterval:[2016,2076]},null,[],["terminal",{sourceInterval:[2016,2021]},"\\r"]],escapeChar_tab:["define",{sourceInterval:[2083,2132]},null,[],["terminal",{sourceInterval:[2083,2088]},"\\t"]],escapeChar_unicodeCodePoint:["define",{sourceInterval:[2139,2243]},null,[],["seq",{sourceInterval:[2139,2221]},["terminal",{sourceInterval:[2139,2145]},"\\u{"],["app",{sourceInterval:[2146,2154]},"hexDigit",[]],["opt",{sourceInterval:[2155,2164]},["app",{sourceInterval:[2155,2163]},"hexDigit",[]]],["opt",{sourceInterval:[2165,2174]},["app",{sourceInterval:[2165,2173]},"hexDigit",[]]],["opt",{sourceInterval:[2188,2197]},["app",{sourceInterval:[2188,2196]},"hexDigit",[]]],["opt",{sourceInterval:[2198,2207]},["app",{sourceInterval:[2198,2206]},"hexDigit",[]]],["opt",{sourceInterval:[2208,2217]},["app",{sourceInterval:[2208,2216]},"hexDigit",[]]],["terminal",{sourceInterval:[2218,2221]},"}"]]],escapeChar_unicodeEscape:["define",{sourceInterval:[2250,2309]},null,[],["seq",{sourceInterval:[2250,2291]},["terminal",{sourceInterval:[2250,2255]},"\\u"],["app",{sourceInterval:[2256,2264]},"hexDigit",[]],["app",{sourceInterval:[2265,2273]},"hexDigit",[]],["app",{sourceInterval:[2274,2282]},"hexDigit",[]],["app",{sourceInterval:[2283,2291]},"hexDigit",[]]]],escapeChar_hexEscape:["define",{sourceInterval:[2316,2371]},null,[],["seq",{sourceInterval:[2316,2339]},["terminal",{sourceInterval:[2316,2321]},"\\x"],["app",{sourceInterval:[2322,2330]},"hexDigit",[]],["app",{sourceInterval:[2331,2339]},"hexDigit",[]]]],escapeChar:["define",{sourceInterval:[1664,2371]},"an escape sequence",[],["alt",{sourceInterval:[1703,2371]},["app",{sourceInterval:[1703,1709]},"escapeChar_backslash",[]],["app",{sourceInterval:[1765,1771]},"escapeChar_doubleQuote",[]],["app",{sourceInterval:[1829,1835]},"escapeChar_singleQuote",[]],["app",{sourceInterval:[1893,1898]},"escapeChar_backspace",[]],["app",{sourceInterval:[1955,1960]},"escapeChar_lineFeed",[]],["app",{sourceInterval:[2016,2021]},"escapeChar_carriageReturn",[]],["app",{sourceInterval:[2083,2088]},"escapeChar_tab",[]],["app",{sourceInterval:[2139,2221]},"escapeChar_unicodeCodePoint",[]],["app",{sourceInterval:[2250,2291]},"escapeChar_unicodeEscape",[]],["app",{sourceInterval:[2316,2339]},"escapeChar_hexEscape",[]]]],space:["extend",{sourceInterval:[2375,2394]},null,[],["app",{sourceInterval:[2387,2394]},"comment",[]]],comment_singleLine:["define",{sourceInterval:[2412,2458]},null,[],["seq",{sourceInterval:[2412,2443]},["terminal",{sourceInterval:[2412,2416]},"//"],["star",{sourceInterval:[2417,2429]},["seq",{sourceInterval:[2418,2427]},["not",{sourceInterval:[2418,2423]},["terminal",{sourceInterval:[2419,2423]},"\n"]],["app",{sourceInterval:[2424,2427]},"any",[]]]],["lookahead",{sourceInterval:[2430,2443]},["alt",{sourceInterval:[2432,2442]},["terminal",{sourceInterval:[2432,2436]},"\n"],["app",{sourceInterval:[2439,2442]},"end",[]]]]]],comment_multiLine:["define",{sourceInterval:[2465,2501]},null,[],["seq",{sourceInterval:[2465,2487]},["terminal",{sourceInterval:[2465,2469]},"/*"],["star",{sourceInterval:[2470,2482]},["seq",{sourceInterval:[2471,2480]},["not",{sourceInterval:[2471,2476]},["terminal",{sourceInterval:[2472,2476]},"*/"]],["app",{sourceInterval:[2477,2480]},"any",[]]]],["terminal",{sourceInterval:[2483,2487]},"*/"]]],comment:["define",{sourceInterval:[2398,2501]},null,[],["alt",{sourceInterval:[2412,2501]},["app",{sourceInterval:[2412,2443]},"comment_singleLine",[]],["app",{sourceInterval:[2465,2487]},"comment_multiLine",[]]]],tokens:["define",{sourceInterval:[2505,2520]},null,[],["star",{sourceInterval:[2514,2520]},["app",{sourceInterval:[2514,2519]},"token",[]]]],token:["define",{sourceInterval:[2524,2600]},null,[],["alt",{sourceInterval:[2532,2600]},["app",{sourceInterval:[2532,2540]},"caseName",[]],["app",{sourceInterval:[2543,2550]},"comment",[]],["app",{sourceInterval:[2553,2558]},"ident",[]],["app",{sourceInterval:[2561,2569]},"operator",[]],["app",{sourceInterval:[2572,2583]},"punctuation",[]],["app",{sourceInterval:[2586,2594]},"terminal",[]],["app",{sourceInterval:[2597,2600]},"any",[]]]],operator:["define",{sourceInterval:[2604,2669]},null,[],["alt",{sourceInterval:[2615,2669]},["terminal",{sourceInterval:[2615,2619]},"<:"],["terminal",{sourceInterval:[2622,2625]},"="],["terminal",{sourceInterval:[2628,2632]},":="],["terminal",{sourceInterval:[2635,2639]},"+="],["terminal",{sourceInterval:[2642,2645]},"*"],["terminal",{sourceInterval:[2648,2651]},"+"],["terminal",{sourceInterval:[2654,2657]},"?"],["terminal",{sourceInterval:[2660,2663]},"~"],["terminal",{sourceInterval:[2666,2669]},"&"]]],punctuation:["define",{sourceInterval:[2673,2709]},null,[],["alt",{sourceInterval:[2687,2709]},["terminal",{sourceInterval:[2687,2690]},"<"],["terminal",{sourceInterval:[2693,2696]},">"],["terminal",{sourceInterval:[2699,2702]},","],["terminal",{sourceInterval:[2705,2709]},"--"]]]}]),Gt=Object.create(x.prototype);function Wt(t,e){for(const n in t)if(n===e)return!0;return!1}function qt(t,e,n){const r=new Vt;let s,i,o,l=!1;const u=(n||Ht).createSemantics().addOperation("visit",{Grammars:t=>t.children.map((t=>t.visit())),Grammar(t,n,i,a,o){const l=t.visit();s=r.newGrammar(l),n.child(0)&&n.child(0).visit(),a.children.map((t=>t.visit()));const u=s.build();if(u.source=this.source.trimmed(),Wt(e,l))throw function(t){return j("Grammar "+t.name+" is already declared in this namespace")}(u);return e[l]=u,u},SuperGrammar(t,n){const r=n.visit();if("null"===r)s.withSuperGrammar(null);else{if(!e||!Wt(e,r))throw function(t,e,n){return j(e?`Grammar ${t} is not declared in namespace '${e}'`:"Undeclared grammar "+t,n)}(r,e,n.source);s.withSuperGrammar(e[r])}},Rule_define(t,e,n,r,a){i=t.visit(),o=e.children.map((t=>t.visit()))[0]||[],s.defaultStartRule||s.ensureSuperGrammar()===jt.ProtoBuiltInRules||s.withDefaultStartRule(i);const l=a.visit(),u=n.children.map((t=>t.visit()))[0],c=this.source.trimmed();return s.define(i,o,l,u,c)},Rule_override(t,e,n,r){i=t.visit(),o=e.children.map((t=>t.visit()))[0]||[];const a=this.source.trimmed();s.ensureSuperGrammarRuleForOverriding(i,a),l=!0;const u=r.visit();return l=!1,s.override(i,o,u,null,a)},Rule_extend(t,e,n,r){i=t.visit(),o=e.children.map((t=>t.visit()))[0]||[];const a=r.visit(),l=this.source.trimmed();return s.extend(i,o,a,null,l)},RuleBody(t,e){return r.alt(...e.visit()).withSource(this.source)},OverrideRuleBody(t,e){const n=e.visit(),a=n.indexOf(Gt);if(a>=0){const t=n.slice(0,a),e=n.slice(a+1);return e.forEach((t=>{if(t===Gt)throw j("'...' can appear at most once in a rule body",t.source)})),new C(s.superGrammar,i,t,e).withSource(this.source)}return r.alt(...n).withSource(this.source)},Formals:(t,e,n)=>e.visit(),Params:(t,e,n)=>e.visit(),Alt(t){return r.alt(...t.visit()).withSource(this.source)},TopLevelTerm_inline(t,e){const n=i+"_"+e.visit(),a=t.visit(),u=this.source.trimmed(),c=!(s.superGrammar&&s.superGrammar.rules[n]);l&&!c?s.override(n,o,a,null,u):s.define(n,o,a,null,u);const h=o.map((t=>r.app(t)));return r.app(n,h).withSource(a.source)},OverrideTopLevelTerm_superSplice:t=>Gt,Seq(t){return r.seq(...t.children.map((t=>t.visit()))).withSource(this.source)},Iter_star(t,e){return r.star(t.visit()).withSource(this.source)},Iter_plus(t,e){return r.plus(t.visit()).withSource(this.source)},Iter_opt(t,e){return r.opt(t.visit()).withSource(this.source)},Pred_not(t,e){return r.not(e.visit()).withSource(this.source)},Pred_lookahead(t,e){return r.lookahead(e.visit()).withSource(this.source)},Lex_lex(t,e){return r.lex(e.visit()).withSource(this.source)},Base_application(t,e){const n=e.children.map((t=>t.visit()))[0]||[];return r.app(t.visit(),n).withSource(this.source)},Base_range(t,e,n){return r.range(t.visit(),n.visit()).withSource(this.source)},Base_terminal(t){return r.terminal(t.visit()).withSource(this.source)},Base_paren:(t,e,n)=>e.visit(),ruleDescr:(t,e,n)=>e.visit(),ruleDescrText(t){return this.sourceString.trim()},caseName:(t,e,n,r,s)=>n.visit(),name(t,e){return this.sourceString},nameFirst(t){},nameRest(t){},terminal:(t,e,n)=>e.children.map((t=>t.visit())).join(""),oneCharTerminal:(t,e,n)=>e.visit(),escapeChar(t){try{return y(this.sourceString)}catch(e){if(e instanceof RangeError&&e.message.startsWith("Invalid code point "))throw function(t){const e=t._node;a(e&&e.isNonterminal()&&"escapeChar_unicodeCodePoint"===e.ctorName);const n=t.children.slice(1,-1).map((t=>t.source)),r=n[0].coverageWith(...n.slice(1));return j(`U+${r.contents} is not a valid Unicode code point`,r)}(t);throw e}},NonemptyListOf:(t,e,n)=>[t.visit()].concat(n.children.map((t=>t.visit()))),EmptyListOf:()=>[],_terminal(){return this.sourceString}});return u(t).visit()}const Kt=Bt(["grammar",{source:'OperationsAndAttributes {\n\n  AttributeSignature =\n    name\n\n  OperationSignature =\n    name Formals?\n\n  Formals\n    = "(" ListOf<name, ","> ")"\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n}'},"OperationsAndAttributes",null,"AttributeSignature",{AttributeSignature:["define",{sourceInterval:[29,58]},null,[],["app",{sourceInterval:[54,58]},"name",[]]],OperationSignature:["define",{sourceInterval:[62,100]},null,[],["seq",{sourceInterval:[87,100]},["app",{sourceInterval:[87,91]},"name",[]],["opt",{sourceInterval:[92,100]},["app",{sourceInterval:[92,99]},"Formals",[]]]]],Formals:["define",{sourceInterval:[104,143]},null,[],["seq",{sourceInterval:[118,143]},["terminal",{sourceInterval:[118,121]},"("],["app",{sourceInterval:[122,139]},"ListOf",[["app",{sourceInterval:[129,133]},"name",[]],["terminal",{sourceInterval:[135,138]},","]]],["terminal",{sourceInterval:[140,143]},")"]]],name:["define",{sourceInterval:[147,187]},"a name",[],["seq",{sourceInterval:[168,187]},["app",{sourceInterval:[168,177]},"nameFirst",[]],["star",{sourceInterval:[178,187]},["app",{sourceInterval:[178,186]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[191,223]},null,[],["alt",{sourceInterval:[207,223]},["terminal",{sourceInterval:[207,210]},"_"],["app",{sourceInterval:[217,223]},"letter",[]]]],nameRest:["define",{sourceInterval:[227,257]},null,[],["alt",{sourceInterval:[242,257]},["terminal",{sourceInterval:[242,245]},"_"],["app",{sourceInterval:[252,257]},"alnum",[]]]]}]);!function(t){const e={empty(){return this.iteration()},nonEmpty(t,e,n){return this.iteration([t].concat(n.children))}};Lt.BuiltInSemantics=Lt.createSemantics(t,null).addOperation("asIteration",{emptyListOf:e.empty,nonemptyListOf:e.nonEmpty,EmptyListOf:e.empty,NonemptyListOf:e.nonEmpty})}(jt.BuiltInRules),function(t){Lt.prototypeGrammarSemantics=t.createSemantics().addOperation("parse",{AttributeSignature:t=>({name:t.parse(),formals:[]}),OperationSignature:(t,e)=>({name:t.parse(),formals:e.children.map((t=>t.parse()))[0]||[]}),Formals:(t,e,n)=>e.asIteration().children.map((t=>t.parse())),name(t,e){return this.sourceString}}),Lt.prototypeGrammar=t}(Kt);const Yt="an indented block",Qt="a dedent",Xt=1114112;class Jt extends rt{constructor(t){super(t.input),this.state=t}_indentationAt(t){return this.state.userData[t]||0}atEnd(){return super.atEnd()&&0===this._indentationAt(this.pos)}next(){if(0===this._indentationAt(this.pos))return super.next();this.examinedLength=Math.max(this.examinedLength,this.pos)}nextCharCode(){return 0!==this._indentationAt(this.pos)?(this.examinedLength=Math.max(this.examinedLength,this.pos),Xt):super.nextCharCode()}nextCodePoint(){return 0!==this._indentationAt(this.pos)?(this.examinedLength=Math.max(this.examinedLength,this.pos),Xt):super.nextCodePoint()}}class Zt extends x{constructor(t=!0){super(),this.isIndent=t}allowsSkippingPrecedingSpace(){return!0}eval(t){const{inputStream:e}=t,n=t.userData;t.doNotMemoize=!0;const r=e.pos,s=this.isIndent?1:-1;return(n[r]||0)*s>0?(t.userData=Object.create(n),t.userData[r]-=s,t.pushBinding(new yt(0),r),!0):(t.processFailure(r,this),!1)}getArity(){return 1}_assertAllApplicationsAreValid(t,e){}_isNullable(t,e){return!1}assertChoicesHaveUniformArity(t){}assertIteratedExprsAreNotNullable(t){}introduceParams(t){return this}substituteParams(t){return this}toString(){return this.isIndent?"indent":"dedent"}toDisplayString(){return this.toString()}toFailure(t){const e=this.isIndent?Yt:Qt;return new _t(this,e,"description")}}const te=new M("indent"),ee=new M("dedent"),ne=new C($t,"any",[te,ee],[]),re=(new Vt).newGrammar("IndentationSensitive").withSuperGrammar($t).define("indent",[],new Zt(!0),Yt,void 0,!0).define("dedent",[],new Zt(!1),Qt,void 0,!0).extend("any",[],ne,"any character",void 0).build();Object.assign(re,{_matchStateInitializer(t){t.userData=function(t){let e=0;const n=[0],r=()=>n[n.length-1],s={},i=/( *).*(?:$|\r?\n|\r)/g;let a;for(;null!=(a=i.exec(t));){const[t,i]=a;if(0===t.length)break;const o=i.length,l=r(),u=e+o;if(o>l)n.push(o),s[u]=1;else if(o<l){const t=n.length;for(;r()!==o;)n.pop();s[u]=-1*(t-n.length)}e+=t.length}return n.length>1&&(s[e]=1-n.length),s}(t.input),t.inputStream=new Jt(t)},supportsIncrementalParsing:!1}),jt.initApplicationParser(Ht,qt);const se=t=>!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t);function ie(t,e){const n=Ht.match(t,"Grammars");if(n.failed())throw function(t){const e=new Error;return Object.defineProperty(e,"message",{enumerable:!0,get:()=>t.message}),Object.defineProperty(e,"shortMessage",{enumerable:!0,get:()=>"Expected "+t.getExpectedText()}),e.interval=t.getInterval(),e}(n);return qt(n,e)}function ae(t,e){const n=function(t,e){const n=Object.create(e||{});if("string"!==typeof t){if(!se(t))throw new TypeError("Expected string as first argument, got "+v(t));t=t.toString()}return ie(t,n),n}(t,e),r=Object.keys(n);if(0===r.length)throw new Error("Missing grammar definition");if(r.length>1){const t=n[r[1]].source;throw new Error(tt(t.sourceString,t.startIdx)+"Found more than one grammar definition -- use ohm.grammars() instead.")}return n[r[0]]}},8463:(t,e,n)=>{n.d(e,{Kx:()=>s,O:()=>a,a5:()=>i,J5:()=>r});const r="function Main.fibonacci 0\n    push argument 0\n    push constant 2\n    lt                     // checks if n<2\n    if-goto IF_TRUE\n    goto IF_FALSE\n    label IF_TRUE          // if n<2, return n\n    push argument 0        \n    return\n    label IF_FALSE         // if n>=2, returns fib(n-2)+fib(n-1)\n    push argument 0\n    push constant 2\n    sub\n    call Main.fibonacci 1  // computes fib(n-2)\n    push argument 0\n    push constant 1\n    sub\n    call Main.fibonacci 1  // computes fib(n-1)\n    add                    // returns fib(n-1) + fib(n-2)\n    return\nfunction Sys.init 0\n    push constant 4\n    call Main.fibonacci 1   // computes the 4'th fibonacci element\nlabel WHILE\n    goto WHILE              // loops infinitely\n",s={"01":["Nand"],"02":[],"03":["DFF"],"05":["Screen","Keyboard","DRegister","ARegister","ROM32K","RAM16K"]},i={"01":["Not","And","Or","Xor","Mux","DMux","Not16","And16","Or16","Mux16","Or8Way","Mux4Way16","Mux8Way16","DMux4Way","DMux8Way"],"02":["HalfAdder","FullAdder","Add16","Inc16","ALU"],"03":["Bit","Register","RAM8","RAM64","RAM512","RAM4K","RAM16K","PC"],"05":["Memory","CPU","Computer"]},a={"05":["Memory","CPU","Computer","Screen","Keyboard","DRegister","ARegister","ROM32K","RAM16K"]}},5777:(t,e,n)=>{async function r(t,e){(await Promise.all([n.e(828),n.e(288)]).then(n.bind(n,3288))).resetFiles(t,e)}async function s(t,e){(await Promise.all([n.e(828),n.e(288)]).then(n.bind(n,3288))).resetTests(t,e)}async function i(t){(await Promise.all([n.e(828),n.e(297)]).then(n.bind(n,9297))).loadSamples(t)}async function a(t){(await n.e(269).then(n.bind(n,1269))).loadSolutions(t)}n.r(e),n.d(e,{default:()=>l,loadSamples:()=>i,loadSolutions:()=>a,loaders:()=>o,resetFiles:()=>r,resetTests:()=>s});const o={resetFiles:r,loadSolutions:a,loadSamples:i},l=o},7738:(t,e,n)=>{n.d(e,{qg:()=>u});var r=n(5874),s=n(3977),i=n(5005),a=n(6980),o=n(9651);function l(t){const e=t.start??0;return void 0===t.end?(0,r.Ok)(void 0):t.end>=e?(0,r.Ok)(t.end-e+1):(0,r._)((0,s.$5)("Bus start index should be less than or equal to bus end index",t.span))}async function u(t,e){const n=i.xP.parse(t.toString());return(0,r.ys)(n)?n:h((0,r.Ok)(n),void 0,e)}async function c(t,e){if((0,a.KQ)(t)||void 0===e)return await(0,a.M1)(t);try{const n=await e.readFile(`${t}.hdl`),s=i.xP.parse(n);let a;if((0,r.HQ)(s)){const t=await h((0,r.Ok)(s),e);a=(0,r.ys)(t)?(0,r._)(new Error((0,r._)(t).message)):t}else a=(0,r._)(new Error("HDL Was not parsed"));return a}catch(n){return(0,r._)(new Error(`Could not load chip ${t}.hdl`))}}async function h(t,e,n){return await new y(t,e,n).build()}function d(t){if(void 0!=t.start&&void 0!=t.end)return t.end-t.start+1}function p(t){return void 0!=t.start&&void 0!=t.end?`${t.pin}[${t.start}..${t.end}]`:t.pin}function f(t,e){const n=l(t),s=l(e);return(0,r.ys)(n)?n:(0,r.ys)(s)?s:(0,r.Ok)({to:{name:t.pin.toString(),start:t.start??0,width:(0,r.Ok)(n)},from:{name:e.pin.toString(),start:e.start??0,width:(0,r.Ok)(s)}})}function m(t){if(void 0!=t.start&&void 0!=t.end){const e=[];for(let n=t.start;n<=t.end;n++)e.push(n);return e}return[-1]}function g(t,e){let n;const i=e.get(t.pin);if(i)if(i.has(-1))n=t.start??-1;else if(void 0!==t.start&&void 0!==t.end)for(const r of m(t))i.has(r)&&(n=r),i.add(r);else i.add(-1);else e.set(t.pin,new Set(m(t)));return void 0!=n?(0,r._)((0,s.$5)(`Cannot write to pin ${t.pin}${-1!=n?`[${n}]`:""} multiple times`,t.span)):(0,r.Ok)()}class y{parts;fs;expectedName;chip;internalPins=new Map;inPins=new Map;outPins=new Map;wires=[];constructor(t,e,n){this.parts=t,this.expectedName=n,this.fs=e,this.chip=new o.vu(t.ins.map((({pin:t,width:e})=>({pin:t.toString(),width:e}))),t.outs.map((({pin:t,width:e})=>({pin:t.toString(),width:e}))),t.name.value,[],t.clocked)}async build(){if(this.expectedName&&this.parts.name.value!=this.expectedName)return(0,r._)((0,s.$5)("Wrong chip name",this.parts.name.span));if("BUILTIN"===this.parts.parts)return await(0,a.M1)(this.parts.name.value);const t=await this.wireParts();if((0,r.ys)(t))return t;this.chip.clockedPins=new Set([...this.chip.ins.entries(),...this.chip.outs.entries()].map((t=>t.name)).filter((t=>this.chip.isClockedPin(t))));for(const e of this.chip.parts)e.subscribeToClock();return(0,r.Ok)(this.chip)}async wireParts(){if("BUILTIN"===this.parts.parts)return(0,r.Ok)();for(const e of this.parts.parts){const t=await c(e.name,this.fs);if((0,r.ys)(t))return(0,r._)((0,s.$5)(`Undefined chip name: ${e.name}`,e.span));const n=(0,r.Ok)(t);if(n.name==this.chip.name)return(0,r._)((0,s.$5)(`Cannot use chip ${n.name} to implement itself`,e.span));const i=this.wirePart(e,n);if((0,r.ys)(i))return i}let t=this.validateInternalPins();return(0,r.ys)(t)?t:(t=this.validateWireWidths(),(0,r.ys)(t)?t:(0,r.Ok)())}checkLoops(t,e){const n=new Set,i=new Set;let a;for(const{lhs:r,rhs:s}of t.wires)if(e.isInPin(r.pin)){if(i.has(s.pin)){a=s.pin;break}n.add(s.pin)}else if(e.isOutPin(r.pin)){if(n.has(s.pin)){a=s.pin;break}i.add(s.pin)}return a?(0,r._)((0,s.$5)(`Looping wire ${a}`,t.span)):(0,r.Ok)()}wirePart(t,e){const n=this.checkLoops(t,e);if((0,r.ys)(n))return n;const i=[];this.inPins.clear();for(const{lhs:s,rhs:o}of t.wires){const t=this.validateWire(e,s,o);if((0,r.ys)(t))return t;const n=f(s,o);if((0,r.ys)(n))return n;i.push((0,r.Ok)(n))}try{const n=this.chip.wire(e,i);if((0,r.ys)(n)){const e=(0,r._)(n);return(0,r._)((0,s.$5)(e.message,e.lhs?t.wires[e.wireIndex].lhs.span:t.wires[e.wireIndex].rhs.span))}return(0,r.Ok)()}catch(a){return(0,r._)((0,s.$5)(a.message,t.span))}}validateWire(t,e,n){if(t.isInPin(e.pin)){const t=this.validateInputWire(e,n);if((0,r.ys)(t))return t}else{if(!t.isOutPin(e.pin))return(0,r._)((0,s.$5)(`Undefined pin name: ${e.pin}`,e.span));{const s=this.validateOutputWire(t,e,n);if((0,r.ys)(s))return s}}return(0,o.KK)(n.pin)||this.wires.push({partChip:t,lhs:e,rhs:n}),(0,r.Ok)()}validateInputWire(t,e){let n=this.validateInputSource(e);if((0,r.ys)(n))return n;if(n=g(t,this.inPins),(0,r.ys)(n))return n;if(this.chip.isInternalPin(e.pin)){const t=this.internalPins.get(e.pin);void 0==t?this.internalPins.set(e.pin,{isDefined:!1,firstUse:e.span}):t.firstUse=t.firstUse.start<e.span.start?t.firstUse:e.span}return(0,r.Ok)()}validateOutputWire(t,e,n){let i=this.validateWriteTarget(n);if((0,r.ys)(i))return i;if(this.chip.isOutPin(n.pin)){if(i=g(n,this.outPins),(0,r.ys)(i))return i}else{if(void 0!==n.start||void 0!==n.end)return(0,r._)((0,s.$5)(`Internal pins (in this case: ${n.pin}) cannot be subscripted or indexed`,n.span));const i=this.internalPins.get(n.pin),a=d(e)??t.get(e.pin)?.width;if(void 0==i)this.internalPins.set(n.pin,{isDefined:!0,firstUse:n.span,width:a});else{if(i.isDefined)return(0,r._)((0,s.$5)(`Internal pin ${n.pin} already defined`,n.span));i.isDefined=!0,i.width=a}}return(0,r.Ok)()}validateWriteTarget(t){return this.chip.isInPin(t.pin)?(0,r._)((0,s.$5)(`Cannot write to input pin ${t.pin}`,t.span)):(0,o.KK)(t.pin)?(0,r._)((0,s.$5)('Internal pin name cannot be "true" or "false"',t.span)):(0,r.Ok)()}validateInputSource(t){return this.chip.isOutPin(t.pin)?(0,r._)((0,s.$5)("Cannot use output pin as input",t.span)):this.chip.isInPin(t.pin)||void 0==t.start?(0,r.Ok)():(0,r._)((0,s.$5)((0,o.KK)(t.pin)?"Constant bus cannot be subscripted or indexed":`Internal pins (in this case: ${t.pin}) cannot be subscripted or indexed`,t.span))}validateInternalPins(){for(const[t,e]of this.internalPins)if(!e.isDefined)return(0,r._)((0,s.$5)("true"==t.toLowerCase()||"false"==t.toLowerCase()?`The constant bus ${t.toLowerCase()} must be in lower-case`:`Undefined internal pin name: ${t}`,e.firstUse));return(0,r.Ok)()}validateWireWidths(){for(const t of this.wires){const e=d(t.lhs)??t.partChip.get(t.lhs.pin)?.width,n=d(t.rhs)??this.chip.get(t.rhs.pin)?.width??this.internalPins.get(t.rhs.pin)?.width;if(e!=n)return(0,r._)((0,s.$5)(`Different bus widths: ${p(t.lhs)}(${e}) and ${p(t.rhs)}(${n})`,{start:t.lhs.span.start,end:t.rhs.span.end,line:t.lhs.span.line}))}return(0,r.Ok)()}}},7761:(t,e,n)=>{n.d(e,{N4:()=>u,Sc:()=>y,Z8:()=>g,ce:()=>d,ff:()=>c,s3:()=>h});var r=n(7721),s=n(7076),i=n(6983),a=n(7844),o=n(9651),l=n(836);class u extends l.XK{constructor(){super(15,"ROM")}async load(t,e){try{(await(0,i.Hh)(t,e)).map(((t,e)=>this.at(e).busVoltage=t))}catch(n){throw new Error(`ROM32K Failed to load file ${e}`)}}}class c extends l.XK{static SIZE=s.RL;static OFFSET=s.L7;constructor(){super(13,"Screen")}}class h extends o.vu{static OFFSET=s.ky;constructor(){super([],["out[16]"],"Keyboard")}getKey(){return this.out().busVoltage}setKey(t){this.out().busVoltage=65535&t}clearKey(){this.out().busVoltage=0}get(t){return t===this.name?new o.xo(this.name,this.getKey()):super.get(t)}}class d extends o._b{ram=new l.jV;screen=new c;keyboard=new h;address=0;constructor(){super(["in[16]","load","address[15])"],["out[16]"],"Memory",[],["in","load"]),this.parts.push(this.keyboard),this.parts.push(this.screen),this.parts.push(this.ram)}tick(){const t=this.in("load").voltage();if(this.address=this.in("address").busVoltage,t){const t=this.in().busVoltage;this.address>=h.OFFSET||(this.address>=c.OFFSET?this.screen.at(this.address-c.OFFSET).busVoltage=t:this.ram.at(this.address).busVoltage=t)}}tock(){this.eval()}eval(){if(!this.ram)return;this.address=this.in("address").busVoltage;let t=0;t=this.address>=h.OFFSET?this.keyboard?.out().busVoltage??0:this.address>=c.OFFSET?this.screen?.at(this.address-c.OFFSET).busVoltage??0:this.ram?.at(this.address).busVoltage??0,this.out().busVoltage=t}in(t){if(t?.startsWith("RAM16K")){const e=(0,a.ZR)(t.match(/\[(?<idx>\d+)]/)?.groups?.idx??"0");return this.ram.at(e)}if(t?.startsWith("Screen")){const e=(0,a.ZR)(t.match(/\[(?<idx>\d+)]/)?.groups?.idx??"0");return this.screen.at(e)}return super.in(t)}get(t,e=0){return t.startsWith("RAM16K")?this.at(16383&e):t.startsWith("Screen")?this.at(e&8191+c.OFFSET):t.startsWith("Keyboard")?this.at(h.OFFSET):t.startsWith("Memory")?this.at(e):super.get(t,e)}at(t){return t>=h.OFFSET?this.keyboard.out():t>=c.OFFSET?this.screen.at(t-c.OFFSET):this.ram.at(t)}reset(){this.address=0,this.ram.reset(),this.screen.reset(),super.reset()}}class p extends o.z7{cpu;constructor(t,e){super(t),this.cpu=e}get busVoltage(){return this.cpu.D}set busVoltage(t){this.cpu.D=t}}class f extends o.z7{cpu;constructor(t,e){super(t),this.cpu=e}get busVoltage(){return this.cpu.A}set busVoltage(t){this.cpu.A=t}}class m extends o.z7{cpu;constructor(t,e){super(t),this.cpu=e}get busVoltage(){return this.cpu.PC}set busVoltage(t){this.cpu.PC=t}}class g extends o._b{_state=(0,r.p$)();get state(){return this._state}constructor(){super(["inM[16]","instruction[16]","reset"],["outM[16]","writeM","addressM[15]","pc[15]"],"CPU",[],["pc","addressM","reset"])}tick(){const[t,e]=(0,r.gV)(this.cpuInput(),this._state);this._state=t,this.out("writeM").pull(e?o.RY:o.$L),this.out("outM").busVoltage=this._state.ALU??0}tock(){if(!this._state)return;const[t,e]=(0,r.I8)(this.cpuInput(),this._state);this._state=e,this.out("addressM").busVoltage=t.addressM??0,this.out("outM").busVoltage=t.outM??0,this.out("writeM").pull(t.writeM?o.RY:o.$L),this.out("pc").busVoltage=this._state?.PC??0}cpuInput(){return{inM:this.in("inM").busVoltage,instruction:this.in("instruction").busVoltage,reset:1===this.in("reset").busVoltage}}get(t,e){return t?.startsWith("ARegister")?new f("ARegister",this._state):t?.startsWith("DRegister")?new p("DRegister",this._state):t?.startsWith("PC")?new m("PC",this._state):super.get(t,e)}reset(){this._state=(0,r.p$)(),this._state.PC=-1,super.reset()}}class y extends o.vu{cpu=new g;ram=new d;rom=new u;constructor(){super(["reset"],[]),this.wire(this.cpu,[{from:{name:"reset",start:0},to:{name:"reset",start:0}},{from:{name:"instruction",start:0},to:{name:"instruction",start:0}},{from:{name:"oldOutM",start:0},to:{name:"inM",start:0}},{from:{name:"writeM",start:0},to:{name:"writeM",start:0}},{from:{name:"addressM",start:0},to:{name:"addressM",start:0}},{from:{name:"newInM",start:0},to:{name:"outM",start:0}},{from:{name:"pc",start:0},to:{name:"pc",start:0}}]),this.wire(this.rom,[{from:{name:"pc",start:0},to:{name:"address",start:0}},{from:{name:"instruction",start:0},to:{name:"out",start:0}}]),this.wire(this.ram,[{from:{name:"newInM",start:0},to:{name:"in",start:0}},{from:{name:"writeM",start:0},to:{name:"load",start:0}},{from:{name:"addressM",start:0},to:{name:"address",start:0}},{from:{name:"oldOutM",start:0},to:{name:"out",start:0}}]);for(const t of[...this.ins.entries(),...this.outs.entries()])this.isClockedPin(t.name)&&this.clockedPins.add(t.name)}eval(){super.eval()}get(t,e){return t.startsWith("PC")||t.startsWith("ARegister")||t.startsWith("DRegister")?this.cpu.get(t):t.startsWith("RAM16K")?this.ram.get(t,e):super.get(t,e)}async load(t,e){return await this.rom.load(t,e)}}},6980:(t,e,n)=>{n.d(e,{Hs:()=>L,Mo:()=>B,M1:()=>H,KQ:()=>$});var r=n(5874),s=n(9651);class i extends s.vu{constructor(){super(["a","b"],["out"])}eval(){const t=this.in("a").voltage(),e=this.in("b").voltage(),[n]=function(t,e){return[1===t&&1===e?s.RY:s.$L]}(t,e);this.out().pull(n)}}class a extends s.vu{constructor(){super(["a[16]","b[16]"],["out[16]"])}eval(){const t=this.in("a").busVoltage,e=this.in("b").busVoltage,[n]=function(t,e){return[t&e&65535]}(t,e);this.out().busVoltage=n}}class o extends s.vu{constructor(){super(["in","sel"],["a","b"])}eval(){const t=this.in("in").voltage(),e=this.in("sel").voltage(),[n,r]=function(t,e){return[e===s.$L&&t===s.RY?s.RY:s.$L,e===s.RY&&t===s.RY?s.RY:s.$L]}(t,e);this.out("a").pull(n),this.out("b").pull(r)}}class l extends s.vu{constructor(){super(["in","sel[2]"],["a","b","c","d"])}eval(){const t=this.in("in").voltage(),e=this.in("sel").busVoltage,[n,r,i,a]=function(t,e){return[0===e&&t===s.RY?s.RY:s.$L,1===e&&t===s.RY?s.RY:s.$L,2===e&&t===s.RY?s.RY:s.$L,3===e&&t===s.RY?s.RY:s.$L]}(t,e);this.out("a").pull(n),this.out("b").pull(r),this.out("c").pull(i),this.out("d").pull(a)}}class u extends s.vu{constructor(){super(["in","sel[3]"],["a","b","c","d","e","f","g","h"])}eval(){const t=this.in("in").voltage(),e=this.in("sel").busVoltage,[n,r,i,a,o,l,u,c]=function(t,e){return[0===e&&t===s.RY?s.RY:s.$L,1===e&&t===s.RY?s.RY:s.$L,2===e&&t===s.RY?s.RY:s.$L,3===e&&t===s.RY?s.RY:s.$L,4===e&&t===s.RY?s.RY:s.$L,5===e&&t===s.RY?s.RY:s.$L,6===e&&t===s.RY?s.RY:s.$L,7===e&&t===s.RY?s.RY:s.$L]}(t,e);this.out("a").pull(n),this.out("b").pull(r),this.out("c").pull(i),this.out("d").pull(a),this.out("e").pull(o),this.out("f").pull(l),this.out("g").pull(u),this.out("h").pull(c)}}function c(t,e,n){return[n===s.$L?t:e]}function h(t,e,n,r,s){const i=1&s;return 0===(2&s)?c(t,e,i):c(n,r,i)}class d extends s.vu{constructor(){super(["a","b","sel"],["out"])}eval(){const t=this.in("a").voltage(),e=this.in("b").voltage(),n=this.in("sel").voltage(),[r]=function(t,e,n){return[n===s.$L?t:e]}(t,e,n);this.out().pull(r)}}class p extends s.vu{constructor(){super(["a[16]","b[16]","sel"],["out[16]"])}eval(){const t=this.in("a").busVoltage,e=this.in("b").busVoltage,n=this.in("sel").voltage(),[r]=c(t,e,n);this.out().busVoltage=r}}class f extends s.vu{constructor(){super(["a[16]","b[16]","c[16]","d[16]","sel[2]"],["out[16]"])}eval(){const t=this.in("a").busVoltage,e=this.in("b").busVoltage,n=this.in("c").busVoltage,r=this.in("d").busVoltage,s=this.in("sel").busVoltage,[i]=h(t,e,n,r,s);this.out().busVoltage=i}}class m extends s.vu{constructor(){super(["a[16]","b[16]","c[16]","d[16]","e[16]","f[16]","g[16]","h[16]","sel[3]"],["out[16]"])}eval(){const t=this.in("a").busVoltage,e=this.in("b").busVoltage,n=this.in("c").busVoltage,r=this.in("d").busVoltage,s=this.in("e").busVoltage,i=this.in("f").busVoltage,a=this.in("g").busVoltage,o=this.in("h").busVoltage,l=this.in("sel").busVoltage,[u]=function(t,e,n,r,s,i,a,o,l){const u=3&l;return 0===(4&l)?h(t,e,n,r,u):h(s,i,a,o,u)}(t,e,n,r,s,i,a,o,l);this.out().busVoltage=u}}var g=n(7844);class y extends s.vu{constructor(){super(["a","b"],["out"])}eval(){const t=this.in("a").voltage(),e=this.in("b").voltage(),[n]=function(t,e){return[1===t&&1===e?s.$L:s.RY]}(t,e);this.out().pull(n)}}class v extends s.vu{constructor(){super(["a[16]","b[16]"],["out[16]"])}eval(){const t=this.in("a").busVoltage,e=this.in("b").busVoltage;this.out().busVoltage=(0,g.xu)(t,e)}}class b extends s.vu{constructor(){super(["in"],["out"])}eval(){const t=this.in("in").voltage(),[e]=[t===s.$L?s.RY:s.$L];this.out().pull(e)}}class x extends s.vu{constructor(){super(["in[16]"],["out[16]"])}eval(){const[t]=[65535&~this.in().busVoltage];this.out().busVoltage=t}}function S(t,e){return[1===t||1===e?s.RY:s.$L]}class w extends s.vu{constructor(){super(["a","b"],["out"])}eval(){const t=this.in("a").voltage(),e=this.in("b").voltage(),[n]=S(t,e);this.out().pull(n)}}class _ extends s.vu{constructor(){super(["a[16]","b[16]"],["out[16]"])}eval(){const t=this.in("a").busVoltage,e=this.in("b").busVoltage,[n]=function(t,e){return[65535&(t|e)]}(t,e);this.out().busVoltage=n}}class E extends s.vu{constructor(){super(["in[8]"],["out"],"Or8way")}eval(){const t=this.in().busVoltage,[e]=function(t){return[0===(255&t)?s.$L:s.RY]}(t);this.out().pull(e)}}class T extends s.vu{constructor(){super(["a","b"],["out"])}eval(){const t=this.in("a").voltage(),e=this.in("b").voltage(),[n]=function(t,e){return[t===s.RY&&e===s.$L||t===s.$L&&e===s.RY?s.RY:s.$L]}(t,e);this.out().pull(n)}}class A extends s.vu{constructor(){super(["a[16]","b[16]"],["out[16]"])}eval(){const t=this.in("a").busVoltage,e=this.in("b").busVoltage,[n]=function(t,e){return[65535&(t^e)]}(t,e);this.out().busVoltage=n}}function I(t,e){return[t+e&65535]}class C extends s.vu{constructor(){super(["a[16]","b[16]"],["out[16]"],"Add16")}eval(){const t=this.in("a").busVoltage,e=this.in("b").busVoltage,[n]=I(t,e);this.out().busVoltage=n}}var R=n(8739);class k extends s.vu{constructor(){super(["x[16]","y[16]","zx","nx","zy","ny","f","no"],["out[16]"],"ALU")}eval(){const t=this.in("x").busVoltage,e=this.in("y").busVoltage,n=(this.in("zx").busVoltage<<5)+(this.in("nx").busVoltage<<4)+(this.in("zy").busVoltage<<3)+(this.in("ny").busVoltage<<2)+(this.in("f").busVoltage<<1)+(this.in("no").busVoltage|0),[r]=(0,R.v0)(n,t,e);this.out().busVoltage=r}}class L extends s.vu{constructor(){super(["x[16]","y[16]","zx","nx","zy","ny","f","no"],["out[16]","zr","ng"],"ALU")}eval(){const t=this.in("x").busVoltage,e=this.in("y").busVoltage,n=(this.in("zx").busVoltage<<5)+(this.in("nx").busVoltage<<4)+(this.in("zy").busVoltage<<3)+(this.in("ny").busVoltage<<2)+(this.in("f").busVoltage<<1)+(this.in("no").busVoltage|0),[r,i]=(0,R.v0)(n,t,e),a=i===R.iI.Negative?s.RY:s.$L,o=i===R.iI.Zero?s.RY:s.$L;this.out("out").busVoltage=r,this.out("ng").pull(a),this.out("zr").pull(o)}op(){return(this.in("zx").busVoltage<<5)+(this.in("nx").busVoltage<<4)+(this.in("zy").busVoltage<<3)+(this.in("ny").busVoltage<<2)+(this.in("f").busVoltage<<1)+(this.in("no").busVoltage|0)}}s.vu;function N(t,e){return[1===t&&0===e||0===t&&1===e?s.RY:s.$L,1===t&&1===e?s.RY:s.$L]}class O extends s.vu{constructor(){super(["a","b"],["sum","carry"])}eval(){const t=this.in("a").voltage(),e=this.in("b").voltage(),[n,r]=N(t,e);this.out("sum").pull(n),this.out("carry").pull(r)}}class P extends s.vu{constructor(){super(["a","b","c"],["sum","carry"])}eval(){const t=this.in("a").voltage(),e=this.in("b").voltage(),n=this.in("c").voltage(),[r,s]=function(t,e,n){const[r,s]=N(t,e),[i,a]=N(r,n),[o]=S(s,a);return[i,o]}(t,e,n);this.out("sum").pull(r),this.out("carry").pull(s)}}class F extends s.vu{constructor(){super(["in[16]"],["out[16]"],"Inc16")}eval(){const t=this.in().busVoltage,[e]=I(t,1);this.out().busVoltage=e}}var D=n(7738);const M={CPU:"CHIP CPU {\n\n    IN  inM[16],         // M value input  (M = contents of RAM[A])\n        instruction[16], // Instruction for execution\n        reset;           // Signals whether to re-start the current\n                         // program (reset==1) or continue executing\n                         // the current program (reset==0).\n\n    OUT outM[16],        // M value output\n        writeM,          // Write to M? \n        addressM[15],    // Address in data memory (of M)\n        pc[15];          // address of next instruction\n\n    PARTS:\n    Mux16(a=instruction, b=ALUoutput, sel=instruction[15], out=Ainput);\n    Not(in=instruction[15], out=Ainstruction);\n    Or(a=Ainstruction, b=instruction[5], out=loadA);\n    ARegister(in=Ainput, load=loadA, out=Aoutput, out[0..14]=addressM);\n\n    And(a=instruction[15], b=instruction[4], out=loadD);\n    DRegister(in=ALUoutput, load=loadD, out=Doutput);\n\n    Mux16(a=Aoutput, b=inM, sel=instruction[12], out=ALUsecondInput);\n\n    ALU(x=Doutput, y=ALUsecondInput, \n        zx=instruction[11], nx=instruction[10], \n        zy=instruction[9], ny=instruction[8],\n        f=instruction[7], no=instruction[6], \n        out=ALUoutput, out=outM, ng=negative, zr=zero);\n\n    And(a=instruction[15], b=instruction[3], out=writeM);\n\n    Or(a=negative, b=zero, out=notPositive);\n    Not(in=notPositive, out=positive);\n\n    And(a=positive, b=instruction[0], out=j1);\n    And(a=zero, b=instruction[1], out=j2);\n    And(a=negative, b=instruction[2], out=j3);\n    Or(a=j1, b=j2, out=jTemp);\n    Or(a=jTemp, b=j3, out=jumpIfC);\n    And(a=jumpIfC, b=instruction[15], out=jump);\n\n    PC(reset=reset, inc=true, load=jump, in=Aoutput, out[0..14]=pc);\n}"};var U=n(7761),j=n(2331);class z extends s._b{constructor(t){super(["in"],["out"],t,["t"],["in"])}tick(){const t=this.in().voltage();this.pin("t").pull(t)}tock(){const t=this.pin("t").voltage();this.out().pull(t)}}var V=n(836);const B=new Map([["Nand",y],["Nand16",v],["Not",b],["Not16",x],["And",i],["And16",a],["Or",w],["Or16",_],["Or8Way",E],["XOr",T],["XOr16",A],["Xor",T],["Xor16",A],["Mux",d],["Mux16",p],["Mux4Way16",f],["Mux8Way16",m],["DMux",o],["DMux4Way",l],["DMux8Way",u],["HalfAdder",O],["FullAdder",P],["Add16",C],["Inc16",F],["ALU",L],["ALUNoStat",k],["DFF",z],["Bit",j.G],["Register",j.UZ],["ARegister",j.UZ],["DRegister",j.UZ],["PC",j.PC],["RAM8",V.Z4],["RAM64",V.JG],["RAM512",V.fn],["RAM4K",V.g0],["RAM16K",V.jV],["ROM32K",U.N4],["Screen",U.ff],["Keyboard",U.s3],["CPU",U.Z8],["Computer",U.Sc],["Memory",U.ce],["ARegister",j.s$],["DRegister",j.s$]].map((([t,e])=>[t,()=>{const n=new e;return n.name=t,n}])));function $(t){return B.has(t)}async function H(t){if(M[t]){const e=await(0,D.qg)(M[t],t);return(0,r.ys)(e)?(0,r._)(new Error((0,r._)(e).message)):e}const e=B.get(t);return e?(0,r.Ok)(e()):(0,r._)(new Error(`Chip ${t} not in builtin registry`))}},2331:(t,e,n)=>{n.d(e,{G:()=>s,PC:()=>l,UZ:()=>a,s$:()=>o});var r=n(9651);class s extends r._b{bit=r.$L;constructor(t){super(["in","load"],["out"],t,[],["in","load"])}tick(){this.in("load").voltage()===r.RY&&(this.bit=this.in().voltage())}tock(){this.out().pull(this.bit??0)}reset(){this.bit=r.$L,super.reset()}}class i extends r.z7{register;constructor(t,e){super(t),this.register=e}get busVoltage(){return 65535&this.register.bits}set busVoltage(t){this.register.bits=65535&t}}class a extends r._b{bits=0;constructor(t){super(["in[16]","load"],["out[16]"],t,[],["in","load"])}tick(){this.in("load").voltage()===r.RY&&(this.bits=65535&this.in().busVoltage)}tock(){this.out().busVoltage=65535&this.bits}get(t,e){return t===this.name?new i(this.name,this):super.get(t,e)}reset(){this.bits=0,super.reset()}}class o extends a{}class l extends r._b{bits=0;constructor(t){super(["in[16]","reset","load","inc"],["out[16]"],t,[],["in","reset","load","inc"])}tick(){this.in("reset").voltage()===r.RY?this.bits=0:this.in("load").voltage()===r.RY?this.bits=65535&this.in().busVoltage:this.in("inc").voltage()===r.RY&&(this.bits+=1)}tock(){this.out().busVoltage=65535&this.bits}get(t,e){return t===this.name?new i(this.name,this):super.get(t,e)}reset(){this.bits=0,super.reset()}}},836:(t,e,n)=>{n.d(e,{JG:()=>u,XK:()=>a,Z4:()=>l,fn:()=>c,g0:()=>h,jV:()=>d});var r=n(2469),s=n(7076),i=n(9651);class a extends i._b{width;_memory;_nextData=0;_address=0;get memory(){return this._memory}get address(){return this._address}constructor(t,e){super(["in[16]","load",`address[${t}]`],["out[16]"],e,[],["in","load"]),this.width=t,this._memory=new s.ce(Math.pow(2,this.width))}tick(){const t=this.in("load").voltage();this._address=this.in("address").busVoltage,t&&(this._nextData=this.in().busVoltage,this._memory.set(this._address,this._nextData))}tock(){this.out().busVoltage=this._memory?.get(this._address)??0}eval(){const t=this.in("address").busVoltage;this.out().busVoltage=this._memory?.get(t)??0}at(t){return(0,r.vA)(t<this._memory.size,(()=>`Request out of bounds (${t} >= ${this._memory.size})`)),new o(`${this.name}[${t}]`,t,this._memory)}get(t,e){return t===this.name?this.at(e??0):super.get(t)}reset(){this._memory.reset(),super.reset()}}class o extends i.z7{index;ram;constructor(t,e,n){super(t),this.index=e,this.ram=n}get busVoltage(){return this.ram.get(this.index)}set busVoltage(t){this.ram.set(this.index,t)}}class l extends a{constructor(){super(3,"RAM8")}}class u extends a{constructor(){super(6,"RAM64")}}class c extends a{constructor(){super(9,"RAM512")}}class h extends a{constructor(){super(12,"RAM4K")}}class d extends a{constructor(){super(14,"RAM16K")}}},9651:(t,e,n)=>{n.d(e,{$L:()=>l,KK:()=>u,RY:()=>o,_b:()=>w,ti:()=>S,vu:()=>x,xo:()=>p,z7:()=>c});var r=n(2469),s=n(742),i=n(5874),a=n(3096);const o=1,l=0;function u(t){return"false"===t||"true"===t||"0"===t||"1"===t}class c{name;width;state;next=[];constructor(t,e=1){this.name=t,this.width=e,this.state=(0,s.y)(0,this.width).map((()=>l))}ensureWidth(t){(0,r.vA)(t<=16,`Cannot widen past 16 to ${t} bits`),this.width<t&&(this.width=t,this.state=[...this.state,...(0,s.y)(this.width,t).map((()=>l))])}connect(t){this.next.push(t),t.busVoltage=this.busVoltage}pull(t,e=0){(0,r.vA)(e>=0&&e<this.width,`Bit out of bounds: ${this.name}@${e}`),this.state[e]=t,this.next.forEach((n=>n.pull(t,e)))}voltage(t=0){return(0,r.vA)(t>=0&&t<this.width),this.state[t]}set busVoltage(t){for(const e of(0,s.y)(0,this.width))this.state[e]=(t&1<<e)>>e;this.next.forEach((t=>t.busVoltage=this.busVoltage))}get busVoltage(){return(0,s.y)(0,this.width).reduce(((t,e)=>t|this.state[e]<<e),0)}toggle(t=0){const e=this.voltage(t)===l?o:l;this.pull(e,t)}}class h extends c{bus;start;width;constructor(t,e,n=1){super(t.name),this.bus=t,this.start=e,this.width=n,(0,r.vA)(e>=0&&e+n<=t.width,`Mismatched InSubBus dimensions on ${t.name} (${n} + ${e} > ${t.width})`),this.connect(t)}pull(t,e=0){(0,r.vA)(e>=0&&e<this.width),this.bus.pull(t,this.start+e)}voltage(t=0){return(0,r.vA)(t>=0&&t<this.width),this.bus.voltage(this.start+t)}set busVoltage(t){const e=this.bus.busVoltage&~_(this.width+this.start),n=this.bus.busVoltage&_(this.start),r=(t&_(this.width))<<this.start;this.bus.busVoltage=e|r|n}get busVoltage(){return this.bus.busVoltage>>this.start&_(this.width)}connect(t){(0,r.vA)(this.start+this.width<=t.width,`Mismatched InSubBus connection dimensions (From ${t.name} to ${this.name})`),this.bus=t}}class d extends c{bus;start;width;constructor(t,e,n=1){super(t.name),this.bus=t,this.start=e,this.width=n,(0,r.vA)(e>=0&&n<=t.width,"Mismatched OutSubBus dimensions"),this.connect(t)}set busVoltage(t){this.bus.busVoltage=(t&_(this.width+this.start))>>this.start}get busVoltage(){return this.bus.busVoltage&_(this.width)}connect(t){(0,r.vA)(this.width<=t.width,"Mismatched OutSubBus connection dimensions"),this.bus=t}}class p extends c{value;constructor(t,e){super(t,16),this.value=e}pullHigh(t=0){}pullLow(t=0){}voltage(t=0){return 1&this.busVoltage}set busVoltage(t){}get busVoltage(){return this.value}}const f=new p("true",65535),m=new p("false",0);function g(t){const{pin:e,w:n}=t.match(/(?<pin>[a-zA-Z]+)(\[(?<w>\d+)\])?/)?.groups;return{pin:e,width:n?Number(n):1}}class y{map=new Map;insert(t){const{name:e}=t;(0,r.vA)(!this.map.has(e),`Pins already has ${e}!`),this.map.set(e,t)}emplace(t,e){if(this.has(t))return this.get(t);{const n=new c(t,e);return this.insert(n),n}}has(t){return this.map.has(t)}get(t){return this.map.get(t)}entries(){return this.map.values()}[Symbol.iterator](){return this.map[Symbol.iterator]()}}function v(t,e,n){return t+e<=n.width?(0,i.Ok)():(0,i._)(`Sub-bus index out of range (${n.name} has width ${n.width})`)}let b=0;class x{name;id=b++;ins=new y;outs=new y;pins=new y;insToPart=new Map;partToOuts=new Map;parts=[];clockedPins;clockSubscription;get clocked(){if(this.clockedPins.size>0)return!0;for(const t of this.parts)if(t.clocked)return!0;return!1}constructor(t,e,n,r=[],s=[]){this.name=n;for(const i of t){const{pin:t,width:e=1}=void 0!==i.pin?i:g(i);this.ins.insert(new c(t,e))}for(const i of e){const{pin:t,width:e=1}=void 0!==i.pin?i:g(i);this.outs.insert(new c(t,e))}for(const i of r){const{pin:t,width:e=1}=void 0!==i.pin?i:g(i);this.pins.insert(new c(t,e))}this.clockedPins=new Set(s),this.subscribeToClock()}subscribeToClock(){this.clockSubscription?.unsubscribe(),this.clockSubscription=a.z.subscribe((()=>this.eval()))}reset(){for(const[t,e]of this.ins)e.busVoltage=0;for(const t of this.parts)t.reset();this.eval()}in(t="in"){return(0,r.vA)(this.hasIn(t),`No in pin ${t}`),this.ins.get(t)}out(t="out"){return(0,r.vA)(this.hasOut(t),`No in pin ${t}`),this.outs.get(t)}hasIn(t){return this.ins.has(t)}hasOut(t){return this.outs.has(t)}pin(t){return(0,r.vA)(this.pins.has(t)),this.pins.get(t)}get(t,e){return this.ins.has(t)?this.ins.get(t):this.outs.has(t)?this.outs.get(t):this.pins.has(t)?this.pins.get(t):this.getBuiltin(t,e)}getBuiltin(t,e=0){if(E.includes(t))for(const n of this.parts){const r=n.get(t,e);if(r)return r}}isInPin(t){return this.ins.has(t)}isOutPin(t){return this.outs.has(t)}isExternalPin(t){return this.isInPin(t)||this.isOutPin(t)||u(t)}isInternalPin(t){return!this.isExternalPin(t)}pathExists(t,e){const n=[t];for(;n.length>0;){const t=(0,r.Z1)(n.pop());if("string"==typeof t){if(t==e)return!0;n.push(...this.insToPart.get(t)??[])}else n.push(...this.partToOuts.get(t)??[])}return!1}isClockedPin(t){return this.isInPin(t)?![...this.outs].some((([e,n])=>this.pathExists(t,e))):![...this.ins].some((([e,n])=>this.pathExists(e,t)))}hasConnection(t,e){return[...this.partToOuts.get(t)??[]].some((t=>this.insToPart.get(t)?.has(e)))}wire(t,e){for(let n=0;n<e.length;n++){const{from:r,to:s}=e[n];if(t.isOutPin(s.name)){const e=this.wireOutPin(t,s,r);if((0,i.ys)(e))return(0,i._)({wireIndex:n,lhs:(0,i._)(e).lhs,message:(0,i._)(e).message})}else{const e=this.wireInPin(t,s,r);if((0,i.ys)(e))return(0,i._)({wireIndex:n,lhs:(0,i._)(e).lhs,message:(0,i._)(e).message})}}return this.parts.push(t),(0,i.Ok)()}sortParts(){const t=[],e=new Set,n=new Set,s=this.parts.map((t=>({part:t,isReturning:!1})));for(;s.length>0;){const i=(0,r.Z1)(s.pop());if(i.isReturning)e.add(i.part),t.push(i.part);else if(!e.has(i.part)){if(n.has(i.part))return!0;n.add(i.part),s.push({part:i.part,isReturning:!0});for(const t of this.partToOuts.get(i.part)??[])s.push(...Array.from(this.insToPart.get(t)??[]).filter((t=>!e.has(t))).map((t=>({part:t,isReturning:!1}))))}}return this.parts=t.reverse(),!1}findPin(t,e){return"true"===t||"1"===t?f:"false"===t||"0"===t?m:this.ins.has(t)?this.ins.get(t):this.outs.has(t)?this.outs.get(t):this.pins.emplace(t,e)}wireOutPin(t,e,n){const s=(0,r.Z1)(t.outs.get(e.name),(()=>`Cannot wire to missing pin ${e.name}`));e.width??=s.width;let a=this.findPin(n.name,n.width??e.width);const o=this.pins.has(a.name);if(n.width??=a.width,a instanceof p)return(0,i._)({message:"Cannot wire to constant bus",lhs:!0});if(o&&a instanceof c&&a.ensureWidth(n.start+n.width),n.start>0||n.width!==a.width){const t=v(n.start,n.width,a);if((0,i.ys)(t))return(0,i._)({message:(0,i._)(t),lhs:!0});a=new h(a,n.start,n.width)}if(e.start>0||e.width!==s.width){const t=v(e.start,e.width,s);if((0,i.ys)(t))return(0,i._)({message:(0,i._)(t),lhs:!1});a=new d(a,e.start,e.width)}if(!t.clockedPins.has(s.name)){const e=this.partToOuts.get(t)??new Set;e.add(a.name),this.partToOuts.set(t,e)}if(this.sortParts()){const e=this.partToOuts.get(t)??new Set;return e.delete(a.name),this.partToOuts.set(t,e),(0,i._)({message:"Circular pin dependency",lhs:!1})}return s.connect(a),(0,i.Ok)()}wireInPin(t,e,n){let s=(0,r.Z1)(t.ins.get(e.name),(()=>`Cannot wire to missing pin ${e.name}`));e.width??=s.width;const a=this.findPin(n.name,n.width??e.width);if(n.width??=a.width,e.start>0||e.width!==s.width){const t=v(e.start,e.width,s);if((0,i.ys)(t))return(0,i._)({message:(0,i._)(t),lhs:!0});s=new h(s,e.start,e.width)}if(!["true","false"].includes(a.name)&&(n.start>0||n.width!==a.width)){const t=v(n.start,n.width,a);if((0,i.ys)(t))return(0,i._)({message:(0,i._)(t),lhs:!1});s=new d(s,n.start,n.width)}if(!t.clockedPins.has(s.name)){const e=this.insToPart.get(a.name)??new Set;e.add(t),this.insToPart.set(a.name,e)}if(this.sortParts()){const e=this.insToPart.get(a.name)??new Set;return e.delete(t),this.insToPart.set(a.name,e),(0,i._)({message:"Circular pin dependency",lhs:!0})}return a.connect(s),(0,i.Ok)()}eval(){for(const t of this.parts)f.next.forEach((t=>t.busVoltage=f.busVoltage)),m.next.forEach((t=>t.busVoltage=m.busVoltage)),t.eval()}tick(){this.eval()}tock(){this.eval()}remove(){this.clockSubscription?.unsubscribe();for(const t of this.parts)t.remove()}async load(t,e){for(const n of this.parts)"ROM32K"===n.name&&await n.load(t,e)}}class S extends x{constructor(){super([],[]),this.outs.insert(m)}}class w extends x{get clocked(){return!0}subscribeToClock(){this.clockSubscription?.unsubscribe(),this.clockSubscription=a.z.subscribe((({level:t})=>{t===l?this.tock():this.tick()}))}remove(){this.clockSubscription?.unsubscribe(),super.remove()}reset(){super.reset(),this.tick(),this.tock()}}function _(t){return Math.pow(2,t)-1}const E=["Register","ARegister","DRegister","PC","RAM8","RAM64","RAM512","RAM4K","RAM16K","ROM32K","Screen","Keyboard","Memory"]},3096:(t,e,n)=>{n.d(e,{z:()=>$});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}Object.create;function i(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,s,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(o){s={error:o}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return a}function o(t,e,n){if(n||2===arguments.length)for(var r,s=0,i=e.length;s<i;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;"function"===typeof SuppressedError&&SuppressedError;function l(t){return"function"===typeof t}function u(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var c=u((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function h(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var d=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var t,e,n,r,s;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var h=i(u),d=h.next();!d.done;d=h.next()){d.value.remove(this)}}catch(b){t={error:b}}finally{try{d&&!d.done&&(e=h.return)&&e.call(h)}finally{if(t)throw t.error}}else u.remove(this);var p=this.initialTeardown;if(l(p))try{p()}catch(x){s=x instanceof c?x.errors:[x]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var g=i(f),y=g.next();!y.done;y=g.next()){var v=y.value;try{m(v)}catch(S){s=null!==s&&void 0!==s?s:[],S instanceof c?s=o(o([],a(s)),a(S.errors)):s.push(S)}}}catch(w){n={error:w}}finally{try{y&&!y.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}}if(s)throw new c(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)m(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&h(e,t)},t.prototype.remove=function(e){var n=this._finalizers;n&&h(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),p=d.EMPTY;function f(t){return t instanceof d||t&&"closed"in t&&l(t.remove)&&l(t.add)&&l(t.unsubscribe)}function m(t){l(t)?t():t.unsubscribe()}var g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},y={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var s=y.delegate;return(null===s||void 0===s?void 0:s.setTimeout)?s.setTimeout.apply(s,o([t,e],a(n))):setTimeout.apply(void 0,o([t,e],a(n)))},clearTimeout:function(t){var e=y.delegate;return((null===e||void 0===e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function v(){}var b=x("C",void 0,void 0);function x(t,e,n){return{kind:t,value:e,error:n}}var S=null;function w(t){if(g.useDeprecatedSynchronousErrorHandling){var e=!S;if(e&&(S={errorThrown:!1,error:null}),t(),e){var n=S,r=n.errorThrown,s=n.error;if(S=null,r)throw s}}else t()}var _=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,f(e)&&e.add(n)):n.destination=k,n}return s(e,t),e.create=function(t,e,n){return new I(t,e,n)},e.prototype.next=function(t){this.isStopped?R(function(t){return x("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?R(x("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?R(b,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(d),E=Function.prototype.bind;function T(t,e){return E.call(t,e)}var A=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(n){C(n)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(n){C(n)}else C(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){C(e)}},t}(),I=function(t){function e(e,n,r){var s,i,a=t.call(this)||this;l(e)||!e?s={next:null!==e&&void 0!==e?e:void 0,error:null!==n&&void 0!==n?n:void 0,complete:null!==r&&void 0!==r?r:void 0}:a&&g.useDeprecatedNextContext?((i=Object.create(e)).unsubscribe=function(){return a.unsubscribe()},s={next:e.next&&T(e.next,i),error:e.error&&T(e.error,i),complete:e.complete&&T(e.complete,i)}):s=e;return a.destination=new A(s),a}return s(e,t),e}(_);function C(t){var e;g.useDeprecatedSynchronousErrorHandling?(e=t,g.useDeprecatedSynchronousErrorHandling&&S&&(S.errorThrown=!0,S.error=e)):function(t){y.setTimeout((function(){var e=g.onUnhandledError;if(!e)throw t;e(t)}))}(t)}function R(t,e){var n=g.onStoppedNotification;n&&y.setTimeout((function(){return n(t,e)}))}var k={closed:!0,next:v,error:function(t){throw t},complete:v},L="function"===typeof Symbol&&Symbol.observable||"@@observable";function N(t){return t}function O(t){return 0===t.length?N:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var P=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r,s=this,i=(r=t)&&r instanceof _||function(t){return t&&l(t.next)&&l(t.error)&&l(t.complete)}(r)&&f(r)?t:new I(t,e,n);return w((function(){var t=s,e=t.operator,n=t.source;i.add(e?e.call(i,n):n?s._subscribe(i):s._trySubscribe(i))})),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=F(e))((function(e,r){var s=new I({next:function(e){try{t(e)}catch(n){r(n),s.unsubscribe()}},error:r,complete:e});n.subscribe(s)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[L]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return O(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=F(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function F(t){var e;return null!==(e=null!==t&&void 0!==t?t:g.Promise)&&void 0!==e?e:Promise}var D=u((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),M=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return s(e,t),e.prototype.lift=function(t){var e=new U(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new D},e.prototype.next=function(t){var e=this;w((function(){var n,r;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var s=i(e.currentObservers),a=s.next();!a.done;a=s.next()){a.value.next(t)}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}))},e.prototype.error=function(t){var e=this;w((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var n=e.observers;n.length;)n.shift().error(t)}}))},e.prototype.complete=function(){var t=this;w((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,n=this,r=n.hasError,s=n.isStopped,i=n.observers;return r||s?p:(this.currentObservers=null,i.push(t),new d((function(){e.currentObservers=null,h(i,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,n=e.hasError,r=e.thrownError,s=e.isStopped;n?t.error(r):s&&t.complete()},e.prototype.asObservable=function(){var t=new P;return t.source=this,t},e.create=function(t,e){return new U(t,e)},e}(P),U=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return s(e,t),e.prototype.next=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)},e.prototype.error=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:p},e}(M),j=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return s(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){var t=this,e=t.hasError,n=t.thrownError,r=t._value;if(e)throw n;return this._throwIfClosed(),r},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(M),z=n(2469),V=n(9651);let B;class ${level=V.$L;ticks=0;static get(){return void 0===B&&(B=new $),B}static subscribe(t){return $.get().$.subscribe(t)}get isHigh(){return this.level===V.RY}get isLow(){return this.level===V.$L}subject=new j({level:this.level,ticks:this.ticks});frameSubject=new M;resetSubject=new M;$=this.subject;frame$=this.frameSubject;reset$=this.resetSubject;next(){this.subject.next({level:this.level,ticks:this.ticks})}constructor(){}reset(){this.level=V.$L,this.ticks=0,this.next(),this.resetSubject.next()}tick(){(0,z.vA)(this.level===V.$L,"Can only tick up from LOW"),this.level=V.RY,this.next()}tock(){(0,z.vA)(this.level===V.RY,"Can only tock down from HIGH"),this.level=V.$L,this.ticks+=1,this.next()}toggle(){this.level===V.RY?this.tock():this.tick()}eval(){this.tick(),this.tock()}frame(){this.frameSubject.next()}toString(){return`${this.ticks}${this.level===V.RY?"+":""}`}}},8739:(t,e,n)=>{n.d(e,{Lo:()=>a,Nt:()=>l,Qv:()=>h,_0:()=>i,ft:()=>d,iI:()=>p,nf:()=>s,qn:()=>m,uW:()=>u,v0:()=>f});const r=new Set(["0","1","-1","D","A","!D","!A","-D","-A","D+1","A+1","D-1","A-1","D+A","D-A","A-D","D&A","D|A"]);function s(t){return r.has(t)||r.has(t.replace("M","A"))}const i={op:{42:"0",63:"1",58:"-1",12:"x",48:"y",13:"!x",49:"!y",15:"-x",51:"-y",31:"x+1",55:"y+1",14:"x-1",50:"y-1",2:"x+y",19:"x-y",7:"y-x",0:"x&y",21:"x|y"}},a={asm:{0:42,1:63,"-1":58,D:12,A:48,"!D":13,"!A":49,"-D":15,"-A":51,"D+1":31,"A+1":55,"D-1":14,"A-1":50,"D+A":2,"D-A":19,"A-D":7,"D&A":0,"D|A":21},op:{42:"0",63:"1",58:"-1",12:"D",48:"A",13:"!D",49:"!A",15:"-D",51:"-A",31:"D+1",55:"A+1",14:"D-1",50:"A-1",2:"D+A",19:"D-A",7:"A-D",0:"D&A",21:"D|A"},getOp:t=>a.asm[t.replace("M","A")]},o=new Set(["","M","D","MD","A","AM","AD","AMD"]);function l(t){return o.has(t)}const u={asm:{"":0,M:1,D:2,MD:3,A:4,AM:5,AD:6,AMD:7},op:{0:"",1:"M",2:"D",3:"MD",4:"A",5:"AM",6:"AD",7:"AMD"}},c=new Set(["","JGT","JEQ","JGE","JLT","JNE","JLE","JMP"]);function h(t){return c.has(t)}const d={asm:{"":0,JGT:1,JEQ:2,JGE:3,JLT:4,JNE:5,JLE:6,JMP:7},op:{0:"",1:"JGT",2:"JEQ",3:"JGE",4:"JLT",5:"JNE",6:"JLE",7:"JMP"}},p={1:"Positive",0:"Zero",15:"Negative",Positive:1,Zero:0,Negative:15};function f(t,e,n){let r=0;switch(t){case 42:r=0;break;case 63:r=1;break;case 58:r=-1;break;case 12:r=e;break;case 48:r=n;break;case 13:r=~e;break;case 49:r=~n;break;case 15:r=-e;break;case 51:r=-n;break;case 31:r=e+1;break;case 55:r=n+1;break;case 14:r=e-1;break;case 50:r=n-1;break;case 2:r=e+n;break;case 19:r=e-n;break;case 7:r=n-e;break;case 0:r=e&n;break;case 21:r=e|n}r&=65535;return[r,0===r?p.Zero:32768&r?p.Negative:p.Positive]}function m(t,e,n){32&t&&(e=0),16&t&&(e=65535&~e),8&t&&(n=0),4&t&&(n=65535&~n);let r=65535&(2&t?e+n:e&n);1&t&&(r=65535&~r);return[r,0===r?p.Zero:32768&r?p.Negative:p.Positive]}},7721:(t,e,n)=>{n.d(e,{D4:()=>o,I8:()=>u,Z8:()=>c,gV:()=>l,p$:()=>i});var r=n(8739),s=n(7076);function i(){return{A:0,D:0,PC:0,ALU:0,flag:r.iI.Zero}}const a={c:32768,x1:36864,x2:36864,am:36864,op:4032,d1:32800,d2:32784,d3:32776,j1:32769,j2:32770,j3:32772};function o(t){function e(e){return(t&e)===e}return{c:e(a.c),x1:e(a.x1),x2:e(a.x2),am:e(a.am),op:(t&a.op)>>6,d1:e(a.d1),d2:e(a.d2),d3:e(a.d3),j1:e(a.j1),j2:e(a.j2),j3:e(a.j3)}}function l({inM:t,instruction:e},{A:n,D:s,PC:i}){const a=o(e),l=a.am?t:n,[u,c]=(0,r.v0)(a.op,s,l);return a.d2&&(s=u),[{A:n,D:s,PC:i+1,ALU:u,flag:c},a.d3,u]}function u({inM:t,instruction:e,reset:n},{A:s,D:i,PC:a,ALU:l,flag:u}){const c=o(e),h=c.j1&&u===r.iI.Positive,d=c.j2&&u===r.iI.Zero,p=c.j3&&u===r.iI.Negative;a=n?0:h||d||p?s:a,c.c?c.d1&&(s=l):s=32767&e;const f=c.am?t:s,m=(0,r.v0)(c.op,i,f);l=m[0],u=m[1];return[{addressM:s,outM:l,writeM:c.d3},{A:s,D:i,ALU:l,flag:u,PC:a}]}class c{RAM;ROM;Screen;Keyboard;#s=0;#i=0;#a=0;#o={A:0,D:0,PC:0,ALU:0,flag:r.iI.Zero};get state(){return this.#o}get PC(){return this.#s}get A(){return this.#i}get D(){return this.#a}setA(t){this.#i=t}setD(t){this.#a=t}setPC(t){this.#s=t}constructor({RAM:t=new s.XK,ROM:e}){this.RAM=t,this.ROM=e,this.Screen=new s.qN(this.RAM,s.RL,s.L7),this.Keyboard=new s.PC(this.RAM)}reset(){this.#s=0,this.#i=0,this.#a=0}tick(){const t=this.#i,e={inM:this.RAM.get(this.#i),instruction:this.ROM.get(this.#s),reset:!1},[n,s,i]=l(e,{A:this.#i,D:this.#a,PC:this.#s,ALU:this.#a,flag:r.iI.Zero});s&&this.RAM.set(t,i);const[a,{A:o,D:c,PC:h}]=u(e,n);this.#i=o,this.#a=c,this.#s=h}}},7076:(t,e,n)=>{n.d(e,{L7:()=>l,PC:()=>m,RL:()=>h,XK:()=>y,ce:()=>p,dh:()=>u,hR:()=>o,ky:()=>d,n9:()=>g,pc:()=>c,qN:()=>f});var r=n(2469),s=n(6983),i=n(7496),a=n(7844);const o=["bin","dec","hex","asm"],l=16384,u=256,c=32,h=u*c,d=24576;class p{memory;get size(){return this.memory.length}constructor(t){this.memory=new Int16Array(t)}get(t){return t<0||t>=this.size?65535:this.memory[t]??0}set(t,e){t>=0&&t<this.size&&(this.memory[t]=65535&e)}reset(){this.memory.fill(0)}update(t,e,n){let r;switch(n){case"asm":try{r=(0,i.op)(e)}catch{r=void 0}break;case"bin":r=(0,a.Yp)(e);break;case"hex":r=(0,a.l8)(e);break;default:r=(0,a.ZR)(e)}void 0!==r&&isFinite(r)&&r<=65535&&this.set(t,r)}async load(t,e,n){try{this.loadBytes(await(0,s.Hh)(t,e),n)}catch(r){throw new Error(`Memory Failed to load file ${e}`)}}loadBytes(t,e){this.memory.set(new Int16Array(t),e),this.memory.fill(0,t.length,this.size)}range(t=0,e=this.size){return[...this.memory.slice(t,e)]}*map(t,e=0,n=this.size){(0,r.vA)(e<=n);for(let r=e;r<n;r++)yield t(r,this.get(r))}[Symbol.iterator](){return this.map(((t,e)=>e))}}class f{parent;size;offset;constructor(t,e,n){this.parent=t,this.size=e,this.offset=n}get(t){return t<0||t>=this.size?65535:this.parent.get(this.offset+t)}set(t,e,n=!0){t>=0&&t<this.size&&this.parent.set(t+this.offset,e)}reset(){for(let t=0;t<this.size;t++)this.set(t,0,!1)}update(t,e,n){t>=0&&t<this.size&&this.parent.update(t+this.offset,e,n)}load(t,e){return this.parent.load(t,e,this.offset)}loadBytes(t){return this.parent.loadBytes(t,this.offset)}range(t,e){return this.parent.range(t,e)}map(t,e=0,n=this.size){return this.parent.map(t,e+this.offset,n+this.offset)}[Symbol.iterator](){return this.map(((t,e)=>e))}}class m extends f{constructor(t){super(t,1,24576)}getKey(){return this.get(0)}setKey(t){this.set(0,65535&t)}clearKey(){this.set(0,0)}}class g extends p{static SIZE=32768;constructor(t){if(t){const e=new Int16Array(g.SIZE);e.set(t),super(e)}else super(g.SIZE)}}class y extends p{keyboard=new f(this,1,d);screen=new f(this,h,l);static SIZE=24577;constructor(){super(y.SIZE)}}},6983:(t,e,n)=>{n.d(e,{Hh:()=>s});var r=n(9547);async function s(t,e){if(e.endsWith(".hack"))return async function(t,e){return r.aU(await t.readFile(e))}(t,e);if(e.endsWith(".asm"))return async function(t,e){return r.aY(await t.readFile(e))}(t,e);throw new Error(`Cannot load file without hack or asm extension ${e}`)}},4666:(t,e,n)=>{n.d(e,{y0:()=>b,EU:()=>f,J$:()=>d,ld:()=>m});var r=n(2469),s=n(8739),i=n(7076),a=n(7496),o=n(3977),l=n(5874);const u='ASM <: Base {\n  Root := ASM\n  ASM = intermediateInstruction* instruction?\n  \n  instruction = label|aInstruction|cInstruction\n  intermediateInstruction = instruction space+\n\n  identifier := (letter|underscore|dot|dollar|colon) (alnum|underscore|dot|dollar|colon)*\n\n  label = openParen identifier closeParen\n  aInstruction = at (identifier | decNumber)\n  cInstruction = assign? op jmp?\n\n  assignChar = "A" | "M" | "D"\n  opChar = assignChar | "0" | "1" | "!" | "-" | "+" | "|" | "&"\n  \n  assign = assignChar+ equal\n  op = opChar+\n\n  jmp = semi ("JGT" | "JEQ" | "JGE" | "JLT" | "JNE" | "JLE" | "JMP")\n}';const c=(0,n(9563).qN)(u,o.lN),h=c.extendSemantics(o.JE);function d(t){return"A"==t.type&&void 0!==t.value}function p(t){return"A"==t.type&&void 0!==t.label}function f(t,e){let n=16;const s=new Map([["R0",0],["R1",1],["R2",2],["R3",3],["R4",4],["R5",5],["R6",6],["R7",7],["R8",8],["R9",9],["R10",10],["R11",11],["R12",12],["R13",13],["R14",14],["R15",15],["SP",0],["LCL",1],["ARG",2],["THIS",3],["THAT",4],["SCREEN",i.L7],["KBD",i.ky]]);const a=[];let u=0;for(const r of t.instructions)if("L"!==r.type)u+=1,"A"===r.type&&p(r)&&a.push(r);else{if(s.has(r.label))return(0,l._)((0,o.$5)(`Duplicate label ${r.label}`,r.span));s.set(r.label,u),e?.(r.label,u,!1)}return a.forEach((function(t){const i=(a=t.label,s.has(a)||(s.set(a,n),e?.(a,n,!0),n+=1),(0,r.Z1)(s.get(a),`Label not in symbols: ${a}`));var a;t.value=i,delete t.label})),(0,l.Ok)()}h.addAttribute("root",{Root(t){return this.asm}}),h.addAttribute("asm",{ASM(t,e){const n=t.children.map((t=>t.intermediateInstruction))??[];return{instructions:e.child(0)?[...n,e.child(0).instruction]:n}}}),h.addAttribute("intermediateInstruction",{intermediateInstruction:(t,e)=>t.instruction}),h.addAttribute("instruction",{aInstruction(t,e){return g(e.value,(0,o.Ln)(this.source))},cInstruction(t,e,n){const r=function(t){let e=t.child(0)?.child(0)?.sourceString??"";if("DM"==e&&(e="MD"),"ADM"==e&&(e="AMD"),""!=e&&!(0,s.Nt)(e)){const n=e.split("").reverse().join(""),r=(0,s.Nt)(n)?`. Did you mean ${n}?`:"";throw(0,o.$5)(`Invalid ASM target: ${e}${r}`,(0,o.Ln)(t.source))}return e}(t),i=function(t){const e=t.sourceString;if(!(0,s.nf)(e)){const n=e.split("").reverse().join(""),r=(0,s.nf)(n)?`. Did you mean ${n}?`:"";throw(0,o.$5)(`Invalid ASM value: ${t.sourceString}${r}`,(0,o.Ln)(t.source))}return e}(e),a=n.child(0)?.child(1)?.sourceString??"";return y(r,i,a,(0,o.Ln)(this.source))},label(t,{name:e},n){return v(e,(0,o.Ln)(this.source))}});function m(t){if("A"===t.type){if(p(t))throw new Error("ASM Emitting unfilled A instruction");return t.value}if("C"===t.type)return(0,a.m)(t.isM,t.op,t.store??0,t.jump??0)}const g=(t,e)=>"string"===typeof t?{type:"A",label:t,span:e}:{type:"A",value:t,span:e},y=(t,e,n,r)=>{const i={type:"C",op:s.Lo.getOp(e),isM:e.includes("M"),span:r};return n&&(i.jump=s.ft.asm[n]),t&&(i.store=s.uW.asm[t]),i},v=(t,e)=>({type:"L",label:t,span:e}),b={grammar:u,semantics:h,parser:c,parse:(0,o.Q5)(c,h),passes:{fillLabel:f,emit:function(t){return t.instructions.map(m).filter((t=>void 0!==t))}},A:g,C:y,AC:(t,e,n,r)=>[g(t),y(e,n,r)],L:v}},3977:(t,e,n)=>{n.d(e,{JE:()=>o,$5:()=>u,lN:()=>a,Q5:()=>c,Ln:()=>h});var r=n(5874),s=n(9563),i=n(7844);const a={Base:(0,s.qN)('\nBase {\n  Root = Value*\n\n  At = at\n  Bang = bang\n  Bar = bar\n  CloseAngle = closeAngle\n  CloseBrace = closeBrace\n  CloseParen = closeParen\n  CloseSquare = closeSquare\n  Comma = comma\n  Dollar = dollar\n  Dot = dot\n  DoubleQuote = doubleQuote\n  Equal = equal\n  OpenAngle = openAngle\n  OpenBrace = openBrace\n  OpenParen = openParen\n  OpenSquare = openSquare\n  Percent = percent\n  Semi = semi\n  Underscore = underscore\n\n  at = "@"\n  bang = "!"\n  bar = "|"\n  closeAngle = ">"\n  closeBrace = "}"\n  closeParen = ")"\n  closeSquare = "]"\n  comma = ","\n  dollar = "$"\n  dot = "."\n  doubleQuote = "\\""\n  equal = "="\n  minus = "-"\n  newline = "\\r"? "\\n"\n  openAngle = "<"\n  openBrace = "{"\n  openParen = "("\n  openSquare = "["\n  percent = "%"\n  semi = ";"\n  underscore = "_"\n  colon = ":"\n\n  Value = identifier | number | boolean\n\n  boolean = true | false\n  True = true\n  False = false\n  true = "true"\n  false = "false"\n\n  Name = identifier\n  identifier = (letter|underscore|dot|dollar) (alnum|underscore|dot|dollar)*\n\n  Number = number\n  number = hexNumber | decNumber | binNumber\n  binNumber = ("%B") ("0"|"1")+\n  hexNumber = ("%X") hexDigit+\n  decNumber = ("%D")? (wholeDec | realDec)\n  wholeDec = minus? digit+\n  realDec = minus? digit* "." digit+\n\n  String = DoubleQuote (~doubleQuote any)* doubleQuote\n  \n  spaces := (lineComment | comment | space)*\n  commentStart = "/*"\n  commentEnd = "*/"\n  comment = commentStart (~commentEnd any)* commentEnd\n  lineCommentStart = "//"\n  lineComment = lineCommentStart (~"\\n" any)*\n\n  List<elem, sep> = NonemptyListOf<elem, sep> sep?\n  EmptyList<elem, sep> = EmptyList<elem, sep> sep?\n}')},o=a.Base.createSemantics();o.extendOperation("asIteration",{List:(t,e)=>t.asIteration()}),o.addAttribute("value",{decNumber:(t,e)=>(0,i.ZR)(e.sourceString),wholeDec:(t,e)=>(0,i.ZR)(e.sourceString),binNumber:(t,e)=>(0,i.Yp)(e.sourceString),hexNumber:(t,e)=>(0,i.l8)(e.sourceString),Number:t=>t.value,Name:t=>t.name,identifier(t,e){return this.sourceString}}),o.addAttribute("name",{identifier(t,e){return this.sourceString},Name(t){return this.child(0)?.name}}),o.addAttribute("String",{String:(t,e,n)=>e.sourceString});const l="HDL statement has a syntax error";function u(t,e){const n=t.match(/Line \d+, col \d+: (?<message>.*)/),r=n?.groups?.message?n.groups.message:t;return{message:`${void 0!=e?.line?`Line ${e.line}: `:""}${r}`,span:e}}function c(t,e,n=({root:t})=>t){return function(s){try{const i=t.match(s);if(i.succeeded()){const t=e(i),s=n(t);return(0,r.Ok)(s)}return(0,r._)(u(i.shortMessage??l,h(i.getInterval())))}catch(i){return(0,r._)(i)}}}function h(t){return{start:t.startIdx,end:t.endIdx,line:t.getLineAndColumn().lineNum}}},7589:(t,e,n)=>{n.d(e,{dl:()=>l});var r=n(9563),s=n(3977);const i="\nCmp <: Base {\n  Root := line*\n  line = bar cell+ newline?\n  cell = cellvalue bar\n  cellvalue = (~(bar|newline) any)*\n}",a=(0,r.qN)(i,s.lN),o=a.extendSemantics(s.JE);o.addAttribute("cell",{cell:(t,e)=>t.sourceString}),o.addAttribute("line",{line:(t,e,n)=>e.children.map((t=>t.cell))}),o.addAttribute("root",{Root:t=>t.children.map((t=>t.line))});const l={grammar:i,semantics:o,parser:a,parse:(0,s.Q5)(a,o)}},5005:(t,e,n)=>{n.d(e,{xP:()=>l});var r=n(9563),s=n(3977);const i='\nHdl <: Base{\n  Root := Chip\n  identifier := (letter) (alnum)*\n  Name := identifier\n  Chip = "CHIP" Name OpenBrace ChipBody CloseBrace\n  ChipBody = InList? OutList? PartList ClockedList?\n  InList = "IN" PinList Semi\n  OutList = "OUT" PinList Semi\n  PartList = BuiltinPart | Parts\n  PinList = List<PinDecl, Comma>\n  PinDecl = Name PinWidth?\n  PinWidth = OpenSquare decNumber CloseSquare\n  BuiltinPart = "BUILTIN" Semi\n  Parts = "PARTS:" Part*\n  Part = Name "(" Wires ")" Semi\n  Wires = List<Wire, Comma>\n  Wire = WireSide Equal (WireSide | True | False) \n  WireSide = Name SubBus? \n  SubBus = OpenSquare decNumber subBusRest? CloseSquare\n  subBusRest = ".." decNumber\n  ClockedList = "CLOCKED" SimplePinList Semi\n  SimplePinList = List<Name, Comma>\n}',a=(0,r.qN)(i,s.lN),o=a.extendSemantics(s.JE);o.addAttribute("SubBus",{SubBus(t,e,n,r){const s=e.value;return{start:s,end:n.child(0)?.child(1)?.value??s}}}),o.addAttribute("WireSide",{WireSide({name:t},e){const{start:n,end:r}=e.child(0)?.SubBus??{start:void 0,end:void 0};return{pin:t,start:n,end:r,span:(0,s.Ln)(this.source)}}}),o.addAttribute("Wire",{Wire(t,e,n){const r=n.isTerminal()?{pin:n.sourceString}:n.WireSide;return{lhs:t.WireSide,rhs:r}}}),o.addAttribute("Wires",{Wires:t=>t.asIteration().children.map((t=>t.Wire))}),o.addAttribute("Part",{Part({name:t},e,{Wires:n},r,i){return{name:t,wires:n,span:(0,s.Ln)(this.source)}}}),o.addAttribute("Parts",{Parts:(t,e)=>e.children.map((t=>t.Part)),BuiltinPart:(t,e)=>"BUILTIN"}),o.addAttribute("PartList",{PartList:t=>t.Parts}),o.addAttribute("Clocked",{ClockedList:(t,e,n)=>e.asIteration().children.map((({sourceString:t})=>t))??[]}),o.addAttribute("PinDecl",{PinDecl:({name:t},e)=>({pin:t,width:e.child(0)?.child(1)?.value??1})}),o.addAttribute("PinList",{PinList:t=>t.asIteration().children.map((t=>t.PinDecl))}),o.addAttribute("Chip",{Chip:(t,e,n,r,i)=>({name:{value:e.sourceString,span:(0,s.Ln)(e.source)},ins:r.child(0).child(0)?.child(1)?.PinList??[],outs:r.child(1).child(0)?.child(1)?.PinList??[],parts:r.child(2).PartList??[],clocked:r.child(3).child(0)?.Clocked})}),o.addAttribute("Root",{Root:t=>t.child(0)?.Chip});const l={parser:a,grammar:i,semantics:o,parse:(0,s.Q5)(a,o,(t=>t.Chip))}},6554:(t,e,n)=>{n.d(e,{uG:()=>l});var r=n(9563),s=n(3977);const i='\nTst <: Base {\n  Root := Tst\n  Tst = (TstStatement | TstRepeat | TstWhile)+\n\n  TstRepeat = Repeat Number? OpenBrace TstCommand+ CloseBrace\n  TstWhile = While Condition OpenBrace TstCommand+ CloseBrace\n  TstStatement = TstCommand\n\n  TstCommand = TstOperation Separator\n  Separator = (Semi | Bang | Comma)\n\n  TstOperation =\n    | TstFileOperation\n    | TstOutputListOperation\n    | TstEvalOperation\n    | TstSetOperation\n    | TstOutputOperation\n    | TstEchoOperation\n    | TstClearEchoOperation\n    | TstLoadROMOperation\n    | TstResetRAMOperation\n\n  TstLoadROMOperation = ROM32K Load FileName\n  TstFileOperation = FileOperation FileName?\n  TstOutputListOperation = "output-list" OutputFormat+\n  OutputFormat = Name Index? FormatSpec?\n  FormatSpec = percent FormatStyle wholeDec dot wholeDec dot wholeDec\n  TstSetOperation = Set Name Index? Number\n  Index = OpenSquare wholeDec? CloseSquare\n  Condition = Value CompareOp Value\n  TstEvalOperation = Eval | TickTock | Tick | Tock | VmStep\n  TstOutputOperation = Output\n  TstEchoOperation = Echo String\n  TstClearEchoOperation = ClearEcho\n  TstResetRAMOperation = ResetRAM\n\n  FileName = Name\n  FileOperation = "load" | "output-file" | "compare-to"\n\n  Set = "set"\n  Eval = "eval"\n  Tick = "tick"\n  Tock = "tock"\n  TickTock = "ticktock"\n  VmStep = "vmstep"\n  Echo = "echo"\n  Repeat = "repeat"\n  ClearEcho = "clear-echo"\n  Output = "output"\n  OutputList = "output-list"\n  FormatStyle = "B"|"D"|"S"|"X"\n  ROM32K = "ROM32K"\n  Load = "load"\n  While = "while"\n  ResetRAM = "resetRam"\n\n  CompareOp = "<>" | "<=" | ">=" | "=" | "<" | ">"\n}',a=(0,r.qN)(i,s.lN),o=a.extendSemantics(s.JE);o.extendAttribute("value",{Index:(t,e,n)=>e?.child(0)?.value??-1}),o.extendAttribute("name",{FileName:({name:t})=>t}),o.addAttribute("index",{Index:(t,e,n)=>e.child(0)?.value??0}),o.addAttribute("formatSpec",{FormatSpec:(t,{sourceString:e},{value:n},r,{value:s},i,{value:a})=>({style:e,width:s,lpad:n,rpad:a})}),o.addAttribute("format",{OutputFormat:({name:t},e,n)=>({id:t,builtin:void 0!==e?.child(0),address:e?.child(0)?.value??-1,format:n?.child(0)?.formatSpec})}),o.addAttribute("operation",{TstEvalOperation:t=>({op:t.sourceString}),TstOutputOperation:t=>({op:"output"}),TstOutputListOperation:(t,e)=>({op:"output-list",spec:e.children.map((t=>t.format))}),TstSetOperation(t,{name:e},n,{value:r}){const s={op:"set",id:e,value:r},i=n.child(0)?.child(1)?.child(0);return i&&(s.index=i.value),s},TstEchoOperation:(t,e)=>({op:"echo",message:e.String}),TstClearEchoOperation:t=>({op:"clear-echo"}),TstLoadROMOperation:(t,e,{name:n})=>({op:"loadRom",file:n}),TstFileOperation:(t,e)=>({op:t.sourceString,file:e?.sourceString}),TstResetRAMOperation:t=>({op:"resetRam"})}),o.addAttribute("command",{TstCommand(t,e){return{op:t.operation,separator:e.sourceString,span:(0,s.Ln)(this.source)}}}),o.addAttribute("condition",{Condition:({value:t},{sourceString:e},{value:n})=>({left:t,right:n,op:e})}),o.addAttribute("statement",{TstWhile(t,e,n,r,i){return{statements:r.children.map((t=>t.command)),condition:e.condition,span:(0,s.Ln)(this.source)}},TstRepeat(t,e,n,r,i){return{statements:r.children.map((t=>t.command)),count:e.sourceString?Number(e.sourceString):-1,span:(0,s.Ln)(this.source)}},TstStatement:t=>t.command}),o.addAttribute("tst",{Tst:t=>({lines:t.children.map((t=>t.statement))})}),o.addAttribute("root",{Root:({tst:t})=>t});const l={grammar:i,semantics:o,parser:a,parse:(0,s.Q5)(a,o)}},9547:(t,e,n)=>{n.d(e,{aU:()=>o,aY:()=>a,yt:()=>l});var r=n(5874),s=n(4666),i=n(7844);async function a(t){const e=(0,r.oA)(s.y0.parse(t));return s.y0.passes.fillLabel(e),s.y0.passes.emit(e)}async function o(t){return t.split("\n").filter((t=>""!==t.trim())).map(i.Yp)}async function l(t){return t.split("\n").filter((t=>""!==t.trim())).map(i._Q)}},9976:(t,e,n)=>{n.d(e,{G:()=>h});var r=n(2469),s=n(1106),i=n(6418),a=n(4867),o=n(8783);function l(t){return void 0!==t.op}function u(t){return void 0!==t.condition}function c(t){const{op:e}=t;switch(e){case"tick":return new s.IJ;case"tock":return new s.CX;case"ticktock":return new i.zB;case"eval":return new s.Nq;case"vmstep":return new o.a;case"output":return new a.ik;case"set":return new a.jl(t.id,t.value,t.index);case"output-list":return new a.Ad(t.spec);case"echo":return new a.S0(t.message);case"clear-echo":return new a.Tn;case"loadRom":return new a.fK(t.file);case"load":return new a.hh(t.file);case"output-file":case"compare-to":return;case"resetRam":return new i.aC;default:(0,r.H8)(e,`Unknown tst operation ${e}`)}}function h(t,e){let n,r=[],s=t,i=[];for(const o of e.lines){if(l(o))s=t,i=[o];else{const e=u(o)?new a.eB(new a.kW(o.condition.left,o.condition.right,o.condition.op)):new a.UM(o.count);e.span=o.span,t.addInstruction(e),s=e,i=o.statements}for(const t of i){const e=c(t.op);if(void 0!==e&&(void 0===n?n=o.span:n.end=o.span.end,s.addInstruction(e),r.push(e)),","!=t.separator){";"==t.separator?s.addInstruction(new a.fe(n??t.span)):"!"==t.separator&&s.addInstruction(new a.Ge(n??t.span));for(const e of r)e.span=n??t.span;n=void 0,r=[]}}}return t.reset(),t}},1106:(t,e,n)=>{n.d(e,{BX:()=>o,CX:()=>c,IJ:()=>u,Nq:()=>l});var r=n(9651),s=n(3096),i=n(9976),a=n(9937);class o extends a.V{chip=new r.ti;get chipId(){return this.chip.id}clock=s.z.get();static from(t,e){const n=new o(e);return(0,i.G)(n,t)}with(t){return this.chip=t,this}hasVar(t){return"time"===t||(t=`${t}`,this.chip.hasIn(t)||this.chip.hasOut(t))}getVar(t,e){if("time"===(t=`${t}`))return this.clock.toString();const n=this.chip.get(t,e);return n?n instanceof r.z7?n.busVoltage:n.voltage():0}getWidth(t,e){const n=this.chip.get(t,e);return n?n.width:0}setVar(t,e,n){const s=this.chip.get(t,n);s instanceof r.z7?s.busVoltage=e:s?.pull(0===e?r.$L:r.RY)}eval(){this.chip.eval()}tick(){this.chip.eval(),this.clock.tick()}tock(){this.chip.eval(),this.clock.tock()}async loadROM(t){await this.chip.load(this.fs,t)}async run(){this.clock.reset(),await super.run()}}class l{_chipTestInstruction_=!0;async do(t){t.eval()}*steps(){yield this}}class u{_chipTestInstruction_=!0;async do(t){t.tick()}*steps(){yield this}}class c{_chipTestInstruction_=!0;async do(t){t.tock()}*steps(){yield this}}},6418:(t,e,n)=>{n.d(e,{aC:()=>u,bJ:()=>o,zB:()=>l});var r=n(7721),s=n(7076),i=n(9976),a=n(9937);class o extends a.V{cpu;ticks=0;static from(t,e,n){const r=new o(e,n);return(0,i.G)(r,t)}constructor(t=new s.n9,e){super(e),this.cpu=new r.Z8({ROM:t}),this.reset()}reset(){return super.reset(),this.cpu.reset(),this.ticks=0,this}hasVar(t){return"number"!==typeof t&&!("A"!==t&&"D"!==t&&"PC"!==t&&"time"!==t&&!t.startsWith("RAM"))}getVar(t,e){switch(t){case"A":return this.cpu.A;case"D":return this.cpu.D;case"PC":return this.cpu.PC;case"time":return this.ticks;case"RAM":return void 0===e?0:this.cpu.RAM.get(e)}if("number"===typeof t)return 0;if(t.startsWith("RAM")){const e=Number(t.substring(4,t.length-1));return this.cpu.RAM.get(e)}return 0}getWidth(t,e){return 16}setVar(t,e,n){switch(t){case"A":this.cpu.setA(e);break;case"D":this.cpu.setD(e);break;case"PC":this.cpu.setPC(e);break;case"RAM":this.cpu.RAM.set(n??0,e)}}ticktock(){this.ticks+=1,this.cpu.tick()}async loadROM(t){await this.cpu.ROM.load(this.fs,t)}}class l{_cpuTestInstruction_=!0;async do(t){t.ticktock()}*steps(){yield this}}class u{_cpuTestInstruction_=!0;async do(t){t.cpu.RAM.reset()}*steps(){yield this}}},4867:(t,e,n)=>{n.d(e,{Ad:()=>l,Ge:()=>i,S0:()=>p,Tn:()=>f,UM:()=>c,eB:()=>d,fK:()=>m,fe:()=>s,hh:()=>g,ik:()=>o,jl:()=>a,kW:()=>h});class r{span;constructor(t){this.span=t}async do(){}*steps(){yield this}}class s extends r{}class i extends r{}class a{variable;value;index;constructor(t,e,n){this.variable=t,this.value=e,this.index=n}async do(t){t.setVar(this.variable,this.value,this.index)}*steps(){yield this}}class o{async do(t){t.output()}*steps(){yield this}}class l{outputs=[];constructor(t=[]){for(const e of t)this.addOutput(e)}addOutput(t){this.outputs.push({id:t.id,style:t.format?.style??"B",len:t.format?.width??-1,lpad:t.format?.lpad??1,rpad:t.format?.rpad??1,builtin:t.builtin,address:t.address})}async do(t){t.outputList(this.outputs),t.header()}*steps(){yield this}}class u{instructions=[];span;addInstruction(t){this.instructions.push(t)}async do(t){for(const e of this.instructions)e.do(t)}*steps(t){yield this}}class c extends u{repeat;constructor(t){super(),this.repeat=t}async do(){}*innerSteps(t){for(const e of this.instructions)yield*e.steps(t)}*steps(t){if(-1===this.repeat)for(yield this;;)yield*this.innerSteps(t);else for(let e=0;e<this.repeat;e++)yield this,yield*this.innerSteps(t)}}class h{x;y;op;constructor(t,e,n){this.x=t,this.y=e,this.op=n}check(t){const e=t.hasVar(this.x)?t.getVar(this.x):this.x,n=t.hasVar(this.y)?t.getVar(this.y):this.y;if("string"===typeof e||"string"===typeof n)switch(this.op){case"=":return`${e}`===`${n}`;case"<>":return`${e}`!==`${n}`}else switch(this.op){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;case"=":return e===n;case"<>":return e!==n}return!1}}class d extends u{condition;constructor(t){super(),this.condition=t}*steps(t){for(;this.condition.check(t);){yield this;for(const e of this.instructions)yield*e.steps(t)}}}class p{content;constructor(t){this.content=t}async do(t){t.echo(this.content)}*steps(){yield this}}class f{async do(t){t.clearEcho()}*steps(){yield this}}class m{file;constructor(t){this.file=t}async do(t){t.fs.pushd("/samples"),await t.loadROM(this.file),t.fs.popd()}*steps(){yield this}}class g{file;constructor(t){this.file=t}async do(t){await t.load(this.file)}*steps(){yield this}}},9937:(t,e,n)=>{n.d(e,{V:()=>l});var r=n(2469),s=n(4544),i=n(7844);class a{variable;fmt;lPad;rPad;len;index;builtin;constructor(t,e="%B1.1.1",n,s,i,a,o){if(this.variable=t,e.startsWith("%")&&void 0===n&&void 0===s&&void 0===i){const{fmt:t,lPad:n,rPad:r,len:s}=e.match(/^%(?<fmt>[BDXS])(?<lPad>\d+)\.(?<len>\d+)\.(?<rPad>\d+)$/)?.groups;this.fmt=t,this.lPad=parseInt(n),this.rPad=parseInt(r),this.len=parseInt(s),this.builtin=!1,this.index=-1}else(0,r.vA)(["B","X","D","S"].includes(e[0])),this.fmt=e[0],this.len=n??3,this.lPad=s??1,this.rPad=i??1,this.builtin=a??!1,this.index=o??-1}header(t){let e=`${this.variable}`;if(this.builtin){e=`${e}[${this.index>=0?this.index:""}]`}return e.length>this.len+this.lPad+this.rPad?e.substring(0,this.len+this.lPad+this.rPad):this.padCenter(e)}print(t){const e=t.getVar(this.variable,this.index);if("S"===this.fmt)return this.padLeft(e);const n=(0,{B:i.e5,D:i.FN,X:i.uh}[this.fmt])(e);return"D"===this.fmt?this.padRight(n):this.padLeft(n.slice(n.length-this.len))}padCenter(t){const e=this.lPad+this.len+this.rPad,n=Math.floor((e-t.length)/2),r=e-n-t.length,s=n+t.length,i=s+r;return t=(t=t.padStart(s)).padEnd(i)}padLeft(t){t=t.substring(0,this.len);const e=this.rPad+this.len,n=this.lPad+e;return t=(t=t.padEnd(e)).padStart(n)}padRight(t){t=t.substring(0,this.len);const e=this.lPad+this.len,n=this.rPad+e;return t=(t=t.padStart(e)).padEnd(n)}}var o=n(4867);class l{instructions=[];_outputList=[];_log="";fs=new s.Q2;doEcho;constructor(t){this.doEcho=t}setFileSystem(t){return this.fs=t,this}echo(t){this.doEcho?.(t)}clearEcho(){this.doEcho?.("")}async loadROM(t){}async load(t){}async compareTo(t){}outputFile(t){}createOutputs(t){return t.map((t=>{if(-1===t.len)if("time"===t.id)t.len=7,t.style="S";else{const e=this.getWidth(t.id,t.address);"B"===t.style?t.len=e:"D"===t.style?t.len=Math.ceil(Math.log(e)):"X"===t.style&&(t.len=Math.ceil(e/4))}return new a(t.id,t.style,t.len,t.lpad,t.rpad,t.builtin,t.address)}))}outputList(t){this._outputList=this.createOutputs(t)}addInstruction(t){this.instructions.push(t)}reset(){return this._steps=function*(t){for(const e of t.instructions)yield*e.steps(t)}(this),this._step=this._steps.next(),this._log="",this}_steps;_step;get steps(){return void 0===this._steps&&(this.reset(),this._steps=(0,r.Z1)(this._steps,"Reset did not initialize steps"),this._step=(0,r.Z1)(this._step,"Reset did not find first step")),this._steps}get currentStep(){return this._step?.value}get done(){return this._step?.done??!1}async step(){for(;!this._step.done;){if(await this._step.value.do(this),this._step=this.steps.next(),this._step.value instanceof o.fe)return this._step=this.steps.next(),!1;if(this._step.value instanceof o.Ge)return!0}return!0}async run(){for(this.reset();!await this.step(););}breakpoints=new Map;addBreakpoint(t,e){this.breakpoints.set(t,e)}clearBreakpoints(){this.breakpoints.clear()}output(){const t=this._outputList.map((t=>t.print(this)));this._log+=`|${t.join("|")}|\n`}header(){const t=this._outputList.map((t=>t.header(this)));this._log+=`|${t.join("|")}|\n`}log(){return this._log}}},8783:(t,e,n)=>{n.d(e,{Y:()=>o,a:()=>l});var r=n(7076),s=n(9928),i=n(9976),a=n(9937);class o extends a.V{vm=new s.Vm;loadAction;dir;static from(t,e,n,r){const s=new o(r);return s.dir=e?.split("/").slice(0,-1).join("/"),s.loadAction=n,(0,i.G)(s,t)}using(t){return this.fs=t,this}with(t){return this.vm=t,this}hasVar(t,e){return"string"!==typeof t&&(e=t,t="RAM"),"RAM"===t&&void 0!==e&&e>0&&e<r.XK.SIZE||["argument","local","static","constant","this","that","pointer","temp"].includes(t.toLowerCase())}getVar(t,e){return"string"!==typeof t&&(e=t,t="RAM"),"RAM"===t&&void 0!==e?this.vm.RAM.get(e):this.vm.memory.getSegment(t,e??0)}getWidth(t,e){return 16}setVar(t,e,n){if("string"!==typeof t&&(n=t,t="RAM"),"RAM"!==t||void 0===n)if(void 0!==n)this.vm.memory.setSegment(t,n,e);else switch(t.toLowerCase()){case"sp":this.vm.memory.SP=e;break;case"arg":case"argument":this.vm.memory.ARG=e,this.vm.segmentInitializations.argument.initialized=!0;break;case"lcl":case"local":this.vm.memory.LCL=e,this.vm.segmentInitializations.local.initialized=!0;break;case"this":this.vm.memory.THIS=e,this.vm.invocation.thisInitialized=!0;break;case"that":this.vm.memory.THAT=e,this.vm.invocation.thatInitialized=!0}else this.vm.RAM.set(n,e)}vmstep(){this.vm.step()}async load(t){if(this.loadAction)if(t){const e=await this.fs.readFile(`${this.dir?`${this.dir}/`:""}${t}`);this.loadAction?.([{name:t.replace(".vm",""),content:e}])}else{const t=await this.fs.scandir(this.dir??"/"),e=[];for(const n of t)if(n.isFile()&&n.name.endsWith(".vm")){const t=await this.fs.readFile(`${this.dir?`${this.dir}/`:""}${n.name}`);e.push({name:n.name.replace(".vm",""),content:t})}this.loadAction(e)}}}class l{_vmTestInstruction_=!0;async do(t){t.vmstep()}*steps(){yield this}}},7496:(t,e,n)=>{n.d(e,{k:()=>s,m:()=>a,op:()=>i});var r=n(8739);function s(t){return 32768&t?function(t){t&=65535;const e=(4096&t)>>12,n=(4032&t)>>6,s=(56&t)>>3,i=7&t;if(void 0===r.Lo.op[n])return"#ERR";let a=r.Lo.op[n];e&&(a=a.replace(/A/g,"M"));const o=r.uW.op[s],l=r.ft.op[i];let u=a;o&&(u=`${o}=${u}`);l&&(u=`${u};${l}`);return u}(t):function(t){return"@"+(32767&t).toString(10)}(t)}function i(t){return"@"===t[0]?function(t){return parseInt(t.substring(1),10)}(t):function(t){const e=t.match(/(?:(?<assignExists>.+)=)?(.+)(?:;(?<jumpExists>.+))?/),{assignExists:n,jumpExists:s}=e?.groups??{},i=t.match(/(?:(?<assign>[AMD]{1,3})=)?(?<operation>[-+!01ADM&|]{1,3})(?:;(?<jump>JGT|JLT|JGE|JLE|JEQ|JMP))?/);let{assign:o,jump:l}=i?.groups??{};const{operation:u}=i?.groups??{};if(o=o??(n?void 0:""),l=l??(s?void 0:""),i?.[0]!=t||!(0,r.Nt)(o)||!(0,r.Qv)(l)||!(0,r.nf)(u))throw new Error("Invalid c instruction");const c=u.includes("M"),h=r.uW.asm[o],d=r.ft.asm[l],p=r.Lo.getOp(u);return a(c,p,h,d)}(t)}function a(t,e,n,r){return 57344+(t?4096:0)+(e<<6)+(n<<3)+r}},7844:(t,e,n)=>{n.d(e,{FN:()=>p,Yp:()=>u,ZR:()=>l,_Q:()=>c,ad:()=>f,e5:()=>d,l8:()=>o,uh:()=>h,xu:()=>m});const r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];function s(t){return r[t]??"X"}function i(t){switch(t){case 0:return"0000";case 1:return"0001";case 2:return"0010";case 3:return"0011";case 4:return"0100";case 5:return"0101";case 6:return"0110";case 7:return"0111";case 8:return"1000";case 9:return"1001";case 10:return"1010";case 11:return"1011";case 12:return"1100";case 13:return"1101";case 14:return"1110";case 15:return"1111";default:return"erro"}}function a(t,e){return 65535&parseInt(t.replace(/[^\d a-f A-F +-.]/g,""),e)}function o(t){return a(t,16)}function l(t){return a(t,10)}function u(t){return a(t.replaceAll(" ",""),2)}function c(t){return t.toUpperCase().includes("X")?o(t):l(t)}function h(t){return`0x${s((61440&t)>>12)}${s((3840&t)>>8)}${s((240&t)>>4)}${s(15&t)}`}function d(t,e=16){return`${i((61440&t)>>12)}${i((3840&t)>>8)}${i((240&t)>>4)}${i(15&t)}`.substring(16-e)}function p(t){return 32768===(t&=65535)?"-32768":32768&t?`-${t=1+~t&32767}`:`${t}`}function f(t){return`${t&=65535}`}function m(t,e){let n=~((t&=65535)&(e&=65535));return n&=65535,n}},270:(t,e,n)=>{var r;function s(t){return Object.values(r).includes(t)}n.d(e,{U:()=>s,X:()=>r}),function(t){t[t.SYS_WAIT_DURATION_NOT_POSITIVE=1]="SYS_WAIT_DURATION_NOT_POSITIVE",t[t.ARRAY_SIZE_NOT_POSITIVE=2]="ARRAY_SIZE_NOT_POSITIVE",t[t.DIVIDE_BY_ZERO=3]="DIVIDE_BY_ZERO",t[t.SQRT_NEG=4]="SQRT_NEG",t[t.ALLOC_SIZE_NOT_POSITIVE=5]="ALLOC_SIZE_NOT_POSITIVE",t[t.HEAP_OVERFLOW=6]="HEAP_OVERFLOW",t[t.ILLEGAL_PIXEL_COORD=7]="ILLEGAL_PIXEL_COORD",t[t.ILLEGAL_LINE_COORD=8]="ILLEGAL_LINE_COORD",t[t.ILLEGAL_RECT_COORD=9]="ILLEGAL_RECT_COORD",t[t.ILLEGAL_CENTER_COORD=12]="ILLEGAL_CENTER_COORD",t[t.ILLEGAL_RADIUS=13]="ILLEGAL_RADIUS",t[t.STRING_LENGTH_NEG=14]="STRING_LENGTH_NEG",t[t.GET_CHAR_INDEX_OUT_OF_BOUNDS=15]="GET_CHAR_INDEX_OUT_OF_BOUNDS",t[t.SET_CHAR_INDEX_OUT_OF_BOUNDS=16]="SET_CHAR_INDEX_OUT_OF_BOUNDS",t[t.STRING_FULL=17]="STRING_FULL",t[t.STRING_EMPTY=18]="STRING_EMPTY",t[t.STRING_INSUFFICIENT_CAPACITY=19]="STRING_INSUFFICIENT_CAPACITY",t[t.ILLEGAL_CURSOR_LOCATION=20]="ILLEGAL_CURSOR_LOCATION"}(r||(r={}))},9928:(t,e,n)=>{n.d(e,{IG:()=>_,h0:()=>E,Vm:()=>T});var r=n(5874),s=n(3977),i=n(270);function a(t){return t-48}function o(t){return t.toString().split("").map((t=>t.charCodeAt(0)))}class l{memory;os;constructor(t,e){this.memory=t,this.os=e}new(t){t<=0&&this.os.sys.error(i.X.STRING_LENGTH_NEG);const e=this.os.memory.alloc(t+2);return this.os.sys.halted?0:(this.memory.set(e,t),this.memory.set(e+1,0),e)}dispose(t){this.os.memory.deAlloc(t)}maxLength(t){return this.memory.get(t)}length(t){return this.memory.get(t+1)}setLength(t,e){this.memory.set(t+1,e)}charAt(t,e){return e<0||e>=this.length(t)?(this.os.sys.error(i.X.GET_CHAR_INDEX_OUT_OF_BOUNDS),0):this.memory.get(t+e+2)}setCharAt(t,e,n){e<0||e>=this.length(t)?this.os.sys.error(i.X.SET_CHAR_INDEX_OUT_OF_BOUNDS):this.memory.set(t+e+2,n)}appendChar(t,e){const n=this.length(t);return n==this.maxLength(t)?(this.os.sys.error(i.X.STRING_FULL),0):(this.setLength(t,n+1),this.setCharAt(t,n,e),t)}eraseLastChar(t){const e=this.length(t);0!=e?this.setLength(t,e-1):this.os.sys.error(i.X.STRING_EMPTY)}intValue(t){const e=[],n=45==this.charAt(t,0);for(let i=n?1:0;i<this.length(t)&&((r=this.charAt(t,i))>=48&&r<=57);i++)e.push(a(this.charAt(t,i)));var r;const s=e.reduce(((t,e)=>10*t+e),0);return n?-s:s}setInt(t,e){const n=o(e);if(n.length>this.maxLength(t))this.os.sys.error(i.X.STRING_INSUFFICIENT_CAPACITY);else{this.setLength(t,0);for(const e of n)this.appendChar(t,e)}}}function u(t,e){const n=[];for(let r=0;r<e;r++)n.push(t.get(t.SP-e+r));return n}const c={"Math.init":{func:(t,e)=>0,args:[],returnType:"void",type:"function"},"Math.multiply":{func:(t,e)=>{const[n,r]=u(t,2);return n*r&65535},args:["int","int"],returnType:"int",type:"function"},"Math.divide":{func:(t,e)=>{const[n,r]=u(t,2);return 0==r?(e.sys.error(i.X.DIVIDE_BY_ZERO),0):65535&Math.floor(n/r)},args:["int","int"],returnType:"int",type:"function"},"Math.min":{func:(t,e)=>{const[n,r]=u(t,2);return 65535&Math.min(n,r)},args:["int","int"],returnType:"int",type:"function"},"Math.max":{func:(t,e)=>{const[n,r]=u(t,2);return 65535&Math.max(n,r)},args:["int","int"],returnType:"int",type:"function"},"Math.sqrt":{func:(t,e)=>{const[n]=u(t,1);return n<0?(e.sys.error(i.X.SQRT_NEG),0):65535&Math.floor(Math.sqrt(n))},args:["int"],returnType:"int",type:"function"},"Math.abs":{func:(t,e)=>{const[n]=u(t,1);return 65535&Math.abs(n)},args:["int"],returnType:"int",type:"function"},"Screen.init":{func:(t,e)=>0,args:[],returnType:"void",type:"function"},"Screen.clearScreen":{func:(t,e)=>(e.screen.clear(),0),args:[],returnType:"void",type:"function"},"Screen.setColor":{func:(t,e)=>{const[n]=u(t,1);return e.screen.color=0!==n,0},args:["boolean"],returnType:"void",type:"function"},"Screen.drawPixel":{func:(t,e)=>{const[n,r]=u(t,2);return e.screen.drawPixel(n,r),0},args:["int","int"],returnType:"void",type:"function"},"Screen.drawLine":{func:(t,e)=>{const[n,r,s,i]=u(t,4);return e.screen.drawLine(n,r,s,i),0},args:["int","int","int","int"],returnType:"void",type:"function"},"Screen.drawRectangle":{func:(t,e)=>{const[n,r,s,i]=u(t,4);return e.screen.drawRect(n,r,s,i),0},args:["int","int","int","int"],returnType:"void",type:"function"},"Screen.drawCircle":{func:(t,e)=>{const[n,r,s]=u(t,3);return e.screen.drawCircle(n,r,s),0},args:["int","int","int"],returnType:"void",type:"function"},"Memory.init":{func:(t,e)=>0,args:[],returnType:"void",type:"function"},"Memory.peek":{func:(t,e)=>{const[n]=u(t,1);return t.get(n)},args:["int"],returnType:"int",type:"function"},"Memory.poke":{func:(t,e)=>{const[n,r]=u(t,2);return t.set(n,r),0},args:["int","int"],returnType:"void",type:"function"},"Memory.alloc":{func:(t,e)=>{const[n]=u(t,1);return e.memory.alloc(n)},args:["int"],returnType:"Array",type:"function"},"Memory.deAlloc":{func:(t,e)=>{const[n]=u(t,1);return e.memory.deAlloc(n),0},args:["Array"],returnType:"void",type:"function"},"Array.init":{func:(t,e)=>0,args:[],returnType:"void",type:"function"},"Array.new":{func:(t,e)=>{const[n]=u(t,1);return n<=0?(e.sys.error(i.X.ARRAY_SIZE_NOT_POSITIVE),0):e.memory.alloc(n)},args:["int"],returnType:"Array",type:"constructor"},"Array.dispose":{func:(t,e)=>{const[n]=u(t,1);return e.memory.deAlloc(n),0},args:[],returnType:"void",type:"method"},"String.init":{func:(t,e)=>0,args:[],returnType:"void",type:"function"},"String.new":{func:(t,e)=>{const[n]=u(t,1);return e.string.new(n)},args:["int"],returnType:"String",type:"constructor"},"String.dispose":{func:(t,e)=>{const[n]=u(t,1);return e.string.dispose(n),0},args:[],returnType:"void",type:"method"},"String.length":{func:(t,e)=>{const[n]=u(t,1);return e.string.length(n)},args:[],returnType:"int",type:"method"},"String.charAt":{func:(t,e)=>{const[n,r]=u(t,2);return e.string.charAt(n,r)},args:["int"],returnType:"char",type:"method"},"String.setCharAt":{func:(t,e)=>{const[n,r,s]=u(t,3);return e.string.setCharAt(n,r,s),0},args:["int","char"],returnType:"void",type:"method"},"String.appendChar":{func:(t,e)=>{const[n,r]=u(t,2);return e.string.appendChar(n,r)},args:["char"],returnType:"String",type:"method"},"String.eraseLastChar":{func:(t,e)=>{const[n]=u(t,1);return e.string.eraseLastChar(n),0},args:[],returnType:"void",type:"method"},"String.intValue":{func:(t,e)=>{const[n]=u(t,1);return e.string.intValue(n)},args:[],returnType:"int",type:"method"},"String.setInt":{func:(t,e)=>{const[n,r]=u(t,2);return e.string.setInt(n,r),0},args:["int"],returnType:"void",type:"method"},"String.backSpace":{func:(t,e)=>129,args:[],returnType:"char",type:"function"},"String.doubleQuote":{func:(t,e)=>34,args:[],returnType:"char",type:"function"},"String.newLine":{func:(t,e)=>128,args:[],returnType:"char",type:"function"},"Output.init":{func:(t,e)=>0,args:[],returnType:"void",type:"function"},"Output.moveCursor":{func:(t,e)=>{const[n,r]=u(t,2);return e.output.moveCursor(n,r),0},args:["int","int"],returnType:"void",type:"function"},"Output.printChar":{func:(t,e)=>{const[n]=u(t,1);return e.output.printChar(n),0},args:["char"],returnType:"void",type:"function"},"Output.printString":{func:(t,e)=>{const[n]=u(t,1);return e.output.printString(n),0},args:["String"],returnType:"void",type:"function"},"Output.printInt":{func:(t,e)=>{const[n]=u(t,1);return e.output.printInt(n),0},args:["int"],returnType:"void",type:"function"},"Output.println":{func:(t,e)=>(e.output.println(),0),args:[],returnType:"void",type:"function"},"Output.backSpace":{func:(t,e)=>(e.output.backspace(),0),args:[],returnType:"void",type:"function"},"Keyboard.init":{func:(t,e)=>0,args:[],returnType:"void",type:"function"},"Keyboard.keyPressed":{func:(t,e)=>e.keyboard.keyPressed(),args:[],returnType:"char",type:"function"},"Keyboard.readChar":{func:(t,e)=>(e.keyboard.readChar(),0),args:[],returnType:"char",type:"function"},"Keyboard.readLine":{func:(t,e)=>{const[n]=u(t,1);return e.keyboard.readLine(n),0},args:["String"],returnType:"String",type:"function"},"Keyboard.readInt":{func:(t,e)=>{const[n]=u(t,1);return e.keyboard.readInt(n),0},args:["String"],returnType:"int",type:"function"},"Sys.halt":{func:(t,e)=>(e.sys.halt(),0),args:[],returnType:"void",type:"function"},"Sys.error":{func:(t,e)=>{const[n]=u(t,1);return e.sys.error(n),0},args:["int"],returnType:"void",type:"function"},"Sys.wait":{func:(t,e)=>{const[n]=u(t,1);return e.sys.wait(n),0},args:["int"],returnType:"void",type:"function"}};var h=n(7076);class d extends h.XK{strict=!0;get SP(){return this.get(0)}set SP(t){this.set(0,t)}get LCL(){return this.get(1)}set LCL(t){this.set(1,t)}get ARG(){return this.get(2)}set ARG(t){this.set(2,t)}get THIS(){return this.get(3)}set THIS(t){this.set(3,t)}get THAT(){return this.get(4)}set THAT(t){this.set(4,t)}get statics(){const t=[];for(let e=16;e<256;e++)t.push(this.get(e));return t}constructor(){super(),this.set(0,256)}baseSegment(t,e){if(this.strict&&(e<0||e>32767))return(0,r._)(new Error(`Illegal offset value ${e} (must be between 0 and 32767)`));switch(t){case"argument":return(0,r.Ok)(this.ARG+e);case"constant":return(0,r.Ok)(e);case"local":return(0,r.Ok)(this.LCL+e);case"pointer":if(this.strict&&e>1)throw new Error(`pointer out of bounds access (pointer can be 0 for this, 1 for that, but got ${e}`);return(0,r.Ok)(0===e?3:4);case"static":return this.strict&&e>239?(0,r._)(new Error(`Cannot access statics beyond 239: ${e}`)):(0,r.Ok)(16+e);case"temp":return this.strict&&e>7?(0,r._)(new Error(`Temp out of bounds access (temp can be 0 to 7, but got ${e}`)):(0,r.Ok)(5+e);case"that":return(0,r.Ok)(this.THAT+e);case"this":return(0,r.Ok)(this.THIS+e)}}getSegment(t,e){if("constant"===t){if(this.strict&&(e<0||e>32767))throw new Error(`Illegal offset value ${e} (must be between 0 and 32767)`);return e}const n=this.baseSegment(t,e);if((0,r.ys)(n))throw(0,r._)(n);return this.get((0,r.Ok)(n))}setSegment(t,e,n){const s=this.baseSegment(t,e);if((0,r.ys)(s))throw(0,r._)(s);this.set((0,r.Ok)(s),n)}argument(t){return this.getSegment("argument",t)}local(t){return this.getSegment("local",t)}static(t){return this.getSegment("static",t)}constant(t){return this.getSegment("constant",t)}this(t){return this.getSegment("this",t)}that(t){return this.getSegment("that",t)}pointer(t){return this.getSegment("pointer",t)}temp(t){return this.getSegment("temp",t)}push(t){const e=this.SP;this.set(e,t),this.set(0,e+1)}pop(){if(this.strict&&256===this.SP)throw new Error("Cannot pop the stack below 256 in strict mode");this.set(0,this.SP-1);return this.get(this.SP)}pushFrame(t,e,n){const r=this.SP,s=r-e;this.set(r,t),this.set(r+1,this.LCL),this.set(r+2,this.ARG),this.set(r+3,this.THIS),this.set(r+4,this.THAT),this.set(2,s),this.set(1,r+5);const i=r+5;for(let a=0;a<n;a++)this.set(i+a,0);return this.set(0,i+n),r}popFrame(){const t=this.LCL,e=this.get(t-5),n=this.pop();return this.set(this.ARG,n),this.set(0,this.ARG+1),this.set(4,this.get(t-1)),this.set(3,this.get(t-2)),this.set(2,this.get(t-3)),this.set(1,this.get(t-4)),e}getFrame(t,e,n,r,s,i){const a=t-e,o=t+5,l=o+n,u=i-l;return{args:{base:a,count:e,values:[...this.map(((t,e)=>e),a,a+e)]},locals:{base:o,count:n,values:[...this.map(((t,e)=>e),o,o+n)]},stack:{base:l,count:u,values:[...this.map(((t,e)=>e),l,l+u)]},this:{base:l,count:r,values:[...this.map(((t,e)=>e),this.THIS,this.THIS+r)]},that:{base:l,count:s,values:[...this.map(((t,e)=>e),this.THAT,this.THAT+s)]},frame:{RET:this.get(t),LCL:this.LCL,ARG:this.ARG,THIS:this.THIS,THAT:this.THAT}}}getVmState(t=240){const e=[...this.map(((t,e)=>e),5,13)],n=[...this.map(((t,e)=>e),13,16)],r=[...this.map(((t,e)=>e),16,16+t)];return{"0: SP":this.SP,"1: LCL":this.LCL,"2: ARG":this.ARG,"3: THIS":this.THIS,"4: THAT":this.THAT,temps:e,internal:n,static:r}}binOp(t){const e=65535&t(this.get(this.SP-2),this.get(this.SP-1));this.set(this.SP-2,e),this.set(0,this.SP-1)}unOp(t){const e=65535&t(this.get(this.SP-1));this.set(this.SP-1,e)}comp(t){this.binOp(((e,n)=>t(e,n)?-1:0))}}class p{memory;os;animationFrameId=void 0;cancel=!1;constructor(t,e){this.memory=t,this.os=e}keyPressed(){return this.memory.get(h.ky)}readCharLoop(t){let e=!1,n=0;const r=()=>{if(this.cancel)return;let s=!1;this.os.paused||(e||0===this.keyPressed()||(e=!0,n=this.keyPressed()),e&&0===this.keyPressed()&&(s=!0,t(n))),s||(this.animationFrameId=requestAnimationFrame(r))};r()}readChar(){this.os.sys.block(),this.os.output.drawCursor(),new Promise((t=>{this.readCharLoop(t)})).then((t=>{this.os.output.printChar(t),this.os.sys.release(t)}))}readLineLoop(t){const e=this.os.string.new(100);this.os.sys.halted&&t(0);let n=!1,r=0;const s=()=>{if(this.cancel)return;let i=!1;this.os.paused||(n||0==this.keyPressed()||(n=!0,r=this.keyPressed()),n&&0==this.keyPressed()&&(n=!1,129==r?(this.os.string.length(e)>0&&this.os.output.backspace(),this.os.string.eraseLastChar(e)):128==r?(t(e),i=!0):(this.os.string.appendChar(e,r),this.os.sys.halted&&t(0),this.os.output.printChar(r),this.os.output.drawCursor()))),i||(this.animationFrameId=requestAnimationFrame(s))};s()}readLine(t){this.os.sys.block(),this.os.output.printString(t),this.os.output.drawCursor(),new Promise((t=>{this.readLineLoop(t)})).then((t=>{this.os.sys.halted||(this.os.output.clearChar(),this.os.output.println()),this.os.sys.release(t)}))}readInt(t){this.os.sys.block(),this.os.output.printString(t),this.os.output.drawCursor(),new Promise((t=>{this.readLineLoop(t)})).then((t=>{this.os.sys.halted||(this.os.output.clearChar(),this.os.output.println()),this.os.sys.release(this.os.string.intValue(t))}))}dispose(){this.cancel=!0,this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}}class f{memory;os;freeSegments=[{address:2048,length:14336}];constructor(t,e){this.memory=t,this.os=e}alloc(t){if(t<=0)return this.os.sys.error(i.X.ARRAY_SIZE_NOT_POSITIVE),0;for(let e=0;e<this.freeSegments.length;e++){const n=this.freeSegments[e];if(n.length>=t){const r=n.address;return n.address+=t+1,n.length-=t+1,0===n.length&&this.freeSegments.splice(e,1),this.memory.set(r,t),r+1}}return this.os.sys.error(i.X.HEAP_OVERFLOW),0}deAlloc(t){const e=this.memory.get(t-1);this.freeSegments.push({address:t-1,length:e+1})}}const m=function(){const t=new Array(126);return t[32]=g(["        ","        ","        ","        ","        ","        ","        ","        ","        ","        ","        "]),t[33]=g(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),t[34]=g([" \u2588\u2588 \u2588\u2588  "," \u2588\u2588 \u2588\u2588  ","  \u2588 \u2588   ","        ","        ","        ","        ","        ","        ","        ","        "]),t[35]=g(["        "," \u2588  \u2588   "," \u2588  \u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588  \u2588   "," \u2588  \u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588  \u2588   "," \u2588  \u2588   ","        ","        "]),t[36]=g(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588      "," \u2588\u2588\u2588\u2588   ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","        "]),t[37]=g(["        ","        ","\u2588\u2588   \u2588  ","\u2588\u2588  \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588  \u2588\u2588  ","\u2588   \u2588\u2588  ","        ","        "]),t[38]=g(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588 \u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","        ","        "]),t[39]=g(["  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588     ","        ","        ","        ","        ","        ","        ","        ","        "]),t[40]=g(["   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","        ","        "]),t[41]=g([" \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","        ","        "]),t[42]=g(["        ","        ","        ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","        ","        ","        "]),t[43]=g(["        ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","\u2588\u2588\u2588\u2588\u2588\u2588  ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        ","        "]),t[44]=g(["        ","        ","        ","        ","        ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588     ","        "]),t[45]=g(["        ","        ","        ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        ","        ","        ","        "]),t[46]=g(["        ","        ","        ","        ","        ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),t[47]=g(["        ","        ","     \u2588  ","    \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588      ","\u2588       ","        ","        "]),t[48]=g(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","        ","        "]),t[49]=g(["  \u2588\u2588    "," \u2588\u2588\u2588    ","\u2588\u2588\u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),t[50]=g([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","    \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588      ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),t[51]=g([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","  \u2588\u2588\u2588   ","    \u2588\u2588  ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[52]=g(["    \u2588   ","   \u2588\u2588   ","  \u2588\u2588\u2588   "," \u2588 \u2588\u2588   ","\u2588  \u2588\u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  ","   \u2588\u2588   ","   \u2588\u2588   ","  \u2588\u2588\u2588\u2588  ","        ","        "]),t[53]=g(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588\u2588\u2588\u2588   ","    \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[54]=g(["  \u2588\u2588\u2588   "," \u2588\u2588     ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[55]=g(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588   \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),t[56]=g([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[57]=g([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","   \u2588\u2588   "," \u2588\u2588\u2588    ","        ","        "]),t[58]=g(["        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        ","        "]),t[59]=g(["        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588     ","        ","        "]),t[60]=g(["        ","        ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588      "," \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","        ","        "]),t[61]=g(["        ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        ","        ","        "]),t[62]=g(["        ","        ","\u2588\u2588      "," \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588      ","        ","        "]),t[64]=g([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588      "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[63]=g([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),t[65]=g(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[66]=g(["\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","        ","        "]),t[67]=g(["  \u2588\u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","\u2588\u2588   \u2588  ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588   \u2588  "," \u2588\u2588 \u2588\u2588  ","  \u2588\u2588\u2588   ","        ","        "]),t[68]=g(["\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588\u2588\u2588    ","        ","        "]),t[69]=g(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588   \u2588  ","\u2588\u2588 \u2588    ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588    ","\u2588\u2588   \u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),t[70]=g(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588   \u2588  ","\u2588\u2588 \u2588    ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588    ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","        ","        "]),t[71]=g(["  \u2588\u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","\u2588\u2588   \u2588  ","\u2588\u2588      ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588 \u2588\u2588  ","  \u2588\u2588 \u2588  ","        ","        "]),t[72]=g(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[73]=g([" \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[74]=g(["  \u2588\u2588\u2588\u2588  ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   "," \u2588\u2588\u2588    ","        ","        "]),t[75]=g(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[76]=g(["\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588   \u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),t[77]=g(["\u2588    \u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[78]=g(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588 \u2588\u2588  ","\u2588\u2588\u2588 \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[79]=g([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[80]=g(["\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","        ","        "]),t[81]=g([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  "," \u2588\u2588\u2588\u2588   ","    \u2588\u2588  ","        "]),t[82]=g(["\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[83]=g([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588     ","  \u2588\u2588\u2588   ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[84]=g(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588 \u2588\u2588 \u2588  ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[85]=g(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[86]=g(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),t[87]=g(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588  \u2588   ","        ","        "]),t[88]=g(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[89]=g(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[90]=g(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588   \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588   \u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),t[91]=g([" \u2588\u2588\u2588\u2588   "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[92]=g(["        ","        ","\u2588       ","\u2588\u2588      "," \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","    \u2588\u2588  ","     \u2588  ","        ","        "]),t[94]=g(["   \u2588    ","  \u2588\u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","        ","        ","        ","        ","        ","        ","        ","        "]),t[95]=g(["        ","        ","        ","        ","        ","        ","        ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        "]),t[96]=g([" \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","        ","        ","        ","        ","        ","        ","        ","        "]),t[97]=g(["        ","        ","        "," \u2588\u2588\u2588    ","   \u2588\u2588   "," \u2588\u2588\u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","        ","        "]),t[98]=g(["\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[99]=g(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[100]=g(["    \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","  \u2588\u2588\u2588\u2588  "," \u2588\u2588 \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[101]=g(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588      ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[102]=g(["  \u2588\u2588\u2588   "," \u2588\u2588 \u2588\u2588  "," \u2588\u2588  \u2588  "," \u2588\u2588     ","\u2588\u2588\u2588\u2588    "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     ","\u2588\u2588\u2588\u2588    ","        ","        "]),t[103]=g(["        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588\u2588  ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        "]),t[104]=g(["\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588\u2588 \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[105]=g(["  \u2588\u2588    ","  \u2588\u2588    ","        "," \u2588\u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[106]=g(["    \u2588\u2588  ","    \u2588\u2588  ","        ","   \u2588\u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        "]),t[107]=g(["\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588\u2588\u2588    ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[108]=g([" \u2588\u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[109]=g(["        ","        ","        ","\u2588 \u2588\u2588\u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588 \u2588 \u2588  ","\u2588\u2588 \u2588 \u2588  ","\u2588\u2588 \u2588 \u2588  ","\u2588\u2588 \u2588 \u2588  ","        ","        "]),t[110]=g(["        ","        ","        ","\u2588 \u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[111]=g(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[112]=g(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588      ","\u2588\u2588      ","        "]),t[113]=g(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","        "]),t[114]=g(["        ","        ","        ","\u2588 \u2588\u2588\u2588   ","\u2588\u2588\u2588 \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588\u2588     ","        ","        "]),t[115]=g(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588     ","   \u2588\u2588   ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[116]=g(["  \u2588     "," \u2588\u2588     "," \u2588\u2588     ","\u2588\u2588\u2588\u2588    "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588 \u2588\u2588  ","  \u2588\u2588\u2588   ","        ","        "]),t[117]=g(["        ","        ","        ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","        ","        "]),t[118]=g(["        ","        ","        ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","        ","        "]),t[119]=g(["        ","        ","        ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588  \u2588   ","        ","        "]),t[120]=g(["        ","        ","        ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[121]=g(["        ","        ","        ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588\u2588  ","    \u2588\u2588  ","   \u2588\u2588   ","\u2588\u2588\u2588\u2588    ","        "]),t[122]=g(["        ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),t[123]=g(["   \u2588\u2588\u2588  ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","\u2588\u2588\u2588     ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","   \u2588\u2588\u2588  ","        ","        "]),t[124]=g(["  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),t[125]=g(["\u2588\u2588\u2588     ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","   \u2588\u2588\u2588  ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","\u2588\u2588\u2588     ","        ","        "]),t[126]=g([" \u2588\u2588  \u2588  ","\u2588 \u2588\u2588 \u2588  ","\u2588  \u2588\u2588   ","        ","        ","        ","        ","        ","        ","        ","        "]),t}();function g(t){return t.map((t=>t.split("").map((t=>"\u2588"==t))))}const y=new Array(h.RL).fill(0),v=!0;class b{memory;os;color=v;constructor(t,e){this.memory=t,this.os=e}clear(){this.memory.screen.loadBytes(y)}outOfBounds(t,e){return t<0||t>16*h.pc||e<0||e>h.dh}drawPixel(t,e){if(this.outOfBounds(t,e))return void this.os.sys.error(i.X.ILLEGAL_PIXEL_COORD);const n=32*e+Math.floor(t/16);let r=this.memory.screen.get(n);this.color?r|=1<<t%16:r&=~(1<<t%16),this.memory.screen.set(n,r)}drawLine(t,e,n,r){this.outOfBounds(t,e)||this.outOfBounds(n,r)?this.os.sys.error(i.X.ILLEGAL_LINE_COORD):t==n?this.drawVerticalLine(t,e,r):e==r?this.drawHorizontalLine(e,t,n):this.drawGeneralLine(t,e,n,r)}drawHorizontalLine(t,e,n){for(let r=Math.min(e,n);r<=Math.max(e,n);r++)this.drawPixel(r,t)}drawVerticalLine(t,e,n){for(let r=Math.min(e,n);r<=Math.max(e,n);r++)this.drawPixel(t,r)}drawGeneralLine(t,e,n,r){const s=Math.abs(n-t),i=Math.abs(r-e);let a=0,o=0,l=0;const u=t<n?1:-1,c=e<r?1:-1;for(;a<=s&&o<=i;)this.drawPixel(t+u*a,e+c*o),l<0?(a+=1,l+=i):(o+=1,l-=s)}drawRect(t,e,n,r){if(this.outOfBounds(t,e)||this.outOfBounds(n,r))this.os.sys.error(i.X.ILLEGAL_RECT_COORD);else for(let s=t;s<=n;s++)for(let t=e;t<=r;t++)this.drawPixel(s,t)}drawCircle(t,e,n){if(this.outOfBounds(t,e))this.os.sys.error(i.X.ILLEGAL_CENTER_COORD);else if(n>181)this.os.sys.error(i.X.ILLEGAL_RADIUS);else for(let r=-n;r<=n;r++)this.drawLine(t-Math.floor(Math.sqrt(n*n-r*r)),e+r,t+Math.floor(Math.sqrt(n*n-r*r)),e+r)}}class x{os;col=0;row=0;lastColor=!1;constructor(t){this.os=t}setColor(t){this.lastColor=this.os.screen.color,this.os.screen.color=t}restoreColor(){this.os.screen.color=this.lastColor}clearChar(){this.setColor(false),this.os.screen.drawRect(8*this.col,11*this.row,8*(this.col+1),11*(this.row+1)),this.restoreColor()}moveCursor(t,e){t<0||t>22||e<0||e>64?this.os.sys.error(i.X.ILLEGAL_CURSOR_LOCATION):(this.row=t,this.col=e,this.drawCursor())}println(){this.row+=1,this.col=0}drawCursor(){this.clearChar(),this.setColor(v),this.os.screen.drawRect(8*this.col+2,11*this.row+2,8*(this.col+1)-2,11*(this.row+1)-2),this.restoreColor()}printChar(t){const e=m[t];if(e){this.clearChar(),this.setColor(v);for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++)e[t][n]&&this.os.screen.drawPixel(8*this.col+n,11*this.row+t);this.restoreColor()}this.col+=1,64==this.col&&(this.println(),22==this.row&&(this.row=0))}printString(t){for(let e=0;e<this.os.string.length(t);e++)this.printChar(this.os.string.charAt(t,e))}printJsString(t){for(const e of t)this.printChar(e.charCodeAt(0))}printInt(t){for(const e of o(t))this.printChar(e)}backspace(){this.clearChar(),this.col-=1,this.col<0&&(this.col=0,this.row-=1,this.row<0&&(this.row=0)),this.drawCursor()}}class S{os;_blocked=!1;_released=!1;_returnValue=0;_halted=!1;_exitCode=0;cancelWait=!1;animationFrameId;constructor(t){this.os=t}get blocked(){return this._blocked}get released(){return this._released}get halted(){return this._halted}get exitCode(){return this._exitCode}block(){this._blocked=!0}release(t){this._blocked=!1,this._returnValue=t??0,this._released=!0}readReturnValue(){return this._released=!1,this._returnValue}wait(t){if(t<=0)return void this.error(i.X.SYS_WAIT_DURATION_NOT_POSITIVE);this.block();let e=0;const n=r=>{this.cancelWait||(e+=r,e>=t?this.release():this.animationFrameId=requestAnimationFrame(n))};n(0)}halt(){this._halted=!0,this._exitCode=0}error(t){this.os.output.printJsString(`ERR${t}`),this._halted=!0,this._exitCode=t}dispose(){this.cancelWait=!0,this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}}class w{vmMemory;screen;memory;string;output;keyboard;sys;paused=!1;constructor(t){this.vmMemory=t,this.screen=new b(this.vmMemory,this),this.memory=new f(this.vmMemory,this),this.string=new l(this.vmMemory,this),this.output=new x(this),this.keyboard=new p(this.vmMemory,this),this.sys=new S(this)}dispose(){this.keyboard.dispose(),this.sys.dispose()}}const _="__implicit",E={name:"Sys.init",labels:{},nVars:0,opBase:0,operations:[{op:"function",name:"Sys.init",nVars:0},{op:"call",name:"Math.init",nArgs:0},{op:"call",name:"String.init",nArgs:0},{op:"call",name:"Array.init",nArgs:0},{op:"call",name:"Output.init",nArgs:0},{op:"call",name:"Screen.init",nArgs:0},{op:"call",name:"Keyboard.init",nArgs:0},{op:"call",name:"Memory.init",nArgs:0},{op:"call",name:"Main.main",nArgs:0}]};class T{memory=new d;os=new w(this.memory);functionMap={};executionStack=[];entry="";segmentInitializations={local:{initialized:!1,n:0},argument:{initialized:!1,n:0}};functions=[];program=[];addedSysInit=!1;staticCount=0;statics={};getStaticCount(){return this.staticCount}returnLine=void 0;registerStatic(t,e){const n=t.split(".")[0],r=this.statics[n]??[];this.statics[n]=r;const s=r[e]??this.staticCount++;return r[e]=s,s}registerStatics(){for(const t of Object.values(this.functionMap))for(const e of t.operations)"push"!==e.op&&"pop"!==e.op||"static"!==e?.segment||(e.offset=this.registerStatic(t.name,e.offset))}static validateFile(t){for(const e of t.instructions)if("function"==e.op){const n=e.name.split(".");if(2!=n.length)return(0,r._)((0,s.$5)(`Illegal subroutine name ${e.name} (Expected <className>.<SubroutineName>)`,e.span));if(n[0]!=t.name)return(0,r._)((0,s.$5)(`File name ${t.name} doesn't match class name ${n[0]} (at ${e.name})`,e.span))}return(0,r.Ok)()}static validateFiles(t){const e=new Set;for(const n of t){if(e.has(n.name))return(0,r._)((0,s.$5)(`File ${n.name} already exists`));const t=this.validateFile(n);if((0,r.ys)(t))return t;e.add(n.name)}return(0,r.Ok)()}validateStackInstructions(){for(const t of Object.values(this.functionMap))for(const e of t.operations)if("pop"==e.op||"push"==e.op){const t=this.memory.baseSegment(e.segment,e.offset);if((0,r.ys)(t))return(0,r._)((0,s.$5)((0,r._)(t).message,e.span))}return(0,r.Ok)()}static validateFunctions(t){const e=new Set,n=[];for(const i of t){if("function"==i.op){if(i.nVars<0||i.nVars>32767)return(0,r._)((0,s.$5)(`Illegal number of local variables ${i.nVars} (Expected 0-32767)`,i.span));e.add(i.name)}if("call"==i.op){if(i.nArgs<0||i.nArgs>32767)return(0,r._)((0,s.$5)(`Illegal number of arguments ${i.nArgs} (Expected 0-32767)`,i.span));n.push(i)}}for(const i of n)if(!e.has(i.name)){const t=c[i.name];if(!t)return(0,r._)((0,s.$5)(`Undefined function ${i.name}`,i.span));{const e="method"==t.type?t.args.length+1:t.args.length;if(e!=i.nArgs)return(0,r._)((0,s.$5)(`OS function ${i.name} expects ${e} arguments, not ${i.nArgs}`,i.span))}}return(0,r.Ok)()}static buildFromFiles(t){let e=this.validateFiles(t);if((0,r.ys)(e))return e;const n=t.map((t=>t.instructions)).reduce(((t,e)=>t.concat(e)));if(e=this.validateFunctions(n),(0,r.ys)(e))return e;const s=new T,i=s.load(n);return(0,r.ys)(i)?i:s.bootstrap()}static build(t){const e=this.validateFunctions(t);if((0,r.ys)(e))return e;const n=new T,s=n.load(t);return(0,r.ys)(s)?s:n.bootstrap()}static buildFunction(t,e){if("function"!==t[e].op)throw new Error("Only call buildFunction at the initial Function instruction");const{name:n,nVars:i}=t[e],a={name:n,nVars:i,labels:{},operations:[{op:"function",name:n,nVars:i,span:t[e].span}],opBase:0},o=new Set,l={};e+=1;t:for(;e<t.length;){switch(t[e].op){case"function":break t;case"add":case"sub":case"neg":case"and":case"or":case"not":case"gt":case"lt":case"eq":a.operations.push({op:t[e].op,span:t[e].span});break;case"push":case"pop":a.operations.push({op:t[e].op,segment:t[e].segment,offset:t[e].offset,span:t[e].span});break;case"call":a.operations.push({op:"call",name:t[e].name,nArgs:t[e].nArgs,span:t[e].span});break;case"goto":case"if-goto":{const{label:n}=t[e];l[n]=t[e].span,a.operations.push({op:t[e].op,label:n,span:t[e].span});break}case"label":{const{label:n}=t[e];if(o.add(n),a.labels[n])return(0,r._)((0,s.$5)(`Cannot redeclare label ${n} in function ${a.name} (previously at line ${a.labels[n]+1})`,t[e].span));a.labels[n]=a.operations.length,a.operations.push({op:"label",label:n,span:t[e].span});break}case"return":a.operations.push({op:"return",span:t[e].span})}e+=1}for(const u of Object.keys(l))if(!o.has(u))return(0,r._)((0,s.$5)(`Undeclared label ${u}`,l[u]));return(0,r.Ok)([a,e])}get RAM(){return this.memory}get Keyboard(){return this.memory.keyboard}get Screen(){return this.memory.screen}get invocation(){const t=this.executionStack.at(-1);return void 0===t?{frameBase:256,function:_,nArgs:0,opPtr:0,thisInitialized:!1,thatInitialized:!1}:t}get currentFunction(){return this.functionMap[this.invocation.function]}get operation(){if(this.currentFunction){if(this.invocation.opPtr>this.currentFunction.operations.length)throw new Error(`Current operation step beyond end of function operations (${this.invocation.opPtr} > ${this.currentFunction.operations.length})`);return this.currentFunction.operations[this.invocation.opPtr]}}load(t,e=!1){e&&(this.functionMap={},this.statics={},this.staticCount=0),"function"!==t[0]?.op&&t.unshift({op:"function",name:_,nVars:0});let n=0;for(;n<t.length;){const e=T.buildFunction(t,n);if((0,r.ys)(e))return e;const[i,a]=(0,r.oA)(e);if(this.functionMap[i.name]&&this.memory.strict&&i.name!==_&&i.name!==E.name)return(0,r._)((0,s.$5)(`VM Already has a function named ${i.name}`,t[0].span));this.functionMap[i.name]=i,n=a}const i=this.validateStackInstructions();return(0,r.ys)(i)?i:(this.registerStatics(),e&&this.bootstrap(),(0,r.Ok)(this))}bootstrap(){if(!this.functionMap[E.name]&&this.functionMap["Main.main"]&&(this.functionMap[E.name]=E,this.addedSysInit=!0),this.functionMap[E.name])this.entry=E.name;else if(this.functionMap[_])this.entry=_;else{const t=Object.keys(this.functionMap);1===t.length&&(this.entry=t[0])}if(this.functionMap[_]&&this.functionMap[E.name])return(0,r._)((0,s.$5)("Cannot use both bootstrap and an implicit function"));if(""===this.entry)return(0,r._)((0,s.$5)("Could not determine an entry point for VM"));this.functions=Object.values(this.functionMap),this.functions.sort(((t,e)=>t.name===this.entry?-1:e.name===this.entry?1:0));let t=0;return this.program=this.functions.reduce(((e,n)=>(n.name!=E.name&&(n.opBase=t),t+=n.operations.length,e.concat(n.operations))),[]),this.reset(),(0,r.Ok)(this)}reset(){this.executionStack=[{function:this.entry,opPtr:1,frameBase:256,nArgs:0,thisInitialized:!1,thatInitialized:!1}],this.memory.reset(),this.memory.SP=256,this.segmentInitializations={local:{initialized:!1,n:0},argument:{initialized:!1,n:0}},this.os.dispose(),this.os=new w(this.memory)}validateStackOp(t){if(this.currentFunction?.name==this.entry){for(const e of["local","argument"])if(t.segment==e){if(this.segmentInitializations[e].initialized)return void(this.segmentInitializations[e].n=Math.max(t.offset+1,this.segmentInitializations[e].n));throw new Error(`The ${e} segment cannot be accessed since it was not initialized`)}if("this"==t.segment&&this.invocation.thisInitialized)return void(this.invocation.thisN=Math.max(t.offset+1,this.invocation.thisN??0))}if("argument"==t.segment&&t.offset>=this.invocation.nArgs)throw new Error("Argument offset out of bounds");if("local"==t.segment&&t.offset>=this.functionMap[this.invocation.function]?.nVars)throw new Error("Local offset out of bounds");if("this"==t.segment&&!this.invocation.thisInitialized)throw new Error("The this segment cannot be accessed since it was not initialized");if("that"==t.segment&&!this.invocation.thatInitialized)throw new Error("The that segment cannot be accessed since it was not initialized")}setPaused(t=!0){this.os.paused=t}step(){if(this.os.sys.halted)return this.os.sys.exitCode;if(this.os.sys.blocked)return;if(this.os.sys.released&&"call"==this.operation?.op){const t=this.os.sys.readReturnValue(),e=this.memory.SP-this.operation.nArgs;return this.memory.set(e,t),this.memory.SP=e+1,void(this.invocation.opPtr+=1)}if(void 0==this.operation)return this.os.sys.halt(),this.step();const t=this.operation;if("label"===t.op)return this.invocation.opPtr+=1,this.step();switch(t.op){case"push":{this.validateStackOp(t);const e=this.memory.getSegment(t.segment,t.offset);this.memory.push(e);break}case"pop":{this.validateStackOp(t);const e=this.memory.pop();this.memory.setSegment(t.segment,t.offset,e),"pointer"==t.segment&&(0==t.offset?(this.invocation.thisInitialized=!0,this.invocation.thisN=this.memory.get(this.memory.THIS-1)):1==t.offset&&(this.invocation.thatInitialized=!0));break}case"add":this.memory.binOp(((t,e)=>t+e));break;case"sub":this.memory.binOp(((t,e)=>t-e));break;case"neg":this.memory.unOp((t=>-t));break;case"and":this.memory.binOp(((t,e)=>t&e));break;case"or":this.memory.binOp(((t,e)=>t|e));break;case"not":this.memory.unOp((t=>~t));break;case"eq":this.memory.comp(((t,e)=>t===e));break;case"lt":this.memory.comp(((t,e)=>t<e));break;case"gt":this.memory.comp(((t,e)=>t>e));break;case"goto":this.goto(t.label);break;case"if-goto":0!=this.memory.pop()&&this.goto(t.label);break;case"call":{const e=t.name;if(this.functionMap[e]){const n=this.memory.pushFrame(this.invocation.opPtr,t.nArgs,this.functionMap[e].nVars);this.executionStack.push({function:e,opPtr:0,nArgs:t.nArgs,frameBase:n,thisInitialized:!1,thatInitialized:!1})}else if(c[e]){const n=c[e].func(this.memory,this.os);if(this.os.sys.blocked)return;const r=this.memory.SP-t.nArgs;this.memory.set(r,n),this.memory.SP=r+1}break}case"return":{const t=this.derivedLine();this.executionStack.pop();const e=this.memory.popFrame();if(this.invocation.opPtr=e,0===this.executionStack.length)return this.returnLine=t,0;break}}this.invocation.opPtr+=1}goto(t){if(this.currentFunction){if(void 0===this.currentFunction.labels[t])throw new Error(`Attempting GOTO to unknown label ${t} in ${this.currentFunction.name}`);this.invocation.opPtr=this.currentFunction.labels[t]}}write(t){t.map((([t,e])=>{this.memory.set(t,e)}))}read(t){return t.map((t=>this.memory.get(t)))}vmStack(){return this.executionStack.map(((t,e)=>{const n=this.executionStack[e+1],r=n?n.frameBase-n.nArgs:this.memory.get(0);return this.makeFrame(t,r)}))}getUsedSegments(t){const e=new Set;for(const n of this.functionMap[t.function].operations)"push"!==n.op&&"pop"!=n.op||e.add(n.segment);return e}makeFrame(t=this.invocation,e){const n=this.functionMap[t.function];if(n.name===this.entry){const e=256+n.nVars,r=this.executionStack[1],s=r?r.frameBase-r.nArgs:this.memory.get(0),{ARG:i,LCL:a,THAT:o,THIS:l}=this.memory,u=this.segmentInitializations.argument.n,c=this.segmentInitializations.local.n,h=this.invocation.thisN??0;return{fn:n,args:{base:i,count:u,values:[...this.memory.map(((t,e)=>e),i,i+u)]},locals:{base:a,count:c,values:[...this.memory.map(((t,e)=>e),a,a+c)]},stack:{base:256,count:s-e,values:[...this.memory.map(((t,e)=>e),e,s)]},this:{base:l,count:h,values:[...this.memory.map(((t,e)=>e),l,l+h)]},that:{base:o,count:1,values:[this.memory.THAT]},frame:{ARG:i,LCL:a,RET:65535,THAT:o,THIS:l},usedSegments:this.getUsedSegments(t)}}const r=this.memory.getFrame(t.frameBase,t.nArgs,n.nVars,this.invocation.thisN??0,1,e);return r.fn=n,r.usedSegments=this.getUsedSegments(t),r}derivedLine(){return this.operation?.span?.line??this.returnLine??0}writeDebug(){const t=this.derivedLine(),e=Math.max(t-5,0),n=Math.min(t+3,this.program.length),r=this.program.slice(e,n).map(((n,r)=>`${r===t-e?"->":"  "} ${function(t){switch(t.op){case"add":case"and":case"sub":case"eq":case"gt":case"lt":case"neg":case"not":case"or":case"return":return`  ${t.op}`;case"goto":return`  ${t.op}    ${t.label}`;case"if-goto":return`  ${t.op} ${t.label}`;case"label":return`${t.op}     ${t.label}`;case"call":return`  ${t.op}    ${t.name} ${t.nArgs}`;case"function":return`${t.op}  ${t.name} ${t.nVars}`;case"pop":return`  ${t.op}     ${t.segment} ${t.offset}`;case"push":return`  ${t.op}    ${t.segment} ${t.offset}`}}(n)}`)).join("\n"),s=this.vmStack().at(-1);return s?r+"\n\n"+function(t){return[`Frame: ${t.fn?.name??"Unknown Fn"} ARG:${t.frame.ARG} LCL:${t.frame.LCL}`,`Args: ${A(t.args)}`,`Lcls: ${A(t.locals)}`,`Stck: ${A(t.stack)}`].join("\n")}(s):r}}function A(t){return`[${t.base};${t.count}][${t.values.join(", ")}]`}}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.m=t,n.amdO={},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};t=t||[null,e({}),e([]),e(e)];for(var o=2&s&&r;"object"==typeof o&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((t=>a[t]=()=>r[t]));return a.default=()=>r,n.d(i,a),i}})(),n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,r)=>(n.f[r](t,e),e)),[])),n.u=t=>"static/js/"+t+"."+{34:"586e3ad3",265:"c972afe7",269:"15067b76",288:"6bea87de",297:"ced44b19",323:"dd594c2a",408:"0e94042f",510:"deba6b2d",519:"c40d1587",537:"fcaab5bc",598:"f6747240",608:"b28751cf",614:"60360c73",656:"1619e63a",744:"af76c562",787:"290807da",828:"e024ae6c",965:"304934a8",983:"7ed0fcc0"}[t]+".chunk.js",n.miniCssF=t=>"static/css/"+t+"."+{34:"e91bd2aa",265:"b6d16a62",408:"4548b55f",519:"b31f5f69",598:"ea1594aa",744:"7dc0fc85",787:"57db0e9c"}[t]+".chunk.css",n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="@nand2tetris/web:";n.l=(r,s,i,a)=>{if(t[r])t[r].push(s);else{var o,l;if(void 0!==i)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==e+i){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",e+i),o.src=r),t[r]=[s];var d=(e,n)=>{o.onerror=o.onload=null,clearTimeout(p);var s=t[r];if(delete t[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((t=>t(n))),e)return e(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/web-ide/",(()=>{if("undefined"!==typeof document){var t=t=>new Promise(((e,r)=>{var s=n.miniCssF(t),i=n.p+s;if(((t,e)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var s=(a=n[r]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(s===t||s===e))return a}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){var a;if((s=(a=i[r]).getAttribute("data-href"))===t||s===e)return a}})(s,i))return e();((t,e,r,s,i)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",n.nc&&(a.nonce=n.nc),a.onerror=a.onload=n=>{if(a.onerror=a.onload=null,"load"===n.type)s();else{var r=n&&n.type,o=n&&n.target&&n.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+r+": "+o+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=o,a.parentNode&&a.parentNode.removeChild(a),i(l)}},a.href=e,r?r.parentNode.insertBefore(a,r.nextSibling):document.head.appendChild(a)})(t,i,null,e,r)})),e={792:0};n.f.miniCss=(n,r)=>{e[n]?r.push(e[n]):0!==e[n]&&{34:1,265:1,408:1,519:1,598:1,744:1,787:1}[n]&&r.push(e[n]=t(n).then((()=>{e[n]=0}),(t=>{throw delete e[n],t})))}}})(),(()=>{var t={792:0};n.f.j=(e,r)=>{var s=n.o(t,e)?t[e]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise(((n,r)=>s=t[e]=[n,r]));r.push(s[2]=i);var a=n.p+n.u(e),o=new Error;n.l(a,(r=>{if(n.o(t,e)&&(0!==(s=t[e])&&(t[e]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,s[1](o)}}),"chunk-"+e,e)}};var e=(e,r)=>{var s,i,a=r[0],o=r[1],l=r[2],u=0;if(a.some((e=>0!==t[e]))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(e&&e(r);u<a.length;u++)i=a[u],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0},r=self.webpackChunk_nand2tetris_web=self.webpackChunk_nand2tetris_web||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var r={};n.r(r),n.d(r,{messages:()=>A});var s={};n.r(s),n.d(s,{messages:()=>I});var i=n(8878),a=n(4664);const o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(t,e){navigator.serviceWorker.register(t).then((t=>{t.onupdatefound=()=>{const n=t.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((t=>{console.error("Error during service worker registration:",t)}))}var u=n(8256),c=n(1391),h=n(910),d=n(5777);const p=(t,e)=>{const n=String(t).split("."),r=!n[1],s=Number(n[0])==t,i=s&&n[0].slice(-1),a=s&&n[0].slice(-2);return e?1==i&&11!=a?"one":2==i&&12!=a?"two":3==i&&13!=a?"few":"other":1==t&&r?"one":"other"};var f=n(8330),m=n(3229),g=n(8029);const y={comment:[[/[^/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]},v={tokenizer:{root:[[/(@)(.+)/,["operator","keyword"]],[/(\()(.+)(\))/,["operator","keyword","operator"]],{include:"@whitespace"}],...y}},b={keywords:["class","int","char","boolean","void","let","function","method","constructor","var","if","do","while","else","return","true","false","null","this","field","static"],tokenizer:{root:[[/[a-zA-Z_][a-zA-Z0-9_]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/\d+/,"number"],[/"[^"\n]*"/,"string"],{include:"@whitespace"}],...y}},x={defaultToken:"invalid",keywords:["CHIP","CPU","IN","OUT","PARTS","BUILTIN","CLOCKED"],chips:["Nand","Nand16","Not","Not16","And","And16","Or","Or16","Or8Way","XOr","XOr16","Xor","Xor16","Mux","Mux16","Mux4Way16","Mux8Way16","DMux","DMux4Way","DMux8Way","HalfAdder","FullAdder","Add16","Inc16","ALU","ALUNoStat","DFF","Bit","Register","ARegister","DRegister","PC","RAM8","RAM64","RAM512","RAM4K","RAM16K","ROM32K","Screen","Keyboard","CPU","Computer","Memory","ARegister","DRegister"],operators:["="],symbols:/[=]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-zA-Z][a-zA-Z0-9]*/,{cases:{"@keywords":"keyword","@chips":"keyword.chip","@default":"identifier"}}],{include:"@whitespace"},[/[{}()[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/@\s*[a-zA-Z_$][\w$]*/,{token:"annotation",log:"annotation token: $0"}],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+(..\d+)?/,"number"],[/[;:,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/@escapes/,"string.escape"],[/'/,"string.invalid"]],...y}},S={Add16:"Add16(a = , b = , out = );",ALU:"ALU(x= , y= , zx= , nx= , zy= , ny= , f= , no= , out= , zr= , ng= );",And:"And(a= , b= , out= );",And16:"And16(a= , b= , out= );",ARegister:"ARegister(in= , load= , out= );",Bit:"Bit(in= , load= , out= );",CPU:"CPU(inM= , instruction= , reset= , outM= , writeM= , addressM= , pc= );",DFF:"DFF(in= , out= );",DMux:"DMux(in= , sel= , a= , b= );",DMux4Way:"DMux4Way(in= , sel= , a= , b= , c= , d= );",DMux8Way:"DMux8Way(in= , sel= , a= , b= , c= , d= , e= , f= , g= , h= );",DRegister:"DRegister(in= , load= , out= );",HalfAdder:"HalfAdder(a= , b= , sum= , carry= );",FullAdder:"FullAdder(a= , b= , c= , sum= , carry= );",Inc16:"Inc16(in= , out= );",Keyboard:"Keyboard(out= );",Memory:"Memory(in= , load= , address= , out= );",Mux:"Mux(a= , b= , sel= , out= );",Mux16:"Mux16(a= , b= , sel= , out= );",Mux4Way16:"Mux4Way16(a= , b= , c= , d= , sel= , out= );",Mux8Way16:"Mux8Way16(a= , b= , c= , d= , e= , f= , g= , h= , sel= , out= );",Nand:"Nand(a= , b= , out= );",Not16:"Not16(in= , out= );",Not:"Not(in= , out= );",Or:"Or(a= , b= , out= );",Or8Way:"Or8Way(in= , out= );",Or16:"Or16(a= , b= , out= );",PC:"PC(in= , load= , inc= , reset= , out= );",RAM8:"RAM8(in= , load= , address= , out= );",RAM64:"RAM64(in= , load= , address= , out= );",RAM512:"RAM512(in= , load= , address= , out= );",RAM4K:"RAM4K(in= , load= , address= , out= );",RAM16K:"RAM16K(in= , load= , address= , out= );",Register:"Register(in= , load= , out= );",ROM32K:"ROM32K(address= , out= );",Screen:"Screen(in= , load= , address= , out= );",Xor:"Xor(a = , b = , out = );"},w={provideCompletionItems:()=>({suggestions:Object.entries(S).map((([t,e])=>({label:t,kind:1,insertText:e})))})},_={hdl:x,cmp:{tokenizer:{root:[[/[a-z_$][\w$]*/,"identifier"],[/[ \t\r\n]+/,"white"],[/\d+\+?/,"number"],[/[|]/,"delimiter"]]}},tst:{defaultToken:"invalid",keywords:["output-list","set","eval","output","echo","clear-echo","repeat","while","load","resetRam"],tokenizer:{root:[[/%[BDSX]\d+\.\d+\.\d+/,"keyword"],[/ROM32K/,"keyword"],[/[a-zA-Z-]+/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/%X[0-9a-fA-F]+/,"number.hex"],[/(%D)?\d+/,"number"],[/%B[01]+/,"number"],{include:"@whitespace"},[/[{}]/,"@bracket"],[/<>/,"operator"],[/[[\].]/,"operator"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/[;:!,]/,"delimiter"]],comment:[[/[^/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[/*]/,"comment"]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],string:[[/[^\\"]+/,"string"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]]}},vm:{keywords:["push","pop","add","sub","neg","lt","gt","eq","and","or","not","function","call","return","label","goto","if-goto","argument","local","static","constant","this","that","pointer","temp"],tokenizer:{root:[[/if-goto/,"keyword"],[/[_a-zA-Z][_a-zA-Z0-9.$]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/\d+/,"number"],{include:"@whitespace"}],...y}},asm:v,jack:b},E={hdl:w};let T=!1;const A=JSON.parse('{"pDgeaz":[["title"]],"Pza0F/":"Allocated memory size must be positive (Memory.alloc)","PH2rP+":"Allow anonymous interaction tracking","zh5lcC":"Array size must be positive (Array.new)","YBt9YP":"Beta","BUAJAb":"Binary Code","++LBSt":"Builtin","RsyXWz":"Cannot compute square root of a negative number (Math.sqrt)","Ow/xRO":"Cannot test a chip that has syntax errors","L3ICHv":"Change Local FileSystem","C7rK3y":"Chip","+yPBXI":"Choose file","3rHyAJ":"Clock","UV+b1H":"Compare Code","oXeVWH":"Create a new file in the currently opened folder","pvnfJD":"Dark","iGq+of":"Division by zero (Math.divide)","Ovrln6":"Download .hdl files","9dwWEz":"Duration must be positive (Sys.wait)","uBAxNB":"Editor","lYGfRP":"English","J3L683":"Eval","7Bj3x9":"Failed","A9bii0":"Failed to load local file system.","sER+bs":"Files","EqbNAN":"Heap overflow (Memory.alloc)","SLzG45":"Illegal center coordinates (Screen.drawCircle)","EQU4AC":"Illegal cursor location (Output.moveCursor)","y4CC1u":"Illegal line coordinates (Screen.drawLine)","Lo+J/U":"Illegal pixel coordinates (Screen.drawPixel)","ijwovO":"Illegal radius (Screen.drawCircle)","5tI3XX":"Illegal rectangle coordinates (Screen.drawRectangle)","fkP0ib":"Insufficient string capacity (String.setInt)","vXIe7J":"Language","1njn7W":"Light","1/5eLk":"Load the compiled code into the VM emulator","etZuY4":"Maximum length must be non-negative (String.new)","FZeS2z":"Open a folder containing Jack file(s)","1tSpqV":"Parse Error","nqMwPi":"Passed","e0NrBM":"Project","E+NWKU":"Pseudolocale","9aloPG":"References","rdShiY":"Registers","OfhWJH":"Reset","d2mxgE":"Samples","Tz0i8g":"Settings","wdxz7K":"Source","GbPVvk":"String index out of bounds (String.charAt)","IgLZZI":"String index out of bounds (String.setCharAt)","RE1zuN":"String is empty (String.eraseLastChar)","CACwfm":"String is full (String.appendChar)","LWSJ0G":"Symbol Table","RFMyN+":"Syntax errors in the HDL code or test","D+NlUC":"System","NnH3pK":"Test","FEr96N":"Theme","U0HZma":"Tracking","/QBhoT":"Use Local FileSystem","zQo0yv":"Use Monaco Editor","4d8jc9":["Using ",["upgraded"]],"q3JCcX":"Visualization","1qK+lw":"VM Code","2BSTzk":"VM Structures"}'),I=JSON.parse('{"pDgeaz":[["title"]],"Pza0F/":"\xc0\u013a\u013a\u014d\u0107\xe0\u0163\u0113\u010f \u1e3f\u0113\u1e3f\u014d\u0155\u0177 \u015b\u0129\u017a\u0113 \u1e3f\u0169\u015b\u0163 \u0180\u0113 \u01a5\u014d\u015b\u0129\u0163\u0129v\u0113 (\u1e3e\u0113\u1e3f\u014d\u0155\u0177.\xe0\u013a\u013a\u014d\u0107)","PH2rP+":"\xc0\u013a\u013a\u014d\u0175 \xe0\u0144\u014d\u0144\u0177\u1e3f\u014d\u0169\u015b \u0129\u0144\u0163\u0113\u0155\xe0\u0107\u0163\u0129\u014d\u0144 \u0163\u0155\xe0\u0107\u0137\u0129\u0144\u011d","zh5lcC":"\xc0\u0155\u0155\xe0\u0177 \u015b\u0129\u017a\u0113 \u1e3f\u0169\u015b\u0163 \u0180\u0113 \u01a5\u014d\u015b\u0129\u0163\u0129v\u0113 (\xc0\u0155\u0155\xe0\u0177.\u0144\u0113\u0175)","YBt9YP":"\xdf\u0113\u0163\xe0","BUAJAb":"\xdf\u0129\u0144\xe0\u0155\u0177 \u0106\u014d\u010f\u0113","++LBSt":"\xdf\u0169\u0129\u013a\u0163\u0129\u0144","RsyXWz":"\u0106\xe0\u0144\u0144\u014d\u0163 \u0107\u014d\u1e3f\u01a5\u0169\u0163\u0113 \u015b\u01eb\u0169\xe0\u0155\u0113 \u0155\u014d\u014d\u0163 \u014d\u0192 \xe0 \u0144\u0113\u011d\xe0\u0163\u0129v\u0113 \u0144\u0169\u1e3f\u0180\u0113\u0155 (\u1e3e\xe0\u0163\u0125.\u015b\u01eb\u0155\u0163)","Ow/xRO":"\u0106\xe0\u0144\u0144\u014d\u0163 \u0163\u0113\u015b\u0163 \xe0 \u0107\u0125\u0129\u01a5 \u0163\u0125\xe0\u0163 \u0125\xe0\u015b \u015b\u0177\u0144\u0163\xe0x \u0113\u0155\u0155\u014d\u0155\u015b","L3ICHv":"\u0106\u0125\xe0\u0144\u011d\u0113 \u0139\u014d\u0107\xe0\u013a \u0191\u0129\u013a\u0113\u015a\u0177\u015b\u0163\u0113\u1e3f","C7rK3y":"\u0106\u0125\u0129\u01a5","+yPBXI":"\u0106\u0125\u014d\u014d\u015b\u0113 \u0192\u0129\u013a\u0113","3rHyAJ":"\u0106\u013a\u014d\u0107\u0137","UV+b1H":"\u0106\u014d\u1e3f\u01a5\xe0\u0155\u0113 \u0106\u014d\u010f\u0113","oXeVWH":"\u0106\u0155\u0113\xe0\u0163\u0113 \xe0 \u0144\u0113\u0175 \u0192\u0129\u013a\u0113 \u0129\u0144 \u0163\u0125\u0113 \u0107\u0169\u0155\u0155\u0113\u0144\u0163\u013a\u0177 \u014d\u01a5\u0113\u0144\u0113\u010f \u0192\u014d\u013a\u010f\u0113\u0155","pvnfJD":"\u010e\xe0\u0155\u0137","iGq+of":"\u010e\u0129v\u0129\u015b\u0129\u014d\u0144 \u0180\u0177 \u017a\u0113\u0155\u014d (\u1e3e\xe0\u0163\u0125.\u010f\u0129v\u0129\u010f\u0113)","Ovrln6":"\u010e\u014d\u0175\u0144\u013a\u014d\xe0\u010f .\u0125\u010f\u013a \u0192\u0129\u013a\u0113\u015b","9dwWEz":"\u010e\u0169\u0155\xe0\u0163\u0129\u014d\u0144 \u1e3f\u0169\u015b\u0163 \u0180\u0113 \u01a5\u014d\u015b\u0129\u0163\u0129v\u0113 (\u015a\u0177\u015b.\u0175\xe0\u0129\u0163)","uBAxNB":"\u0112\u010f\u0129\u0163\u014d\u0155","lYGfRP":"\u0112\u0144\u011d\u013a\u0129\u015b\u0125","J3L683":"\u0112v\xe0\u013a","7Bj3x9":"\u0191\xe0\u0129\u013a\u0113\u010f","A9bii0":"\u0191\xe0\u0129\u013a\u0113\u010f \u0163\u014d \u013a\u014d\xe0\u010f \u013a\u014d\u0107\xe0\u013a \u0192\u0129\u013a\u0113 \u015b\u0177\u015b\u0163\u0113\u1e3f.","sER+bs":"\u0191\u0129\u013a\u0113\u015b","EqbNAN":"\u0124\u0113\xe0\u01a5 \u014dv\u0113\u0155\u0192\u013a\u014d\u0175 (\u1e3e\u0113\u1e3f\u014d\u0155\u0177.\xe0\u013a\u013a\u014d\u0107)","SLzG45":"\u0128\u013a\u013a\u0113\u011d\xe0\u013a \u0107\u0113\u0144\u0163\u0113\u0155 \u0107\u014d\u014d\u0155\u010f\u0129\u0144\xe0\u0163\u0113\u015b (\u015a\u0107\u0155\u0113\u0113\u0144.\u010f\u0155\xe0\u0175\u0106\u0129\u0155\u0107\u013a\u0113)","EQU4AC":"\u0128\u013a\u013a\u0113\u011d\xe0\u013a \u0107\u0169\u0155\u015b\u014d\u0155 \u013a\u014d\u0107\xe0\u0163\u0129\u014d\u0144 (\u014c\u0169\u0163\u01a5\u0169\u0163.\u1e3f\u014dv\u0113\u0106\u0169\u0155\u015b\u014d\u0155)","y4CC1u":"\u0128\u013a\u013a\u0113\u011d\xe0\u013a \u013a\u0129\u0144\u0113 \u0107\u014d\u014d\u0155\u010f\u0129\u0144\xe0\u0163\u0113\u015b (\u015a\u0107\u0155\u0113\u0113\u0144.\u010f\u0155\xe0\u0175\u0139\u0129\u0144\u0113)","Lo+J/U":"\u0128\u013a\u013a\u0113\u011d\xe0\u013a \u01a5\u0129x\u0113\u013a \u0107\u014d\u014d\u0155\u010f\u0129\u0144\xe0\u0163\u0113\u015b (\u015a\u0107\u0155\u0113\u0113\u0144.\u010f\u0155\xe0\u0175\u01a4\u0129x\u0113\u013a)","ijwovO":"\u0128\u013a\u013a\u0113\u011d\xe0\u013a \u0155\xe0\u010f\u0129\u0169\u015b (\u015a\u0107\u0155\u0113\u0113\u0144.\u010f\u0155\xe0\u0175\u0106\u0129\u0155\u0107\u013a\u0113)","5tI3XX":"\u0128\u013a\u013a\u0113\u011d\xe0\u013a \u0155\u0113\u0107\u0163\xe0\u0144\u011d\u013a\u0113 \u0107\u014d\u014d\u0155\u010f\u0129\u0144\xe0\u0163\u0113\u015b (\u015a\u0107\u0155\u0113\u0113\u0144.\u010f\u0155\xe0\u0175\u0154\u0113\u0107\u0163\xe0\u0144\u011d\u013a\u0113)","fkP0ib":"\u0128\u0144\u015b\u0169\u0192\u0192\u0129\u0107\u0129\u0113\u0144\u0163 \u015b\u0163\u0155\u0129\u0144\u011d \u0107\xe0\u01a5\xe0\u0107\u0129\u0163\u0177 (\u015a\u0163\u0155\u0129\u0144\u011d.\u015b\u0113\u0163\u0128\u0144\u0163)","vXIe7J":"\u0139\xe0\u0144\u011d\u0169\xe0\u011d\u0113","1njn7W":"\u0139\u0129\u011d\u0125\u0163","1/5eLk":"\u0139\u014d\xe0\u010f \u0163\u0125\u0113 \u0107\u014d\u1e3f\u01a5\u0129\u013a\u0113\u010f \u0107\u014d\u010f\u0113 \u0129\u0144\u0163\u014d \u0163\u0125\u0113 V\u1e3e \u0113\u1e3f\u0169\u013a\xe0\u0163\u014d\u0155","etZuY4":"\u1e3e\xe0x\u0129\u1e3f\u0169\u1e3f \u013a\u0113\u0144\u011d\u0163\u0125 \u1e3f\u0169\u015b\u0163 \u0180\u0113 \u0144\u014d\u0144-\u0144\u0113\u011d\xe0\u0163\u0129v\u0113 (\u015a\u0163\u0155\u0129\u0144\u011d.\u0144\u0113\u0175)","FZeS2z":"\u014c\u01a5\u0113\u0144 \xe0 \u0192\u014d\u013a\u010f\u0113\u0155 \u0107\u014d\u0144\u0163\xe0\u0129\u0144\u0129\u0144\u011d \u0135\xe0\u0107\u0137 \u0192\u0129\u013a\u0113(\u015b)","1tSpqV":"\u01a4\xe0\u0155\u015b\u0113 \u0112\u0155\u0155\u014d\u0155","nqMwPi":"\u01a4\xe0\u015b\u015b\u0113\u010f","e0NrBM":"\u01a4\u0155\u014d\u0134\u0113\u0107\u0163","E+NWKU":"\u01a4\u015b\u0113\u0169\u010f\u014d\u013a\u014d\u0107\xe0\u013a\u0113","9aloPG":"\u0154\u0113\u0192\u0113\u0155\u0113\u0144\u0107\u0113\u015b","rdShiY":"\u0154\u0113\u011d\u0129\u015b\u0163\u0113\u0155\u015b","OfhWJH":"\u0154\u0113\u015b\u0113\u0163","d2mxgE":"\u015a\xe0\u1e3f\u01a5\u013a\u0113\u015b","Tz0i8g":"\u015a\u0113\u0163\u0163\u0129\u0144\u011d\u015b","wdxz7K":"\u015a\u014d\u0169\u0155\u0107\u0113","GbPVvk":"\u015a\u0163\u0155\u0129\u0144\u011d \u0129\u0144\u010f\u0113x \u014d\u0169\u0163 \u014d\u0192 \u0180\u014d\u0169\u0144\u010f\u015b (\u015a\u0163\u0155\u0129\u0144\u011d.\u0107\u0125\xe0\u0155\xc0\u0163)","IgLZZI":"\u015a\u0163\u0155\u0129\u0144\u011d \u0129\u0144\u010f\u0113x \u014d\u0169\u0163 \u014d\u0192 \u0180\u014d\u0169\u0144\u010f\u015b (\u015a\u0163\u0155\u0129\u0144\u011d.\u015b\u0113\u0163\u0106\u0125\xe0\u0155\xc0\u0163)","RE1zuN":"\u015a\u0163\u0155\u0129\u0144\u011d \u0129\u015b \u0113\u1e3f\u01a5\u0163\u0177 (\u015a\u0163\u0155\u0129\u0144\u011d.\u0113\u0155\xe0\u015b\u0113\u0139\xe0\u015b\u0163\u0106\u0125\xe0\u0155)","CACwfm":"\u015a\u0163\u0155\u0129\u0144\u011d \u0129\u015b \u0192\u0169\u013a\u013a (\u015a\u0163\u0155\u0129\u0144\u011d.\xe0\u01a5\u01a5\u0113\u0144\u010f\u0106\u0125\xe0\u0155)","LWSJ0G":"\u015a\u0177\u1e3f\u0180\u014d\u013a \u0162\xe0\u0180\u013a\u0113","RFMyN+":"\u015a\u0177\u0144\u0163\xe0x \u0113\u0155\u0155\u014d\u0155\u015b \u0129\u0144 \u0163\u0125\u0113 \u0124\u010e\u0139 \u0107\u014d\u010f\u0113 \u014d\u0155 \u0163\u0113\u015b\u0163","D+NlUC":"\u015a\u0177\u015b\u0163\u0113\u1e3f","NnH3pK":"\u0162\u0113\u015b\u0163","FEr96N":"\u0162\u0125\u0113\u1e3f\u0113","U0HZma":"\u0162\u0155\xe0\u0107\u0137\u0129\u0144\u011d","/QBhoT":"\u0168\u015b\u0113 \u0139\u014d\u0107\xe0\u013a \u0191\u0129\u013a\u0113\u015a\u0177\u015b\u0163\u0113\u1e3f","zQo0yv":"\u0168\u015b\u0113 \u1e3e\u014d\u0144\xe0\u0107\u014d \u0112\u010f\u0129\u0163\u014d\u0155","4d8jc9":["\u0168\u015b\u0129\u0144\u011d ",["upgraded"]],"q3JCcX":"V\u0129\u015b\u0169\xe0\u013a\u0129\u017a\xe0\u0163\u0129\u014d\u0144","1qK+lw":"V\u1e3e \u0106\u014d\u010f\u0113","2BSTzk":"V\u1e3e \u015a\u0163\u0155\u0169\u0107\u0163\u0169\u0155\u0113\u015b"}'),C=r,R=s;var k=n(6073),L=n(782);const N=function(){const{status:t}=(0,i.useContext)(h.L);return(0,L.jsx)("div",{children:t})},O=()=>(0,L.jsx)("footer",{className:"flex row justify-between",children:(0,L.jsx)(N,{})});var P=n(384),F=n(3015),D=n(3499);function M(t,e,n){return{href:t.href,tool:t.tool,tooltip:null!==n&&void 0!==n?n:t.tool&&Object.keys(D.It).includes(t.tool)?D.It[t.tool]:"",icon:e,target:t.target}}const U={chip:"user_guide/chip.pdf",cpu:"user_guide/cpu.pdf",asm:"user_guide/asm.pdf",vm:"user_guide/vm.pdf",compiler:"user_guide/compiler.pdf"},j="Guide not available for this tool";const z=[M(D.Ay.chip,"memory"),M(D.Ay.cpu,"developer_board"),M(D.Ay.asm,"list_alt"),M(D.Ay.vm,"computer"),..."showDirectoryPicker"in window?[M(D.Ay.compiler,"code")]:[],M(D.Ay.bitmap,"grid_on"),M(D.Ay.util,"function","Converter Tool"),{onClick:async function(t){if(!U[t.pathname])return void t.baseContext.setStatus(j);const e=U[t.pathname];404!==(await fetch(e)).status?window.open(e,"_blank","width=1000,height=800"):t.baseContext.setStatus(j)},tooltip:"Guide",icon:"menu_book"},{href:"https://github.com/nand2tetris/web-ide/issues/new/choose",icon:"bug_report",tooltip:"Bug Report"},{onClick:t=>{t.appContext.settings.open()},icon:"settings",tooltip:"Settings"},M(D.Ay.about,"info","About")],V=()=>{const t=(0,i.useContext)(g.BR),e=(0,i.useContext)(h.L),{title:n,setTool:r}=(0,i.useContext)(P.NQ),{setStatus:s}=(0,i.useContext)(h.L),a={};for(const l of z)l.href&&(a[l.href]=(0,i.useRef)(null));const o=(0,m.zy)().pathname.replaceAll("/","");return(0,L.jsx)("header",{children:(0,L.jsxs)("nav",{style:{width:"100%"},children:[(0,L.jsx)("ul",{children:(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:(0,L.jsx)("a",{href:"https://nand2tetris.org",target:"_blank",rel:"noreferrer",children:"NAND2Tetris"})}),D.It[o]&&` / ${D.It[o]}`,n&&` / ${n}`]})}),(0,L.jsx)("ul",{className:"icon-list",children:z.map((({href:n,icon:i,onClick:l,tooltip:u,target:c,tool:h})=>(0,L.jsxs)("li",{"data-tooltip":u,"data-placement":"bottom",onClick:()=>{var i;(r(h),s(""),l)?null===l||void 0===l||l({appContext:t,baseContext:e,pathname:o}):n&&(c&&localStorage.setItem(D.p3,n),null===(i=a[n].current)||void 0===i||i.click())},children:[(0,L.jsx)(F.I,{name:i}),n&&(c?(0,L.jsx)(f.N_,{to:n,ref:a[n],style:{display:"none"}}):(0,L.jsx)("a",{href:n,target:"new",ref:a[n],style:{display:"none"}}))]},i)))})]})})};var B=n(5270);const $="version",H=12;function G(){var t;return Number(null!==(t=localStorage.getItem($))&&void 0!==t?t:"0")}function W(t){localStorage.setItem($,t.toString())}const q={0:async t=>{for(const e of["hdl","cmp","tst"])await t.writeFile(`/projects/01/Xor/Xor.${e}`,await t.readFile(`/projects/01/XOr/XOr.${e}`))},1:async t=>{await(0,d.resetFiles)(t,[4])},2:async t=>{await(0,d.resetTests)(t,[1])},3:async t=>{await(0,d.resetTests)(t)},4:async t=>{await(0,d.resetFiles)(t,[7,8])},5:async t=>{await(0,d.resetTests)(t,[3,5])},6:async t=>{await(0,d.resetTests)(t,[4])},7:async t=>{await(0,d.resetTests)(t,[1])},8:async t=>{await(0,d.resetFiles)(t,[6])},9:async t=>{await(0,d.resetTests)(t,[5])},10:async t=>{await(0,d.resetTests)(t,[5])},11:async t=>{await(0,d.resetTests)(t,[1])}};var K=n(3508);const Y=()=>{const{stores:t}=(0,i.useContext)(P.NQ),{fs:e,setStatus:r,canUpgradeFs:s,upgradeFs:a,closeFs:o,upgraded:l}=(0,i.useContext)(h.L),{settings:d,monaco:p,theme:f,setTheme:m,tracking:y}=(0,i.useContext)(g.BR),[v,b]=(0,i.useState)(!1),x=(0,i.useMemo)((()=>t=>{u.Ru.activate(t),e.writeFile("/locale",t)}),[e]);(0,i.useEffect)((()=>{e.readFile("/locale").then((t=>u.Ru.activate(t))).catch((()=>x("en")))}),[e,x]);const S=(0,K.s)(),w=(0,K.s)(),_=(0,L.jsx)("dialog",{open:S.isOpen,children:(0,L.jsx)("article",{children:(0,L.jsxs)("main",{children:[(0,L.jsx)("div",{style:{margin:"10px"},children:'The "reset files" action will result in erasing all the HDL files kept in your browser\'s memory, replacing them with a fresh set of skeletal HDL files. You may want to back-up your files before resetting them. Are you sure that you want to reset the files?'}),(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",marginTop:"30px"},children:[(0,L.jsx)("button",{style:{width:"100px"},onClick:async()=>{await(async()=>{const r=G();localStorage.clear(),W(r),localStorage["/chip/project"]="01",localStorage["/chip/chip"]="Not";const s=await Promise.resolve().then(n.bind(n,5777));await s.resetFiles(e),t.chip.actions.initialize(),t.cpu.actions.clear(),t.asm.actions.clear(),t.vm.actions.initialize(),t.compiler.actions.reset()})(),S.close(),w.open()},children:"Yes"}),(0,L.jsx)("button",{style:{width:"100px"},onClick:()=>{S.close()},children:"Cancel"})]})]})})}),E=(0,L.jsx)("dialog",{open:w.isOpen,children:(0,L.jsxs)("article",{children:[(0,L.jsx)("header",{children:"Your files were reset"}),(0,L.jsx)("main",{children:(0,L.jsx)("button",{onClick:w.close,children:"Ok"})})]})});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("dialog",{open:d.isOpen,children:(0,L.jsxs)("article",{children:[(0,L.jsxs)("header",{children:[(0,L.jsx)("p",{children:(0,L.jsx)(c.x6,{id:"Tz0i8g"})}),(0,L.jsx)("a",{className:"close",href:"#root",onClick:t=>{t.preventDefault(),d.close()}})]}),(0,L.jsx)("main",{children:(0,L.jsxs)("dl",{children:[(0,L.jsx)("header",{children:(0,L.jsx)(c.x6,{id:"e0NrBM"})}),(0,L.jsx)("dt",{children:(0,L.jsx)(c.x6,{id:"9aloPG"})}),(0,L.jsxs)("dd",{children:[(0,L.jsx)("div",{children:(0,L.jsx)("a",{href:"https://nand2tetris.org",target:"_blank",rel:"noreferrer",children:"nand2tetris.org"})}),(0,L.jsx)("div",{children:(0,L.jsx)("a",{href:"https://github.com/davidsouther/nand2tetris",target:"_blank",rel:"noreferrer",children:"GitHub"})})]}),(0,L.jsx)("dt",{children:(0,L.jsx)(c.x6,{id:"sER+bs"})}),(0,L.jsxs)("dd",{children:[(0,L.jsx)(L.Fragment,{}),(0,L.jsx)("button",{onClick:async()=>{S.open()},children:(0,L.jsx)(c.x6,{id:"OfhWJH"})}),(0,L.jsx)("button",{onClick:async()=>{const t=await Promise.resolve().then(n.bind(n,5777));await t.loadSamples(e),r("Loaded sample files...")},children:(0,L.jsx)(c.x6,{id:"d2mxgE"})})]}),(0,L.jsx)("dt",{children:(0,L.jsx)(c.x6,{id:"vXIe7J"})}),(0,L.jsxs)("dd",{children:[(0,L.jsx)("button",{onClick:()=>x("en"),children:(0,L.jsx)(c.x6,{id:"lYGfRP"})}),(0,L.jsx)("button",{onClick:()=>x("en-PL"),children:(0,L.jsx)(c.x6,{id:"E+NWKU"})})]}),(0,L.jsx)("dt",{children:(0,L.jsx)(c.x6,{id:"uBAxNB"})}),(0,L.jsx)("dd",{children:(0,L.jsxs)("label",{children:[(0,L.jsx)("input",{type:"checkbox",name:"switch",role:"switch",checked:p.wants,disabled:!p.canUse,onChange:t=>p.toggle(t.target.checked)}),(0,L.jsx)(c.x6,{id:"zQo0yv"})]})}),(0,L.jsx)("dt",{children:(0,L.jsx)(c.x6,{id:"FEr96N"})}),(0,L.jsx)("dd",{children:(0,L.jsxs)("fieldset",{role:"group",children:[(0,L.jsxs)("label",{role:"button","aria-current":"light"===f,children:[(0,L.jsx)("input",{type:"radio",name:"theme",value:"light",checked:"light"===f,onChange:()=>m("light")}),(0,L.jsx)(c.x6,{id:"1njn7W"})]}),(0,L.jsxs)("label",{role:"button","aria-current":"dark"===f,children:[(0,L.jsx)("input",{type:"radio",name:"theme",value:"dark",checked:"dark"===f,onChange:()=>m("dark")}),(0,L.jsx)(c.x6,{id:"pvnfJD"})]}),(0,L.jsxs)("label",{role:"button","aria-current":"system"===f,children:[(0,L.jsx)("input",{type:"radio",name:"theme",value:"system",checked:"system"===f,onChange:()=>m("system")}),(0,L.jsx)(c.x6,{id:"D+NlUC"})]})]})}),(0,L.jsx)("dt",{children:(0,L.jsx)(c.x6,{id:"U0HZma"})}),(0,L.jsx)("dd",{children:(0,L.jsxs)("label",{children:[(0,L.jsx)("input",{type:"checkbox",name:"switch",role:"switch",checked:y.canTrack,onChange:t=>{t.target.checked?y.accept():y.reject()}}),(0,L.jsx)(c.x6,{id:"PH2rP+"}),(0,L.jsx)(B.dQ,{})]})})]})})]})}),_,E]})};class Q extends i.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?this.props.fallback({error:this.state.error}):this.props.children}}const X=({error:t})=>{var e;return t?(0,L.jsxs)("div",{children:[(0,L.jsxs)("p",{children:[(0,L.jsxs)("b",{children:[null!==(e=t.name)&&void 0!==e?e:"Error",":"]})," ",t.message]}),t.stack&&(0,L.jsx)("pre",{children:(0,L.jsx)("code",{children:t.stack})}),t.cause?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{children:(0,L.jsx)("em",{children:"Caused by"})}),(0,L.jsx)(X,{error:t.cause})]}):(0,L.jsx)(L.Fragment,{})]}):(0,L.jsx)("p",{children:"Unknown Error"})},J=()=>{const[t,e]=(0,i.useState)();return(0,i.useEffect)((()=>{var t;const n=null!==(t=localStorage.getItem(D.p3))&&void 0!==t?t:"/chip";e(n)}),[]),t?(0,L.jsx)(m.C5,{to:t}):(0,L.jsx)(L.Fragment,{})};u.Ru.load("en",C.messages),u.Ru.load("en-PL",R.messages),u.Ru.loadLocaleData({en:{plurals:p},"en-US":{plurals:p},"en-PL":{plurals:p}}),u.Ru.activate(navigator.language);const Z=function(){const t=(0,h.A)(),e=(0,g.Us)(),r=t.fs;return(0,i.useEffect)((()=>{!async function(){if(T)return;T=!0,T=!0;const{loader:t}=await n.e(983).then(n.bind(n,7983)),{languages:e}=await t.init();for(const[n,r]of Object.entries(_))e.register({id:n}),e.setMonarchTokensProvider(n,r),E[n]&&e.registerCompletionItemProvider(n,E[n]);T=!1}()}),[]),(0,i.useEffect)((()=>{r.stat("/projects/01/Not.hdl").catch((async()=>{await d.loaders.resetFiles(r)})),async function(t){let e=G();for(;e<H;)try{await q[e](t),e++}catch(n){console.warn(`Error loading files at version ${e}`,n),e++}W(H)}(r)}),[r]),(0,i.useEffect)((()=>{document.children[0].dataset.theme="system"===e.theme?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e.theme}),[e.theme]),(0,L.jsx)(c.CY,{i18n:u.Ru,children:(0,L.jsx)(h.L.Provider,{value:t,children:(0,L.jsx)(g.BR.Provider,{value:e,children:(0,L.jsxs)(P.qK,{children:[(0,L.jsx)(Y,{}),(0,L.jsx)(k.Nk,{}),(0,L.jsxs)(f.Kd,{basename:"/web-ide",children:[(0,L.jsx)(V,{}),(0,L.jsx)("main",{className:"flex flex-1",children:(0,L.jsx)(Q,{fallback:X,children:(0,L.jsx)(i.Suspense,{fallback:(0,L.jsx)("div",{children:"Loading..."}),children:(0,L.jsxs)(m.BV,{children:[(0,L.jsx)(m.qh,{path:"/",element:(0,L.jsx)(J,{})}),Object.values(D.Ay).map((({href:t,target:e})=>(0,L.jsx)(m.qh,{path:t,element:e},t)))]})})})}),(0,L.jsx)(O,{}),(0,L.jsx)(B.w,{})]})]})})})})},tt=t=>{t&&t instanceof Function&&n.e(510).then(n.bind(n,510)).then((({getCLS:e,getFID:n,getFCP:r,getLCP:s,getTTFB:i})=>{e(t),n(t),r(t),s(t),i(t)}))};a.createRoot(document.getElementById("root")).render((0,L.jsx)(i.StrictMode,{children:(0,L.jsx)(Z,{})})),function(t){if("serviceWorker"in navigator){if(new URL("/web-ide",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const e="/web-ide/service-worker.js";o?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((n=>{const r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((t=>{t.unregister().then((()=>{window.location.reload()}))})):l(t,e)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):l(e,t)}))}}(),tt()})();